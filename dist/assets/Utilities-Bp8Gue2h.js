import{a as e,u as a,R as t}from"./index-BbOmoSe-.js";import{_ as l}from"./FilterBar-BokencTL.js";import{u as r}from"./useErrorHandler-ClkkjmfK.js";import{u as s}from"./utilityDebtsService-C9I6VQLZ.js";import{r as d,o as n,b as i,m as o,e as u,E as c,G as b,H as g,p,t as m,j as v,c as y,w as k,n as x,u as h,f as w,F as f,i as A,q as C}from"./vue-vendor-Bart4FG5.js";import{_ as D}from"./ManualDebtModal-wQQuZByz.js";import"./utils-vendor-Cy2sLATb.js";const M=new class{constructor(){this.backendAvailable=null,this.lastHealthCheck=0,this.healthTTLms=6e4}async ensureAvailable(){const a=Date.now();if(null!==this.backendAvailable&&a-this.lastHealthCheck<this.healthTTLms)return this.backendAvailable;try{await e.get("/health"),this.backendAvailable=!0}catch(t){this.backendAvailable=!1}finally{this.lastHealthCheck=a}return this.backendAvailable}async getAidatDefinitions(a={}){if(await this.ensureAvailable()){const t={};return a.year&&(t.year=a.year),a.tenantId&&(t.tenantId=a.tenantId),a.unit&&(t.unit=a.unit),e.get("/aidat-definitions",{params:t})}return[]}async getAidatDefinitionById(a){return await this.ensureAvailable()?e.get(`/aidat-definitions/${a}`):null}async createAidatDefinition(a){return await this.ensureAvailable()?e.post("/aidat-definitions",a):{success:!0,message:"Aidat tanÄ±mÄ± oluÅŸturuldu (fallback)"}}async updateAidatDefinition(a,t){return await this.ensureAvailable()?e.put(`/aidat-definitions/${a}`,t):{success:!0,message:"Aidat tanÄ±mÄ± gÃ¼ncellendi (fallback)"}}async deleteAidatDefinition(a){return await this.ensureAvailable()?e.delete(`/aidat-definitions/${a}`):{success:!0,message:"Aidat tanÄ±mÄ± silindi (fallback)"}}async getAidatStats(){return await this.ensureAvailable()?e.get("/aidat-definitions/stats"):{totalCount:0,totalAmount:0,thisMonthCount:0,thisMonthAmount:0}}async getDues(a={}){const t=await this.ensureAvailable(),l={};return a.period&&(l.period=a.period),a.flatId&&(l.flatId=a.flatId),a.status&&(l.status=a.status),t?e.get("/utilitydebts",{params:l}):[]}async createPeriodDues({period:a,dueDate:t,year:l}){const r={period:a,dueDate:t,year:l};return await this.ensureAvailable()?e.post("/utilitydebts/create-aidat",r):{tenantDuesCreated:0,ownerDuesCreated:0}}async getDueById(a){return await this.ensureAvailable()?e.get(`/utilitydebts/${a}`):null}async updateAidat(a,t){return await this.ensureAvailable()?e.patch(`/utilitydebts/${a}`,t):{success:!0}}async deleteAidat(a){return await this.ensureAvailable()?e.delete(`/utilitydebts/${a}`):{success:!0}}async markAsPaid(a,t){const l={isPaid:!0,remainingAmount:0,paidAmount:t};return await this.ensureAvailable()?e.patch(`/utilitydebts/${a}`,l):{success:!0}}},N={open:"",class:"modal"},T={class:"modal-box max-w-md bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700"},S={class:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200 dark:border-gray-700"},j={class:"space-y-6"},B={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-4"},H={class:"form-control"},I=["value"],L={class:"form-control"},E=["value"],$={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 space-y-4"},U={class:"form-control"},Y={class:"form-control"},K={class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},V=["disabled"],_={__name:"EditAidatModal",props:{record:{type:Object,required:!0}},emits:["close","updated"],setup(e,{emit:a}){var t;const l=e,s=a,{handleValidationError:p,showSuccess:m}=(null==(t=r)?void 0:t())??{},v=d({kdvHaric:0,toplamTutar:0});n(()=>{l.record&&(v.value.kdvHaric=Number(l.record.kdvHaric??l.record.amountExVat??0),v.value.toplamTutar=Number(l.record.toplamTutar??l.record.amount??0))});const y=async()=>{try{const e=Number(l.record.paidAmount||0),a=Number(v.value.toplamTutar)-e;await M.updateAidat(l.record.id,{kdvHaric:v.value.kdvHaric,kdvDahil:v.value.toplamTutar,remainingAmount:a,isPaid:a<=0}),null==m||m("Aidat kaydÄ± gÃ¼ncellendi."),s("updated"),s("close")}catch(e){null==p||p(e)}};return(a,t)=>(o(),i("dialog",N,[u("div",T,[u("div",S,[t[5]||(t[5]=c('<div class="flex items-center gap-3"><div class="bg-yellow-100 dark:bg-yellow-900/50 text-yellow-600 dark:text-yellow-400 rounded-full p-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></div><h3 class="text-xl font-bold text-gray-800 dark:text-gray-100">Aidat KaydÄ± DÃ¼zenle</h3></div>',1)),u("button",{onClick:t[0]||(t[0]=e=>a.$emit("close")),class:"btn btn-ghost btn-sm"},t[4]||(t[4]=[u("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),u("div",j,[u("div",B,[t[8]||(t[8]=u("h4",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3"},"KayÄ±t Bilgileri",-1)),u("div",H,[t[6]||(t[6]=u("label",{class:"label"},[u("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Kat/Daire")],-1)),u("input",{type:"text",class:"input input-bordered w-full bg-gray-100 dark:bg-gray-600 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400",value:e.record.unit||e.record.flatNumber||"-",disabled:""},null,8,I)]),u("div",L,[t[7]||(t[7]=u("label",{class:"label"},[u("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Åžirket/KiÅŸi")],-1)),u("input",{type:"text",class:"input input-bordered w-full bg-gray-100 dark:bg-gray-600 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400",value:e.record.tenantName||e.record.ownerName||"-",disabled:""},null,8,E)])]),u("div",$,[t[13]||(t[13]=u("h4",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3"},"Tutar Bilgileri",-1)),u("div",U,[t[9]||(t[9]=u("label",{class:"label"},[u("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"KDV HariÃ§ Tutar (â‚º)"),u("span",{class:"label-text-alt text-red-500"},"*")],-1)),b(u("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>v.value.kdvHaric=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",step:"0.01",min:"0"},null,512),[[g,v.value.kdvHaric,void 0,{number:!0}]]),t[10]||(t[10]=u("label",{class:"label"},[u("span",{class:"label-text-alt text-gray-500 dark:text-gray-400"},"KDV hariÃ§ aidat tutarÄ±")],-1))]),u("div",Y,[t[11]||(t[11]=u("label",{class:"label"},[u("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Toplam Tutar (â‚º)"),u("span",{class:"label-text-alt text-red-500"},"*")],-1)),b(u("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>v.value.toplamTutar=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",step:"0.01",min:"0"},null,512),[[g,v.value.toplamTutar,void 0,{number:!0}]]),t[12]||(t[12]=u("label",{class:"label"},[u("span",{class:"label-text-alt text-gray-500 dark:text-gray-400"},"KDV dahil toplam tutar")],-1))])]),t[14]||(t[14]=c('<div class="bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800"><div class="flex items-start gap-3"><div class="bg-yellow-100 dark:bg-yellow-900/50 text-yellow-600 dark:text-yellow-400 rounded-full p-1 mt-0.5"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div class="text-sm text-gray-700 dark:text-gray-300"><p class="font-medium mb-1">Dikkat</p><p>Bu deÄŸiÅŸiklik aidat kaydÄ±nÄ± kalÄ±cÄ± olarak gÃ¼nceller.</p></div></div></div>',1)),u("div",K,[u("button",{class:"btn btn-outline btn-sm",onClick:t[3]||(t[3]=e=>a.$emit("close"))}," Ä°ptal "),u("button",{class:"btn btn-primary btn-sm",onClick:y,disabled:v.value.kdvHaric<0||v.value.toplamTutar<0}," Kaydet ",8,V)])])])]))}},z={open:"",class:"modal"},F={class:"modal-box max-w-sm bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700"},R={class:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200 dark:border-gray-700"},G={class:"text-sm text-gray-600 dark:text-gray-300"},P={class:"text-sm mt-2 text-gray-500 dark:text-gray-400"},q={class:"mt-6 flex justify-end gap-2"},O=["disabled"],J={key:0,class:"loading loading-spinner loading-xs mr-2"},Q={__name:"AidatDeleteModal",props:{record:{type:Object,required:!0}},emits:["close","deleted"],setup(e,{emit:a}){var t;const l=e,s=a,{showSuccess:n,handleNetworkError:b}=(null==(t=r)?void 0:t())??{},g=d(!1),y=async()=>{g.value=!0;try{await M.deleteAidat(l.record.id),null==n||n("Aidat kaydÄ± silindi."),s("deleted"),s("close")}catch(e){null==b||b(e,{component:"AidatDeleteModal",action:"delete"})}finally{g.value=!1}};return(a,t)=>(o(),i("dialog",z,[u("div",F,[u("div",R,[t[2]||(t[2]=c('<div class="flex items-center gap-2"><div class="bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-300 rounded-full p-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v2M4 7h16"></path></svg></div><h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100">Aidat KaydÄ± Sil</h3></div>',1)),u("button",{onClick:t[0]||(t[0]=e=>a.$emit("close")),class:"btn btn-ghost btn-xs"},"âœ•")]),u("p",G,[u("strong",null,m(e.record.flatNumber||e.record.unit||"Daire"),1),t[3]||(t[3]=p(" iÃ§in ")),u("strong",null,m(e.record.periodYear)+"/"+m(String(e.record.periodMonth).padStart(2,"0")),1),t[4]||(t[4]=p(" dÃ¶nemine ait kayÄ±t silinsin mi? "))]),u("p",P,[t[5]||(t[5]=p(" Tutar: ")),u("strong",null,m(Number(e.record.amount??e.record.toplamTutar??0).toLocaleString("tr-TR"))+" â‚º",1)]),u("div",q,[u("button",{class:"btn btn-outline btn-sm",onClick:t[1]||(t[1]=e=>a.$emit("close"))},"Ä°ptal"),u("button",{class:"btn btn-error btn-sm",disabled:g.value,onClick:y},[g.value?(o(),i("span",J)):v("",!0),t[6]||(t[6]=p(" Sil "))],8,O)])])]))}},W={class:"p-4 sm:p-6 bg-gray-50 min-h-screen font-sans dark:bg-gray-900"},X={class:"max-w-7xl mx-auto"},Z={key:0,class:"my-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"},ee={key:1,class:"my-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},ae={class:"flex items-center gap-3"},te={class:"text-red-700 dark:text-red-300"},le={key:2,class:"my-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4"},re={class:"flex items-center justify-between"},se={class:"flex items-center gap-3"},de={class:"text-green-700 dark:text-blue-300"},ne={class:"text-sm text-green-600 dark:text-green-400"},ie={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 my-8"},oe={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},ue={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},ce={key:0,class:"lg:col-span-3 bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600"},be={class:"flex flex-wrap gap-2"},ge={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700"},pe={class:"bg-white dark:bg-gray-800 mt-6 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700"},me={class:"flex items-center justify-between mb-4"},ve={class:"text-sm text-gray-500 dark:text-gray-400"},ye={key:0,class:"text-center py-10 text-gray-500 dark:text-gray-400"},ke={key:1,class:"space-y-2"},xe={class:"md:col-span-3"},he={class:"font-bold text-gray-800 dark:text-gray-100"},we={class:"text-xs text-gray-400 dark:text-gray-500"},fe={class:"flex items-center gap-2 mt-1"},Ae={class:"md:col-span-2 text-center"},Ce={class:"font-semibold"},De={class:"md:col-span-2 text-center"},Me={class:"font-semibold text-lg"},Ne={class:"md:col-span-3 text-center"},Te={class:"font-medium"},Se={key:0,class:"md:col-span-2 text-right"},je={class:"dropdown dropdown-end"},Be={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-200 rounded-box w-40 z-10"},He=["onClick"],Ie={key:0},Le=["onClick"],Ee={class:"mt-4 flex flex-col sm:flex-row items-center justify-between gap-3"},$e={class:"text-sm text-gray-600 dark:text-gray-300"},Ue={class:"flex items-center gap-2"},Ye=["disabled"],Ke=["disabled"],Ve={class:"mx-2 text-sm"},_e=["disabled"],ze=["disabled"],Fe={__name:"Utilities",setup(c){const{handleNetworkError:b,showSuccess:g}=r(),M=a();function N(e){const a=String((null==e?void 0:e.period)??""),[t,l]=a&&a.includes("-")?a.split("-"):[null,null];return{y:Number((null==e?void 0:e.periodYear)??t)||null,m:Number((null==e?void 0:e.periodMonth)??l)||null}}const T=d([]),S=d(""),j=d(""),B=d("all"),H=d(null),I=d(!1),L=d(!1),E=d(!1),$=d(1),U=[{value:"all",label:"TÃ¼m BorÃ§lar"},{value:"0",label:"Aidat",icon:"ðŸ“‹"},{value:"1",label:"Elektrik",icon:"âš¡"},{value:"2",label:"Su",icon:"ðŸ’§"}],Y=d(1),K=d(10),V=y(()=>F.value.length),z=y(()=>{const e=(Y.value-1)*K.value;return F.value.slice(e,e+K.value)}),F=y(()=>T.value.filter(e=>{const a=S.value.toLowerCase(),t=!a||(e.flatNumber||"").toLowerCase().includes(a)||(e.tenantCompany||"").toLowerCase().includes(a)||(e.description||"").toLowerCase().includes(a),l="all"===B.value||String(e.type)===B.value,r=function(e){const{y:a,m:t}=N(e);return a&&t?`${a}-${String(t).padStart(2,"0")}`:""}(e),s=!j.value||r===j.value;return t&&l&&s}).sort((e,a)=>(a.periodYear??0)-(e.periodYear??0)||(a.periodMonth??0)-(e.periodMonth??0))),R=d({loading:!1,error:null,lastUpdated:null}),G=d(0),P=e=>{G.value+=e?1:-1,R.value.loading=G.value>0},q=e=>{$.value=e,H.value=null,E.value=!0},O=d(null),J=()=>{O.value.click()},Fe=async a=>{const t=a.target.files[0];if(!t)return;const l=new FormData;l.append("file",t),P(!0);try{const a=await e.post("/UtilityDebts/import",l,{headers:{"Content-Type":"multipart/form-data"}});g(`${a.count} adet borÃ§ kaydÄ± baÅŸarÄ±yla iÃ§eri aktarÄ±ldÄ±.`),Pe()}catch(r){b(r)}finally{P(!1),a.target.value=""}},Re=async()=>{try{const[a,t,l]=await Promise.all([s.getUtilityDebts({period:j.value||void 0}),e.get("/Flats"),e.get("/Tenants")]),r=new Map((t||[]).map(e=>[e.id,e])),d=new Map((l||[]).map(e=>[e.id,e])),n=e=>"number"==typeof e?2===e?"paid":1===e?"partial":"unpaid":String(e||"").toLowerCase();T.value=(a||[]).map(e=>{const a=r.get(e.flatId),t=d.get(e.tenantId),{y:l,m:s}=N(e);return{id:e.id,flatId:e.flatId,type:e.type??0,flatNumber:e.flatNumber??e.flat_code??e.FlatCode??(null==a?void 0:a.code)??"-",tenantCompany:e.tenantName??e.TenantCompanyName??(null==t?void 0:t.companyName)??(null==t?void 0:t.company)??(null==t?void 0:t.fullName)??(null==a?void 0:a.tenantCompanyName)??null,periodYear:l,periodMonth:s,amount:Number(e.amount??e.value??e.total??0),dueDate:(()=>{const a=e.dueDate??e.DueDate??e.due_date??null;if(!a)return null;const t=new Date(a);return isNaN(t)||t.getFullYear()<1900?null:a})(),status:n(e.status),remainingAmount:Number(e.remainingAmount??e.RemainingAmount??0)}})}catch(a){T.value=[]}},Ge=e=>{I.value=!1,L.value=!1,E.value=!1,H.value=null,e&&Pe()},Pe=()=>Re(),qe=()=>{S.value="",j.value="",B.value="all",Y.value=1},Oe=e=>{if(!e)return"-";const a=new Date(e);return isNaN(a)||a.getFullYear()<1900?"-":a.toLocaleDateString("tr-TR")};return k([S,j,B],()=>{Y.value=1}),k(K,()=>{Y.value=1}),k(j,()=>{Re()}),n(()=>{Pe()}),(e,a)=>(o(),i("div",W,[u("div",X,[a[26]||(a[26]=u("h1",{class:"text-3xl font-bold text-gray-800 my-6 dark:text-gray-100"},"Gider ve Aidat YÃ¶netimi",-1)),R.value.loading?(o(),i("div",Z,a[10]||(a[10]=[u("div",{class:"flex items-center gap-3"},[u("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),u("span",{class:"text-blue-700 dark:text-blue-300"},"Veriler yÃ¼kleniyor...")],-1)]))):v("",!0),R.value.error?(o(),i("div",ee,[u("div",ae,[a[11]||(a[11]=u("div",{class:"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 rounded-full p-1"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),u("span",te,m(R.value.error),1)])])):v("",!0),R.value.lastUpdated?(o(),i("div",le,[u("div",re,[u("div",se,[a[12]||(a[12]=u("div",{class:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 rounded-full p-1"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})])],-1)),u("span",de," Son gÃ¼ncelleme: "+m(R.value.lastUpdated),1)]),u("div",ne,m(T.value.length)+" aidat kaydÄ± ",1)])])):v("",!0),u("section",ie,[u("div",oe,[a[14]||(a[14]=u("div",{class:"bg-cyan-100 dark:bg-cyan-900/50 text-cyan-600 dark:text-cyan-400 rounded-full p-3"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 12h6m6 4h6m-7 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),u("div",null,[a[13]||(a[13]=u("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Toplam KayÄ±t",-1)),u("p",ue,m(T.value.length),1)])]),h(M).role===h(t).ADMIN||h(M).role===h(t).MANAGER?(o(),i("div",ce,[a[20]||(a[20]=u("div",null,[u("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Aidat ve Gider YÃ¶netimi"),u("p",{class:"text-xs text-gray-400 italic"},"DÃ¶nemsel aidat oluÅŸturabilir veya giderleri takip edebilirsiniz.")],-1)),u("div",be,[u("button",{onClick:a[0]||(a[0]=e=>q(0)),class:"btn btn-success btn-md text-white"},a[15]||(a[15]=[u("span",{class:"mr-1"},"ðŸ“‹",-1),p(" Aidat Ekle ")])),u("button",{onClick:a[1]||(a[1]=e=>q(1)),class:"btn btn-warning btn-md text-white"},a[16]||(a[16]=[u("span",{class:"mr-1"},"âš¡",-1),p(" Elektrik Borcu Ekle ")])),u("button",{onClick:a[2]||(a[2]=e=>q(2)),class:"btn btn-info btn-md text-white"},a[17]||(a[17]=[u("span",{class:"mr-1"},"ðŸ’§",-1),p(" Su Borcu Ekle ")])),a[19]||(a[19]=u("div",{class:"divider divider-horizontal mx-0"},null,-1)),u("button",{onClick:J,class:"btn btn-neutral btn-md text-white border-2 border-dashed border-gray-400"},a[18]||(a[18]=[u("span",{class:"mr-1"},"ðŸ“Š",-1),p(" Excel'den YÃ¼kle ")])),u("input",{type:"file",ref_key:"fileInput",ref:O,hidden:"",accept:".xlsx,.xls",onChange:Fe},null,544)])])):v("",!0)]),u("div",ge,[w(l,{search:S.value,"onUpdate:search":a[3]||(a[3]=e=>S.value=e),period:j.value,"onUpdate:period":a[4]||(a[4]=e=>j.value=e),"select-type":B.value,"onUpdate:selectType":a[5]||(a[5]=e=>B.value=e),"select-type-options":U,onClearFilters:qe},null,8,["search","period","select-type"])]),u("div",pe,[u("div",me,[a[21]||(a[21]=u("h2",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100"},"BorÃ§ Listesi",-1)),u("div",ve,m(F.value.length)+" kayÄ±t ",1)]),0===F.value.length?(o(),i("div",ye," Bu filtrelerle aidat kaydÄ± bulunamadÄ±. ")):(o(),i("div",ke,[(o(!0),i(f,null,A(z.value,e=>{return o(),i("div",{key:e.id||e.flatId+"-"+e.periodYear+"-"+e.periodMonth,class:"grid grid-cols-1 md:grid-cols-12 gap-4 items-center p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200 border-b dark:border-gray-700/50"},[u("div",xe,[u("p",he,m(e.tenantCompany||e.flatNumber||"-"),1),u("p",we," Son Ã¶deme: "+m(Oe(e.dueDate)),1),u("div",fe,[u("span",{class:C(["badge badge-xs font-semibold",0===e.type?"badge-neutral":1===e.type?"badge-warning":"badge-info"])},m((r=e.type,{0:"Aidat",1:"Elektrik",2:"Su"}[r]??"DiÄŸer")),3)])]),u("div",Ae,[a[22]||(a[22]=u("span",{class:"text-sm text-gray-500"},"DÃ¶nem",-1)),u("p",Ce,m(e.periodYear)+"/"+m(String(e.periodMonth).padStart(2,"0")),1)]),u("div",De,[a[23]||(a[23]=u("span",{class:"text-sm text-gray-500"},"Tutar",-1)),u("p",Me,m((l=e.amount,null==l||isNaN(l)?"-":Number(l).toLocaleString("tr-TR")))+" â‚º",1)]),u("div",Ne,[a[24]||(a[24]=u("span",{class:"text-sm text-gray-500"},"Durum",-1)),u("p",Te,[u("span",{class:C(["px-2 py-1 rounded-full text-xs","paid"===e.status?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":(e.status,"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300")])},m("paid"===e.status?"Ã–dendi":"partial"===e.status?"KÄ±smi":"Bekliyor"),3)])]),h(M).role===h(t).ADMIN||h(M).role===h(t).MANAGER?(o(),i("div",Se,[u("div",je,[a[25]||(a[25]=u("label",{tabindex:"0",class:"btn btn-ghost btn-sm"},"Ä°ÅŸlem",-1)),u("ul",Be,[u("li",null,[u("a",{onClick:a=>(e=>{H.value=e,0===e.type?I.value=!0:($.value=e.type,E.value=!0)})(e)},"DÃ¼zenle",8,He)]),h(M).role===h(t).ADMIN?(o(),i("li",Ie,[u("a",{class:"text-red-500",onClick:a=>(e=>{H.value=e,L.value=!0})(e)},"Sil",8,Le)])):v("",!0)])])])):v("",!0)]);var l,r}),128))])),u("div",Ee,[u("div",$e," GÃ¶sterilen "+m(V.value?(Y.value-1)*K.value+1:0)+" â€“ "+m(Math.min(Y.value*K.value,V.value))+" / "+m(V.value),1),u("div",Ue,[u("button",{class:"btn btn-sm",disabled:1===Y.value,onClick:a[6]||(a[6]=e=>Y.value=1)},"Â« Ä°lk",8,Ye),u("button",{class:"btn btn-sm",disabled:1===Y.value,onClick:a[7]||(a[7]=e=>Y.value--)},"â€¹ Geri",8,Ke),u("span",Ve,"Sayfa "+m(Y.value)+" / "+m(Math.max(1,Math.ceil(V.value/K.value))),1),u("button",{class:"btn btn-sm",disabled:Y.value>=Math.ceil(V.value/K.value),onClick:a[8]||(a[8]=e=>Y.value++)},"Ä°leri â€º",8,_e),u("button",{class:"btn btn-sm",disabled:Y.value>=Math.ceil(V.value/K.value),onClick:a[9]||(a[9]=e=>Y.value=Math.ceil(V.value/K.value))},"Son Â»",8,ze)])])])]),I.value&&H.value?(o(),x(_,{key:0,record:H.value,onClose:Ge,onUpdated:Pe},null,8,["record"])):v("",!0),L.value&&H.value?(o(),x(Q,{key:1,record:H.value,onClose:Ge,onDeleted:Pe},null,8,["record"])):v("",!0),E.value?(o(),x(D,{key:2,type:$.value,"initial-data":H.value,onClose:Ge,onRefresh:Pe},null,8,["type","initial-data"])):v("",!0)]))}};export{Fe as default};
