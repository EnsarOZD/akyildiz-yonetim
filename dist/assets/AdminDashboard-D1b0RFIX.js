import{r as e,c as a,w as l,o as t,b as s,m as n,e as i,s as r,G as o,H as c,I as d,F as u,i as v,t as m,j as b,K as p,p as y,q as g,u as f,E as k,n as w,v as h,X as x}from"./vue-vendor-Bart4FG5.js";import{b as A,a as N,d as C,R as S}from"./index-BbOmoSe-.js";import D from"./OwnerDuesPanel-DmetM4V0.js";import K from"./Owners-CnrvhQh7.js";import{t as U}from"./tenantsService-D7zXuWjI.js";import{u as T}from"./useErrorHandler-ClkkjmfK.js";import"./utils-vendor-Cy2sLATb.js";import"./ownerDuesService-DhGMKQL0.js";import"./units-DJG6lNYB.js";import"./ownersService-DzIHhHEK.js";import"./ConfirmDeleteModal-OapZcbNC.js";import"./FilterBar-BokencTL.js";const j={class:"space-y-6"},z={class:"card bg-base-100 shadow-xl"},I={class:"card-body"},F={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},V={class:"form-control"},Y={class:"form-control"},B=["value"],L={class:"form-control"},M=["disabled"],E=["value"],R={class:"form-control"},H=["value"],P={class:"form-control"},$=["value"],q={class:"card-actions justify-end"},_=["disabled"],O={class:"card bg-base-100 shadow-xl"},G={class:"card-body"},X={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4"},J={class:"form-control"},Q=["value"],W={class:"form-control"},Z=["value"],ee={class:"form-control"},ae=["value"],le={class:"form-control"},te={class:"overflow-x-auto"},se={class:"table w-full"},ne={class:"badge badge-ghost"},ie={class:"font-medium"},re={class:"font-bold text-success"},oe={class:"text-right"},ce=["onClick"],de=["onClick"],ue={key:0,class:"text-center py-10 text-base-content/60"},ve={key:1,class:"stats stats-horizontal shadow mt-4"},me={class:"stat"},be={class:"stat-value text-primary"},pe={class:"stat"},ye={class:"stat-value text-success"},ge={__name:"AidatPanel",emits:["stats"],setup(p,{emit:y}){const{notifySuccess:g,notifyError:f}=A(),k=y,w=e([]),h=e(""),x=e(""),N=e((new Date).getFullYear()),C=e(""),S=e([]),D=e(null),K=e(""),U=e(""),T=e(""),ge=e(""),fe=e=>!e||isNaN(e)?"â‚º0.00":Number(e).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),ke=()=>{const e=C.value.replace(/\./g,"").replace(",",".");return parseFloat(e)||0},we=a(()=>{const e=ke();return e?(1.2*e).toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})+" â‚º":"0.00 â‚º"}),he=e=>{let a=e.target.value;a=a.replace(/[^0-9,.]/g,"");const l=a.split(/[.,]/);l.length>2&&(a=l[0]+","+l.slice(1).join("")),C.value=a},xe=a(()=>{const e=w.value.find(e=>e.id===h.value);return e&&e.units||[]}),Ae=a(()=>h.value&&x.value&&ke()>0&&N.value>=2020),Ne=a(()=>[...new Set(S.value.map(e=>e.year))].sort((e,a)=>a-e)),Ce=a(()=>[...new Set(S.value.map(e=>e.unit))].sort()),Se=a(()=>{let e=S.value;if(K.value&&(e=e.filter(e=>e.year===K.value)),U.value&&(e=e.filter(e=>e.company===U.value)),T.value&&(e=e.filter(e=>e.unit===T.value)),ge.value){const a=ge.value.toLowerCase();e=e.filter(e=>e.company.toLowerCase().includes(a)||e.unit.toLowerCase().includes(a))}return e.sort((e,a)=>a.year-e.year||e.company.localeCompare(a.company))}),De=a(()=>Se.value.reduce((e,a)=>e+(a.vatIncludedAmount||1.2*a.amount),0)),Ke=async()=>{try{const e=await aidatService.getAidatDefinitions()||[];S.value=e.map(e=>{var a,l,t;const s=Number(e.amount??e.kdvHaric??0),n=Number(e.year??e.periodYear??(new Date).getFullYear()),i=e.unit??e.flatCode??(null==(a=e.flat)?void 0:a.code)??"-",r=e.tenantId??(null==(l=e.tenant)?void 0:l.id)??null,o=e.company??e.companyName??e.tenantCompanyName??(null==(t=w.value.find(e=>e.id===r))?void 0:t.company)??"-";return{id:e.id,year:n,tenantId:r,company:o,unit:i,amount:s,vatIncludedAmount:Number(e.vatIncludedAmount??e.kdvDahil??1.2*s)}}),k("stats",{dues:S.value.length})}catch(e){S.value=[]}},Ue=()=>{h.value="",x.value="",C.value="",N.value=(new Date).getFullYear(),D.value=null},Te=async()=>{const e=ke();if(!Ae.value)return void f("LÃ¼tfen tÃ¼m alanlarÄ± eksiksiz doldurun.");const a=parseFloat((1.2*e).toFixed(2)),l={tenantId:h.value,unit:x.value,year:N.value,amount:e,vatIncludedAmount:a};try{if(D.value)await aidatService.updateAidatDefinition(D.value,l),g("Aidat gÃ¼ncellendi.");else{if(S.value.find(e=>e.year===N.value&&e.tenantId===h.value&&e.unit===x.value))return void f("Bu ÅŸirketin bu katÄ± iÃ§in bu yÄ±l zaten aidat tanÄ±mlanmÄ±ÅŸ.");await aidatService.createAidatDefinition(l),g("Aidat kaydÄ± eklendi.")}}catch(t){f("Bir hata oluÅŸtu.")}Ue(),await Ke()};return l(h,()=>{x.value=""}),t(async()=>{try{const e=await tenantsService.getTenants()||[];w.value=e.map(e=>({id:e.id,company:e.companyName,units:(e.flats||[]).map(e=>e.code).filter(Boolean)})),await Ke()}catch(e){w.value=[]}}),(e,a)=>(n(),s("div",j,[a[26]||(a[26]=i("div",{class:"text-center"},[i("h2",{class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"YÄ±llÄ±k Aidat YÃ¶netimi"),i("p",{class:"text-gray-500 dark:text-gray-400 mt-2"},"KiracÄ±lar iÃ§in yÄ±llÄ±k aidat tutarlarÄ±nÄ± tanÄ±mlayÄ±n ve yÃ¶netin")],-1)),i("div",z,[i("div",I,[a[14]||(a[14]=i("h3",{class:"card-title"},"Yeni Aidat TanÄ±mlama",-1)),i("form",{onSubmit:r(Te,["prevent"]),class:"space-y-4"},[i("div",F,[i("div",V,[a[7]||(a[7]=i("label",{class:"label"},[i("span",{class:"label-text"},"YÄ±l")],-1)),o(i("input",{type:"number","onUpdate:modelValue":a[0]||(a[0]=e=>N.value=e),class:"input input-bordered w-full",min:"2020"},null,512),[[c,N.value,void 0,{number:!0}]])]),i("div",Y,[a[9]||(a[9]=i("label",{class:"label"},[i("span",{class:"label-text"},"Åirket")],-1)),o(i("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>h.value=e),class:"select select-bordered w-full"},[a[8]||(a[8]=i("option",{disabled:"",value:""},"SeÃ§iniz",-1)),(n(!0),s(u,null,v(w.value,e=>(n(),s("option",{key:e.id,value:e.id},m(e.company),9,B))),128))],512),[[d,h.value]])]),i("div",L,[a[11]||(a[11]=i("label",{class:"label"},[i("span",{class:"label-text"},"Kat")],-1)),o(i("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>x.value=e),class:"select select-bordered w-full",disabled:!h.value},[a[10]||(a[10]=i("option",{disabled:"",value:""},"SeÃ§iniz",-1)),(n(!0),s(u,null,v(xe.value,e=>(n(),s("option",{key:e,value:e},m(e),9,E))),128))],8,M),[[d,x.value]])]),i("div",R,[a[12]||(a[12]=i("label",{class:"label"},[i("span",{class:"label-text"},"Aidat (KDV HariÃ§)")],-1)),i("input",{value:C.value,onInput:he,class:"input input-bordered w-full",inputmode:"numeric",placeholder:"Ã–rn: 2500"},null,40,H)]),i("div",P,[a[13]||(a[13]=i("label",{class:"label"},[i("span",{class:"label-text"},"KDV Dahil")],-1)),i("input",{value:we.value,class:"input input-bordered w-full bg-base-200",disabled:""},null,8,$)])]),i("div",q,[i("button",{type:"button",onClick:Ue,class:"btn btn-ghost"},"Temizle"),i("button",{class:"btn btn-primary",type:"submit",disabled:!Ae.value},m(D.value?"GÃ¼ncelle":"Kaydet"),9,_)])],32)])]),i("div",O,[i("div",G,[a[25]||(a[25]=i("h3",{class:"card-title"},"KayÄ±tlÄ± Aidat TanÄ±mlarÄ±",-1)),i("div",X,[i("div",J,[a[16]||(a[16]=i("label",{class:"label"},[i("span",{class:"label-text"},"YÄ±l Filtresi")],-1)),o(i("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>K.value=e),class:"select select-bordered w-full"},[a[15]||(a[15]=i("option",{value:""},"TÃ¼m YÄ±llar",-1)),(n(!0),s(u,null,v(Ne.value,e=>(n(),s("option",{key:e,value:e},m(e),9,Q))),128))],512),[[d,K.value]])]),i("div",W,[a[18]||(a[18]=i("label",{class:"label"},[i("span",{class:"label-text"},"Åirket Filtresi")],-1)),o(i("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>U.value=e),class:"select select-bordered w-full"},[a[17]||(a[17]=i("option",{value:""},"TÃ¼m Åirketler",-1)),(n(!0),s(u,null,v(w.value,e=>(n(),s("option",{key:e.id,value:e.company},m(e.company),9,Z))),128))],512),[[d,U.value]])]),i("div",ee,[a[20]||(a[20]=i("label",{class:"label"},[i("span",{class:"label-text"},"Kat Filtresi")],-1)),o(i("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>T.value=e),class:"select select-bordered w-full"},[a[19]||(a[19]=i("option",{value:""},"TÃ¼m Katlar",-1)),(n(!0),s(u,null,v(Ce.value,e=>(n(),s("option",{key:e,value:e},m(e),9,ae))),128))],512),[[d,T.value]])]),i("div",le,[a[21]||(a[21]=i("label",{class:"label"},[i("span",{class:"label-text"},"Arama")],-1)),o(i("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>ge.value=e),class:"input input-bordered w-full",placeholder:"Åirket adÄ± ile ara..."},null,512),[[c,ge.value]])])]),i("div",te,[i("table",se,[a[22]||(a[22]=i("thead",null,[i("tr",null,[i("th",null,"YÄ±l"),i("th",null,"Åirket"),i("th",null,"Kat"),i("th",null,"Aidat (KDV HariÃ§)"),i("th",null,"KDV Dahil Tutar"),i("th",{class:"text-right"},"Ä°ÅŸlemler")])],-1)),i("tbody",null,[(n(!0),s(u,null,v(Se.value,e=>(n(),s("tr",{key:e.id,class:"hover"},[i("td",null,[i("span",ne,m(e.year),1)]),i("td",ie,m(e.company),1),i("td",null,m(e.unit),1),i("td",null,m(fe(e.amount)),1),i("td",re,m(fe(e.vatIncludedAmount||1.2*e.amount)),1),i("td",oe,[i("button",{onClick:a=>(e=>{h.value=e.tenantId,x.value=e.unit,C.value=e.amount.toString().replace(".",","),N.value=e.year,D.value=e.id})(e),class:"btn btn-ghost btn-sm"},"DÃ¼zenle",8,ce),i("button",{onClick:a=>(async e=>{if(confirm("Bu aidat tanÄ±mÄ±nÄ± silmek istiyor musunuz? Bu iÅŸlem geri alÄ±namaz."))try{await aidatService.deleteAidatDefinition(e),await Ke()}catch(a){f("Aidat silinirken bir hata oluÅŸtu.")}})(e.id),class:"btn btn-ghost btn-sm text-error"},"Sil",8,de)])]))),128))])])]),0===Se.value.length?(n(),s("div",ue,[i("p",null,m(0===S.value.length?"HenÃ¼z aidat tanÄ±mlanmamÄ±ÅŸ.":"Filtreleme kriterlerine uygun kayÄ±t bulunamadÄ±."),1)])):b("",!0),Se.value.length>0?(n(),s("div",ve,[i("div",me,[a[23]||(a[23]=i("div",{class:"stat-title"},"Toplam KayÄ±t",-1)),i("div",be,m(Se.value.length),1)]),i("div",pe,[a[24]||(a[24]=i("div",{class:"stat-title"},"Toplam Tutar",-1)),i("div",ye,m(fe(De.value)),1)])])):b("",!0)])])]))}};const fe=new class{constructor(){this.backendAvailable=!1,this.checkBackendAvailability()}async checkBackendAvailability(){try{await N.get("/health"),this.backendAvailable=!0}catch(e){this.backendAvailable=!1}}async getUsers(e={}){try{if(this.backendAvailable)return await N.get("/users",e)}catch(a){this.backendAvailable=!1}return[]}async getUserById(e){try{if(this.backendAvailable)return await N.get(`/users/${e}`)}catch(a){this.backendAvailable=!1}return null}async createUser(e){try{if(this.backendAvailable)return await N.post("/users",e)}catch(a){this.backendAvailable=!1}return{success:!0,message:"User oluÅŸturuldu (backend mevcut deÄŸil)"}}async updateUser(e,a){try{if(this.backendAvailable)return await N.put(`/users/${e}`,a)}catch(l){this.backendAvailable=!1}return{success:!0,message:"User gÃ¼ncellendi (backend mevcut deÄŸil)"}}async deleteUser(e){try{if(this.backendAvailable)return await N.delete(`/users/${e}`)}catch(a){this.backendAvailable=!1}return{success:!0,message:"User silindi (backend mevcut deÄŸil)"}}async resetPassword(e){try{if(this.backendAvailable)return await N.post(`/users/${e}/reset-password`,{})}catch(a){this.backendAvailable=!1}return{success:!0,message:"Åifre sÄ±fÄ±rlandÄ± (backend mevcut deÄŸil)"}}async getRoles(){return await N.get("/users/roles")}},ke={class:"space-y-6"},we={class:"flex items-center justify-between"},he={class:"card bg-base-100 shadow-xl"},xe={class:"card-body"},Ae={class:"relative mb-4"},Ne={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ce={class:"flex items-center justify-between"},Se={class:"flex items-center gap-3"},De={class:"avatar placeholder"},Ke={class:"bg-neutral-focus text-neutral-content rounded-full w-12"},Ue={class:"font-bold"},Te={class:"text-xs text-base-content/70"},je={class:"dropdown dropdown-end"},ze={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-36"},Ie=["onClick"],Fe=["onClick"],Ve={key:0},Ye=["onClick"],Be={key:1},Le=["onClick"],Me={class:"flex items-center justify-between text-xs"},Ee={class:"flex gap-2"},Re={key:0,class:"badge badge-error badge-sm"},He={key:1,class:"badge badge-success badge-sm"},Pe={class:"text-base-content/70"},$e={key:0,class:"text-center py-10"},qe={key:0,class:"modal modal-open"},_e={class:"modal-box max-w-2xl"},Oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ge={class:"form-control"},Xe={class:"form-control"},Je={class:"form-control"},Qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},We={class:"form-control"},Ze=["value"],ea={key:0,class:"form-control"},aa=["value"],la={class:"modal-action"},ta=["disabled"],sa={key:0,class:"loading loading-spinner"},na={__name:"UserManagement",setup(l){const{handleNetworkError:w,handleValidationError:h,showSuccess:x}=T(),A=e([]),N=e([]),D=e(""),K=e(!1),j=e(!1),z=e([]),I=p({firstName:"",lastName:"",email:"",role:"",companyId:null}),F=p({message:"",type:""}),V=async()=>{try{N.value=await U.getTenants()}catch(e){w(e)}},Y=async()=>{try{A.value=await fe.getUsers()}catch(e){w(e)}},B=()=>{K.value=!1,L()},L=()=>{I.firstName="",I.lastName="",I.email="",I.role="",I.companyId=null,F.message=""},M=(e,a)=>{F.message=e,F.type="alert alert-error",setTimeout(()=>{F.message=""},6e3)},E=async()=>{if(I.role!==S.TENANT||I.companyId)if(I.firstName&&I.lastName&&I.email&&I.role){j.value=!0;try{await fe.createUser({firstName:I.firstName,lastName:I.lastName,email:I.email,role:I.role,companyId:I.role===S.TENANT?I.companyId:null}),x(`KullanÄ±cÄ± baÅŸarÄ±yla oluÅŸturuldu! Åifre belirleme baÄŸlantÄ±sÄ± ${I.email} adresine gÃ¶nderildi.`),B(),await Y()}catch(e){e.response&&e.response.data&&"string"==typeof e.response.data?M(e.response.data):h(e)}finally{j.value=!1}}else M("LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurun.");else M("KiracÄ± rolÃ¼ iÃ§in bir firma seÃ§melisiniz.")},R=async()=>{try{z.value=await fe.getRoles()}catch(e){}},H=a(()=>{if(!D.value)return A.value;const e=D.value.toLowerCase();return A.value.filter(a=>a.firstName&&a.firstName.toLowerCase().includes(e)||a.lastName&&a.lastName.toLowerCase().includes(e)||a.email&&a.email.toLowerCase().includes(e))}),P=e=>{switch(e){case"admin":return"badge-primary";case"manager":return"badge-secondary";case"tenant":return"badge-accent";case"observer":return"badge-warning";case"dataentry":return"badge-info";default:return"badge-neutral"}};return t(async()=>{await Promise.all([V(),Y(),R()])}),(e,a)=>(n(),s("div",ke,[i("div",we,[a[8]||(a[8]=i("div",null,[i("h2",{class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"KullanÄ±cÄ± YÃ¶netimi"),i("p",{class:"text-gray-500 dark:text-gray-400"},"Sistem kullanÄ±cÄ±larÄ±nÄ± yÃ¶netin ve yeni kullanÄ±cÄ±lar ekleyin")],-1)),i("button",{onClick:a[0]||(a[0]=e=>K.value=!0),class:"btn btn-primary"},a[7]||(a[7]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),y(" Yeni KullanÄ±cÄ± Ekle ")]))]),i("div",he,[i("div",xe,[a[13]||(a[13]=i("h3",{class:"card-title"},"KullanÄ±cÄ± Listesi",-1)),i("div",Ae,[o(i("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>D.value=e),class:"input input-bordered w-full pl-10",placeholder:"Ad, soyad veya e-posta ile ara..."},null,512),[[c,D.value]]),a[9]||(a[9]=i("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[i("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})])],-1))]),i("div",Ne,[(n(!0),s(u,null,v(H.value,e=>{var l,t;return n(),s("div",{key:e.id,class:g(["bg-base-200 p-4 rounded-lg shadow transition hover:shadow-md",!1===e.isActive?"opacity-60 border-l-4 border-error":""])},[i("div",Ce,[i("div",Se,[i("div",De,[i("div",Ke,[i("span",null,m(null==(l=e.firstName)?void 0:l.charAt(0))+m(null==(t=e.lastName)?void 0:t.charAt(0)),1)])]),i("div",null,[i("p",Ue,m(e.firstName)+" "+m(e.lastName),1),i("p",Te,m(e.email),1)])]),i("div",je,[a[10]||(a[10]=i("label",{tabindex:"0",class:"btn btn-ghost btn-sm btn-circle"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})])],-1)),i("ul",ze,[i("li",null,[i("a",{onClick:e=>{}},"DÃ¼zenle",8,Ie)]),i("li",null,[i("a",{onClick:a=>(async e=>{if(confirm(`${e.firstName} ${e.lastName} kullanÄ±cÄ±sÄ±nÄ±n ÅŸifresini sÄ±fÄ±rlamak ve yeni ÅŸifreyi e-posta ile gÃ¶ndermek istediÄŸinize emin misiniz?`))try{j.value=!0,await fe.resetPassword(e.id),x("Åifre sÄ±fÄ±rlama e-postasÄ± gÃ¶nderildi.")}catch(a){h(a)}finally{j.value=!1}})(e),class:"text-warning"},"Åifre SÄ±fÄ±rla",8,Fe)]),!1!==e.isActive?(n(),s("li",Ve,[i("a",{onClick:a=>(async e=>{try{await fe.updateUser(e,{isActive:!1}),await Y(),x("KullanÄ±cÄ± baÅŸarÄ±yla pasif yapÄ±ldÄ±.")}catch(a){h(a)}})(e.id),class:"text-error"},"Pasif Yap",8,Ye)])):(n(),s("li",Be,[i("a",{onClick:a=>(async e=>{try{await fe.updateUser(e,{isActive:!0}),await Y(),x("KullanÄ±cÄ± baÅŸarÄ±yla aktif yapÄ±ldÄ±.")}catch(a){h(a)}})(e.id),class:"text-success"},"Aktif Yap",8,Le)]))])])]),a[11]||(a[11]=i("div",{class:"divider my-2"},null,-1)),i("div",Me,[i("div",Ee,[i("span",{class:g([P(e.role),"badge badge-sm font-semibold"])},m(e.roleLabel||f(C)[e.role]||e.role),3),!1===e.isActive?(n(),s("span",Re," Pasif ")):(n(),s("span",He," Aktif "))]),i("span",Pe," Firma: "+m(e.companyName||"BelirtilmemiÅŸ"),1)])],2)}),128))]),0===H.value.length?(n(),s("div",$e,a[12]||(a[12]=[i("p",{class:"text-base-content/60"},"Aramayla eÅŸleÅŸen kullanÄ±cÄ± bulunamadÄ±.",-1)]))):b("",!0)])]),K.value?(n(),s("div",qe,[i("div",_e,[a[23]||(a[23]=i("h3",{class:"font-bold text-lg mb-4"},"Yeni KullanÄ±cÄ± Ekle",-1)),F.message?(n(),s("div",{key:0,class:g([F.type,"p-4 rounded-md text-sm font-medium mb-4"])},m(F.message),3)):b("",!0),i("form",{onSubmit:r(E,["prevent"]),class:"space-y-4"},[i("div",Oe,[i("div",Ge,[a[14]||(a[14]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"Ad")],-1)),o(i("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>I.firstName=e),class:"input input-bordered w-full",required:""},null,512),[[c,I.firstName]])]),i("div",Xe,[a[15]||(a[15]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"Soyad")],-1)),o(i("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>I.lastName=e),class:"input input-bordered w-full",required:""},null,512),[[c,I.lastName]])])]),i("div",Je,[a[16]||(a[16]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"E-posta")],-1)),o(i("input",{type:"email","onUpdate:modelValue":a[4]||(a[4]=e=>I.email=e),class:"input input-bordered w-full",required:""},null,512),[[c,I.email]]),a[17]||(a[17]=i("label",{class:"label"},[i("span",{class:"label-text-alt"},"Åifre sÄ±fÄ±rlama baÄŸlantÄ±sÄ± bu adrese gÃ¶nderilecek")],-1))]),i("div",Qe,[i("div",We,[a[19]||(a[19]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"Rol")],-1)),o(i("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>I.role=e),class:"select select-bordered w-full",required:""},[a[18]||(a[18]=i("option",{disabled:"",value:""},"Rol SeÃ§iniz",-1)),(n(!0),s(u,null,v(z.value,e=>(n(),s("option",{key:e.code,value:e.code},m(e.label),9,Ze))),128))],512),[[d,I.role]])]),"tenant"===I.role?(n(),s("div",ea,[a[21]||(a[21]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"Ä°liÅŸkili Firma")],-1)),o(i("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>I.companyId=e),class:"select select-bordered w-full",required:""},[a[20]||(a[20]=i("option",{disabled:"",value:""},"Firma SeÃ§iniz",-1)),(n(!0),s(u,null,v(N.value,e=>(n(),s("option",{key:e.id,value:e.id},m(e.companyName),9,aa))),128))],512),[[d,I.companyId]])])):b("",!0)]),a[22]||(a[22]=k('<div class="alert alert-info"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h3 class="font-bold">Bilgilendirme</h3><div class="text-xs">KullanÄ±cÄ± oluÅŸturulduktan sonra, belirtilen e-posta adresine ÅŸifre belirleme baÄŸlantÄ±sÄ± gÃ¶nderilecektir.</div></div></div>',1)),i("div",la,[i("button",{type:"button",onClick:B,class:"btn btn-ghost"},"Ä°ptal"),i("button",{type:"submit",class:"btn btn-primary",disabled:j.value},[j.value?(n(),s("span",sa)):b("",!0),y(" "+m(j.value?"KullanÄ±cÄ± OluÅŸturuluyor...":"KullanÄ±cÄ±yÄ± OluÅŸtur"),1)],8,ta)])],32)])])):b("",!0)]))}},ia={class:"p-4 sm:p-6 lg:p-8 space-y-6 bg-base-200 min-h-screen"},ra={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},oa={class:"stat bg-base-100 shadow rounded-box"},ca={class:"stat-value text-secondary"},da={class:"stat bg-base-100 shadow rounded-box"},ua={class:"stat-value text-accent"},va={role:"tablist",class:"tabs tabs-bordered tabs-lg"},ma=["onClick"],ba={key:0,class:"badge badge-ghost ml-2"},pa={class:"mt-6"},ya={class:"card bg-base-100 shadow-xl"},ga={class:"card-body"},fa={__name:"AdminDashboard",setup(l){const r=e("dues"),o=p({dues:0,ownerDues:0,owners:0,users:0}),c={dues:ge,ownerDues:D,owners:K,users:na},d=a(()=>[{key:"dues",label:"Aidat TanÄ±mlama",icon:"ğŸ“†",badge:o.dues},{key:"ownerDues",label:"Mal Sahibi AidatlarÄ±",icon:"ğŸ ",badge:o.ownerDues},{key:"users",label:"KullanÄ±cÄ± YÃ¶netimi",icon:"ğŸ‘¥",badge:o.users}]),f=a(()=>c[r.value]??null),k=e(0),A=e(0);async function N(){try{const e=await U.getTenantStats();k.value=(null==e?void 0:e.activeCount)??(null==e?void 0:e.totalCount)??0}catch(e){}}function C(e){e&&"object"==typeof e&&("dues"in e&&(o.dues=Number(e.dues)||0),"ownerDues"in e&&(o.ownerDues=Number(e.ownerDues)||0),"owners"in e&&(o.owners=Number(e.owners)||0),"users"in e&&(o.users=Number(e.users)||0))}return t(N),(e,a)=>(n(),s("div",ia,[i("div",ra,[i("div",oa,[a[0]||(a[0]=i("div",{class:"stat-title"},"Toplam KiracÄ±",-1)),i("div",ca,m(k.value),1),a[1]||(a[1]=i("div",{class:"stat-desc"},"Sistemdeki aktif kiracÄ±lar",-1))]),i("div",da,[a[2]||(a[2]=i("div",{class:"stat-title"},"Toplam Mal Sahibi",-1)),i("div",ua,m(A.value),1),a[3]||(a[3]=i("div",{class:"stat-desc"},"Sistemdeki mÃ¼lk sahipleri",-1))])]),i("div",va,[(n(!0),s(u,null,v(d.value,e=>(n(),s("a",{key:e.key,role:"tab",class:g(["tab",{"tab-active":r.value===e.key}]),onClick:a=>r.value=e.key},[y(m(e.icon)+" "+m(e.label)+" ",1),void 0!==e.badge?(n(),s("span",ba,m(e.badge),1)):b("",!0)],10,ma))),128))]),i("div",pa,[i("div",ya,[i("div",ga,[f.value?(n(),w(x,{key:0},[(n(),w(h(f.value),{key:r.value,onRefreshStats:N,onStats:C},null,32))],1024)):b("",!0)])])])]))}};export{fa as default};
