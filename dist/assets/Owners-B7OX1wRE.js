import{o as e}from"./ownersService-BBftqt2W.js";import{t as a}from"./tenantsService-B2_anAuD.js";import{u as r,a as t}from"./useErrorHandler-DB_Jk_TF.js";import{c as l,l as s,b as o,n,t as i,r as d,C as c,w as g,X as u,q as b,D as m,H as v,e as p,F as x,i as h,I as y,o as k,f as w,p as f}from"./vue-vendor-B4bLxnmP.js";import{_ as C}from"./FilterBar-BWi_ml3H.js";import"./index-ErXur627.js";const M=["open"],j={class:"modal-box max-w-md bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700 shadow-2xl"},S={class:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700 mb-6"},B={class:"py-4"},O={class:"flex items-center gap-3 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg mb-4"},U={class:"text-gray-700 dark:text-gray-300"},z={class:"text-red-600 dark:text-red-400"},L={class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},A={__name:"ConfirmDeleteModal",props:{tenant:Object,visible:Boolean},emits:["confirm","cancel"],setup:e=>(a,r)=>{var t,d;return s(),l("dialog",{id:"deleteConfirmModal",class:"modal",open:e.visible},[o("div",j,[o("div",S,[r[4]||(r[4]=o("h3",{class:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2"},[o("span",{class:"text-2xl"},"âš ï¸"),n(" Silme OnayÄ± ")],-1)),o("button",{onClick:r[0]||(r[0]=e=>a.$emit("cancel")),class:"btn btn-sm btn-ghost text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},r[3]||(r[3]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o("div",B,[o("div",O,[r[6]||(r[6]=o("svg",{class:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),o("p",U,[o("strong",z,i(null==(t=e.tenant)?void 0:t.firstName)+" "+i(null==(d=e.tenant)?void 0:d.lastName),1),r[5]||(r[5]=n(" isimli kiracÄ±yÄ± silmek istediÄŸinize emin misiniz? "))])]),r[7]||(r[7]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Bu iÅŸlem geri alÄ±namaz ve kiracÄ±nÄ±n tÃ¼m verileri kalÄ±cÄ± olarak silinecektir. ",-1))]),o("div",L,[o("button",{class:"btn btn-outline border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:r[1]||(r[1]=e=>a.$emit("cancel"))},r[8]||(r[8]=[o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),n(" Ä°ptal ")])),o("button",{class:"btn btn-error bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 border-0 text-white shadow-lg",onClick:r[2]||(r[2]=e=>a.$emit("confirm"))},r[9]||(r[9]=[o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),n(" Evet, Sil ")]))])])],8,M)}},E=["open"],H={class:"modal-box max-w-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700"},_={class:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700"},V={class:"form-control"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},N={class:"form-control"},T={class:"form-control"},$={class:"form-control"},D={class:"p-4 border rounded-lg bg-gray-50 dark:bg-gray-700/50 dark:border-gray-600 max-h-48 overflow-y-auto"},q={class:"grid grid-cols-3 sm:grid-cols-4 gap-2"},F=["value"],I={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},Y={key:0,class:"text-center text-sm text-gray-500 dark:text-gray-400"},P={key:0,class:"text-red-500 text-sm mt-1"},X={class:"modal-action pt-4 border-t border-gray-200 dark:border-gray-700"},G=["disabled"],J={__name:"OwnerCreateModal",props:{visible:Boolean,availableUnits:Array},emits:["close","save"],setup(e,{emit:a}){const r=e,t=a,k=d({name:"",phone:"",email:"",units:[]}),w=d(""),f=c(()=>k.value.name&&k.value.units.length>0),C=()=>{f.value?t("save",{...k.value}):0===k.value.units.length&&(w.value="En az bir kat seÃ§melisiniz.")};return g(()=>r.visible,e=>{e&&(k.value={name:"",phone:"",email:"",units:[]},w.value="")}),(a,r)=>{const t=u("mask");return s(),l("dialog",{open:e.visible,class:"modal bg-black/30 backdrop-blur-sm"},[o("div",H,[o("div",_,[r[7]||(r[7]=o("h3",{class:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2"},[o("span",{class:"text-2xl"},"ðŸ "),n(" Yeni Mal Sahibi Ekle ")],-1)),o("button",{onClick:r[0]||(r[0]=e=>a.$emit("close")),class:"btn btn-sm btn-ghost text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},r[6]||(r[6]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o("form",{onSubmit:b(C,["prevent"]),class:"py-6 space-y-6"},[o("div",V,[r[8]||(r[8]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Ad Soyad")],-1)),m(o("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>k.value.name=e),type:"text",placeholder:"Mal sahibinin adÄ± ve soyadÄ±",class:"input input-bordered w-full bg-white dark:bg-gray-700",required:""},null,512),[[v,k.value.name]])]),o("div",K,[o("div",N,[r[9]||(r[9]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Telefon NumarasÄ±")],-1)),m(o("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>k.value.phone=e),type:"tel",placeholder:"+90 (5xx) xxx xx xx",class:"input input-bordered w-full bg-white dark:bg-gray-700"},null,512),[[v,k.value.phone],[t,"+90 (###) ### ## ##"]])]),o("div",T,[r[10]||(r[10]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"E-posta Adresi")],-1)),m(o("input",{"onUpdate:modelValue":r[3]||(r[3]=e=>k.value.email=e),type:"email",placeholder:"ornek@mail.com",class:"input input-bordered w-full bg-white dark:bg-gray-700"},null,512),[[v,k.value.email]])])]),o("div",$,[r[11]||(r[11]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Sahip Olunan Katlar")],-1)),o("div",D,[o("div",q,[(s(!0),l(x,null,h(e.availableUnits,e=>(s(),l("label",{key:e,class:"flex items-center gap-2 p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-pointer"},[m(o("input",{type:"checkbox",value:e,"onUpdate:modelValue":r[4]||(r[4]=e=>k.value.units=e),class:"checkbox checkbox-primary"},null,8,F),[[y,k.value.units]]),o("span",I,i(e),1)]))),128))]),e.availableUnits&&0!==e.availableUnits.length?p("",!0):(s(),l("div",Y," Atanacak boÅŸ kat bulunmuyor. "))]),w.value?(s(),l("div",P,i(w.value),1)):p("",!0)]),r[14]||(r[14]=o("div",{class:"text-sm text-gray-500 dark:text-gray-400"},[o("p",null,"SeÃ§ilen katlar bu mal sahibine atanacaktÄ±r. Bir kat yalnÄ±zca bir mal sahibine atanabilir.")],-1)),o("div",X,[o("button",{type:"button",onClick:r[5]||(r[5]=e=>a.$emit("close")),class:"btn btn-outline border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"},r[12]||(r[12]=[o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),n(" Ä°ptal ")])),o("button",{type:"submit",class:"btn btn-primary bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border-0 text-white shadow-lg",disabled:!f.value},r[13]||(r[13]=[o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),n(" Kaydet ")]),8,G)])],32)])],8,E)}}},Q={class:"p-4 sm:p-6 bg-gray-50 min-h-screen font-sans dark:bg-gray-900"},R={class:"max-w-7xl mx-auto"},W={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Z={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},ee={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},ae={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},re={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},te={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},le={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},se={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700"},oe={class:"mt-6 space-y-2"},ne={key:0,class:"text-center py-12 text-gray-500"},ie={key:1},de={class:"col-span-12 sm:col-span-5 flex items-center gap-4"},ce={class:"font-bold text-gray-800 dark:text-gray-100"},ge={class:"text-sm text-gray-500 dark:text-gray-400"},ue={class:"col-span-12 sm:col-span-4 text-sm text-gray-600 dark:text-gray-300"},be={key:0,class:"font-semibold text-gray-800 dark:text-gray-100"},me={class:"col-span-12 sm:col-span-3 flex justify-end items-center"},ve={class:"dropdown dropdown-end"},pe={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"},xe=["onClick"],he=["onClick"],ye={__name:"Owners",setup(n){const{handleNetworkError:g,handleValidationError:u}=r(),{showCreateSuccess:b,showDeleteSuccess:m}=t(),v=d([]),y=d([]),M=d(null),j=d(!1),S=d(!1),B=d(!1),O=d(null),U=d("");k(()=>{try{v.value=e.getAllOwners(),y.value=a.getAllTenants()}catch(r){g(r,{component:"Owners",action:"fetchOwners"})}});const z=c(()=>v.value.length),L=c(()=>v.value.flatMap(e=>e.units||[])),E=c(()=>new Set(L.value).size),H=c(()=>{const e=new Set;return y.value.forEach(a=>{a.isActive&&a.units&&a.units.forEach(a=>{const r="object"==typeof a&&a.id?a.id:a;e.add(r)})}),e}),_=c(()=>[...new Set(L.value)].filter(e=>!H.value.has(e)).length),V=c(()=>{if(!U.value)return v.value;const e=U.value.toLowerCase();return v.value.filter(a=>{const r=a.name&&a.name.toLowerCase().includes(e),t=a.email&&a.email.toLowerCase().includes(e),l=a.units&&a.units.some(a=>String(a).toLowerCase().includes(e));return r||t||l})}),K=c(()=>V.value.map(e=>{const a=e.units?e.units.filter(e=>!H.value.has(e)):[];return{...e,vacantUnits:a}}).filter(e=>e.vacantUnits.length>0)),N=c(()=>{const e=new Set(L.value);return UNIT_OPTIONS.filter(a=>!e.has(a))}),T=()=>{U.value=""},$=e=>{if(!e)return"bg-gray-500";const a=["bg-blue-500","bg-purple-500","bg-amber-500","bg-emerald-500","bg-red-500","bg-pink-500","bg-indigo-500","bg-teal-500"];return a[e.split("").reduce((e,a)=>e+a.charCodeAt(0),0)%a.length]},D=async()=>{try{await e.deleteOwner(O.value.id),m("Mal Sahibi"),B.value=!1}catch(a){u(a,{component:"Owners",action:"deleteOwner"})}},q=async a=>{try{await e.createOwner(a),b("Mal Sahibi"),S.value=!1}catch(r){u(r,{component:"Owners",action:"saveOwner"})}};return(e,a)=>(s(),l("div",Q,[o("div",R,[a[15]||(a[15]=o("h1",{class:"text-3xl font-bold text-gray-800 mb-6 dark:text-gray-100"},"Mal Sahipleri",-1)),o("section",W,[o("div",Z,[a[5]||(a[5]=o("div",{class:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 rounded-full p-3"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),o("div",null,[a[4]||(a[4]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Toplam Mal Sahibi",-1)),o("p",ee,i(z.value),1)])]),o("div",ae,[a[7]||(a[7]=o("div",{class:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 rounded-full p-3"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),o("div",null,[a[6]||(a[6]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Sahip Olunan Toplam Kat",-1)),o("p",re,i(E.value),1)])]),o("div",te,[a[9]||(a[9]=o("div",{class:"bg-orange-100 dark:bg-orange-900/50 text-orange-600 dark:text-orange-400 rounded-full p-3"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])],-1)),o("div",null,[a[8]||(a[8]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"BoÅŸta Olan Kat",-1)),o("p",le,i(_.value),1)])]),o("div",{class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-400 transition-colors duration-300",onClick:a[0]||(a[0]=e=>S.value=!0)},a[10]||(a[10]=[o("button",{class:"w-full h-full text-blue-500 dark:text-blue-400 flex items-center justify-center gap-2"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),o("span",{class:"font-semibold"},"Yeni Mal Sahibi Ekle")],-1)]))]),o("div",se,[w(C,{search:U.value,"onUpdate:search":a[1]||(a[1]=e=>U.value=e),"search-placeholder":"Mal sahibi adÄ± veya kat ara...",onClearFilters:T},null,8,["search"]),o("div",oe,[0===K.value.length?(s(),l("div",ne,a[11]||(a[11]=[o("p",null,"BoÅŸta katÄ± olan mal sahibi bulunamadÄ±.",-1)]))):(s(),l("div",ie,[a[14]||(a[14]=o("div",{class:"hidden sm:grid grid-cols-12 gap-4 px-4 py-2 text-sm font-semibold text-gray-500 dark:text-gray-400 border-b dark:border-gray-700"},[o("div",{class:"col-span-5"},"Mal Sahibi"),o("div",{class:"col-span-4"},"Sahip OlduÄŸu BoÅŸ Katlar"),o("div",{class:"col-span-3 text-center"},"Ä°ÅŸlemler")],-1)),(s(!0),l(x,null,h(K.value,e=>{return s(),l("div",{key:e.id,class:"grid grid-cols-12 gap-4 items-center p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200 border-b dark:border-gray-700/50"},[o("div",de,[o("div",{class:f(["flex-shrink-0 h-12 w-12 flex items-center justify-center bg-blue-500 text-white rounded-full text-xl font-bold",$(e.name)])},i((r=e.name,r?r.charAt(0).toUpperCase():"?")),3),o("div",null,[o("p",ce,i(e.name),1),o("p",ge,i(e.email),1)])]),o("div",ue,[a[12]||(a[12]=o("span",{class:"sm:hidden font-semibold text-gray-500"},"BoÅŸ Katlar: ",-1)),e.vacantUnits.length>0?(s(),l("span",be,i(e.vacantUnits.join(", ")),1)):p("",!0)]),o("div",me,[o("div",ve,[a[13]||(a[13]=o("label",{tabindex:"0",class:"btn btn-ghost btn-sm m-1"},"Ä°ÅŸlemler",-1)),o("ul",pe,[o("li",null,[o("a",{onClick:a=>(e=>{M.value={...e},j.value=!0})(e)},"DÃ¼zenle",8,xe)]),o("li",null,[o("a",{onClick:a=>(e=>{O.value=e,B.value=!0})(e),class:"text-red-500"},"Sil",8,he)])])])])]);var r}),128))]))])])]),w(J,{visible:S.value,"available-units":N.value,onSave:q,onClose:a[2]||(a[2]=e=>S.value=!1)},null,8,["visible","available-units"]),w(A,{visible:B.value,"item-name":O.value?O.value.name:"","item-type":"mal sahibini",onConfirm:D,onCancel:a[3]||(a[3]=e=>B.value=!1)},null,8,["visible","item-name"])]))}};export{ye as default};
