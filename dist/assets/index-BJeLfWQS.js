(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Vu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const je={},fr=[],wn=()=>{},Hv=()=>!1,Ra=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Nu=t=>t.startsWith("onUpdate:"),Vt=Object.assign,Ou=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Kv=Object.prototype.hasOwnProperty,Ue=(t,e)=>Kv.call(t,e),pe=Array.isArray,pr=t=>Ki(t)==="[object Map]",Or=t=>Ki(t)==="[object Set]",Hd=t=>Ki(t)==="[object Date]",we=t=>typeof t=="function",at=t=>typeof t=="string",Rn=t=>typeof t=="symbol",ze=t=>t!==null&&typeof t=="object",vp=t=>(ze(t)||we(t))&&we(t.then)&&we(t.catch),_p=Object.prototype.toString,Ki=t=>_p.call(t),zv=t=>Ki(t).slice(8,-1),bp=t=>Ki(t)==="[object Object]",Mu=t=>at(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,fi=Vu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sa=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Gv=/-(\w)/g,on=Sa(t=>t.replace(Gv,(e,n)=>n?n.toUpperCase():"")),Wv=/\B([A-Z])/g,Js=Sa(t=>t.replace(Wv,"-$1").toLowerCase()),Ca=Sa(t=>t.charAt(0).toUpperCase()+t.slice(1)),Al=Sa(t=>t?`on${Ca(t)}`:""),ps=(t,e)=>!Object.is(t,e),Oo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},wp=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Qo=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Kd;const Pa=()=>Kd||(Kd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ka(t){if(pe(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=at(s)?Xv(s):ka(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(at(t)||ze(t))return t}const Qv=/;(?![^(]*\))/g,Yv=/:([^]+)/,Jv=/\/\*[^]*?\*\//g;function Xv(t){const e={};return t.replace(Jv,"").split(Qv).forEach(n=>{if(n){const s=n.split(Yv);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function xt(t){let e="";if(at(t))e=t;else if(pe(t))for(let n=0;n<t.length;n++){const s=xt(t[n]);s&&(e+=s+" ")}else if(ze(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Zv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",e_=Vu(Zv);function Ep(t){return!!t||t===""}function t_(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Hs(t[s],e[s]);return n}function Hs(t,e){if(t===e)return!0;let n=Hd(t),s=Hd(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Rn(t),s=Rn(e),n||s)return t===e;if(n=pe(t),s=pe(e),n||s)return n&&s?t_(t,e):!1;if(n=ze(t),s=ze(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(l&&!u||!l&&u||!Hs(t[o],e[o]))return!1}}return String(t)===String(e)}function Lu(t,e){return t.findIndex(n=>Hs(n,e))}const Tp=t=>!!(t&&t.__v_isRef===!0),F=t=>at(t)?t:t==null?"":pe(t)||ze(t)&&(t.toString===_p||!we(t.toString))?Tp(t)?F(t.value):JSON.stringify(t,Ip,2):String(t),Ip=(t,e)=>Tp(e)?Ip(t,e.value):pr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Rl(s,i)+" =>"]=r,n),{})}:Or(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Rl(n))}:Rn(e)?Rl(e):ze(e)&&!pe(e)&&!bp(e)?String(e):e,Rl=(t,e="")=>{var n;return Rn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jt;class n_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=jt,!e&&jt&&(this.index=(jt.scopes||(jt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=jt;try{return jt=this,e()}finally{jt=n}}}on(){++this._on===1&&(this.prevScope=jt,jt=this)}off(){this._on>0&&--this._on===0&&(jt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function s_(){return jt}let He;const Sl=new WeakSet;class Ap{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,jt&&jt.active&&jt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Sl.has(this)&&(Sl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Sp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,zd(this),Cp(this);const e=He,n=un;He=this,un=!0;try{return this.fn()}finally{Pp(this),He=e,un=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Fu(e);this.deps=this.depsTail=void 0,zd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Sl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ql(this)&&this.run()}get dirty(){return Ql(this)}}let Rp=0,pi,mi;function Sp(t,e=!1){if(t.flags|=8,e){t.next=mi,mi=t;return}t.next=pi,pi=t}function Uu(){Rp++}function $u(){if(--Rp>0)return;if(mi){let e=mi;for(mi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;pi;){let e=pi;for(pi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Cp(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Pp(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Fu(s),r_(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Ql(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(kp(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function kp(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Si)||(t.globalVersion=Si,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Ql(t))))return;t.flags|=2;const e=t.dep,n=He,s=un;He=t,un=!0;try{Cp(t);const r=t.fn(t._value);(e.version===0||ps(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{He=n,un=s,Pp(t),t.flags&=-3}}function Fu(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Fu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function r_(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let un=!0;const xp=[];function qn(){xp.push(un),un=!1}function Hn(){const t=xp.pop();un=t===void 0?!0:t}function zd(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=He;He=void 0;try{e()}finally{He=n}}}let Si=0;class i_{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Bu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!He||!un||He===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==He)n=this.activeLink=new i_(He,this),He.deps?(n.prevDep=He.depsTail,He.depsTail.nextDep=n,He.depsTail=n):He.deps=He.depsTail=n,Dp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=He.depsTail,n.nextDep=void 0,He.depsTail.nextDep=n,He.depsTail=n,He.deps===n&&(He.deps=s)}return n}trigger(e){this.version++,Si++,this.notify(e)}notify(e){Uu();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{$u()}}}function Dp(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Dp(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Yl=new WeakMap,qs=Symbol(""),Jl=Symbol(""),Ci=Symbol("");function Ct(t,e,n){if(un&&He){let s=Yl.get(t);s||Yl.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Bu),r.map=s,r.key=n),r.track()}}function On(t,e,n,s,r,i){const o=Yl.get(t);if(!o){Si++;return}const l=u=>{u&&u.trigger()};if(Uu(),e==="clear")o.forEach(l);else{const u=pe(t),c=u&&Mu(n);if(u&&n==="length"){const h=Number(s);o.forEach((p,g)=>{(g==="length"||g===Ci||!Rn(g)&&g>=h)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),c&&l(o.get(Ci)),e){case"add":u?c&&l(o.get("length")):(l(o.get(qs)),pr(t)&&l(o.get(Jl)));break;case"delete":u||(l(o.get(qs)),pr(t)&&l(o.get(Jl)));break;case"set":pr(t)&&l(o.get(qs));break}}$u()}function ir(t){const e=Le(t);return e===t?e:(Ct(e,"iterate",Ci),nn(t)?e:e.map(_t))}function xa(t){return Ct(t=Le(t),"iterate",Ci),t}const o_={__proto__:null,[Symbol.iterator](){return Cl(this,Symbol.iterator,_t)},concat(...t){return ir(this).concat(...t.map(e=>pe(e)?ir(e):e))},entries(){return Cl(this,"entries",t=>(t[1]=_t(t[1]),t))},every(t,e){return Dn(this,"every",t,e,void 0,arguments)},filter(t,e){return Dn(this,"filter",t,e,n=>n.map(_t),arguments)},find(t,e){return Dn(this,"find",t,e,_t,arguments)},findIndex(t,e){return Dn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Dn(this,"findLast",t,e,_t,arguments)},findLastIndex(t,e){return Dn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Dn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Pl(this,"includes",t)},indexOf(...t){return Pl(this,"indexOf",t)},join(t){return ir(this).join(t)},lastIndexOf(...t){return Pl(this,"lastIndexOf",t)},map(t,e){return Dn(this,"map",t,e,void 0,arguments)},pop(){return si(this,"pop")},push(...t){return si(this,"push",t)},reduce(t,...e){return Gd(this,"reduce",t,e)},reduceRight(t,...e){return Gd(this,"reduceRight",t,e)},shift(){return si(this,"shift")},some(t,e){return Dn(this,"some",t,e,void 0,arguments)},splice(...t){return si(this,"splice",t)},toReversed(){return ir(this).toReversed()},toSorted(t){return ir(this).toSorted(t)},toSpliced(...t){return ir(this).toSpliced(...t)},unshift(...t){return si(this,"unshift",t)},values(){return Cl(this,"values",_t)}};function Cl(t,e,n){const s=xa(t),r=s[e]();return s!==t&&!nn(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const a_=Array.prototype;function Dn(t,e,n,s,r,i){const o=xa(t),l=o!==t&&!nn(t),u=o[e];if(u!==a_[e]){const p=u.apply(t,i);return l?_t(p):p}let c=n;o!==t&&(l?c=function(p,g){return n.call(this,_t(p),g,t)}:n.length>2&&(c=function(p,g){return n.call(this,p,g,t)}));const h=u.call(o,c,s);return l&&r?r(h):h}function Gd(t,e,n,s){const r=xa(t);let i=n;return r!==t&&(nn(t)?n.length>3&&(i=function(o,l,u){return n.call(this,o,l,u,t)}):i=function(o,l,u){return n.call(this,o,_t(l),u,t)}),r[e](i,...s)}function Pl(t,e,n){const s=Le(t);Ct(s,"iterate",Ci);const r=s[e](...n);return(r===-1||r===!1)&&Hu(n[0])?(n[0]=Le(n[0]),s[e](...n)):r}function si(t,e,n=[]){qn(),Uu();const s=Le(t)[e].apply(t,n);return $u(),Hn(),s}const l_=Vu("__proto__,__v_isRef,__isVue"),Vp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Rn));function u_(t){Rn(t)||(t=String(t));const e=Le(this);return Ct(e,"has",t),e.hasOwnProperty(t)}class Np{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?__:Up:i?Lp:Mp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=pe(e);if(!r){let u;if(o&&(u=o_[n]))return u;if(n==="hasOwnProperty")return u_}const l=Reflect.get(e,n,Dt(e)?e:s);return(Rn(n)?Vp.has(n):l_(n))||(r||Ct(e,"get",n),i)?l:Dt(l)?o&&Mu(n)?l:l.value:ze(l)?r?Fp(l):Da(l):l}}class Op extends Np{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const u=ws(i);if(!nn(s)&&!ws(s)&&(i=Le(i),s=Le(s)),!pe(e)&&Dt(i)&&!Dt(s))return u?!1:(i.value=s,!0)}const o=pe(e)&&Mu(n)?Number(n)<e.length:Ue(e,n),l=Reflect.set(e,n,s,Dt(e)?e:r);return e===Le(r)&&(o?ps(s,i)&&On(e,"set",n,s):On(e,"add",n,s)),l}deleteProperty(e,n){const s=Ue(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&On(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Rn(n)||!Vp.has(n))&&Ct(e,"has",n),s}ownKeys(e){return Ct(e,"iterate",pe(e)?"length":qs),Reflect.ownKeys(e)}}class c_ extends Np{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const d_=new Op,h_=new c_,f_=new Op(!0);const Xl=t=>t,Ao=t=>Reflect.getPrototypeOf(t);function p_(t,e,n){return function(...s){const r=this.__v_raw,i=Le(r),o=pr(i),l=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,c=r[t](...s),h=n?Xl:e?Yo:_t;return!e&&Ct(i,"iterate",u?Jl:qs),{next(){const{value:p,done:g}=c.next();return g?{value:p,done:g}:{value:l?[h(p[0]),h(p[1])]:h(p),done:g}},[Symbol.iterator](){return this}}}}function Ro(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function m_(t,e){const n={get(r){const i=this.__v_raw,o=Le(i),l=Le(r);t||(ps(r,l)&&Ct(o,"get",r),Ct(o,"get",l));const{has:u}=Ao(o),c=e?Xl:t?Yo:_t;if(u.call(o,r))return c(i.get(r));if(u.call(o,l))return c(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Ct(Le(r),"iterate",qs),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=Le(i),l=Le(r);return t||(ps(r,l)&&Ct(o,"has",r),Ct(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,u=Le(l),c=e?Xl:t?Yo:_t;return!t&&Ct(u,"iterate",qs),l.forEach((h,p)=>r.call(i,c(h),c(p),o))}};return Vt(n,t?{add:Ro("add"),set:Ro("set"),delete:Ro("delete"),clear:Ro("clear")}:{add(r){!e&&!nn(r)&&!ws(r)&&(r=Le(r));const i=Le(this);return Ao(i).has.call(i,r)||(i.add(r),On(i,"add",r,r)),this},set(r,i){!e&&!nn(i)&&!ws(i)&&(i=Le(i));const o=Le(this),{has:l,get:u}=Ao(o);let c=l.call(o,r);c||(r=Le(r),c=l.call(o,r));const h=u.call(o,r);return o.set(r,i),c?ps(i,h)&&On(o,"set",r,i):On(o,"add",r,i),this},delete(r){const i=Le(this),{has:o,get:l}=Ao(i);let u=o.call(i,r);u||(r=Le(r),u=o.call(i,r)),l&&l.call(i,r);const c=i.delete(r);return u&&On(i,"delete",r,void 0),c},clear(){const r=Le(this),i=r.size!==0,o=r.clear();return i&&On(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=p_(r,t,e)}),n}function ju(t,e){const n=m_(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Ue(n,r)&&r in s?n:s,r,i)}const g_={get:ju(!1,!1)},y_={get:ju(!1,!0)},v_={get:ju(!0,!1)};const Mp=new WeakMap,Lp=new WeakMap,Up=new WeakMap,__=new WeakMap;function b_(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function w_(t){return t.__v_skip||!Object.isExtensible(t)?0:b_(zv(t))}function Da(t){return ws(t)?t:qu(t,!1,d_,g_,Mp)}function $p(t){return qu(t,!1,f_,y_,Lp)}function Fp(t){return qu(t,!0,h_,v_,Up)}function qu(t,e,n,s,r){if(!ze(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=w_(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function mr(t){return ws(t)?mr(t.__v_raw):!!(t&&t.__v_isReactive)}function ws(t){return!!(t&&t.__v_isReadonly)}function nn(t){return!!(t&&t.__v_isShallow)}function Hu(t){return t?!!t.__v_raw:!1}function Le(t){const e=t&&t.__v_raw;return e?Le(e):t}function E_(t){return!Ue(t,"__v_skip")&&Object.isExtensible(t)&&wp(t,"__v_skip",!0),t}const _t=t=>ze(t)?Da(t):t,Yo=t=>ze(t)?Fp(t):t;function Dt(t){return t?t.__v_isRef===!0:!1}function B(t){return Bp(t,!1)}function T_(t){return Bp(t,!0)}function Bp(t,e){return Dt(t)?t:new I_(t,e)}class I_{constructor(e,n){this.dep=new Bu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Le(e),this._value=n?e:_t(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||nn(e)||ws(e);e=s?e:Le(e),ps(e,n)&&(this._rawValue=e,this._value=s?e:_t(e),this.dep.trigger())}}function cn(t){return Dt(t)?t.value:t}const A_={get:(t,e,n)=>e==="__v_raw"?t:cn(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Dt(r)&&!Dt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function jp(t){return mr(t)?t:new Proxy(t,A_)}class R_{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Bu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Si-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&He!==this)return Sp(this,!0),!0}get value(){const e=this.dep.track();return kp(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function S_(t,e,n=!1){let s,r;return we(t)?s=t:(s=t.get,r=t.set),new R_(s,r,n)}const So={},Jo=new WeakMap;let Fs;function C_(t,e=!1,n=Fs){if(n){let s=Jo.get(n);s||Jo.set(n,s=[]),s.push(t)}}function P_(t,e,n=je){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:u}=n,c=D=>r?D:nn(D)||r===!1||r===0?Mn(D,1):Mn(D);let h,p,g,y,w=!1,E=!1;if(Dt(t)?(p=()=>t.value,w=nn(t)):mr(t)?(p=()=>c(t),w=!0):pe(t)?(E=!0,w=t.some(D=>mr(D)||nn(D)),p=()=>t.map(D=>{if(Dt(D))return D.value;if(mr(D))return c(D);if(we(D))return u?u(D,2):D()})):we(t)?e?p=u?()=>u(t,2):t:p=()=>{if(g){qn();try{g()}finally{Hn()}}const D=Fs;Fs=h;try{return u?u(t,3,[y]):t(y)}finally{Fs=D}}:p=wn,e&&r){const D=p,j=r===!0?1/0:r;p=()=>Mn(D(),j)}const x=s_(),N=()=>{h.stop(),x&&x.active&&Ou(x.effects,h)};if(i&&e){const D=e;e=(...j)=>{D(...j),N()}}let R=E?new Array(t.length).fill(So):So;const C=D=>{if(!(!(h.flags&1)||!h.dirty&&!D))if(e){const j=h.run();if(r||w||(E?j.some((L,_)=>ps(L,R[_])):ps(j,R))){g&&g();const L=Fs;Fs=h;try{const _=[j,R===So?void 0:E&&R[0]===So?[]:R,y];R=j,u?u(e,3,_):e(..._)}finally{Fs=L}}}else h.run()};return l&&l(C),h=new Ap(p),h.scheduler=o?()=>o(C,!1):C,y=D=>C_(D,!1,h),g=h.onStop=()=>{const D=Jo.get(h);if(D){if(u)u(D,4);else for(const j of D)j();Jo.delete(h)}},e?s?C(!0):R=h.run():o?o(C.bind(null,!0),!0):h.run(),N.pause=h.pause.bind(h),N.resume=h.resume.bind(h),N.stop=N,N}function Mn(t,e=1/0,n){if(e<=0||!ze(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Dt(t))Mn(t.value,e,n);else if(pe(t))for(let s=0;s<t.length;s++)Mn(t[s],e,n);else if(Or(t)||pr(t))t.forEach(s=>{Mn(s,e,n)});else if(bp(t)){for(const s in t)Mn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Mn(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zi(t,e,n,s){try{return s?t(...s):t()}catch(r){Va(r,e,n)}}function Sn(t,e,n,s){if(we(t)){const r=zi(t,e,n,s);return r&&vp(r)&&r.catch(i=>{Va(i,e,n)}),r}if(pe(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Sn(t[i],e,n,s));return r}}function Va(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||je;if(e){let l=e.parent;const u=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](t,u,c)===!1)return}l=l.parent}if(i){qn(),zi(i,null,10,[t,u,c]),Hn();return}}k_(t,n,r,s,o)}function k_(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const $t=[];let vn=-1;const gr=[];let os=null,or=0;const qp=Promise.resolve();let Xo=null;function Ku(t){const e=Xo||qp;return t?e.then(this?t.bind(this):t):e}function x_(t){let e=vn+1,n=$t.length;for(;e<n;){const s=e+n>>>1,r=$t[s],i=Pi(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function zu(t){if(!(t.flags&1)){const e=Pi(t),n=$t[$t.length-1];!n||!(t.flags&2)&&e>=Pi(n)?$t.push(t):$t.splice(x_(e),0,t),t.flags|=1,Hp()}}function Hp(){Xo||(Xo=qp.then(zp))}function D_(t){pe(t)?gr.push(...t):os&&t.id===-1?os.splice(or+1,0,t):t.flags&1||(gr.push(t),t.flags|=1),Hp()}function Wd(t,e,n=vn+1){for(;n<$t.length;n++){const s=$t[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;$t.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Kp(t){if(gr.length){const e=[...new Set(gr)].sort((n,s)=>Pi(n)-Pi(s));if(gr.length=0,os){os.push(...e);return}for(os=e,or=0;or<os.length;or++){const n=os[or];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}os=null,or=0}}const Pi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function zp(t){try{for(vn=0;vn<$t.length;vn++){const e=$t[vn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),zi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;vn<$t.length;vn++){const e=$t[vn];e&&(e.flags&=-2)}vn=-1,$t.length=0,Kp(),Xo=null,($t.length||gr.length)&&zp()}}let Yt=null,Gp=null;function Zo(t){const e=Yt;return Yt=t,Gp=t&&t.type.__scopeId||null,e}function ki(t,e=Yt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&rh(-1);const i=Zo(e);let o;try{o=t(...r)}finally{Zo(i),s._d&&rh(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function ee(t,e){if(Yt===null)return t;const n=Ua(Yt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,u=je]=e[r];i&&(we(i)&&(i={mounted:i,updated:i}),i.deep&&Mn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:u}))}return t}function Us(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let u=l.dir[s];u&&(qn(),Sn(u,n,8,[t.el,l,t,e]),Hn())}}const V_=Symbol("_vte"),N_=t=>t.__isTeleport;function Gu(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Gu(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Wp(t,e){return we(t)?Vt({name:t.name},e,{setup:t}):t}function Qp(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ea(t,e,n,s,r=!1){if(pe(t)){t.forEach((w,E)=>ea(w,e&&(pe(e)?e[E]:e),n,s,r));return}if(gi(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ea(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Ua(s.component):s.el,o=r?null:i,{i:l,r:u}=t,c=e&&e.r,h=l.refs===je?l.refs={}:l.refs,p=l.setupState,g=Le(p),y=p===je?()=>!1:w=>Ue(g,w);if(c!=null&&c!==u&&(at(c)?(h[c]=null,y(c)&&(p[c]=null)):Dt(c)&&(c.value=null)),we(u))zi(u,l,12,[o,h]);else{const w=at(u),E=Dt(u);if(w||E){const x=()=>{if(t.f){const N=w?y(u)?p[u]:h[u]:u.value;r?pe(N)&&Ou(N,i):pe(N)?N.includes(i)||N.push(i):w?(h[u]=[i],y(u)&&(p[u]=h[u])):(u.value=[i],t.k&&(h[t.k]=u.value))}else w?(h[u]=o,y(u)&&(p[u]=o)):E&&(u.value=o,t.k&&(h[t.k]=o))};o?(x.id=-1,Qt(x,n)):x()}}}Pa().requestIdleCallback;Pa().cancelIdleCallback;const gi=t=>!!t.type.__asyncLoader,Yp=t=>t.type.__isKeepAlive;function O_(t,e){Jp(t,"a",e)}function M_(t,e){Jp(t,"da",e)}function Jp(t,e,n=kt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Na(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Yp(r.parent.vnode)&&L_(s,e,n,r),r=r.parent}}function L_(t,e,n,s){const r=Na(e,t,s,!0);Zp(()=>{Ou(s[e],r)},n)}function Na(t,e,n=kt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{qn();const l=Gi(n),u=Sn(e,n,t,o);return l(),Hn(),u});return s?r.unshift(i):r.push(i),i}}const Qn=t=>(e,n=kt)=>{(!Di||t==="sp")&&Na(t,(...s)=>e(...s),n)},U_=Qn("bm"),Ot=Qn("m"),$_=Qn("bu"),F_=Qn("u"),Xp=Qn("bum"),Zp=Qn("um"),B_=Qn("sp"),j_=Qn("rtg"),q_=Qn("rtc");function H_(t,e=kt){Na("ec",t,e)}const em="components",K_="directives";function Oa(t,e){return nm(em,t,!0,e)||t}const z_=Symbol.for("v-ndc");function tm(t){return nm(K_,t)}function nm(t,e,n=!0,s=!1){const r=Yt||kt;if(r){const i=r.type;if(t===em){const l=Vb(i,!1);if(l&&(l===e||l===on(e)||l===Ca(on(e))))return i}const o=Qd(r[t]||i[t],e)||Qd(r.appContext[t],e);return!o&&s?i:o}}function Qd(t,e){return t&&(t[e]||t[on(e)]||t[Ca(on(e))])}function Ke(t,e,n,s){let r;const i=n,o=pe(t);if(o||at(t)){const l=o&&mr(t);let u=!1,c=!1;l&&(u=!nn(t),c=ws(t),t=xa(t)),r=new Array(t.length);for(let h=0,p=t.length;h<p;h++)r[h]=e(u?c?Yo(_t(t[h])):_t(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(ze(t))if(t[Symbol.iterator])r=Array.from(t,(l,u)=>e(l,u,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let u=0,c=l.length;u<c;u++){const h=l[u];r[u]=e(t[h],h,u,i)}}else r=[];return r}const Zl=t=>t?wm(t)?Ua(t):Zl(t.parent):null,yi=Vt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zl(t.parent),$root:t=>Zl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>rm(t),$forceUpdate:t=>t.f||(t.f=()=>{zu(t.update)}),$nextTick:t=>t.n||(t.n=Ku.bind(t.proxy)),$watch:t=>pb.bind(t)}),kl=(t,e)=>t!==je&&!t.__isScriptSetup&&Ue(t,e),G_={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:u}=t;let c;if(e[0]!=="$"){const y=o[e];if(y!==void 0)switch(y){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(kl(s,e))return o[e]=1,s[e];if(r!==je&&Ue(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&Ue(c,e))return o[e]=3,i[e];if(n!==je&&Ue(n,e))return o[e]=4,n[e];eu&&(o[e]=0)}}const h=yi[e];let p,g;if(h)return e==="$attrs"&&Ct(t.attrs,"get",""),h(t);if((p=l.__cssModules)&&(p=p[e]))return p;if(n!==je&&Ue(n,e))return o[e]=4,n[e];if(g=u.config.globalProperties,Ue(g,e))return g[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return kl(r,e)?(r[e]=n,!0):s!==je&&Ue(s,e)?(s[e]=n,!0):Ue(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let l;return!!n[o]||t!==je&&Ue(t,o)||kl(e,o)||(l=i[0])&&Ue(l,o)||Ue(s,o)||Ue(yi,o)||Ue(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ue(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Yd(t){return pe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let eu=!0;function W_(t){const e=rm(t),n=t.proxy,s=t.ctx;eu=!1,e.beforeCreate&&Jd(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:u,inject:c,created:h,beforeMount:p,mounted:g,beforeUpdate:y,updated:w,activated:E,deactivated:x,beforeDestroy:N,beforeUnmount:R,destroyed:C,unmounted:D,render:j,renderTracked:L,renderTriggered:_,errorCaptured:T,serverPrefetch:b,expose:I,inheritAttrs:P,components:V,directives:A,filters:Oe}=e;if(c&&Q_(c,s,null),o)for(const Se in o){const Ie=o[Se];we(Ie)&&(s[Se]=Ie.bind(n))}if(r){const Se=r.call(n,n);ze(Se)&&(t.data=Da(Se))}if(eu=!0,i)for(const Se in i){const Ie=i[Se],Mt=we(Ie)?Ie.bind(n,n):we(Ie.get)?Ie.get.bind(n,n):wn,Je=!we(Ie)&&we(Ie.set)?Ie.set.bind(n):wn,Fe=Re({get:Mt,set:Je});Object.defineProperty(s,Se,{enumerable:!0,configurable:!0,get:()=>Fe.value,set:We=>Fe.value=We})}if(l)for(const Se in l)sm(l[Se],s,n,Se);if(u){const Se=we(u)?u.call(n):u;Reflect.ownKeys(Se).forEach(Ie=>{Mo(Ie,Se[Ie])})}h&&Jd(h,t,"c");function Ge(Se,Ie){pe(Ie)?Ie.forEach(Mt=>Se(Mt.bind(n))):Ie&&Se(Ie.bind(n))}if(Ge(U_,p),Ge(Ot,g),Ge($_,y),Ge(F_,w),Ge(O_,E),Ge(M_,x),Ge(H_,T),Ge(q_,L),Ge(j_,_),Ge(Xp,R),Ge(Zp,D),Ge(B_,b),pe(I))if(I.length){const Se=t.exposed||(t.exposed={});I.forEach(Ie=>{Object.defineProperty(Se,Ie,{get:()=>n[Ie],set:Mt=>n[Ie]=Mt})})}else t.exposed||(t.exposed={});j&&t.render===wn&&(t.render=j),P!=null&&(t.inheritAttrs=P),V&&(t.components=V),A&&(t.directives=A),b&&Qp(t)}function Q_(t,e,n=wn){pe(t)&&(t=tu(t));for(const s in t){const r=t[s];let i;ze(r)?"default"in r?i=dn(r.from||s,r.default,!0):i=dn(r.from||s):i=dn(r),Dt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Jd(t,e,n){Sn(pe(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function sm(t,e,n,s){let r=s.includes(".")?gm(n,s):()=>n[s];if(at(t)){const i=e[t];we(i)&&Fn(r,i)}else if(we(t))Fn(r,t.bind(n));else if(ze(t))if(pe(t))t.forEach(i=>sm(i,e,n,s));else{const i=we(t.handler)?t.handler.bind(n):e[t.handler];we(i)&&Fn(r,i,t)}}function rm(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let u;return l?u=l:!r.length&&!n&&!s?u=e:(u={},r.length&&r.forEach(c=>ta(u,c,o,!0)),ta(u,e,o)),ze(e)&&i.set(e,u),u}function ta(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&ta(t,i,n,!0),r&&r.forEach(o=>ta(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=Y_[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const Y_={data:Xd,props:Zd,emits:Zd,methods:oi,computed:oi,beforeCreate:Ut,created:Ut,beforeMount:Ut,mounted:Ut,beforeUpdate:Ut,updated:Ut,beforeDestroy:Ut,beforeUnmount:Ut,destroyed:Ut,unmounted:Ut,activated:Ut,deactivated:Ut,errorCaptured:Ut,serverPrefetch:Ut,components:oi,directives:oi,watch:X_,provide:Xd,inject:J_};function Xd(t,e){return e?t?function(){return Vt(we(t)?t.call(this,this):t,we(e)?e.call(this,this):e)}:e:t}function J_(t,e){return oi(tu(t),tu(e))}function tu(t){if(pe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ut(t,e){return t?[...new Set([].concat(t,e))]:e}function oi(t,e){return t?Vt(Object.create(null),t,e):e}function Zd(t,e){return t?pe(t)&&pe(e)?[...new Set([...t,...e])]:Vt(Object.create(null),Yd(t),Yd(e??{})):e}function X_(t,e){if(!t)return e;if(!e)return t;const n=Vt(Object.create(null),t);for(const s in e)n[s]=Ut(t[s],e[s]);return n}function im(){return{app:null,config:{isNativeTag:Hv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Z_=0;function eb(t,e){return function(s,r=null){we(s)||(s=Vt({},s)),r!=null&&!ze(r)&&(r=null);const i=im(),o=new WeakSet,l=[];let u=!1;const c=i.app={_uid:Z_++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:Ob,get config(){return i.config},set config(h){},use(h,...p){return o.has(h)||(h&&we(h.install)?(o.add(h),h.install(c,...p)):we(h)&&(o.add(h),h(c,...p))),c},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),c},component(h,p){return p?(i.components[h]=p,c):i.components[h]},directive(h,p){return p?(i.directives[h]=p,c):i.directives[h]},mount(h,p,g){if(!u){const y=c._ceVNode||nt(s,r);return y.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(y,h,g),u=!0,c._container=h,h.__vue_app__=c,Ua(y.component)}},onUnmount(h){l.push(h)},unmount(){u&&(Sn(l,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(h,p){return i.provides[h]=p,c},runWithContext(h){const p=yr;yr=c;try{return h()}finally{yr=p}}};return c}}let yr=null;function Mo(t,e){if(kt){let n=kt.provides;const s=kt.parent&&kt.parent.provides;s===n&&(n=kt.provides=Object.create(s)),n[t]=e}}function dn(t,e,n=!1){const s=kt||Yt;if(s||yr){let r=yr?yr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&we(e)?e.call(s&&s.proxy):e}}const om={},am=()=>Object.create(om),lm=t=>Object.getPrototypeOf(t)===om;function tb(t,e,n,s=!1){const r={},i=am();t.propsDefaults=Object.create(null),um(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:$p(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function nb(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=Le(r),[u]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let p=0;p<h.length;p++){let g=h[p];if(Ma(t.emitsOptions,g))continue;const y=e[g];if(u)if(Ue(i,g))y!==i[g]&&(i[g]=y,c=!0);else{const w=on(g);r[w]=nu(u,l,w,y,t,!1)}else y!==i[g]&&(i[g]=y,c=!0)}}}else{um(t,e,r,i)&&(c=!0);let h;for(const p in l)(!e||!Ue(e,p)&&((h=Js(p))===p||!Ue(e,h)))&&(u?n&&(n[p]!==void 0||n[h]!==void 0)&&(r[p]=nu(u,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!e||!Ue(e,p))&&(delete i[p],c=!0)}c&&On(t.attrs,"set","")}function um(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let u in e){if(fi(u))continue;const c=e[u];let h;r&&Ue(r,h=on(u))?!i||!i.includes(h)?n[h]=c:(l||(l={}))[h]=c:Ma(t.emitsOptions,u)||(!(u in s)||c!==s[u])&&(s[u]=c,o=!0)}if(i){const u=Le(n),c=l||je;for(let h=0;h<i.length;h++){const p=i[h];n[p]=nu(r,u,p,c[p],t,!Ue(c,p))}}return o}function nu(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Ue(o,"default");if(l&&s===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&we(u)){const{propsDefaults:c}=r;if(n in c)s=c[n];else{const h=Gi(r);s=c[n]=u.call(null,e),h()}}else s=u;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===Js(n))&&(s=!0))}return s}const sb=new WeakMap;function cm(t,e,n=!1){const s=n?sb:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let u=!1;if(!we(t)){const h=p=>{u=!0;const[g,y]=cm(p,e,!0);Vt(o,g),y&&l.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!u)return ze(t)&&s.set(t,fr),fr;if(pe(i))for(let h=0;h<i.length;h++){const p=on(i[h]);eh(p)&&(o[p]=je)}else if(i)for(const h in i){const p=on(h);if(eh(p)){const g=i[h],y=o[p]=pe(g)||we(g)?{type:g}:Vt({},g),w=y.type;let E=!1,x=!0;if(pe(w))for(let N=0;N<w.length;++N){const R=w[N],C=we(R)&&R.name;if(C==="Boolean"){E=!0;break}else C==="String"&&(x=!1)}else E=we(w)&&w.name==="Boolean";y[0]=E,y[1]=x,(E||Ue(y,"default"))&&l.push(p)}}const c=[o,l];return ze(t)&&s.set(t,c),c}function eh(t){return t[0]!=="$"&&!fi(t)}const Wu=t=>t[0]==="_"||t==="$stable",Qu=t=>pe(t)?t.map(bn):[bn(t)],rb=(t,e,n)=>{if(e._n)return e;const s=ki((...r)=>Qu(e(...r)),n);return s._c=!1,s},dm=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Wu(r))continue;const i=t[r];if(we(i))e[r]=rb(r,i,s);else if(i!=null){const o=Qu(i);e[r]=()=>o}}},hm=(t,e)=>{const n=Qu(e);t.slots.default=()=>n},fm=(t,e,n)=>{for(const s in e)(n||!Wu(s))&&(t[s]=e[s])},ib=(t,e,n)=>{const s=t.slots=am();if(t.vnode.shapeFlag&32){const r=e._;r?(fm(s,e,n),n&&wp(s,"_",r,!0)):dm(e,s)}else e&&hm(t,e)},ob=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=je;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:fm(r,e,n):(i=!e.$stable,dm(e,r)),o=e}else e&&(hm(t,e),o={default:1});if(i)for(const l in r)!Wu(l)&&o[l]==null&&delete r[l]},Qt=wb;function ab(t){return lb(t)}function lb(t,e){const n=Pa();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:u,setText:c,setElementText:h,parentNode:p,nextSibling:g,setScopeId:y=wn,insertStaticContent:w}=t,E=(S,k,O,H=null,W=null,K=null,ne=void 0,X=null,J=!!k.dynamicChildren)=>{if(S===k)return;S&&!ri(S,k)&&(H=q(S),We(S,W,K,!0),S=null),k.patchFlag===-2&&(J=!1,k.dynamicChildren=null);const{type:Y,ref:de,shapeFlag:te}=k;switch(Y){case La:x(S,k,O,H);break;case Es:N(S,k,O,H);break;case Dl:S==null&&R(k,O,H,ne);break;case ke:V(S,k,O,H,W,K,ne,X,J);break;default:te&1?j(S,k,O,H,W,K,ne,X,J):te&6?A(S,k,O,H,W,K,ne,X,J):(te&64||te&128)&&Y.process(S,k,O,H,W,K,ne,X,J,le)}de!=null&&W&&ea(de,S&&S.ref,K,k||S,!k)},x=(S,k,O,H)=>{if(S==null)s(k.el=l(k.children),O,H);else{const W=k.el=S.el;k.children!==S.children&&c(W,k.children)}},N=(S,k,O,H)=>{S==null?s(k.el=u(k.children||""),O,H):k.el=S.el},R=(S,k,O,H)=>{[S.el,S.anchor]=w(S.children,k,O,H,S.el,S.anchor)},C=({el:S,anchor:k},O,H)=>{let W;for(;S&&S!==k;)W=g(S),s(S,O,H),S=W;s(k,O,H)},D=({el:S,anchor:k})=>{let O;for(;S&&S!==k;)O=g(S),r(S),S=O;r(k)},j=(S,k,O,H,W,K,ne,X,J)=>{k.type==="svg"?ne="svg":k.type==="math"&&(ne="mathml"),S==null?L(k,O,H,W,K,ne,X,J):b(S,k,W,K,ne,X,J)},L=(S,k,O,H,W,K,ne,X)=>{let J,Y;const{props:de,shapeFlag:te,transition:ce,dirs:ye}=S;if(J=S.el=o(S.type,K,de&&de.is,de),te&8?h(J,S.children):te&16&&T(S.children,J,null,H,W,xl(S,K),ne,X),ye&&Us(S,null,H,"created"),_(J,S,S.scopeId,ne,H),de){for(const Ee in de)Ee!=="value"&&!fi(Ee)&&i(J,Ee,null,de[Ee],K,H);"value"in de&&i(J,"value",null,de.value,K),(Y=de.onVnodeBeforeMount)&&yn(Y,H,S)}ye&&Us(S,null,H,"beforeMount");const fe=ub(W,ce);fe&&ce.beforeEnter(J),s(J,k,O),((Y=de&&de.onVnodeMounted)||fe||ye)&&Qt(()=>{Y&&yn(Y,H,S),fe&&ce.enter(J),ye&&Us(S,null,H,"mounted")},W)},_=(S,k,O,H,W)=>{if(O&&y(S,O),H)for(let K=0;K<H.length;K++)y(S,H[K]);if(W){let K=W.subTree;if(k===K||vm(K.type)&&(K.ssContent===k||K.ssFallback===k)){const ne=W.vnode;_(S,ne,ne.scopeId,ne.slotScopeIds,W.parent)}}},T=(S,k,O,H,W,K,ne,X,J=0)=>{for(let Y=J;Y<S.length;Y++){const de=S[Y]=X?as(S[Y]):bn(S[Y]);E(null,de,k,O,H,W,K,ne,X)}},b=(S,k,O,H,W,K,ne)=>{const X=k.el=S.el;let{patchFlag:J,dynamicChildren:Y,dirs:de}=k;J|=S.patchFlag&16;const te=S.props||je,ce=k.props||je;let ye;if(O&&$s(O,!1),(ye=ce.onVnodeBeforeUpdate)&&yn(ye,O,k,S),de&&Us(k,S,O,"beforeUpdate"),O&&$s(O,!0),(te.innerHTML&&ce.innerHTML==null||te.textContent&&ce.textContent==null)&&h(X,""),Y?I(S.dynamicChildren,Y,X,O,H,xl(k,W),K):ne||Ie(S,k,X,null,O,H,xl(k,W),K,!1),J>0){if(J&16)P(X,te,ce,O,W);else if(J&2&&te.class!==ce.class&&i(X,"class",null,ce.class,W),J&4&&i(X,"style",te.style,ce.style,W),J&8){const fe=k.dynamicProps;for(let Ee=0;Ee<fe.length;Ee++){const xe=fe[Ee],Et=te[xe],mt=ce[xe];(mt!==Et||xe==="value")&&i(X,xe,Et,mt,W,O)}}J&1&&S.children!==k.children&&h(X,k.children)}else!ne&&Y==null&&P(X,te,ce,O,W);((ye=ce.onVnodeUpdated)||de)&&Qt(()=>{ye&&yn(ye,O,k,S),de&&Us(k,S,O,"updated")},H)},I=(S,k,O,H,W,K,ne)=>{for(let X=0;X<k.length;X++){const J=S[X],Y=k[X],de=J.el&&(J.type===ke||!ri(J,Y)||J.shapeFlag&198)?p(J.el):O;E(J,Y,de,null,H,W,K,ne,!0)}},P=(S,k,O,H,W)=>{if(k!==O){if(k!==je)for(const K in k)!fi(K)&&!(K in O)&&i(S,K,k[K],null,W,H);for(const K in O){if(fi(K))continue;const ne=O[K],X=k[K];ne!==X&&K!=="value"&&i(S,K,X,ne,W,H)}"value"in O&&i(S,"value",k.value,O.value,W)}},V=(S,k,O,H,W,K,ne,X,J)=>{const Y=k.el=S?S.el:l(""),de=k.anchor=S?S.anchor:l("");let{patchFlag:te,dynamicChildren:ce,slotScopeIds:ye}=k;ye&&(X=X?X.concat(ye):ye),S==null?(s(Y,O,H),s(de,O,H),T(k.children||[],O,de,W,K,ne,X,J)):te>0&&te&64&&ce&&S.dynamicChildren?(I(S.dynamicChildren,ce,O,W,K,ne,X),(k.key!=null||W&&k===W.subTree)&&pm(S,k,!0)):Ie(S,k,O,de,W,K,ne,X,J)},A=(S,k,O,H,W,K,ne,X,J)=>{k.slotScopeIds=X,S==null?k.shapeFlag&512?W.ctx.activate(k,O,H,ne,J):Oe(k,O,H,W,K,ne,J):dt(S,k,J)},Oe=(S,k,O,H,W,K,ne)=>{const X=S.component=Cb(S,H,W);if(Yp(S)&&(X.ctx.renderer=le),Pb(X,!1,ne),X.asyncDep){if(W&&W.registerDep(X,Ge,ne),!S.el){const J=X.subTree=nt(Es);N(null,J,k,O)}}else Ge(X,S,k,O,W,K,ne)},dt=(S,k,O)=>{const H=k.component=S.component;if(_b(S,k,O))if(H.asyncDep&&!H.asyncResolved){Se(H,k,O);return}else H.next=k,H.update();else k.el=S.el,H.vnode=k},Ge=(S,k,O,H,W,K,ne)=>{const X=()=>{if(S.isMounted){let{next:te,bu:ce,u:ye,parent:fe,vnode:Ee}=S;{const Tt=mm(S);if(Tt){te&&(te.el=Ee.el,Se(S,te,ne)),Tt.asyncDep.then(()=>{S.isUnmounted||X()});return}}let xe=te,Et;$s(S,!1),te?(te.el=Ee.el,Se(S,te,ne)):te=Ee,ce&&Oo(ce),(Et=te.props&&te.props.onVnodeBeforeUpdate)&&yn(Et,fe,te,Ee),$s(S,!0);const mt=nh(S),Zt=S.subTree;S.subTree=mt,E(Zt,mt,p(Zt.el),q(Zt),S,W,K),te.el=mt.el,xe===null&&bb(S,mt.el),ye&&Qt(ye,W),(Et=te.props&&te.props.onVnodeUpdated)&&Qt(()=>yn(Et,fe,te,Ee),W)}else{let te;const{el:ce,props:ye}=k,{bm:fe,m:Ee,parent:xe,root:Et,type:mt}=S,Zt=gi(k);$s(S,!1),fe&&Oo(fe),!Zt&&(te=ye&&ye.onVnodeBeforeMount)&&yn(te,xe,k),$s(S,!0);{Et.ce&&Et.ce._injectChildStyle(mt);const Tt=S.subTree=nh(S);E(null,Tt,O,H,S,W,K),k.el=Tt.el}if(Ee&&Qt(Ee,W),!Zt&&(te=ye&&ye.onVnodeMounted)){const Tt=k;Qt(()=>yn(te,xe,Tt),W)}(k.shapeFlag&256||xe&&gi(xe.vnode)&&xe.vnode.shapeFlag&256)&&S.a&&Qt(S.a,W),S.isMounted=!0,k=O=H=null}};S.scope.on();const J=S.effect=new Ap(X);S.scope.off();const Y=S.update=J.run.bind(J),de=S.job=J.runIfDirty.bind(J);de.i=S,de.id=S.uid,J.scheduler=()=>zu(de),$s(S,!0),Y()},Se=(S,k,O)=>{k.component=S;const H=S.vnode.props;S.vnode=k,S.next=null,nb(S,k.props,H,O),ob(S,k.children,O),qn(),Wd(S),Hn()},Ie=(S,k,O,H,W,K,ne,X,J=!1)=>{const Y=S&&S.children,de=S?S.shapeFlag:0,te=k.children,{patchFlag:ce,shapeFlag:ye}=k;if(ce>0){if(ce&128){Je(Y,te,O,H,W,K,ne,X,J);return}else if(ce&256){Mt(Y,te,O,H,W,K,ne,X,J);return}}ye&8?(de&16&&Bt(Y,W,K),te!==Y&&h(O,te)):de&16?ye&16?Je(Y,te,O,H,W,K,ne,X,J):Bt(Y,W,K,!0):(de&8&&h(O,""),ye&16&&T(te,O,H,W,K,ne,X,J))},Mt=(S,k,O,H,W,K,ne,X,J)=>{S=S||fr,k=k||fr;const Y=S.length,de=k.length,te=Math.min(Y,de);let ce;for(ce=0;ce<te;ce++){const ye=k[ce]=J?as(k[ce]):bn(k[ce]);E(S[ce],ye,O,null,W,K,ne,X,J)}Y>de?Bt(S,W,K,!0,!1,te):T(k,O,H,W,K,ne,X,J,te)},Je=(S,k,O,H,W,K,ne,X,J)=>{let Y=0;const de=k.length;let te=S.length-1,ce=de-1;for(;Y<=te&&Y<=ce;){const ye=S[Y],fe=k[Y]=J?as(k[Y]):bn(k[Y]);if(ri(ye,fe))E(ye,fe,O,null,W,K,ne,X,J);else break;Y++}for(;Y<=te&&Y<=ce;){const ye=S[te],fe=k[ce]=J?as(k[ce]):bn(k[ce]);if(ri(ye,fe))E(ye,fe,O,null,W,K,ne,X,J);else break;te--,ce--}if(Y>te){if(Y<=ce){const ye=ce+1,fe=ye<de?k[ye].el:H;for(;Y<=ce;)E(null,k[Y]=J?as(k[Y]):bn(k[Y]),O,fe,W,K,ne,X,J),Y++}}else if(Y>ce)for(;Y<=te;)We(S[Y],W,K,!0),Y++;else{const ye=Y,fe=Y,Ee=new Map;for(Y=fe;Y<=ce;Y++){const gt=k[Y]=J?as(k[Y]):bn(k[Y]);gt.key!=null&&Ee.set(gt.key,Y)}let xe,Et=0;const mt=ce-fe+1;let Zt=!1,Tt=0;const es=new Array(mt);for(Y=0;Y<mt;Y++)es[Y]=0;for(Y=ye;Y<=te;Y++){const gt=S[Y];if(Et>=mt){We(gt,W,K,!0);continue}let en;if(gt.key!=null)en=Ee.get(gt.key);else for(xe=fe;xe<=ce;xe++)if(es[xe-fe]===0&&ri(gt,k[xe])){en=xe;break}en===void 0?We(gt,W,K,!0):(es[en-fe]=Y+1,en>=Tt?Tt=en:Zt=!0,E(gt,k[en],O,null,W,K,ne,X,J),Et++)}const Hr=Zt?cb(es):fr;for(xe=Hr.length-1,Y=mt-1;Y>=0;Y--){const gt=fe+Y,en=k[gt],lo=gt+1<de?k[gt+1].el:H;es[Y]===0?E(null,en,O,lo,W,K,ne,X,J):Zt&&(xe<0||Y!==Hr[xe]?Fe(en,O,lo,2):xe--)}}},Fe=(S,k,O,H,W=null)=>{const{el:K,type:ne,transition:X,children:J,shapeFlag:Y}=S;if(Y&6){Fe(S.component.subTree,k,O,H);return}if(Y&128){S.suspense.move(k,O,H);return}if(Y&64){ne.move(S,k,O,le);return}if(ne===ke){s(K,k,O);for(let te=0;te<J.length;te++)Fe(J[te],k,O,H);s(S.anchor,k,O);return}if(ne===Dl){C(S,k,O);return}if(H!==2&&Y&1&&X)if(H===0)X.beforeEnter(K),s(K,k,O),Qt(()=>X.enter(K),W);else{const{leave:te,delayLeave:ce,afterLeave:ye}=X,fe=()=>{S.ctx.isUnmounted?r(K):s(K,k,O)},Ee=()=>{te(K,()=>{fe(),ye&&ye()})};ce?ce(K,fe,Ee):Ee()}else s(K,k,O)},We=(S,k,O,H=!1,W=!1)=>{const{type:K,props:ne,ref:X,children:J,dynamicChildren:Y,shapeFlag:de,patchFlag:te,dirs:ce,cacheIndex:ye}=S;if(te===-2&&(W=!1),X!=null&&(qn(),ea(X,null,O,S,!0),Hn()),ye!=null&&(k.renderCache[ye]=void 0),de&256){k.ctx.deactivate(S);return}const fe=de&1&&ce,Ee=!gi(S);let xe;if(Ee&&(xe=ne&&ne.onVnodeBeforeUnmount)&&yn(xe,k,S),de&6)gn(S.component,O,H);else{if(de&128){S.suspense.unmount(O,H);return}fe&&Us(S,null,k,"beforeUnmount"),de&64?S.type.remove(S,k,O,le,H):Y&&!Y.hasOnce&&(K!==ke||te>0&&te&64)?Bt(Y,k,O,!1,!0):(K===ke&&te&384||!W&&de&16)&&Bt(J,k,O),H&&Xe(S)}(Ee&&(xe=ne&&ne.onVnodeUnmounted)||fe)&&Qt(()=>{xe&&yn(xe,k,S),fe&&Us(S,null,k,"unmounted")},O)},Xe=S=>{const{type:k,el:O,anchor:H,transition:W}=S;if(k===ke){Zn(O,H);return}if(k===Dl){D(S);return}const K=()=>{r(O),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(S.shapeFlag&1&&W&&!W.persisted){const{leave:ne,delayLeave:X}=W,J=()=>ne(O,K);X?X(S.el,K,J):J()}else K()},Zn=(S,k)=>{let O;for(;S!==k;)O=g(S),r(S),S=O;r(k)},gn=(S,k,O)=>{const{bum:H,scope:W,job:K,subTree:ne,um:X,m:J,a:Y,parent:de,slots:{__:te}}=S;th(J),th(Y),H&&Oo(H),de&&pe(te)&&te.forEach(ce=>{de.renderCache[ce]=void 0}),W.stop(),K&&(K.flags|=8,We(ne,S,k,O)),X&&Qt(X,k),Qt(()=>{S.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},Bt=(S,k,O,H=!1,W=!1,K=0)=>{for(let ne=K;ne<S.length;ne++)We(S[ne],k,O,H,W)},q=S=>{if(S.shapeFlag&6)return q(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const k=g(S.anchor||S.el),O=k&&k[V_];return O?g(O):k};let re=!1;const se=(S,k,O)=>{S==null?k._vnode&&We(k._vnode,null,null,!0):E(k._vnode||null,S,k,null,null,null,O),k._vnode=S,re||(re=!0,Wd(),Kp(),re=!1)},le={p:E,um:We,m:Fe,r:Xe,mt:Oe,mc:T,pc:Ie,pbc:I,n:q,o:t};return{render:se,hydrate:void 0,createApp:eb(se)}}function xl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function $s({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ub(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function pm(t,e,n=!1){const s=t.children,r=e.children;if(pe(s)&&pe(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=as(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&pm(o,l)),l.type===La&&(l.el=o.el),l.type===Es&&!l.el&&(l.el=o.el)}}function cb(t){const e=t.slice(),n=[0];let s,r,i,o,l;const u=t.length;for(s=0;s<u;s++){const c=t[s];if(c!==0){if(r=n[n.length-1],t[r]<c){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<c?i=l+1:o=l;c<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function mm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:mm(e)}function th(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const db=Symbol.for("v-scx"),hb=()=>dn(db);function fb(t,e){return Yu(t,null,e)}function Fn(t,e,n){return Yu(t,e,n)}function Yu(t,e,n=je){const{immediate:s,deep:r,flush:i,once:o}=n,l=Vt({},n),u=e&&s||!e&&i!=="post";let c;if(Di){if(i==="sync"){const y=hb();c=y.__watcherHandles||(y.__watcherHandles=[])}else if(!u){const y=()=>{};return y.stop=wn,y.resume=wn,y.pause=wn,y}}const h=kt;l.call=(y,w,E)=>Sn(y,h,w,E);let p=!1;i==="post"?l.scheduler=y=>{Qt(y,h&&h.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(y,w)=>{w?y():zu(y)}),l.augmentJob=y=>{e&&(y.flags|=4),p&&(y.flags|=2,h&&(y.id=h.uid,y.i=h))};const g=P_(t,e,l);return Di&&(c?c.push(g):u&&g()),g}function pb(t,e,n){const s=this.proxy,r=at(t)?t.includes(".")?gm(s,t):()=>s[t]:t.bind(s,s);let i;we(e)?i=e:(i=e.handler,n=e);const o=Gi(this),l=Yu(r,i.bind(s),n);return o(),l}function gm(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const mb=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${on(e)}Modifiers`]||t[`${Js(e)}Modifiers`];function gb(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||je;let r=n;const i=e.startsWith("update:"),o=i&&mb(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>at(h)?h.trim():h)),o.number&&(r=n.map(Qo)));let l,u=s[l=Al(e)]||s[l=Al(on(e))];!u&&i&&(u=s[l=Al(Js(e))]),u&&Sn(u,t,6,r);const c=s[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Sn(c,t,6,r)}}function ym(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!we(t)){const u=c=>{const h=ym(c,e,!0);h&&(l=!0,Vt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!l?(ze(t)&&s.set(t,null),null):(pe(i)?i.forEach(u=>o[u]=null):Vt(o,i),ze(t)&&s.set(t,o),o)}function Ma(t,e){return!t||!Ra(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ue(t,e[0].toLowerCase()+e.slice(1))||Ue(t,Js(e))||Ue(t,e))}function nh(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:u,render:c,renderCache:h,props:p,data:g,setupState:y,ctx:w,inheritAttrs:E}=t,x=Zo(t);let N,R;try{if(n.shapeFlag&4){const D=r||s,j=D;N=bn(c.call(j,D,h,p,y,g,w)),R=l}else{const D=e;N=bn(D.length>1?D(p,{attrs:l,slots:o,emit:u}):D(p,null)),R=e.props?l:yb(l)}}catch(D){vi.length=0,Va(D,t,1),N=nt(Es)}let C=N;if(R&&E!==!1){const D=Object.keys(R),{shapeFlag:j}=C;D.length&&j&7&&(i&&D.some(Nu)&&(R=vb(R,i)),C=Er(C,R,!1,!0))}return n.dirs&&(C=Er(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&Gu(C,n.transition),N=C,Zo(x),N}const yb=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ra(n))&&((e||(e={}))[n]=t[n]);return e},vb=(t,e)=>{const n={};for(const s in t)(!Nu(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function _b(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:u}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return s?sh(s,o,c):!!o;if(u&8){const h=e.dynamicProps;for(let p=0;p<h.length;p++){const g=h[p];if(o[g]!==s[g]&&!Ma(c,g))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?sh(s,o,c):!0:!!o;return!1}function sh(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Ma(n,i))return!0}return!1}function bb({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const vm=t=>t.__isSuspense;function wb(t,e){e&&e.pendingBranch?pe(t)?e.effects.push(...t):e.effects.push(t):D_(t)}const ke=Symbol.for("v-fgt"),La=Symbol.for("v-txt"),Es=Symbol.for("v-cmt"),Dl=Symbol.for("v-stc"),vi=[];let Jt=null;function $(t=!1){vi.push(Jt=t?null:[])}function Eb(){vi.pop(),Jt=vi[vi.length-1]||null}let xi=1;function rh(t,e=!1){xi+=t,t<0&&Jt&&e&&(Jt.hasOnce=!0)}function _m(t){return t.dynamicChildren=xi>0?Jt||fr:null,Eb(),xi>0&&Jt&&Jt.push(t),t}function Q(t,e,n,s,r,i){return _m(d(t,e,n,s,r,i,!0))}function Ht(t,e,n,s,r){return _m(nt(t,e,n,s,r,!0))}function na(t){return t?t.__v_isVNode===!0:!1}function ri(t,e){return t.type===e.type&&t.key===e.key}const bm=({key:t})=>t??null,Lo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?at(t)||Dt(t)||we(t)?{i:Yt,r:t,k:e,f:!!n}:t:null);function d(t,e=null,n=null,s=0,r=null,i=t===ke?0:1,o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&bm(e),ref:e&&Lo(e),scopeId:Gp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Yt};return l?(Ju(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=at(n)?8:16),xi>0&&!o&&Jt&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Jt.push(u),u}const nt=Tb;function Tb(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===z_)&&(t=Es),na(t)){const l=Er(t,e,!0);return n&&Ju(l,n),xi>0&&!i&&Jt&&(l.shapeFlag&6?Jt[Jt.indexOf(t)]=l:Jt.push(l)),l.patchFlag=-2,l}if(Nb(t)&&(t=t.__vccOpts),e){e=Ib(e);let{class:l,style:u}=e;l&&!at(l)&&(e.class=xt(l)),ze(u)&&(Hu(u)&&!pe(u)&&(u=Vt({},u)),e.style=ka(u))}const o=at(t)?1:vm(t)?128:N_(t)?64:ze(t)?4:we(t)?2:0;return d(t,e,n,s,r,o,i,!0)}function Ib(t){return t?Hu(t)||lm(t)?Vt({},t):t:null}function Er(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:u}=t,c=e?Ab(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&bm(c),ref:e&&e.ref?n&&i?pe(i)?i.concat(Lo(e)):[i,Lo(e)]:Lo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ke?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Er(t.ssContent),ssFallback:t.ssFallback&&Er(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&s&&Gu(h,u.clone(h)),h}function tt(t=" ",e=0){return nt(La,null,t,e)}function qe(t="",e=!1){return e?($(),Ht(Es,null,t)):nt(Es,null,t)}function bn(t){return t==null||typeof t=="boolean"?nt(Es):pe(t)?nt(ke,null,t.slice()):na(t)?as(t):nt(La,null,String(t))}function as(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Er(t)}function Ju(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(pe(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Ju(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!lm(e)?e._ctx=Yt:r===3&&Yt&&(Yt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else we(e)?(e={default:e,_ctx:Yt},n=32):(e=String(e),s&64?(n=16,e=[tt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ab(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=xt([e.class,s.class]));else if(r==="style")e.style=ka([e.style,s.style]);else if(Ra(r)){const i=e[r],o=s[r];o&&i!==o&&!(pe(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function yn(t,e,n,s=null){Sn(t,e,7,[n,s])}const Rb=im();let Sb=0;function Cb(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Rb,i={uid:Sb++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new n_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cm(s,r),emitsOptions:ym(s,r),emit:null,emitted:null,propsDefaults:je,inheritAttrs:s.inheritAttrs,ctx:je,data:je,props:je,attrs:je,slots:je,refs:je,setupState:je,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=gb.bind(null,i),t.ce&&t.ce(i),i}let kt=null,sa,su;{const t=Pa(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};sa=e("__VUE_INSTANCE_SETTERS__",n=>kt=n),su=e("__VUE_SSR_SETTERS__",n=>Di=n)}const Gi=t=>{const e=kt;return sa(t),t.scope.on(),()=>{t.scope.off(),sa(e)}},ih=()=>{kt&&kt.scope.off(),sa(null)};function wm(t){return t.vnode.shapeFlag&4}let Di=!1;function Pb(t,e=!1,n=!1){e&&su(e);const{props:s,children:r}=t.vnode,i=wm(t);tb(t,s,i,e),ib(t,r,n||e);const o=i?kb(t,e):void 0;return e&&su(!1),o}function kb(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,G_);const{setup:s}=n;if(s){qn();const r=t.setupContext=s.length>1?Db(t):null,i=Gi(t),o=zi(s,t,0,[t.props,r]),l=vp(o);if(Hn(),i(),(l||t.sp)&&!gi(t)&&Qp(t),l){if(o.then(ih,ih),e)return o.then(u=>{oh(t,u)}).catch(u=>{Va(u,t,0)});t.asyncDep=o}else oh(t,o)}else Em(t)}function oh(t,e,n){we(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ze(e)&&(t.setupState=jp(e)),Em(t)}function Em(t,e,n){const s=t.type;t.render||(t.render=s.render||wn);{const r=Gi(t);qn();try{W_(t)}finally{Hn(),r()}}}const xb={get(t,e){return Ct(t,"get",""),t[e]}};function Db(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,xb),slots:t.slots,emit:t.emit,expose:e}}function Ua(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(jp(E_(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in yi)return yi[n](t)},has(e,n){return n in e||n in yi}})):t.proxy}function Vb(t,e=!0){return we(t)?t.displayName||t.name:t.name||e&&t.__name}function Nb(t){return we(t)&&"__vccOpts"in t}const Re=(t,e)=>S_(t,e,Di);function Tm(t,e,n){const s=arguments.length;return s===2?ze(e)&&!pe(e)?na(e)?nt(t,null,[e]):nt(t,e):nt(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&na(n)&&(n=[n]),nt(t,e,n))}const Ob="3.5.15";/**
* @vue/runtime-dom v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ru;const ah=typeof window<"u"&&window.trustedTypes;if(ah)try{ru=ah.createPolicy("vue",{createHTML:t=>t})}catch{}const Im=ru?t=>ru.createHTML(t):t=>t,Mb="http://www.w3.org/2000/svg",Lb="http://www.w3.org/1998/Math/MathML",Nn=typeof document<"u"?document:null,lh=Nn&&Nn.createElement("template"),Ub={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Nn.createElementNS(Mb,t):e==="mathml"?Nn.createElementNS(Lb,t):n?Nn.createElement(t,{is:n}):Nn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Nn.createTextNode(t),createComment:t=>Nn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Nn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{lh.innerHTML=Im(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=lh.content;if(s==="svg"||s==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},$b=Symbol("_vtc");function Fb(t,e,n){const s=t[$b];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const uh=Symbol("_vod"),Bb=Symbol("_vsh"),jb=Symbol(""),qb=/(^|;)\s*display\s*:/;function Hb(t,e,n){const s=t.style,r=at(n);let i=!1;if(n&&!r){if(e)if(at(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Uo(s,l,"")}else for(const o in e)n[o]==null&&Uo(s,o,"");for(const o in n)o==="display"&&(i=!0),Uo(s,o,n[o])}else if(r){if(e!==n){const o=s[jb];o&&(n+=";"+o),s.cssText=n,i=qb.test(n)}}else e&&t.removeAttribute("style");uh in t&&(t[uh]=i?s.display:"",t[Bb]&&(s.display="none"))}const ch=/\s*!important$/;function Uo(t,e,n){if(pe(n))n.forEach(s=>Uo(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Kb(t,e);ch.test(n)?t.setProperty(Js(s),n.replace(ch,""),"important"):t[s]=n}}const dh=["Webkit","Moz","ms"],Vl={};function Kb(t,e){const n=Vl[e];if(n)return n;let s=on(e);if(s!=="filter"&&s in t)return Vl[e]=s;s=Ca(s);for(let r=0;r<dh.length;r++){const i=dh[r]+s;if(i in t)return Vl[e]=i}return e}const hh="http://www.w3.org/1999/xlink";function fh(t,e,n,s,r,i=e_(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(hh,e.slice(6,e.length)):t.setAttributeNS(hh,e,n):n==null||i&&!Ep(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Rn(n)?String(n):n)}function ph(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Im(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Ep(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Ln(t,e,n,s){t.addEventListener(e,n,s)}function zb(t,e,n,s){t.removeEventListener(e,n,s)}const mh=Symbol("_vei");function Gb(t,e,n,s,r=null){const i=t[mh]||(t[mh]={}),o=i[e];if(s&&o)o.value=s;else{const[l,u]=Wb(e);if(s){const c=i[e]=Jb(s,r);Ln(t,l,c,u)}else o&&(zb(t,l,o,u),i[e]=void 0)}}const gh=/(?:Once|Passive|Capture)$/;function Wb(t){let e;if(gh.test(t)){e={};let s;for(;s=t.match(gh);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Js(t.slice(2)),e]}let Nl=0;const Qb=Promise.resolve(),Yb=()=>Nl||(Qb.then(()=>Nl=0),Nl=Date.now());function Jb(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Sn(Xb(s,n.value),e,5,[s])};return n.value=t,n.attached=Yb(),n}function Xb(t,e){if(pe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const yh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Zb=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?Fb(t,s,o):e==="style"?Hb(t,n,s):Ra(e)?Nu(e)||Gb(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ew(t,e,s,o))?(ph(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&fh(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!at(s))?ph(t,on(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),fh(t,e,s,o))};function ew(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&yh(e)&&we(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return yh(e)&&at(n)?!1:e in t}const Ts=t=>{const e=t.props["onUpdate:modelValue"]||!1;return pe(e)?n=>Oo(e,n):e};function tw(t){t.target.composing=!0}function vh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const sn=Symbol("_assign"),ue={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[sn]=Ts(r);const i=s||r.props&&r.props.type==="number";Ln(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;n&&(l=l.trim()),i&&(l=Qo(l)),t[sn](l)}),n&&Ln(t,"change",()=>{t.value=t.value.trim()}),e||(Ln(t,"compositionstart",tw),Ln(t,"compositionend",vh),Ln(t,"change",vh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[sn]=Ts(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Qo(t.value):t.value,u=e??"";l!==u&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===u)||(t.value=u))}},Tr={deep:!0,created(t,e,n){t[sn]=Ts(n),Ln(t,"change",()=>{const s=t._modelValue,r=Ir(t),i=t.checked,o=t[sn];if(pe(s)){const l=Lu(s,r),u=l!==-1;if(i&&!u)o(s.concat(r));else if(!i&&u){const c=[...s];c.splice(l,1),o(c)}}else if(Or(s)){const l=new Set(s);i?l.add(r):l.delete(r),o(l)}else o(Am(t,i))})},mounted:_h,beforeUpdate(t,e,n){t[sn]=Ts(n),_h(t,e,n)}};function _h(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(pe(e))r=Lu(e,s.props.value)>-1;else if(Or(e))r=e.has(s.props.value);else{if(e===n)return;r=Hs(e,Am(t,!0))}t.checked!==r&&(t.checked=r)}const nw={created(t,{value:e},n){t.checked=Hs(e,n.props.value),t[sn]=Ts(n),Ln(t,"change",()=>{t[sn](Ir(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[sn]=Ts(s),e!==n&&(t.checked=Hs(e,s.props.value))}},Gt={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=Or(e);Ln(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Qo(Ir(o)):Ir(o));t[sn](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Ku(()=>{t._assigning=!1})}),t[sn]=Ts(s)},mounted(t,{value:e}){bh(t,e)},beforeUpdate(t,e,n){t[sn]=Ts(n)},updated(t,{value:e}){t._assigning||bh(t,e)}};function bh(t,e){const n=t.multiple,s=pe(e);if(!(n&&!s&&!Or(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],l=Ir(o);if(n)if(s){const u=typeof l;u==="string"||u==="number"?o.selected=e.some(c=>String(c)===String(l)):o.selected=Lu(e,l)>-1}else o.selected=e.has(l);else if(Hs(Ir(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ir(t){return"_value"in t?t._value:t.value}function Am(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const sw={created(t,e,n){Co(t,e,n,null,"created")},mounted(t,e,n){Co(t,e,n,null,"mounted")},beforeUpdate(t,e,n,s){Co(t,e,n,s,"beforeUpdate")},updated(t,e,n,s){Co(t,e,n,s,"updated")}};function rw(t,e){switch(t){case"SELECT":return Gt;case"TEXTAREA":return ue;default:switch(e){case"checkbox":return Tr;case"radio":return nw;default:return ue}}}function Co(t,e,n,s,r){const o=rw(t.tagName,n.props&&n.props.type)[r];o&&o(t,e,n,s)}const iw=["ctrl","shift","alt","meta"],ow={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>iw.some(n=>t[`${n}Key`]&&!e.includes(n))},ft=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const l=ow[e[o]];if(l&&l(r,e))return}return t(r,...i)})},aw=Vt({patchProp:Zb},Ub);let wh;function lw(){return wh||(wh=ab(aw))}const uw=(...t)=>{const e=lw().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=dw(s);if(!r)return;const i=e._component;!we(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,cw(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function cw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function dw(t){return at(t)?document.querySelector(t):t}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ar=typeof document<"u";function Rm(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function hw(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Rm(t.default)}const Me=Object.assign;function Ol(t,e){const n={};for(const s in e){const r=e[s];n[s]=hn(r)?r.map(t):t(r)}return n}const _i=()=>{},hn=Array.isArray,Sm=/#/g,fw=/&/g,pw=/\//g,mw=/=/g,gw=/\?/g,Cm=/\+/g,yw=/%5B/g,vw=/%5D/g,Pm=/%5E/g,_w=/%60/g,km=/%7B/g,bw=/%7C/g,xm=/%7D/g,ww=/%20/g;function Xu(t){return encodeURI(""+t).replace(bw,"|").replace(yw,"[").replace(vw,"]")}function Ew(t){return Xu(t).replace(km,"{").replace(xm,"}").replace(Pm,"^")}function iu(t){return Xu(t).replace(Cm,"%2B").replace(ww,"+").replace(Sm,"%23").replace(fw,"%26").replace(_w,"`").replace(km,"{").replace(xm,"}").replace(Pm,"^")}function Tw(t){return iu(t).replace(mw,"%3D")}function Iw(t){return Xu(t).replace(Sm,"%23").replace(gw,"%3F")}function Aw(t){return t==null?"":Iw(t).replace(pw,"%2F")}function Vi(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Rw=/\/$/,Sw=t=>t.replace(Rw,"");function Ml(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let u=e.indexOf("?");return l<u&&l>=0&&(u=-1),u>-1&&(s=e.slice(0,u),i=e.slice(u+1,l>-1?l:e.length),r=t(i)),l>-1&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=xw(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:Vi(o)}}function Cw(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Eh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Pw(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Ar(e.matched[s],n.matched[r])&&Dm(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ar(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Dm(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!kw(t[n],e[n]))return!1;return!0}function kw(t,e){return hn(t)?Th(t,e):hn(e)?Th(e,t):t===e}function Th(t,e){return hn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function xw(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const rs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ni;(function(t){t.pop="pop",t.push="push"})(Ni||(Ni={}));var bi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(bi||(bi={}));function Dw(t){if(!t)if(ar){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Sw(t)}const Vw=/^[^#]+#/;function Nw(t,e){return t.replace(Vw,"#")+e}function Ow(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const $a=()=>({left:window.scrollX,top:window.scrollY});function Mw(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=Ow(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Ih(t,e){return(history.state?history.state.position-e:-1)+t}const ou=new Map;function Lw(t,e){ou.set(t,e)}function Uw(t){const e=ou.get(t);return ou.delete(t),e}let $w=()=>location.protocol+"//"+location.host;function Vm(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let l=r.includes(t.slice(i))?t.slice(i).length:1,u=r.slice(l);return u[0]!=="/"&&(u="/"+u),Eh(u,"")}return Eh(n,t)+s+r}function Fw(t,e,n,s){let r=[],i=[],o=null;const l=({state:g})=>{const y=Vm(t,location),w=n.value,E=e.value;let x=0;if(g){if(n.value=y,e.value=g,o&&o===w){o=null;return}x=E?g.position-E.position:0}else s(y);r.forEach(N=>{N(n.value,w,{delta:x,type:Ni.pop,direction:x?x>0?bi.forward:bi.back:bi.unknown})})};function u(){o=n.value}function c(g){r.push(g);const y=()=>{const w=r.indexOf(g);w>-1&&r.splice(w,1)};return i.push(y),y}function h(){const{history:g}=window;g.state&&g.replaceState(Me({},g.state,{scroll:$a()}),"")}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:u,listen:c,destroy:p}}function Ah(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?$a():null}}function Bw(t){const{history:e,location:n}=window,s={value:Vm(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(u,c,h){const p=t.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+u:$w()+t+u;try{e[h?"replaceState":"pushState"](c,"",g),r.value=c}catch(y){console.error(y),n[h?"replace":"assign"](g)}}function o(u,c){const h=Me({},e.state,Ah(r.value.back,u,r.value.forward,!0),c,{position:r.value.position});i(u,h,!0),s.value=u}function l(u,c){const h=Me({},r.value,e.state,{forward:u,scroll:$a()});i(h.current,h,!0);const p=Me({},Ah(s.value,u,null),{position:h.position+1},c);i(u,p,!1),s.value=u}return{location:s,state:r,push:l,replace:o}}function jw(t){t=Dw(t);const e=Bw(t),n=Fw(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Me({location:"",base:t,go:s,createHref:Nw.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function qw(t){return typeof t=="string"||t&&typeof t=="object"}function Nm(t){return typeof t=="string"||typeof t=="symbol"}const Om=Symbol("");var Rh;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Rh||(Rh={}));function Rr(t,e){return Me(new Error,{type:t,[Om]:!0},e)}function Vn(t,e){return t instanceof Error&&Om in t&&(e==null||!!(t.type&e))}const Sh="[^/]+?",Hw={sensitive:!1,strict:!1,start:!0,end:!0},Kw=/[.+*?^${}()[\]/\\]/g;function zw(t,e){const n=Me({},Hw,e),s=[];let r=n.start?"^":"";const i=[];for(const c of t){const h=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let p=0;p<c.length;p++){const g=c[p];let y=40+(n.sensitive?.25:0);if(g.type===0)p||(r+="/"),r+=g.value.replace(Kw,"\\$&"),y+=40;else if(g.type===1){const{value:w,repeatable:E,optional:x,regexp:N}=g;i.push({name:w,repeatable:E,optional:x});const R=N||Sh;if(R!==Sh){y+=10;try{new RegExp(`(${R})`)}catch(D){throw new Error(`Invalid custom RegExp for param "${w}" (${R}): `+D.message)}}let C=E?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;p||(C=x&&c.length<2?`(?:/${C})`:"/"+C),x&&(C+="?"),r+=C,y+=20,x&&(y+=-8),E&&(y+=-20),R===".*"&&(y+=-50)}h.push(y)}s.push(h)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(c){const h=c.match(o),p={};if(!h)return null;for(let g=1;g<h.length;g++){const y=h[g]||"",w=i[g-1];p[w.name]=y&&w.repeatable?y.split("/"):y}return p}function u(c){let h="",p=!1;for(const g of t){(!p||!h.endsWith("/"))&&(h+="/"),p=!1;for(const y of g)if(y.type===0)h+=y.value;else if(y.type===1){const{value:w,repeatable:E,optional:x}=y,N=w in c?c[w]:"";if(hn(N)&&!E)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const R=hn(N)?N.join("/"):N;if(!R)if(x)g.length<2&&(h.endsWith("/")?h=h.slice(0,-1):p=!0);else throw new Error(`Missing required param "${w}"`);h+=R}}return h||"/"}return{re:o,score:s,keys:i,parse:l,stringify:u}}function Gw(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Mm(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=Gw(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Ch(s))return 1;if(Ch(r))return-1}return r.length-s.length}function Ch(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Ww={type:0,value:""},Qw=/[a-zA-Z0-9_]/;function Yw(t){if(!t)return[[]];if(t==="/")return[[Ww]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(y){throw new Error(`ERR (${n})/"${c}": ${y}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,u,c="",h="";function p(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:h,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),c="")}function g(){c+=u}for(;l<t.length;){if(u=t[l++],u==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:u==="/"?(c&&p(),o()):u===":"?(p(),n=1):g();break;case 4:g(),n=s;break;case 1:u==="("?n=2:Qw.test(u)?g():(p(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&l--);break;case 2:u===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+u:n=3:h+=u;break;case 3:p(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&l--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),r}function Jw(t,e,n){const s=zw(Yw(t.path),n),r=Me(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Xw(t,e){const n=[],s=new Map;e=Dh({strict:!1,end:!0,sensitive:!1},e);function r(p){return s.get(p)}function i(p,g,y){const w=!y,E=kh(p);E.aliasOf=y&&y.record;const x=Dh(e,p),N=[E];if("alias"in p){const D=typeof p.alias=="string"?[p.alias]:p.alias;for(const j of D)N.push(kh(Me({},E,{components:y?y.record.components:E.components,path:j,aliasOf:y?y.record:E})))}let R,C;for(const D of N){const{path:j}=D;if(g&&j[0]!=="/"){const L=g.record.path,_=L[L.length-1]==="/"?"":"/";D.path=g.record.path+(j&&_+j)}if(R=Jw(D,g,x),y?y.alias.push(R):(C=C||R,C!==R&&C.alias.push(R),w&&p.name&&!xh(R)&&o(p.name)),Lm(R)&&u(R),E.children){const L=E.children;for(let _=0;_<L.length;_++)i(L[_],R,y&&y.children[_])}y=y||R}return C?()=>{o(C)}:_i}function o(p){if(Nm(p)){const g=s.get(p);g&&(s.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function u(p){const g=tE(p,n);n.splice(g,0,p),p.record.name&&!xh(p)&&s.set(p.record.name,p)}function c(p,g){let y,w={},E,x;if("name"in p&&p.name){if(y=s.get(p.name),!y)throw Rr(1,{location:p});x=y.record.name,w=Me(Ph(g.params,y.keys.filter(C=>!C.optional).concat(y.parent?y.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),p.params&&Ph(p.params,y.keys.map(C=>C.name))),E=y.stringify(w)}else if(p.path!=null)E=p.path,y=n.find(C=>C.re.test(E)),y&&(w=y.parse(E),x=y.record.name);else{if(y=g.name?s.get(g.name):n.find(C=>C.re.test(g.path)),!y)throw Rr(1,{location:p,currentLocation:g});x=y.record.name,w=Me({},g.params,p.params),E=y.stringify(w)}const N=[];let R=y;for(;R;)N.unshift(R.record),R=R.parent;return{name:x,path:E,params:w,matched:N,meta:eE(N)}}t.forEach(p=>i(p));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:l,getRecordMatcher:r}}function Ph(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function kh(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Zw(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Zw(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function xh(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function eE(t){return t.reduce((e,n)=>Me(e,n.meta),{})}function Dh(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function tE(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Mm(t,e[i])<0?s=i:n=i+1}const r=nE(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function nE(t){let e=t;for(;e=e.parent;)if(Lm(e)&&Mm(t,e)===0)return e}function Lm({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function sE(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(Cm," "),o=i.indexOf("="),l=Vi(o<0?i:i.slice(0,o)),u=o<0?null:Vi(i.slice(o+1));if(l in e){let c=e[l];hn(c)||(c=e[l]=[c]),c.push(u)}else e[l]=u}return e}function Vh(t){let e="";for(let n in t){const s=t[n];if(n=Tw(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(hn(s)?s.map(i=>i&&iu(i)):[s&&iu(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function rE(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=hn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const iE=Symbol(""),Nh=Symbol(""),Fa=Symbol(""),Zu=Symbol(""),au=Symbol("");function ii(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ls(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,u)=>{const c=g=>{g===!1?u(Rr(4,{from:n,to:e})):g instanceof Error?u(g):qw(g)?u(Rr(2,{from:e,to:g})):(o&&s.enterCallbacks[r]===o&&typeof g=="function"&&o.push(g),l())},h=i(()=>t.call(s&&s.instances[r],e,n,c));let p=Promise.resolve(h);t.length<3&&(p=p.then(c)),p.catch(g=>u(g))})}function Ll(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let u=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Rm(u)){const h=(u.__vccOpts||u)[e];h&&i.push(ls(h,n,s,o,l,r))}else{let c=u();i.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=hw(h)?h.default:h;o.mods[l]=h,o.components[l]=p;const y=(p.__vccOpts||p)[e];return y&&ls(y,n,s,o,l,r)()}))}}return i}function Oh(t){const e=dn(Fa),n=dn(Zu),s=Re(()=>{const u=cn(t.to);return e.resolve(u)}),r=Re(()=>{const{matched:u}=s.value,{length:c}=u,h=u[c-1],p=n.matched;if(!h||!p.length)return-1;const g=p.findIndex(Ar.bind(null,h));if(g>-1)return g;const y=Mh(u[c-2]);return c>1&&Mh(h)===y&&p[p.length-1].path!==y?p.findIndex(Ar.bind(null,u[c-2])):g}),i=Re(()=>r.value>-1&&cE(n.params,s.value.params)),o=Re(()=>r.value>-1&&r.value===n.matched.length-1&&Dm(n.params,s.value.params));function l(u={}){if(uE(u)){const c=e[cn(t.replace)?"replace":"push"](cn(t.to)).catch(_i);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:Re(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function oE(t){return t.length===1?t[0]:t}const aE=Wp({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Oh,setup(t,{slots:e}){const n=Da(Oh(t)),{options:s}=dn(Fa),r=Re(()=>({[Lh(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Lh(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&oE(e.default(n));return t.custom?i:Tm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),lE=aE;function uE(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function cE(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!hn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Mh(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Lh=(t,e,n)=>t??e??n,dE=Wp({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=dn(au),r=Re(()=>t.route||s.value),i=dn(Nh,0),o=Re(()=>{let c=cn(i);const{matched:h}=r.value;let p;for(;(p=h[c])&&!p.components;)c++;return c}),l=Re(()=>r.value.matched[o.value]);Mo(Nh,Re(()=>o.value+1)),Mo(iE,l),Mo(au,r);const u=B();return Fn(()=>[u.value,l.value,t.name],([c,h,p],[g,y,w])=>{h&&(h.instances[p]=c,y&&y!==h&&c&&c===g&&(h.leaveGuards.size||(h.leaveGuards=y.leaveGuards),h.updateGuards.size||(h.updateGuards=y.updateGuards))),c&&h&&(!y||!Ar(h,y)||!g)&&(h.enterCallbacks[p]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=r.value,h=t.name,p=l.value,g=p&&p.components[h];if(!g)return Uh(n.default,{Component:g,route:c});const y=p.props[h],w=y?y===!0?c.params:typeof y=="function"?y(c):y:null,x=Tm(g,Me({},w,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(p.instances[h]=null)},ref:u}));return Uh(n.default,{Component:x,route:c})||x}}});function Uh(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const hE=dE;function fE(t){const e=Xw(t.routes,t),n=t.parseQuery||sE,s=t.stringifyQuery||Vh,r=t.history,i=ii(),o=ii(),l=ii(),u=T_(rs);let c=rs;ar&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Ol.bind(null,q=>""+q),p=Ol.bind(null,Aw),g=Ol.bind(null,Vi);function y(q,re){let se,le;return Nm(q)?(se=e.getRecordMatcher(q),le=re):le=q,e.addRoute(le,se)}function w(q){const re=e.getRecordMatcher(q);re&&e.removeRoute(re)}function E(){return e.getRoutes().map(q=>q.record)}function x(q){return!!e.getRecordMatcher(q)}function N(q,re){if(re=Me({},re||u.value),typeof q=="string"){const O=Ml(n,q,re.path),H=e.resolve({path:O.path},re),W=r.createHref(O.fullPath);return Me(O,H,{params:g(H.params),hash:Vi(O.hash),redirectedFrom:void 0,href:W})}let se;if(q.path!=null)se=Me({},q,{path:Ml(n,q.path,re.path).path});else{const O=Me({},q.params);for(const H in O)O[H]==null&&delete O[H];se=Me({},q,{params:p(O)}),re.params=p(re.params)}const le=e.resolve(se,re),Ve=q.hash||"";le.params=h(g(le.params));const S=Cw(s,Me({},q,{hash:Ew(Ve),path:le.path})),k=r.createHref(S);return Me({fullPath:S,hash:Ve,query:s===Vh?rE(q.query):q.query||{}},le,{redirectedFrom:void 0,href:k})}function R(q){return typeof q=="string"?Ml(n,q,u.value.path):Me({},q)}function C(q,re){if(c!==q)return Rr(8,{from:re,to:q})}function D(q){return _(q)}function j(q){return D(Me(R(q),{replace:!0}))}function L(q){const re=q.matched[q.matched.length-1];if(re&&re.redirect){const{redirect:se}=re;let le=typeof se=="function"?se(q):se;return typeof le=="string"&&(le=le.includes("?")||le.includes("#")?le=R(le):{path:le},le.params={}),Me({query:q.query,hash:q.hash,params:le.path!=null?{}:q.params},le)}}function _(q,re){const se=c=N(q),le=u.value,Ve=q.state,S=q.force,k=q.replace===!0,O=L(se);if(O)return _(Me(R(O),{state:typeof O=="object"?Me({},Ve,O.state):Ve,force:S,replace:k}),re||se);const H=se;H.redirectedFrom=re;let W;return!S&&Pw(s,le,se)&&(W=Rr(16,{to:H,from:le}),Fe(le,le,!0,!1)),(W?Promise.resolve(W):I(H,le)).catch(K=>Vn(K)?Vn(K,2)?K:Je(K):Ie(K,H,le)).then(K=>{if(K){if(Vn(K,2))return _(Me({replace:k},R(K.to),{state:typeof K.to=="object"?Me({},Ve,K.to.state):Ve,force:S}),re||H)}else K=V(H,le,!0,k,Ve);return P(H,le,K),K})}function T(q,re){const se=C(q,re);return se?Promise.reject(se):Promise.resolve()}function b(q){const re=Zn.values().next().value;return re&&typeof re.runWithContext=="function"?re.runWithContext(q):q()}function I(q,re){let se;const[le,Ve,S]=pE(q,re);se=Ll(le.reverse(),"beforeRouteLeave",q,re);for(const O of le)O.leaveGuards.forEach(H=>{se.push(ls(H,q,re))});const k=T.bind(null,q,re);return se.push(k),Bt(se).then(()=>{se=[];for(const O of i.list())se.push(ls(O,q,re));return se.push(k),Bt(se)}).then(()=>{se=Ll(Ve,"beforeRouteUpdate",q,re);for(const O of Ve)O.updateGuards.forEach(H=>{se.push(ls(H,q,re))});return se.push(k),Bt(se)}).then(()=>{se=[];for(const O of S)if(O.beforeEnter)if(hn(O.beforeEnter))for(const H of O.beforeEnter)se.push(ls(H,q,re));else se.push(ls(O.beforeEnter,q,re));return se.push(k),Bt(se)}).then(()=>(q.matched.forEach(O=>O.enterCallbacks={}),se=Ll(S,"beforeRouteEnter",q,re,b),se.push(k),Bt(se))).then(()=>{se=[];for(const O of o.list())se.push(ls(O,q,re));return se.push(k),Bt(se)}).catch(O=>Vn(O,8)?O:Promise.reject(O))}function P(q,re,se){l.list().forEach(le=>b(()=>le(q,re,se)))}function V(q,re,se,le,Ve){const S=C(q,re);if(S)return S;const k=re===rs,O=ar?history.state:{};se&&(le||k?r.replace(q.fullPath,Me({scroll:k&&O&&O.scroll},Ve)):r.push(q.fullPath,Ve)),u.value=q,Fe(q,re,se,k),Je()}let A;function Oe(){A||(A=r.listen((q,re,se)=>{if(!gn.listening)return;const le=N(q),Ve=L(le);if(Ve){_(Me(Ve,{replace:!0,force:!0}),le).catch(_i);return}c=le;const S=u.value;ar&&Lw(Ih(S.fullPath,se.delta),$a()),I(le,S).catch(k=>Vn(k,12)?k:Vn(k,2)?(_(Me(R(k.to),{force:!0}),le).then(O=>{Vn(O,20)&&!se.delta&&se.type===Ni.pop&&r.go(-1,!1)}).catch(_i),Promise.reject()):(se.delta&&r.go(-se.delta,!1),Ie(k,le,S))).then(k=>{k=k||V(le,S,!1),k&&(se.delta&&!Vn(k,8)?r.go(-se.delta,!1):se.type===Ni.pop&&Vn(k,20)&&r.go(-1,!1)),P(le,S,k)}).catch(_i)}))}let dt=ii(),Ge=ii(),Se;function Ie(q,re,se){Je(q);const le=Ge.list();return le.length?le.forEach(Ve=>Ve(q,re,se)):console.error(q),Promise.reject(q)}function Mt(){return Se&&u.value!==rs?Promise.resolve():new Promise((q,re)=>{dt.add([q,re])})}function Je(q){return Se||(Se=!q,Oe(),dt.list().forEach(([re,se])=>q?se(q):re()),dt.reset()),q}function Fe(q,re,se,le){const{scrollBehavior:Ve}=t;if(!ar||!Ve)return Promise.resolve();const S=!se&&Uw(Ih(q.fullPath,0))||(le||!se)&&history.state&&history.state.scroll||null;return Ku().then(()=>Ve(q,re,S)).then(k=>k&&Mw(k)).catch(k=>Ie(k,q,re))}const We=q=>r.go(q);let Xe;const Zn=new Set,gn={currentRoute:u,listening:!0,addRoute:y,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:E,resolve:N,options:t,push:D,replace:j,go:We,back:()=>We(-1),forward:()=>We(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:Ge.add,isReady:Mt,install(q){const re=this;q.component("RouterLink",lE),q.component("RouterView",hE),q.config.globalProperties.$router=re,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>cn(u)}),ar&&!Xe&&u.value===rs&&(Xe=!0,D(r.location).catch(Ve=>{}));const se={};for(const Ve in rs)Object.defineProperty(se,Ve,{get:()=>u.value[Ve],enumerable:!0});q.provide(Fa,re),q.provide(Zu,$p(se)),q.provide(au,u);const le=q.unmount;Zn.add(q),q.unmount=function(){Zn.delete(q),Zn.size<1&&(c=rs,A&&A(),A=null,u.value=rs,Xe=!1,Se=!1),le()}}};function Bt(q){return q.reduce((re,se)=>re.then(()=>b(se)),Promise.resolve())}return gn}function pE(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(c=>Ar(c,l))?s.push(l):n.push(l));const u=t.matched[o];u&&(e.matched.find(c=>Ar(c,u))||r.push(u))}return[n,s,r]}function Um(){return dn(Fa)}function ec(t){return dn(Zu)}const mE=()=>{};var $h={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},gE=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],u=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Fm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,h=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|c>>6,y=c&63;u||(y=64,o||(g=64)),s.push(n[h],n[p],n[g],n[y])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($m(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||c==null||p==null)throw new yE;const g=i<<2|l>>4;if(s.push(g),c!==64){const y=l<<4&240|c>>2;if(s.push(y),p!==64){const w=c<<6&192|p;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vE=function(t){const e=$m(t);return Fm.encodeByteArray(e,!0)},ra=function(t){return vE(t).replace(/\./g,"")},Bm=function(t){try{return Fm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=()=>_E().__FIREBASE_DEFAULTS__,wE=()=>{if(typeof process>"u"||typeof $h>"u")return;const t=$h.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Bm(t[1]);return e&&JSON.parse(e)},Ba=()=>{try{return mE()||bE()||wE()||EE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jm=t=>{var e,n;return(n=(e=Ba())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TE=t=>{const e=jm(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},qm=()=>{var t;return(t=Ba())===null||t===void 0?void 0:t.config},Hm=t=>{var e;return(e=Ba())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t){return t.endsWith(".cloudworkstations.dev")}async function Km(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ra(JSON.stringify(n)),ra(JSON.stringify(o)),""].join(".")}const wi={};function RE(){const t={prod:[],emulator:[]};for(const e of Object.keys(wi))wi[e]?t.emulator.push(e):t.prod.push(e);return t}function SE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Fh=!1;function zm(t,e){if(typeof window>"u"||typeof document>"u"||!Wi(window.location.host)||wi[t]===e||wi[t]||Fh)return;wi[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=RE().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function c(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Fh=!0,o()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=SE(s),y=n("text"),w=document.getElementById(y)||document.createElement("span"),E=n("learnmore"),x=document.getElementById(E)||document.createElement("a"),N=n("preprendIcon"),R=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;l(C),h(x,E);const D=c();u(R,N),C.append(R,w,x,D),document.body.appendChild(C)}i?(w.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function PE(){var t;const e=(t=Ba())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VE(){const t=Nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function NE(){return!PE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OE(){try{return typeof indexedDB=="object"}catch{return!1}}function ME(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="FirebaseError";class Yn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=LE,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qi.prototype.create)}}class Qi{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?UE(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Yn(r,l,s)}}function UE(t,e){return t.replace($E,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const $E=/\{\$([^}]+)}/g;function FE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ks(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Bh(i)&&Bh(o)){if(!Ks(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Bh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ai(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function li(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function BE(t,e){const n=new jE(t,e);return n.subscribe.bind(n)}class jE{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");qE(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Ul),r.error===void 0&&(r.error=Ul),r.complete===void 0&&(r.complete=Ul);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qE(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ul(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t){return t&&t._delegate?t._delegate:t}class zs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new IE;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zE(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:KE(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KE(t){return t===Bs?void 0:t}function zE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const WE={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},QE=Ce.INFO,YE={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},JE=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=YE[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tc{constructor(e){this.name=e,this._logLevel=QE,this._logHandler=JE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const XE=(t,e)=>e.some(n=>t instanceof n);let jh,qh;function ZE(){return jh||(jh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eT(){return qh||(qh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gm=new WeakMap,lu=new WeakMap,Wm=new WeakMap,$l=new WeakMap,nc=new WeakMap;function tT(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ms(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gm.set(n,t)}).catch(()=>{}),nc.set(e,t),e}function nT(t){if(lu.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});lu.set(t,e)}let uu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ms(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sT(t){uu=t(uu)}function rT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Fl(this),e,...n);return Wm.set(s,e.sort?e.sort():[e]),ms(s)}:eT().includes(t)?function(...e){return t.apply(Fl(this),e),ms(Gm.get(this))}:function(...e){return ms(t.apply(Fl(this),e))}}function iT(t){return typeof t=="function"?rT(t):(t instanceof IDBTransaction&&nT(t),XE(t,ZE())?new Proxy(t,uu):t)}function ms(t){if(t instanceof IDBRequest)return tT(t);if($l.has(t))return $l.get(t);const e=iT(t);return e!==t&&($l.set(t,e),nc.set(e,t)),e}const Fl=t=>nc.get(t);function oT(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=ms(o);return s&&o.addEventListener("upgradeneeded",u=>{s(ms(o.result),u.oldVersion,u.newVersion,ms(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const aT=["get","getKey","getAll","getAllKeys","count"],lT=["put","add","delete","clear"],Bl=new Map;function Hh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bl.get(e))return Bl.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=lT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||aT.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,r?"readwrite":"readonly");let c=u.store;return s&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),r&&u.done]))[0]};return Bl.set(e,i),i}sT(t=>({...t,get:(e,n,s)=>Hh(e,n)||t.get(e,n,s),has:(e,n)=>!!Hh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function cT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cu="@firebase/app",Kh="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new tc("@firebase/app"),dT="@firebase/app-compat",hT="@firebase/analytics-compat",fT="@firebase/analytics",pT="@firebase/app-check-compat",mT="@firebase/app-check",gT="@firebase/auth",yT="@firebase/auth-compat",vT="@firebase/database",_T="@firebase/data-connect",bT="@firebase/database-compat",wT="@firebase/functions",ET="@firebase/functions-compat",TT="@firebase/installations",IT="@firebase/installations-compat",AT="@firebase/messaging",RT="@firebase/messaging-compat",ST="@firebase/performance",CT="@firebase/performance-compat",PT="@firebase/remote-config",kT="@firebase/remote-config-compat",xT="@firebase/storage",DT="@firebase/storage-compat",VT="@firebase/firestore",NT="@firebase/ai",OT="@firebase/firestore-compat",MT="firebase",LT="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du="[DEFAULT]",UT={[cu]:"fire-core",[dT]:"fire-core-compat",[fT]:"fire-analytics",[hT]:"fire-analytics-compat",[mT]:"fire-app-check",[pT]:"fire-app-check-compat",[gT]:"fire-auth",[yT]:"fire-auth-compat",[vT]:"fire-rtdb",[_T]:"fire-data-connect",[bT]:"fire-rtdb-compat",[wT]:"fire-fn",[ET]:"fire-fn-compat",[TT]:"fire-iid",[IT]:"fire-iid-compat",[AT]:"fire-fcm",[RT]:"fire-fcm-compat",[ST]:"fire-perf",[CT]:"fire-perf-compat",[PT]:"fire-rc",[kT]:"fire-rc-compat",[xT]:"fire-gcs",[DT]:"fire-gcs-compat",[VT]:"fire-fst",[OT]:"fire-fst-compat",[NT]:"fire-vertex","fire-js":"fire-js",[MT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new Map,$T=new Map,hu=new Map;function zh(t,e){try{t.container.addComponent(e)}catch(n){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sr(t){const e=t.name;if(hu.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;hu.set(e,t);for(const n of ia.values())zh(n,t);for(const n of $T.values())zh(n,t);return!0}function sc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new Qi("app","Firebase",FT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=LT;function Qm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:du,automaticDataCollectionEnabled:!0},e),r=s.name;if(typeof r!="string"||!r)throw gs.create("bad-app-name",{appName:String(r)});if(n||(n=qm()),!n)throw gs.create("no-options");const i=ia.get(r);if(i){if(Ks(n,i.options)&&Ks(s,i.config))return i;throw gs.create("duplicate-app",{appName:r})}const o=new GE(r);for(const u of hu.values())o.addComponent(u);const l=new BT(n,s,o);return ia.set(r,l),l}function Ym(t=du){const e=ia.get(t);if(!e&&t===du&&qm())return Qm();if(!e)throw gs.create("no-app",{appName:t});return e}function ys(t,e,n){var s;let r=(s=UT[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(l.join(" "));return}Sr(new zs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="firebase-heartbeat-database",qT=1,Oi="firebase-heartbeat-store";let jl=null;function Jm(){return jl||(jl=oT(jT,qT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oi)}catch(n){console.warn(n)}}}}).catch(t=>{throw gs.create("idb-open",{originalErrorMessage:t.message})})),jl}async function HT(t){try{const n=(await Jm()).transaction(Oi),s=await n.objectStore(Oi).get(Xm(t));return await n.done,s}catch(e){if(e instanceof Yn)Kn.warn(e.message);else{const n=gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kn.warn(n.message)}}}async function Gh(t,e){try{const s=(await Jm()).transaction(Oi,"readwrite");await s.objectStore(Oi).put(e,Xm(t)),await s.done}catch(n){if(n instanceof Yn)Kn.warn(n.message);else{const s=gs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kn.warn(s.message)}}}function Xm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=1024,zT=30;class GT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QT(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Wh();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>zT){const o=YT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Kn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wh(),{heartbeatsToSend:s,unsentEntries:r}=WT(this._heartbeatsCache.heartbeats),i=ra(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kn.warn(n),""}}}function Wh(){return new Date().toISOString().substring(0,10)}function WT(t,e=KT){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Qh(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Qh(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class QT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OE()?ME().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Gh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Gh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Qh(t){return ra(JSON.stringify({version:2,heartbeats:t})).length}function YT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){Sr(new zs("platform-logger",e=>new uT(e),"PRIVATE")),Sr(new zs("heartbeat",e=>new GT(e),"PRIVATE")),ys(cu,Kh,t),ys(cu,Kh,"esm2017"),ys("fire-js","")}JT("");function rc(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function Zm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XT=Zm,eg=new Qi("auth","Firebase",Zm());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new tc("@firebase/auth");function ZT(t,...e){oa.logLevel<=Ce.WARN&&oa.warn(`Auth (${Mr}): ${t}`,...e)}function $o(t,...e){oa.logLevel<=Ce.ERROR&&oa.error(`Auth (${Mr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t,...e){throw ic(t,...e)}function En(t,...e){return ic(t,...e)}function tg(t,e,n){const s=Object.assign(Object.assign({},XT()),{[e]:n});return new Qi("auth","Firebase",s).create(e,{appName:t.name})}function Bn(t){return tg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ic(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return eg.create(t,...e)}function me(t,e,...n){if(!t)throw ic(e,...n)}function Un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $o(e),new Error(e)}function zn(t,e){t||Un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function e0(){return Yh()==="http:"||Yh()==="https:"}function Yh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e0()||xE()||"connection"in navigator)?navigator.onLine:!0}function n0(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n){this.shortDelay=e,this.longDelay=n,zn(n>e,"Short delay should be less than long delay!"),this.isMobile=CE()||DE()}get(){return t0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t,e){zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],i0=new Ji(3e4,6e4);function Jn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xn(t,e,n,s,r={}){return sg(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=Yi(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return kE()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Wi(t.emulatorConfig.host)&&(c.credentials="include"),ng.fetch()(await rg(t,t.config.apiHost,n,l),c)})}async function sg(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},s0),e);try{const r=new a0(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Po(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Po(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Po(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Po(t,"user-disabled",o);const h=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw tg(t,h,c);fn(t,h)}}catch(r){if(r instanceof Yn)throw r;fn(t,"network-request-failed",{message:String(r)})}}async function Xi(t,e,n,s,r={}){const i=await Xn(t,e,n,s,r);return"mfaPendingCredential"in i&&fn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function rg(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?oc(t.config,r):`${t.config.apiScheme}://${r}`;return r0.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function o0(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class a0{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(En(this.auth,"network-request-failed")),i0.get())})}}function Po(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=En(t,e,s);return r.customData._tokenResponse=n,r}function Jh(t){return t!==void 0&&t.enterprise!==void 0}class l0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return o0(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function u0(t,e){return Xn(t,"GET","/v2/recaptchaConfig",Jn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c0(t,e){return Xn(t,"POST","/v1/accounts:delete",e)}async function aa(t,e){return Xn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function d0(t,e=!1){const n=pt(t),s=await n.getIdToken(e),r=ac(s);me(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:Ei(ql(r.auth_time)),issuedAtTime:Ei(ql(r.iat)),expirationTime:Ei(ql(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ql(t){return Number(t)*1e3}function ac(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return $o("JWT malformed, contained fewer than 3 sections"),null;try{const r=Bm(n);return r?JSON.parse(r):($o("Failed to decode base64 JWT payload"),null)}catch(r){return $o("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Xh(t){const e=ac(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mi(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Yn&&h0(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function h0({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ei(this.lastLoginAt),this.creationTime=Ei(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(t){var e;const n=t.auth,s=await t.getIdToken(),r=await Mi(t,aa(n,{idToken:s}));me(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ig(i.providerUserInfo):[],l=m0(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=u?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new pu(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function p0(t){const e=pt(t);await la(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function m0(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function ig(t){return t.map(e=>{var{providerId:n}=e,s=rc(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g0(t,e){const n=await sg(t,{},async()=>{const s=Yi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await rg(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ng.fetch()(o,{method:"POST",headers:l,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function y0(t,e){return Xn(t,"POST","/v2/accounts:revokeToken",Jn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=Xh(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await g0(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new vr;return s&&(me(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(me(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(me(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vr,this.toJSON())}_performRefresh(){return Un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ln{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=rc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new f0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new pu(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Mi(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return d0(this,e)}reload(){return p0(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ln(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await la(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(Bn(this.auth));const e=await this.getIdToken();return await Mi(this,c0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,o,l,u,c,h;const p=(s=n.displayName)!==null&&s!==void 0?s:void 0,g=(r=n.email)!==null&&r!==void 0?r:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(l=n.tenantId)!==null&&l!==void 0?l:void 0,x=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,N=(c=n.createdAt)!==null&&c!==void 0?c:void 0,R=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:D,isAnonymous:j,providerData:L,stsTokenManager:_}=n;me(C&&_,e,"internal-error");const T=vr.fromJSON(this.name,_);me(typeof C=="string",e,"internal-error"),is(p,e.name),is(g,e.name),me(typeof D=="boolean",e,"internal-error"),me(typeof j=="boolean",e,"internal-error"),is(y,e.name),is(w,e.name),is(E,e.name),is(x,e.name),is(N,e.name),is(R,e.name);const b=new ln({uid:C,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:j,photoURL:w,phoneNumber:y,tenantId:E,stsTokenManager:T,createdAt:N,lastLoginAt:R});return L&&Array.isArray(L)&&(b.providerData=L.map(I=>Object.assign({},I))),x&&(b._redirectEventId=x),b}static async _fromIdTokenResponse(e,n,s=!1){const r=new vr;r.updateFromServerResponse(n);const i=new ln({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await la(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];me(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?ig(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),l=new vr;l.updateFromIdToken(s);const u=new ln({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new pu(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new Map;function $n(t){zn(t instanceof Function,"Expected a class definition");let e=Zh.get(t);return e?(zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Zh.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}og.type="NONE";const ef=og;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(t,e,n){return`firebase:${t}:${e}:${n}`}class _r{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Fo(this.userKey,r.apiKey,i),this.fullPersistenceKey=Fo("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await aa(this.auth,{idToken:e}).catch(()=>{});return n?ln._fromGetAccountInfoResponse(this.auth,n,e):null}return ln._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new _r($n(ef),e,s);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||$n(ef);const o=Fo(s,e.config.apiKey,e.name);let l=null;for(const c of n)try{const h=await c._get(o);if(h){let p;if(typeof h=="string"){const g=await aa(e,{idToken:h}).catch(()=>{});if(!g)break;p=await ln._fromGetAccountInfoResponse(e,g,h)}else p=ln._fromJSON(e,h);c!==i&&(l=p),i=c;break}}catch{}const u=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new _r(i,e,s):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new _r(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ag(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hg(e))return"Blackberry";if(fg(e))return"Webos";if(lg(e))return"Safari";if((e.includes("chrome/")||ug(e))&&!e.includes("edge/"))return"Chrome";if(dg(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function ag(t=Nt()){return/firefox\//i.test(t)}function lg(t=Nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ug(t=Nt()){return/crios\//i.test(t)}function cg(t=Nt()){return/iemobile/i.test(t)}function dg(t=Nt()){return/android/i.test(t)}function hg(t=Nt()){return/blackberry/i.test(t)}function fg(t=Nt()){return/webos/i.test(t)}function lc(t=Nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function v0(t=Nt()){var e;return lc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _0(){return VE()&&document.documentMode===10}function pg(t=Nt()){return lc(t)||dg(t)||fg(t)||hg(t)||/windows phone/i.test(t)||cg(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t,e=[]){let n;switch(t){case"Browser":n=tf(Nt());break;case"Worker":n=`${tf(Nt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w0(t,e={}){return Xn(t,"GET","/v2/passwordPolicy",Jn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=6;class T0{constructor(e){var n,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:E0,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nf(this),this.idTokenSubscription=new nf(this),this.beforeStateQueue=new b0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$n(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await _r.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await aa(this,{idToken:e}),s=await ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(tn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await la(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=n0()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(Bn(this));const n=e?pt(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(Bn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(Bn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await w0(this),n=new T0(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qi("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await y0(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$n(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await _r.create(this,[$n(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,r);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ZT(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ks(t){return pt(t)}class nf{constructor(e){this.auth=e,this.observer=null,this.addObserver=BE(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A0(t){ja=t}function gg(t){return ja.loadJS(t)}function R0(){return ja.recaptchaEnterpriseScript}function S0(){return ja.gapiScript}function C0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class P0{constructor(){this.enterprise=new k0}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class k0{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const x0="recaptcha-enterprise",yg="NO_RECAPTCHA";class D0{constructor(e){this.type=x0,this.auth=ks(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{u0(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new l0(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function r(i,o,l){const u=window.grecaptcha;Jh(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(yg)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new P0().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!n&&Jh(window.grecaptcha))r(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=R0();u.length!==0&&(u+=l),gg(u).then(()=>{r(l,i,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function sf(t,e,n,s=!1,r=!1){const i=new D0(t);let o;if(r)o=yg;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ua(t,e,n,s,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await sf(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await sf(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t,e){const n=sc(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Ks(i,e??{}))return r;fn(r,"already-initialized")}return n.initialize({options:e})}function N0(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map($n);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function O0(t,e,n){const s=ks(t);me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=vg(e),{host:o,port:l}=M0(e),u=l===null?"":`:${l}`,c={url:`${i}//${o}${u}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),me(Ks(c,s.config.emulator)&&Ks(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Wi(o)?(Km(`${i}//${o}${u}`),zm("Auth",!0)):L0()}function vg(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function M0(t){const e=vg(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:rf(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:rf(o)}}}function rf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function L0(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,n){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function U0(t,e){return Xn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0(t,e){return Xi(t,"POST","/v1/accounts:signInWithPassword",Jn(t,e))}async function F0(t,e){return Xn(t,"POST","/v1/accounts:sendOobCode",Jn(t,e))}async function B0(t,e){return F0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j0(t,e){return Xi(t,"POST","/v1/accounts:signInWithEmailLink",Jn(t,e))}async function q0(t,e){return Xi(t,"POST","/v1/accounts:signInWithEmailLink",Jn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends uc{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Li(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Li(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ua(e,n,"signInWithPassword",$0);case"emailLink":return j0(e,{email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ua(e,s,"signUpPassword",U0);case"emailLink":return q0(e,{idToken:n,email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function br(t,e){return Xi(t,"POST","/v1/accounts:signInWithIdp",Jn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="http://localhost";class Gs extends uc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=rc(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new Gs(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return br(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,br(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,br(e,n)}buildRequest(){const e={requestUri:H0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function z0(t){const e=ai(li(t)).link,n=e?ai(li(e)).deep_link_id:null,s=ai(li(t)).deep_link_id;return(s?ai(li(s)).link:null)||s||n||e||t}class cc{constructor(e){var n,s,r,i,o,l;const u=ai(li(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(s=u.oobCode)!==null&&s!==void 0?s:null,p=K0((r=u.mode)!==null&&r!==void 0?r:null);me(c&&h&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=z0(e);try{return new cc(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.providerId=Lr.PROVIDER_ID}static credential(e,n){return Li._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=cc.parseLink(n);return me(s,"argument-error"),Li._fromEmailAndCode(e,s.code,s.tenantId)}}Lr.PROVIDER_ID="password";Lr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends _g{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Zi{constructor(){super("facebook.com")}static credential(e){return Gs._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.FACEBOOK_SIGN_IN_METHOD="facebook.com";us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Zi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gs._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return cs.credential(n,s)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Zi{constructor(){super("github.com")}static credential(e){return Gs._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Zi{constructor(){super("twitter.com")}static credential(e,n){return Gs._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return hs.credential(n,s)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G0(t,e){return Xi(t,"POST","/v1/accounts:signUp",Jn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await ln._fromIdTokenResponse(e,s,r),o=of(s);return new Ws({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=of(s);return new Ws({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function of(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends Yn{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,ca.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new ca(e,n,s,r)}}function bg(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ca._fromErrorAndOperation(t,i,e,s):i})}async function W0(t,e,n=!1){const s=await Mi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ws._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q0(t,e,n=!1){const{auth:s}=t;if(tn(s.app))return Promise.reject(Bn(s));const r="reauthenticate";try{const i=await Mi(t,bg(s,r,e,t),n);me(i.idToken,s,"internal-error");const o=ac(i.idToken);me(o,s,"internal-error");const{sub:l}=o;return me(t.uid===l,s,"user-mismatch"),Ws._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&fn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wg(t,e,n=!1){if(tn(t.app))return Promise.reject(Bn(t));const s="signIn",r=await bg(t,s,e),i=await Ws._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function Y0(t,e){return wg(ks(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eg(t){const e=ks(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dc(t,e,n){const s=ks(t);await ua(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",B0)}async function J0(t,e,n){if(tn(t.app))return Promise.reject(Bn(t));const s=ks(t),o=await ua(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",G0).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Eg(t),u}),l=await Ws._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function X0(t,e,n){return tn(t.app)?Promise.reject(Bn(t)):Y0(pt(t),Lr.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Eg(t),s})}function Z0(t,e,n,s){return pt(t).onIdTokenChanged(e,n,s)}function eI(t,e,n){return pt(t).beforeAuthStateChanged(e,n)}function hc(t,e,n,s){return pt(t).onAuthStateChanged(e,n,s)}function tI(t){return pt(t).signOut()}const da="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(da,"1"),this.storage.removeItem(da),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=1e3,sI=10;class Ig extends Tg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);_0()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,sI):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},nI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ig.type="LOCAL";const rI=Ig;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends Tg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ag.type="SESSION";const Rg=Ag;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new qa(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async c=>c(n.origin,i)),u=await iI(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qa.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const c=fc("",20);r.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return window}function aI(t){Tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function lI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function cI(){return Sg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="firebaseLocalStorageDb",dI=1,ha="firebaseLocalStorage",Pg="fbase_key";class eo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ha(t,e){return t.transaction([ha],e?"readwrite":"readonly").objectStore(ha)}function hI(){const t=indexedDB.deleteDatabase(Cg);return new eo(t).toPromise()}function mu(){const t=indexedDB.open(Cg,dI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ha,{keyPath:Pg})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ha)?e(s):(s.close(),await hI(),e(await mu()))})})}async function af(t,e,n){const s=Ha(t,!0).put({[Pg]:e,value:n});return new eo(s).toPromise()}async function fI(t,e){const n=Ha(t,!1).get(e),s=await new eo(n).toPromise();return s===void 0?null:s.value}function lf(t,e){const n=Ha(t,!0).delete(e);return new eo(n).toPromise()}const pI=800,mI=3;class kg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>mI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qa._getInstance(cI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lI(),!this.activeServiceWorker)return;this.sender=new oI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mu();return await af(e,da,"1"),await lf(e,da),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>af(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>fI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lf(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Ha(r,!1).getAll();return new eo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kg.type="LOCAL";const gI=kg;new Ji(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t,e){return e?$n(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends uc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return br(e,this._buildIdpRequest())}_linkToIdToken(e,n){return br(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return br(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vI(t){return wg(t.auth,new pc(t),t.bypassAuthState)}function _I(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),Q0(n,new pc(t),t.bypassAuthState)}async function bI(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),W0(n,new pc(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vI;case"linkViaPopup":case"linkViaRedirect":return bI;case"reauthViaPopup":case"reauthViaRedirect":return _I;default:fn(this.auth,"internal-error")}}resolve(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new Ji(2e3,1e4);class hr extends xg{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,hr.currentPopupAction&&hr.currentPopupAction.cancel(),hr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){zn(this.filter.length===1,"Popup operations only handle one event");const e=fc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wI.get())};e()}}hr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="pendingRedirect",Bo=new Map;class TI extends xg{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Bo.get(this.auth._key());if(!e){try{const s=await II(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Bo.set(this.auth._key(),e)}return this.bypassAuthState||Bo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function II(t,e){const n=SI(e),s=RI(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function AI(t,e){Bo.set(t._key(),e)}function RI(t){return $n(t._redirectPersistence)}function SI(t){return Fo(EI,t.config.apiKey,t.name)}async function CI(t,e,n=!1){if(tn(t.app))return Promise.reject(Bn(t));const s=ks(t),r=yI(s,e),o=await new TI(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=10*60*1e3;class kI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Dg(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(En(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PI&&this.cachedEventUids.clear(),this.cachedEventUids.has(uf(e))}saveEventToCache(e){this.cachedEventUids.add(uf(e)),this.lastProcessedEventTime=Date.now()}}function uf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Dg({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dg(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(t,e={}){return Xn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NI=/^https?/;async function OI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DI(t);for(const n of e)try{if(MI(n))return}catch{}fn(t,"unauthorized-domain")}function MI(t){const e=fu(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!NI.test(n))return!1;if(VI.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new Ji(3e4,6e4);function cf(){const t=Tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function UI(t){return new Promise((e,n)=>{var s,r,i;function o(){cf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cf(),n(En(t,"network-request-failed"))},timeout:LI.get()})}if(!((r=(s=Tn().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=Tn().gapi)===null||i===void 0)&&i.load)o();else{const l=C0("iframefcb");return Tn()[l]=()=>{gapi.load?o():n(En(t,"network-request-failed"))},gg(`${S0()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw jo=null,e})}let jo=null;function $I(t){return jo=jo||UI(t),jo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new Ji(5e3,15e3),BI="__/auth/iframe",jI="emulator/auth/iframe",qI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KI(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?oc(e,jI):`https://${t.config.authDomain}/${BI}`,s={apiKey:e.apiKey,appName:t.name,v:Mr},r=HI.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Yi(s).slice(1)}`}async function zI(t){const e=await $I(t),n=Tn().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:KI(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qI,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=En(t,"network-request-failed"),l=Tn().setTimeout(()=>{i(o)},FI.get());function u(){Tn().clearTimeout(l),r(s)}s.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WI=500,QI=600,YI="_blank",JI="http://localhost";class df{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XI(t,e,n,s=WI,r=QI){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const u=Object.assign(Object.assign({},GI),{width:s.toString(),height:r.toString(),top:i,left:o}),c=Nt().toLowerCase();n&&(l=ug(c)?YI:n),ag(c)&&(e=e||JI,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(v0(c)&&l!=="_self")return ZI(e||"",l),new df(null);const p=window.open(e||"",l,h);me(p,t,"popup-blocked");try{p.focus()}catch{}return new df(p)}function ZI(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="__/auth/handler",t1="emulator/auth/handler",n1=encodeURIComponent("fac");async function hf(t,e,n,s,r,i){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Mr,eventId:r};if(e instanceof _g){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",FE(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Zi){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${n1}=${encodeURIComponent(u)}`:"";return`${s1(t)}?${Yi(l).slice(1)}${c}`}function s1({config:t}){return t.emulator?oc(t,t1):`https://${t.authDomain}/${e1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl="webStorageSupport";class r1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rg,this._completeRedirectFn=CI,this._overrideRedirectResult=AI}async _openPopup(e,n,s,r){var i;zn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await hf(e,n,s,fu(),r);return XI(e,o,fc())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await hf(e,n,s,fu(),r);return aI(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(zn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await zI(e),s=new kI(e);return n.register("authEvent",r=>(me(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hl,{type:Hl},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[Hl];o!==void 0&&n(!!o),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pg()||lg()||lc()}}const i1=r1;var ff="@firebase/auth",pf="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l1(t){Sr(new zs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mg(t)},c=new I0(s,r,i,u);return N0(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Sr(new zs("auth-internal",e=>{const n=ks(e.getProvider("auth").getImmediate());return(s=>new o1(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(ff,pf,a1(t)),ys(ff,pf,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=5*60,c1=Hm("authIdTokenMaxAge")||u1;let mf=null;const d1=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>c1)return;const r=n==null?void 0:n.token;mf!==r&&(mf=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function to(t=Ym()){const e=sc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=V0(t,{popupRedirectResolver:i1,persistence:[gI,rI,Rg]}),s=Hm("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=d1(i.toString());eI(n,o,()=>o(n.currentUser)),Z0(n,l=>o(l))}}const r=jm("auth");return r&&O0(n,`http://${r}`),n}function h1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}A0({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=En("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",h1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l1("Browser");var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,Vg;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,T){function b(){}b.prototype=T.prototype,_.D=T.prototype,_.prototype=new b,_.prototype.constructor=_,_.C=function(I,P,V){for(var A=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)A[Oe-2]=arguments[Oe];return T.prototype[P].apply(I,A)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(_,T,b){b||(b=0);var I=Array(16);if(typeof T=="string")for(var P=0;16>P;++P)I[P]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(P=0;16>P;++P)I[P]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=_.g[0],b=_.g[1],P=_.g[2];var V=_.g[3],A=T+(V^b&(P^V))+I[0]+3614090360&4294967295;T=b+(A<<7&4294967295|A>>>25),A=V+(P^T&(b^P))+I[1]+3905402710&4294967295,V=T+(A<<12&4294967295|A>>>20),A=P+(b^V&(T^b))+I[2]+606105819&4294967295,P=V+(A<<17&4294967295|A>>>15),A=b+(T^P&(V^T))+I[3]+3250441966&4294967295,b=P+(A<<22&4294967295|A>>>10),A=T+(V^b&(P^V))+I[4]+4118548399&4294967295,T=b+(A<<7&4294967295|A>>>25),A=V+(P^T&(b^P))+I[5]+1200080426&4294967295,V=T+(A<<12&4294967295|A>>>20),A=P+(b^V&(T^b))+I[6]+2821735955&4294967295,P=V+(A<<17&4294967295|A>>>15),A=b+(T^P&(V^T))+I[7]+4249261313&4294967295,b=P+(A<<22&4294967295|A>>>10),A=T+(V^b&(P^V))+I[8]+1770035416&4294967295,T=b+(A<<7&4294967295|A>>>25),A=V+(P^T&(b^P))+I[9]+2336552879&4294967295,V=T+(A<<12&4294967295|A>>>20),A=P+(b^V&(T^b))+I[10]+4294925233&4294967295,P=V+(A<<17&4294967295|A>>>15),A=b+(T^P&(V^T))+I[11]+2304563134&4294967295,b=P+(A<<22&4294967295|A>>>10),A=T+(V^b&(P^V))+I[12]+1804603682&4294967295,T=b+(A<<7&4294967295|A>>>25),A=V+(P^T&(b^P))+I[13]+4254626195&4294967295,V=T+(A<<12&4294967295|A>>>20),A=P+(b^V&(T^b))+I[14]+2792965006&4294967295,P=V+(A<<17&4294967295|A>>>15),A=b+(T^P&(V^T))+I[15]+1236535329&4294967295,b=P+(A<<22&4294967295|A>>>10),A=T+(P^V&(b^P))+I[1]+4129170786&4294967295,T=b+(A<<5&4294967295|A>>>27),A=V+(b^P&(T^b))+I[6]+3225465664&4294967295,V=T+(A<<9&4294967295|A>>>23),A=P+(T^b&(V^T))+I[11]+643717713&4294967295,P=V+(A<<14&4294967295|A>>>18),A=b+(V^T&(P^V))+I[0]+3921069994&4294967295,b=P+(A<<20&4294967295|A>>>12),A=T+(P^V&(b^P))+I[5]+3593408605&4294967295,T=b+(A<<5&4294967295|A>>>27),A=V+(b^P&(T^b))+I[10]+38016083&4294967295,V=T+(A<<9&4294967295|A>>>23),A=P+(T^b&(V^T))+I[15]+3634488961&4294967295,P=V+(A<<14&4294967295|A>>>18),A=b+(V^T&(P^V))+I[4]+3889429448&4294967295,b=P+(A<<20&4294967295|A>>>12),A=T+(P^V&(b^P))+I[9]+568446438&4294967295,T=b+(A<<5&4294967295|A>>>27),A=V+(b^P&(T^b))+I[14]+3275163606&4294967295,V=T+(A<<9&4294967295|A>>>23),A=P+(T^b&(V^T))+I[3]+4107603335&4294967295,P=V+(A<<14&4294967295|A>>>18),A=b+(V^T&(P^V))+I[8]+1163531501&4294967295,b=P+(A<<20&4294967295|A>>>12),A=T+(P^V&(b^P))+I[13]+2850285829&4294967295,T=b+(A<<5&4294967295|A>>>27),A=V+(b^P&(T^b))+I[2]+4243563512&4294967295,V=T+(A<<9&4294967295|A>>>23),A=P+(T^b&(V^T))+I[7]+1735328473&4294967295,P=V+(A<<14&4294967295|A>>>18),A=b+(V^T&(P^V))+I[12]+2368359562&4294967295,b=P+(A<<20&4294967295|A>>>12),A=T+(b^P^V)+I[5]+4294588738&4294967295,T=b+(A<<4&4294967295|A>>>28),A=V+(T^b^P)+I[8]+2272392833&4294967295,V=T+(A<<11&4294967295|A>>>21),A=P+(V^T^b)+I[11]+1839030562&4294967295,P=V+(A<<16&4294967295|A>>>16),A=b+(P^V^T)+I[14]+4259657740&4294967295,b=P+(A<<23&4294967295|A>>>9),A=T+(b^P^V)+I[1]+2763975236&4294967295,T=b+(A<<4&4294967295|A>>>28),A=V+(T^b^P)+I[4]+1272893353&4294967295,V=T+(A<<11&4294967295|A>>>21),A=P+(V^T^b)+I[7]+4139469664&4294967295,P=V+(A<<16&4294967295|A>>>16),A=b+(P^V^T)+I[10]+3200236656&4294967295,b=P+(A<<23&4294967295|A>>>9),A=T+(b^P^V)+I[13]+681279174&4294967295,T=b+(A<<4&4294967295|A>>>28),A=V+(T^b^P)+I[0]+3936430074&4294967295,V=T+(A<<11&4294967295|A>>>21),A=P+(V^T^b)+I[3]+3572445317&4294967295,P=V+(A<<16&4294967295|A>>>16),A=b+(P^V^T)+I[6]+76029189&4294967295,b=P+(A<<23&4294967295|A>>>9),A=T+(b^P^V)+I[9]+3654602809&4294967295,T=b+(A<<4&4294967295|A>>>28),A=V+(T^b^P)+I[12]+3873151461&4294967295,V=T+(A<<11&4294967295|A>>>21),A=P+(V^T^b)+I[15]+530742520&4294967295,P=V+(A<<16&4294967295|A>>>16),A=b+(P^V^T)+I[2]+3299628645&4294967295,b=P+(A<<23&4294967295|A>>>9),A=T+(P^(b|~V))+I[0]+4096336452&4294967295,T=b+(A<<6&4294967295|A>>>26),A=V+(b^(T|~P))+I[7]+1126891415&4294967295,V=T+(A<<10&4294967295|A>>>22),A=P+(T^(V|~b))+I[14]+2878612391&4294967295,P=V+(A<<15&4294967295|A>>>17),A=b+(V^(P|~T))+I[5]+4237533241&4294967295,b=P+(A<<21&4294967295|A>>>11),A=T+(P^(b|~V))+I[12]+1700485571&4294967295,T=b+(A<<6&4294967295|A>>>26),A=V+(b^(T|~P))+I[3]+2399980690&4294967295,V=T+(A<<10&4294967295|A>>>22),A=P+(T^(V|~b))+I[10]+4293915773&4294967295,P=V+(A<<15&4294967295|A>>>17),A=b+(V^(P|~T))+I[1]+2240044497&4294967295,b=P+(A<<21&4294967295|A>>>11),A=T+(P^(b|~V))+I[8]+1873313359&4294967295,T=b+(A<<6&4294967295|A>>>26),A=V+(b^(T|~P))+I[15]+4264355552&4294967295,V=T+(A<<10&4294967295|A>>>22),A=P+(T^(V|~b))+I[6]+2734768916&4294967295,P=V+(A<<15&4294967295|A>>>17),A=b+(V^(P|~T))+I[13]+1309151649&4294967295,b=P+(A<<21&4294967295|A>>>11),A=T+(P^(b|~V))+I[4]+4149444226&4294967295,T=b+(A<<6&4294967295|A>>>26),A=V+(b^(T|~P))+I[11]+3174756917&4294967295,V=T+(A<<10&4294967295|A>>>22),A=P+(T^(V|~b))+I[2]+718787259&4294967295,P=V+(A<<15&4294967295|A>>>17),A=b+(V^(P|~T))+I[9]+3951481745&4294967295,_.g[0]=_.g[0]+T&4294967295,_.g[1]=_.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,_.g[2]=_.g[2]+P&4294967295,_.g[3]=_.g[3]+V&4294967295}s.prototype.u=function(_,T){T===void 0&&(T=_.length);for(var b=T-this.blockSize,I=this.B,P=this.h,V=0;V<T;){if(P==0)for(;V<=b;)r(this,_,V),V+=this.blockSize;if(typeof _=="string"){for(;V<T;)if(I[P++]=_.charCodeAt(V++),P==this.blockSize){r(this,I),P=0;break}}else for(;V<T;)if(I[P++]=_[V++],P==this.blockSize){r(this,I),P=0;break}}this.h=P,this.o+=T},s.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var T=1;T<_.length-8;++T)_[T]=0;var b=8*this.o;for(T=_.length-8;T<_.length;++T)_[T]=b&255,b/=256;for(this.u(_),_=Array(16),T=b=0;4>T;++T)for(var I=0;32>I;I+=8)_[b++]=this.g[T]>>>I&255;return _};function i(_,T){var b=l;return Object.prototype.hasOwnProperty.call(b,_)?b[_]:b[_]=T(_)}function o(_,T){this.h=T;for(var b=[],I=!0,P=_.length-1;0<=P;P--){var V=_[P]|0;I&&V==T||(b[P]=V,I=!1)}this.g=b}var l={};function u(_){return-128<=_&&128>_?i(_,function(T){return new o([T|0],0>T?-1:0)}):new o([_|0],0>_?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return p;if(0>_)return x(c(-_));for(var T=[],b=1,I=0;_>=b;I++)T[I]=_/b|0,b*=4294967296;return new o(T,0)}function h(_,T){if(_.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(_.charAt(0)=="-")return x(h(_.substring(1),T));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(T,8)),I=p,P=0;P<_.length;P+=8){var V=Math.min(8,_.length-P),A=parseInt(_.substring(P,P+V),T);8>V?(V=c(Math.pow(T,V)),I=I.j(V).add(c(A))):(I=I.j(b),I=I.add(c(A)))}return I}var p=u(0),g=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(E(this))return-x(this).m();for(var _=0,T=1,b=0;b<this.g.length;b++){var I=this.i(b);_+=(0<=I?I:4294967296+I)*T,T*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(w(this))return"0";if(E(this))return"-"+x(this).toString(_);for(var T=c(Math.pow(_,6)),b=this,I="";;){var P=D(b,T).g;b=N(b,P.j(T));var V=((0<b.g.length?b.g[0]:b.h)>>>0).toString(_);if(b=P,w(b))return V+I;for(;6>V.length;)V="0"+V;I=V+I}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function w(_){if(_.h!=0)return!1;for(var T=0;T<_.g.length;T++)if(_.g[T]!=0)return!1;return!0}function E(_){return _.h==-1}t.l=function(_){return _=N(this,_),E(_)?-1:w(_)?0:1};function x(_){for(var T=_.g.length,b=[],I=0;I<T;I++)b[I]=~_.g[I];return new o(b,~_.h).add(g)}t.abs=function(){return E(this)?x(this):this},t.add=function(_){for(var T=Math.max(this.g.length,_.g.length),b=[],I=0,P=0;P<=T;P++){var V=I+(this.i(P)&65535)+(_.i(P)&65535),A=(V>>>16)+(this.i(P)>>>16)+(_.i(P)>>>16);I=A>>>16,V&=65535,A&=65535,b[P]=A<<16|V}return new o(b,b[b.length-1]&-2147483648?-1:0)};function N(_,T){return _.add(x(T))}t.j=function(_){if(w(this)||w(_))return p;if(E(this))return E(_)?x(this).j(x(_)):x(x(this).j(_));if(E(_))return x(this.j(x(_)));if(0>this.l(y)&&0>_.l(y))return c(this.m()*_.m());for(var T=this.g.length+_.g.length,b=[],I=0;I<2*T;I++)b[I]=0;for(I=0;I<this.g.length;I++)for(var P=0;P<_.g.length;P++){var V=this.i(I)>>>16,A=this.i(I)&65535,Oe=_.i(P)>>>16,dt=_.i(P)&65535;b[2*I+2*P]+=A*dt,R(b,2*I+2*P),b[2*I+2*P+1]+=V*dt,R(b,2*I+2*P+1),b[2*I+2*P+1]+=A*Oe,R(b,2*I+2*P+1),b[2*I+2*P+2]+=V*Oe,R(b,2*I+2*P+2)}for(I=0;I<T;I++)b[I]=b[2*I+1]<<16|b[2*I];for(I=T;I<2*T;I++)b[I]=0;return new o(b,0)};function R(_,T){for(;(_[T]&65535)!=_[T];)_[T+1]+=_[T]>>>16,_[T]&=65535,T++}function C(_,T){this.g=_,this.h=T}function D(_,T){if(w(T))throw Error("division by zero");if(w(_))return new C(p,p);if(E(_))return T=D(x(_),T),new C(x(T.g),x(T.h));if(E(T))return T=D(_,x(T)),new C(x(T.g),T.h);if(30<_.g.length){if(E(_)||E(T))throw Error("slowDivide_ only works with positive integers.");for(var b=g,I=T;0>=I.l(_);)b=j(b),I=j(I);var P=L(b,1),V=L(I,1);for(I=L(I,2),b=L(b,2);!w(I);){var A=V.add(I);0>=A.l(_)&&(P=P.add(b),V=A),I=L(I,1),b=L(b,1)}return T=N(_,P.j(T)),new C(P,T)}for(P=p;0<=_.l(T);){for(b=Math.max(1,Math.floor(_.m()/T.m())),I=Math.ceil(Math.log(b)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),V=c(b),A=V.j(T);E(A)||0<A.l(_);)b-=I,V=c(b),A=V.j(T);w(V)&&(V=g),P=P.add(V),_=N(_,A)}return new C(P,_)}t.A=function(_){return D(this,_).h},t.and=function(_){for(var T=Math.max(this.g.length,_.g.length),b=[],I=0;I<T;I++)b[I]=this.i(I)&_.i(I);return new o(b,this.h&_.h)},t.or=function(_){for(var T=Math.max(this.g.length,_.g.length),b=[],I=0;I<T;I++)b[I]=this.i(I)|_.i(I);return new o(b,this.h|_.h)},t.xor=function(_){for(var T=Math.max(this.g.length,_.g.length),b=[],I=0;I<T;I++)b[I]=this.i(I)^_.i(I);return new o(b,this.h^_.h)};function j(_){for(var T=_.g.length+1,b=[],I=0;I<T;I++)b[I]=_.i(I)<<1|_.i(I-1)>>>31;return new o(b,_.h)}function L(_,T){var b=T>>5;T%=32;for(var I=_.g.length-b,P=[],V=0;V<I;V++)P[V]=0<T?_.i(V+b)>>>T|_.i(V+b+1)<<32-T:_.i(V+b);return new o(P,_.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Vg=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,vs=o}).apply(typeof gf<"u"?gf:typeof self<"u"?self:typeof window<"u"?window:{});var ko=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ng,ui,Og,qo,gu,Mg,Lg,Ug;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,m){return a==Array.prototype||a==Object.prototype||(a[f]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ko=="object"&&ko];for(var f=0;f<a.length;++f){var m=a[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function r(a,f){if(f)e:{var m=s;a=a.split(".");for(var v=0;v<a.length-1;v++){var M=a[v];if(!(M in m))break e;m=m[M]}a=a[a.length-1],v=m[a],f=f(v),f!=v&&f!=null&&e(m,a,{configurable:!0,writable:!0,value:f})}}function i(a,f){a instanceof String&&(a+="");var m=0,v=!1,M={next:function(){if(!v&&m<a.length){var U=m++;return{value:f(U,a[U]),done:!1}}return v=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}r("Array.prototype.values",function(a){return a||function(){return i(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function c(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function h(a,f,m){return a.call.apply(a.bind,arguments)}function p(a,f,m){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,v),a.apply(f,M)}}return function(){return a.apply(f,arguments)}}function g(a,f,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(a,f){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function w(a,f){function m(){}m.prototype=f.prototype,a.aa=f.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(v,M,U){for(var Z=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)Z[Be-2]=arguments[Be];return f.prototype[M].apply(v,Z)}}function E(a){const f=a.length;if(0<f){const m=Array(f);for(let v=0;v<f;v++)m[v]=a[v];return m}return[]}function x(a,f){for(let m=1;m<arguments.length;m++){const v=arguments[m];if(u(v)){const M=a.length||0,U=v.length||0;a.length=M+U;for(let Z=0;Z<U;Z++)a[M+Z]=v[Z]}else a.push(v)}}class N{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function R(a){return/^[\s\xa0]*$/.test(a)}function C(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var j=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function L(a,f,m){for(const v in a)f.call(m,a[v],v,a)}function _(a,f){for(const m in a)f.call(void 0,a[m],m,a)}function T(a){const f={};for(const m in a)f[m]=a[m];return f}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,f){let m,v;for(let M=1;M<arguments.length;M++){v=arguments[M];for(m in v)a[m]=v[m];for(let U=0;U<b.length;U++)m=b[U],Object.prototype.hasOwnProperty.call(v,m)&&(a[m]=v[m])}}function P(a){var f=1;a=a.split(":");const m=[];for(;0<f&&a.length;)m.push(a.shift()),f--;return a.length&&m.push(a.join(":")),m}function V(a){l.setTimeout(()=>{throw a},0)}function A(){var a=Mt;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class Oe{constructor(){this.h=this.g=null}add(f,m){const v=dt.get();v.set(f,m),this.h?this.h.next=v:this.g=v,this.h=v}}var dt=new N(()=>new Ge,a=>a.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,Ie=!1,Mt=new Oe,Je=()=>{const a=l.Promise.resolve(void 0);Se=()=>{a.then(Fe)}};var Fe=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(m){V(m)}var f=dt;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}Ie=!1};function We(){this.s=this.s,this.C=this.C}We.prototype.s=!1,We.prototype.ma=function(){this.s||(this.s=!0,this.N())},We.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Xe(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}Xe.prototype.h=function(){this.defaultPrevented=!0};var Zn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,f),l.removeEventListener("test",m,f)}catch{}return a}();function gn(a,f){if(Xe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(j){e:{try{D(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else m=="mouseover"?f=a.fromElement:m=="mouseout"&&(f=a.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Bt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&gn.aa.h.call(this)}}w(gn,Xe);var Bt={2:"touch",3:"pen",4:"mouse"};gn.prototype.h=function(){gn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var q="closure_listenable_"+(1e6*Math.random()|0),re=0;function se(a,f,m,v,M){this.listener=a,this.proxy=null,this.src=f,this.type=m,this.capture=!!v,this.ha=M,this.key=++re,this.da=this.fa=!1}function le(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ve(a){this.src=a,this.g={},this.h=0}Ve.prototype.add=function(a,f,m,v,M){var U=a.toString();a=this.g[U],a||(a=this.g[U]=[],this.h++);var Z=k(a,f,v,M);return-1<Z?(f=a[Z],m||(f.fa=!1)):(f=new se(f,this.src,U,!!v,M),f.fa=m,a.push(f)),f};function S(a,f){var m=f.type;if(m in a.g){var v=a.g[m],M=Array.prototype.indexOf.call(v,f,void 0),U;(U=0<=M)&&Array.prototype.splice.call(v,M,1),U&&(le(f),a.g[m].length==0&&(delete a.g[m],a.h--))}}function k(a,f,m,v){for(var M=0;M<a.length;++M){var U=a[M];if(!U.da&&U.listener==f&&U.capture==!!m&&U.ha==v)return M}return-1}var O="closure_lm_"+(1e6*Math.random()|0),H={};function W(a,f,m,v,M){if(Array.isArray(f)){for(var U=0;U<f.length;U++)W(a,f[U],m,v,M);return null}return m=ye(m),a&&a[q]?a.K(f,m,c(v)?!!v.capture:!1,M):K(a,f,m,!1,v,M)}function K(a,f,m,v,M,U){if(!f)throw Error("Invalid event type");var Z=c(M)?!!M.capture:!!M,Be=te(a);if(Be||(a[O]=Be=new Ve(a)),m=Be.add(f,m,v,Z,U),m.proxy)return m;if(v=ne(),m.proxy=v,v.src=a,v.listener=m,a.addEventListener)Zn||(M=Z),M===void 0&&(M=!1),a.addEventListener(f.toString(),v,M);else if(a.attachEvent)a.attachEvent(Y(f.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ne(){function a(m){return f.call(a.src,a.listener,m)}const f=de;return a}function X(a,f,m,v,M){if(Array.isArray(f))for(var U=0;U<f.length;U++)X(a,f[U],m,v,M);else v=c(v)?!!v.capture:!!v,m=ye(m),a&&a[q]?(a=a.i,f=String(f).toString(),f in a.g&&(U=a.g[f],m=k(U,m,v,M),-1<m&&(le(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete a.g[f],a.h--)))):a&&(a=te(a))&&(f=a.g[f.toString()],a=-1,f&&(a=k(f,m,v,M)),(m=-1<a?f[a]:null)&&J(m))}function J(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[q])S(f.i,a);else{var m=a.type,v=a.proxy;f.removeEventListener?f.removeEventListener(m,v,a.capture):f.detachEvent?f.detachEvent(Y(m),v):f.addListener&&f.removeListener&&f.removeListener(v),(m=te(f))?(S(m,a),m.h==0&&(m.src=null,f[O]=null)):le(a)}}}function Y(a){return a in H?H[a]:H[a]="on"+a}function de(a,f){if(a.da)a=!0;else{f=new gn(f,this);var m=a.listener,v=a.ha||a.src;a.fa&&J(a),a=m.call(v,f)}return a}function te(a){return a=a[O],a instanceof Ve?a:null}var ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function ye(a){return typeof a=="function"?a:(a[ce]||(a[ce]=function(f){return a.handleEvent(f)}),a[ce])}function fe(){We.call(this),this.i=new Ve(this),this.M=this,this.F=null}w(fe,We),fe.prototype[q]=!0,fe.prototype.removeEventListener=function(a,f,m,v){X(this,a,f,m,v)};function Ee(a,f){var m,v=a.F;if(v)for(m=[];v;v=v.F)m.push(v);if(a=a.M,v=f.type||f,typeof f=="string")f=new Xe(f,a);else if(f instanceof Xe)f.target=f.target||a;else{var M=f;f=new Xe(v,a),I(f,M)}if(M=!0,m)for(var U=m.length-1;0<=U;U--){var Z=f.g=m[U];M=xe(Z,v,!0,f)&&M}if(Z=f.g=a,M=xe(Z,v,!0,f)&&M,M=xe(Z,v,!1,f)&&M,m)for(U=0;U<m.length;U++)Z=f.g=m[U],M=xe(Z,v,!1,f)&&M}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var m=a.g[f],v=0;v<m.length;v++)le(m[v]);delete a.g[f],a.h--}}this.F=null},fe.prototype.K=function(a,f,m,v){return this.i.add(String(a),f,!1,m,v)},fe.prototype.L=function(a,f,m,v){return this.i.add(String(a),f,!0,m,v)};function xe(a,f,m,v){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,U=0;U<f.length;++U){var Z=f[U];if(Z&&!Z.da&&Z.capture==m){var Be=Z.listener,yt=Z.ha||Z.src;Z.fa&&S(a.i,Z),M=Be.call(yt,v)!==!1&&M}}return M&&!v.defaultPrevented}function Et(a,f,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(a,f||0)}function mt(a){a.g=Et(()=>{a.g=null,a.i&&(a.i=!1,mt(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class Zt extends We{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:mt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tt(a){We.call(this),this.h=a,this.g={}}w(Tt,We);var es=[];function Hr(a){L(a.g,function(f,m){this.g.hasOwnProperty(m)&&J(f)},a),a.g={}}Tt.prototype.N=function(){Tt.aa.N.call(this),Hr(this)},Tt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=l.JSON.stringify,en=l.JSON.parse,lo=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function cl(){}cl.prototype.h=null;function Zc(a){return a.h||(a.h=a.i())}function ed(){}var Kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dl(){Xe.call(this,"d")}w(dl,Xe);function hl(){Xe.call(this,"c")}w(hl,Xe);var Ns={},td=null;function uo(){return td=td||new fe}Ns.La="serverreachability";function nd(a){Xe.call(this,Ns.La,a)}w(nd,Xe);function zr(a){const f=uo();Ee(f,new nd(f))}Ns.STAT_EVENT="statevent";function sd(a,f){Xe.call(this,Ns.STAT_EVENT,a),this.stat=f}w(sd,Xe);function Lt(a){const f=uo();Ee(f,new sd(f,a))}Ns.Ma="timingevent";function rd(a,f){Xe.call(this,Ns.Ma,a),this.size=f}w(rd,Xe);function Gr(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},f)}function Wr(){this.g=!0}Wr.prototype.xa=function(){this.g=!1};function wv(a,f,m,v,M,U){a.info(function(){if(a.g)if(U)for(var Z="",Be=U.split("&"),yt=0;yt<Be.length;yt++){var Ne=Be[yt].split("=");if(1<Ne.length){var It=Ne[0];Ne=Ne[1];var At=It.split("_");Z=2<=At.length&&At[1]=="type"?Z+(It+"="+Ne+"&"):Z+(It+"=redacted&")}}else Z=null;else Z=U;return"XMLHTTP REQ ("+v+") [attempt "+M+"]: "+f+`
`+m+`
`+Z})}function Ev(a,f,m,v,M,U,Z){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+M+"]: "+f+`
`+m+`
`+U+" "+Z})}function tr(a,f,m,v){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+Iv(a,m)+(v?" "+v:"")})}function Tv(a,f){a.info(function(){return"TIMEOUT: "+f})}Wr.prototype.info=function(){};function Iv(a,f){if(!a.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var v=m[a];if(!(2>v.length)){var M=v[1];if(Array.isArray(M)&&!(1>M.length)){var U=M[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Z=1;Z<M.length;Z++)M[Z]=""}}}}return gt(m)}catch{return f}}var co={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},id={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fl;function ho(){}w(ho,cl),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},fl=new ho;function ts(a,f,m,v){this.j=a,this.i=f,this.l=m,this.R=v||1,this.U=new Tt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new od}function od(){this.i=null,this.g="",this.h=!1}var ad={},pl={};function ml(a,f,m){a.L=1,a.v=go(kn(f)),a.m=m,a.P=!0,ld(a,null)}function ld(a,f){a.F=Date.now(),fo(a),a.A=kn(a.v);var m=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Ed(m.i,"t",v),a.C=0,m=a.j.J,a.h=new od,a.g=Fd(a.j,m?f:null,!a.m),0<a.O&&(a.M=new Zt(g(a.Y,a,a.g),a.O)),f=a.U,m=a.g,v=a.ca;var M="readystatechange";Array.isArray(M)||(M&&(es[0]=M.toString()),M=es);for(var U=0;U<M.length;U++){var Z=W(m,M[U],v||f.handleEvent,!1,f.h||f);if(!Z)break;f.g[Z.key]=Z}f=a.H?T(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),zr(),wv(a.i,a.u,a.A,a.l,a.R,a.m)}ts.prototype.ca=function(a){a=a.target;const f=this.M;f&&xn(a)==3?f.j():this.Y(a)},ts.prototype.Y=function(a){try{if(a==this.g)e:{const At=xn(this.g);var f=this.g.Ba();const rr=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||Pd(this.g)))){this.J||At!=4||f==7||(f==8||0>=rr?zr(3):zr(2)),gl(this);var m=this.g.Z();this.X=m;t:if(ud(this)){var v=Pd(this.g);a="";var M=v.length,U=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Os(this),Qr(this);var Z="";break t}this.h.i=new l.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,a+=this.h.i.decode(v[f],{stream:!(U&&f==M-1)});v.length=0,this.h.g+=a,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=m==200,Ev(this.i,this.u,this.A,this.l,this.R,At,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,yt=this.g;if((Be=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(Be)){var Ne=Be;break t}}Ne=null}if(m=Ne)tr(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yl(this,m);else{this.o=!1,this.s=3,Lt(12),Os(this),Qr(this);break e}}if(this.P){m=!0;let an;for(;!this.J&&this.C<Z.length;)if(an=Av(this,Z),an==pl){At==4&&(this.s=4,Lt(14),m=!1),tr(this.i,this.l,null,"[Incomplete Response]");break}else if(an==ad){this.s=4,Lt(15),tr(this.i,this.l,Z,"[Invalid Chunk]"),m=!1;break}else tr(this.i,this.l,an,null),yl(this,an);if(ud(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||Z.length!=0||this.h.h||(this.s=1,Lt(16),m=!1),this.o=this.o&&m,!m)tr(this.i,this.l,Z,"[Invalid Chunked Response]"),Os(this),Qr(this);else if(0<Z.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Tl(It),It.M=!0,Lt(11))}}else tr(this.i,this.l,Z,null),yl(this,Z);At==4&&Os(this),this.o&&!this.J&&(At==4?Md(this.j,this):(this.o=!1,fo(this)))}else jv(this.g),m==400&&0<Z.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),Os(this),Qr(this)}}}catch{}finally{}};function ud(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Av(a,f){var m=a.C,v=f.indexOf(`
`,m);return v==-1?pl:(m=Number(f.substring(m,v)),isNaN(m)?ad:(v+=1,v+m>f.length?pl:(f=f.slice(v,v+m),a.C=v+m,f)))}ts.prototype.cancel=function(){this.J=!0,Os(this)};function fo(a){a.S=Date.now()+a.I,cd(a,a.I)}function cd(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Gr(g(a.ba,a),f)}function gl(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ts.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Tv(this.i,this.A),this.L!=2&&(zr(),Lt(17)),Os(this),this.s=2,Qr(this)):cd(this,this.S-a)};function Qr(a){a.j.G==0||a.J||Md(a.j,a)}function Os(a){gl(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,Hr(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function yl(a,f){try{var m=a.j;if(m.G!=0&&(m.g==a||vl(m.h,a))){if(!a.K&&vl(m.h,a)&&m.G==3){try{var v=m.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var M=v;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)Eo(m),bo(m);else break e;El(m),Lt(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=Gr(g(m.Za,m),6e3));if(1>=fd(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ls(m,11)}else if((a.K||m.g==a)&&Eo(m),!R(f))for(M=m.Da.g.parse(f),f=0;f<M.length;f++){let Ne=M[f];if(m.T=Ne[0],Ne=Ne[1],m.G==2)if(Ne[0]=="c"){m.K=Ne[1],m.ia=Ne[2];const It=Ne[3];It!=null&&(m.la=It,m.j.info("VER="+m.la));const At=Ne[4];At!=null&&(m.Aa=At,m.j.info("SVER="+m.Aa));const rr=Ne[5];rr!=null&&typeof rr=="number"&&0<rr&&(v=1.5*rr,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const an=a.g;if(an){const Io=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Io){var U=v.h;U.g||Io.indexOf("spdy")==-1&&Io.indexOf("quic")==-1&&Io.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(_l(U,U.h),U.h=null))}if(v.D){const Il=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;Il&&(v.ya=Il,Qe(v.I,v.D,Il))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var Z=a;if(v.qa=$d(v,v.J?v.ia:null,v.W),Z.K){pd(v.h,Z);var Be=Z,yt=v.L;yt&&(Be.I=yt),Be.B&&(gl(Be),fo(Be)),v.g=Z}else Nd(v);0<m.i.length&&wo(m)}else Ne[0]!="stop"&&Ne[0]!="close"||Ls(m,7);else m.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Ls(m,7):wl(m):Ne[0]!="noop"&&m.l&&m.l.ta(Ne),m.v=0)}}zr(4)}catch{}}var Rv=class{constructor(a,f){this.g=a,this.map=f}};function dd(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hd(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function fd(a){return a.h?1:a.g?a.g.size:0}function vl(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function _l(a,f){a.g?a.g.add(f):a.h=f}function pd(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}dd.prototype.cancel=function(){if(this.i=md(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function md(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const m of a.g.values())f=f.concat(m.D);return f}return E(a.i)}function Sv(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var f=[],m=a.length,v=0;v<m;v++)f.push(a[v]);return f}f=[],m=0;for(v in a)f[m++]=a[v];return f}function Cv(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var f=[];a=a.length;for(var m=0;m<a;m++)f.push(m);return f}f=[],m=0;for(const v in a)f[m++]=v;return f}}}function gd(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var m=Cv(a),v=Sv(a),M=v.length,U=0;U<M;U++)f.call(void 0,v[U],m&&m[U],a)}var yd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pv(a,f){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var v=a[m].indexOf("="),M=null;if(0<=v){var U=a[m].substring(0,v);M=a[m].substring(v+1)}else U=a[m];f(U,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Ms(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ms){this.h=a.h,po(this,a.j),this.o=a.o,this.g=a.g,mo(this,a.s),this.l=a.l;var f=a.i,m=new Xr;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),vd(this,m),this.m=a.m}else a&&(f=String(a).match(yd))?(this.h=!1,po(this,f[1]||"",!0),this.o=Yr(f[2]||""),this.g=Yr(f[3]||"",!0),mo(this,f[4]),this.l=Yr(f[5]||"",!0),vd(this,f[6]||"",!0),this.m=Yr(f[7]||"")):(this.h=!1,this.i=new Xr(null,this.h))}Ms.prototype.toString=function(){var a=[],f=this.j;f&&a.push(Jr(f,_d,!0),":");var m=this.g;return(m||f=="file")&&(a.push("//"),(f=this.o)&&a.push(Jr(f,_d,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(Jr(m,m.charAt(0)=="/"?Dv:xv,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",Jr(m,Nv)),a.join("")};function kn(a){return new Ms(a)}function po(a,f,m){a.j=m?Yr(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function mo(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function vd(a,f,m){f instanceof Xr?(a.i=f,Ov(a.i,a.h)):(m||(f=Jr(f,Vv)),a.i=new Xr(f,a.h))}function Qe(a,f,m){a.i.set(f,m)}function go(a){return Qe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Yr(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Jr(a,f,m){return typeof a=="string"?(a=encodeURI(a).replace(f,kv),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function kv(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var _d=/[#\/\?@]/g,xv=/[#\?:]/g,Dv=/[#\?]/g,Vv=/[#\?@]/g,Nv=/#/g;function Xr(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function ns(a){a.g||(a.g=new Map,a.h=0,a.i&&Pv(a.i,function(f,m){a.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Xr.prototype,t.add=function(a,f){ns(this),this.i=null,a=nr(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(f),this.h+=1,this};function bd(a,f){ns(a),f=nr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function wd(a,f){return ns(a),f=nr(a,f),a.g.has(f)}t.forEach=function(a,f){ns(this),this.g.forEach(function(m,v){m.forEach(function(M){a.call(f,M,v,this)},this)},this)},t.na=function(){ns(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let v=0;v<f.length;v++){const M=a[v];for(let U=0;U<M.length;U++)m.push(f[v])}return m},t.V=function(a){ns(this);let f=[];if(typeof a=="string")wd(this,a)&&(f=f.concat(this.g.get(nr(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)f=f.concat(a[m])}return f},t.set=function(a,f){return ns(this),this.i=null,a=nr(this,a),wd(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function Ed(a,f,m){bd(a,f),0<m.length&&(a.i=null,a.g.set(nr(a,f),E(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var v=f[m];const U=encodeURIComponent(String(v)),Z=this.V(v);for(v=0;v<Z.length;v++){var M=U;Z[v]!==""&&(M+="="+encodeURIComponent(String(Z[v]))),a.push(M)}}return this.i=a.join("&")};function nr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function Ov(a,f){f&&!a.j&&(ns(a),a.i=null,a.g.forEach(function(m,v){var M=v.toLowerCase();v!=M&&(bd(this,v),Ed(this,M,m))},a)),a.j=f}function Mv(a,f){const m=new Wr;if(l.Image){const v=new Image;v.onload=y(ss,m,"TestLoadImage: loaded",!0,f,v),v.onerror=y(ss,m,"TestLoadImage: error",!1,f,v),v.onabort=y(ss,m,"TestLoadImage: abort",!1,f,v),v.ontimeout=y(ss,m,"TestLoadImage: timeout",!1,f,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else f(!1)}function Lv(a,f){const m=new Wr,v=new AbortController,M=setTimeout(()=>{v.abort(),ss(m,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:v.signal}).then(U=>{clearTimeout(M),U.ok?ss(m,"TestPingServer: ok",!0,f):ss(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),ss(m,"TestPingServer: error",!1,f)})}function ss(a,f,m,v,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),v(m)}catch{}}function Uv(){this.g=new lo}function $v(a,f,m){const v=m||"";try{gd(a,function(M,U){let Z=M;c(M)&&(Z=gt(M)),f.push(v+U+"="+encodeURIComponent(Z))})}catch(M){throw f.push(v+"type="+encodeURIComponent("_badmap")),M}}function yo(a){this.l=a.Ub||null,this.j=a.eb||!1}w(yo,cl),yo.prototype.g=function(){return new vo(this.l,this.j)},yo.prototype.i=function(a){return function(){return a}}({});function vo(a,f){fe.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(vo,fe),t=vo.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,ei(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Td(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Td(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Zr(this):ei(this),this.readyState==3&&Td(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Zr(this))},t.Qa=function(a){this.g&&(this.response=a,Zr(this))},t.ga=function(){this.g&&Zr(this)};function Zr(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ei(a)}t.setRequestHeader=function(a,f){this.u.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=f.next();return a.join(`\r
`)};function ei(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Id(a){let f="";return L(a,function(m,v){f+=v,f+=":",f+=m,f+=`\r
`}),f}function bl(a,f,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=Id(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):Qe(a,f,m))}function et(a){fe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(et,fe);var Fv=/^https?$/i,Bv=["POST","PUT"];t=et.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,f,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fl.g(),this.v=this.o?Zc(this.o):Zc(fl),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(U){Ad(this,U);return}if(a=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var M in v)m.set(M,v[M]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const U of v.keys())m.set(U,v.get(U));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),M=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Bv,f,void 0))||v||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Z]of m)this.g.setRequestHeader(U,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cd(this),this.u=!0,this.g.send(a),this.u=!1}catch(U){Ad(this,U)}};function Ad(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,Rd(a),_o(a)}function Rd(a){a.A||(a.A=!0,Ee(a,"complete"),Ee(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ee(this,"complete"),Ee(this,"abort"),_o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_o(this,!0)),et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Sd(this):this.bb())},t.bb=function(){Sd(this)};function Sd(a){if(a.h&&typeof o<"u"&&(!a.v[1]||xn(a)!=4||a.Z()!=2)){if(a.u&&xn(a)==4)Et(a.Ea,0,a);else if(Ee(a,"readystatechange"),xn(a)==4){a.h=!1;try{const Z=a.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var v;if(v=Z===0){var M=String(a.D).match(yd)[1]||null;!M&&l.self&&l.self.location&&(M=l.self.location.protocol.slice(0,-1)),v=!Fv.test(M?M.toLowerCase():"")}m=v}if(m)Ee(a,"complete"),Ee(a,"success");else{a.m=6;try{var U=2<xn(a)?a.g.statusText:""}catch{U=""}a.l=U+" ["+a.Z()+"]",Rd(a)}}finally{_o(a)}}}}function _o(a,f){if(a.g){Cd(a);const m=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||Ee(a,"ready");try{m.onreadystatechange=v}catch{}}}function Cd(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function xn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),en(f)}};function Pd(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function jv(a){const f={};a=(a.g&&2<=xn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(R(a[v]))continue;var m=P(a[v]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const U=f[M]||[];f[M]=U,U.push(m)}_(f,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ti(a,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||f}function kd(a){this.Aa=0,this.i=[],this.j=new Wr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ti("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ti("baseRetryDelayMs",5e3,a),this.cb=ti("retryDelaySeedMs",1e4,a),this.Wa=ti("forwardChannelMaxRetries",2,a),this.wa=ti("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new dd(a&&a.concurrentRequestLimit),this.Da=new Uv,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=kd.prototype,t.la=8,t.G=1,t.connect=function(a,f,m,v){Lt(0),this.W=a,this.H=f||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=$d(this,null,this.W),wo(this)};function wl(a){if(xd(a),a.G==3){var f=a.U++,m=kn(a.I);if(Qe(m,"SID",a.K),Qe(m,"RID",f),Qe(m,"TYPE","terminate"),ni(a,m),f=new ts(a,a.j,f),f.L=2,f.v=go(kn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=f.v,m=!0),m||(f.g=Fd(f.j,null),f.g.ea(f.v)),f.F=Date.now(),fo(f)}Ud(a)}function bo(a){a.g&&(Tl(a),a.g.cancel(),a.g=null)}function xd(a){bo(a),a.u&&(l.clearTimeout(a.u),a.u=null),Eo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function wo(a){if(!hd(a.h)&&!a.s){a.s=!0;var f=a.Ga;Se||Je(),Ie||(Se(),Ie=!0),Mt.add(f,a),a.B=0}}function qv(a,f){return fd(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Gr(g(a.Ga,a,f),Ld(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const M=new ts(this,this.j,a);let U=this.o;if(this.S&&(U?(U=T(U),I(U,this.S)):U=this.S),this.m!==null||this.O||(M.H=U,U=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Vd(this,M,f),m=kn(this.I),Qe(m,"RID",a),Qe(m,"CVER",22),this.D&&Qe(m,"X-HTTP-Session-Id",this.D),ni(this,m),U&&(this.O?f="headers="+encodeURIComponent(String(Id(U)))+"&"+f:this.m&&bl(m,this.m,U)),_l(this.h,M),this.Ua&&Qe(m,"TYPE","init"),this.P?(Qe(m,"$req",f),Qe(m,"SID","null"),M.T=!0,ml(M,m,null)):ml(M,m,f),this.G=2}}else this.G==3&&(a?Dd(this,a):this.i.length==0||hd(this.h)||Dd(this))};function Dd(a,f){var m;f?m=f.l:m=a.U++;const v=kn(a.I);Qe(v,"SID",a.K),Qe(v,"RID",m),Qe(v,"AID",a.T),ni(a,v),a.m&&a.o&&bl(v,a.m,a.o),m=new ts(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),f&&(a.i=f.D.concat(a.i)),f=Vd(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),_l(a.h,m),ml(m,v,f)}function ni(a,f){a.H&&L(a.H,function(m,v){Qe(f,v,m)}),a.l&&gd({},function(m,v){Qe(f,v,m)})}function Vd(a,f,m){m=Math.min(a.i.length,m);var v=a.l?g(a.l.Na,a.l,a):null;e:{var M=a.i;let U=-1;for(;;){const Z=["count="+m];U==-1?0<m?(U=M[0].g,Z.push("ofs="+U)):U=0:Z.push("ofs="+U);let Be=!0;for(let yt=0;yt<m;yt++){let Ne=M[yt].g;const It=M[yt].map;if(Ne-=U,0>Ne)U=Math.max(0,M[yt].g-100),Be=!1;else try{$v(It,Z,"req"+Ne+"_")}catch{v&&v(It)}}if(Be){v=Z.join("&");break e}}}return a=a.i.splice(0,m),f.D=a,v}function Nd(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;Se||Je(),Ie||(Se(),Ie=!0),Mt.add(f,a),a.v=0}}function El(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Gr(g(a.Fa,a),Ld(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Od(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Gr(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),bo(this),Od(this))};function Tl(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Od(a){a.g=new ts(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=kn(a.qa);Qe(f,"RID","rpc"),Qe(f,"SID",a.K),Qe(f,"AID",a.T),Qe(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&Qe(f,"TO",a.ja),Qe(f,"TYPE","xmlhttp"),ni(a,f),a.m&&a.o&&bl(f,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=go(kn(f)),m.m=null,m.P=!0,ld(m,a)}t.Za=function(){this.C!=null&&(this.C=null,bo(this),El(this),Lt(19))};function Eo(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Md(a,f){var m=null;if(a.g==f){Eo(a),Tl(a),a.g=null;var v=2}else if(vl(a.h,f))m=f.D,pd(a.h,f),v=1;else return;if(a.G!=0){if(f.o)if(v==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var M=a.B;v=uo(),Ee(v,new rd(v,m)),wo(a)}else Nd(a);else if(M=f.s,M==3||M==0&&0<f.X||!(v==1&&qv(a,f)||v==2&&El(a)))switch(m&&0<m.length&&(f=a.h,f.i=f.i.concat(m)),M){case 1:Ls(a,5);break;case 4:Ls(a,10);break;case 3:Ls(a,6);break;default:Ls(a,2)}}}function Ld(a,f){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*f}function Ls(a,f){if(a.j.info("Error code "+f),f==2){var m=g(a.fb,a),v=a.Xa;const M=!v;v=new Ms(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||po(v,"https"),go(v),M?Mv(v.toString(),m):Lv(v.toString(),m)}else Lt(2);a.G=0,a.l&&a.l.sa(f),Ud(a),xd(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Ud(a){if(a.G=0,a.ka=[],a.l){const f=md(a.h);(f.length!=0||a.i.length!=0)&&(x(a.ka,f),x(a.ka,a.i),a.h.i.length=0,E(a.i),a.i.length=0),a.l.ra()}}function $d(a,f,m){var v=m instanceof Ms?kn(m):new Ms(m);if(v.g!="")f&&(v.g=f+"."+v.g),mo(v,v.s);else{var M=l.location;v=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var U=new Ms(null);v&&po(U,v),f&&(U.g=f),M&&mo(U,M),m&&(U.l=m),v=U}return m=a.D,f=a.ya,m&&f&&Qe(v,m,f),Qe(v,"VER",a.la),ni(a,v),v}function Fd(a,f,m){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new et(new yo({eb:m})):new et(a.pa),f.Ha(a.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bd(){}t=Bd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function To(){}To.prototype.g=function(a,f){return new Wt(a,f)};function Wt(a,f){fe.call(this),this.g=new kd(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!R(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!R(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new sr(this)}w(Wt,fe),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){wl(this.g)},Wt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=gt(a),a=m);f.i.push(new Rv(f.Ya++,a)),f.G==3&&wo(f)},Wt.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,Wt.aa.N.call(this)};function jd(a){dl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const m in f){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}w(jd,dl);function qd(){hl.call(this),this.status=1}w(qd,hl);function sr(a){this.g=a}w(sr,Bd),sr.prototype.ua=function(){Ee(this.g,"a")},sr.prototype.ta=function(a){Ee(this.g,new jd(a))},sr.prototype.sa=function(a){Ee(this.g,new qd)},sr.prototype.ra=function(){Ee(this.g,"b")},To.prototype.createWebChannel=To.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,Ug=function(){return new To},Lg=function(){return uo()},Mg=Ns,gu={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},co.NO_ERROR=0,co.TIMEOUT=8,co.HTTP_ERROR=6,qo=co,id.COMPLETE="complete",Og=id,ed.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",fe.prototype.listen=fe.prototype.K,ui=ed,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,Ng=et}).apply(typeof ko<"u"?ko:typeof self<"u"?self:typeof window<"u"?window:{});const yf="@firebase/firestore",vf="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new tc("@firebase/firestore");function lr(){return Qs.logLevel}function ie(t,...e){if(Qs.logLevel<=Ce.DEBUG){const n=e.map(mc);Qs.debug(`Firestore (${Ur}): ${t}`,...n)}}function Gn(t,...e){if(Qs.logLevel<=Ce.ERROR){const n=e.map(mc);Qs.error(`Firestore (${Ur}): ${t}`,...n)}}function Cr(t,...e){if(Qs.logLevel<=Ce.WARN){const n=e.map(mc);Qs.warn(`Firestore (${Ur}): ${t}`,...n)}}function mc(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,$g(t,s,n)}function $g(t,e,n){let s=`FIRESTORE (${Ur}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Gn(s),new Error(s)}function $e(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||$g(e,r,s)}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class f1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class p1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class m1{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let s=this.i;const r=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let i=new jn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jn,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new Fg(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new St(e)}}class g1{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=St.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class y1{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new g1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _f{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);const s=i=>{i.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _f(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _f(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=_1(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Te(t,e){return t<e?-1:t>e?1:0}function yu(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return Te(s,r);{const i=Bg(),o=b1(i.encode(bf(t,n)),i.encode(bf(e,n)));return o!==0?o:Te(s,r)}}n+=s>65535?2:1}return Te(t.length,e.length)}function bf(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function b1(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Te(t[n],e[n]);return Te(t.length,e.length)}function Pr(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=-62135596800,Ef=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Ef);return new ut(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wf)throw new ae(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ef}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-wf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new ut(0,0))}static max(){return new _e(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="__name__";class _n{constructor(e,n,s){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ge(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return _n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _n?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=_n.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Te(e.length,n.length)}static compareSegments(e,n){const s=_n.isNumericId(e),r=_n.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?_n.extractNumericId(e).compare(_n.extractNumericId(n)):yu(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class Ye extends _n{construct(e,n,s){return new Ye(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ae(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const w1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends _n{construct(e,n,s){return new bt(e,n,s)}static isValidIdentifier(e){return w1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tf}static keyField(){return new bt([Tf])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new ae(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new ae(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ae(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new ae(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(n)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Ye.fromString(e))}static fromName(e){return new he(Ye.fromString(e).popFirst(5))}static empty(){return new he(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=-1;function E1(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=_e.fromTimestamp(s===1e9?new ut(n+1,0):new ut(n,s));return new Is(r,he.empty(),e)}function T1(t){return new Is(t.readTime,t.key,Ui)}class Is{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Is(_e.min(),he.empty(),Ui)}static max(){return new Is(_e.max(),he.empty(),Ui)}}function I1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $r(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==A1)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,s)=>{n(e)})}static reject(e){return new G((n,s)=>{s(e)})}static waitFor(e){return new G((n,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},u=>s(u))}),o=!0,i===r&&n()})}static or(e){let n=G.resolve(!1);for(const s of e)n=n.next(r=>r?G.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new G((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++l,l===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new G((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function S1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fr(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ka.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=-1;function za(t){return t==null}function fa(t){return t===0&&1/t==-1/0}function C1(t){return typeof t=="number"&&Number.isInteger(t)&&!fa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="";function P1(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=If(e)),e=k1(t.get(n),e);return If(e)}function k1(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case qg:n+="";break;default:n+=i}}return n}function If(t){return t+qg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Hg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xo(this.root,e,this.comparator,!1)}getReverseIterator(){return new xo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xo(this.root,e,this.comparator,!0)}}class xo{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??vt.RED,this.left=r??vt.EMPTY,this.right=i??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new vt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return vt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rf(this.data.getIterator())}getIteratorFrom(e){return new Rf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class Rf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new Xt([])}unionWith(e){let n=new ct(bt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Xt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pr(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Kg("Invalid base64 string: "+i):i}}(e);return new wt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const x1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(t){if($e(!!t,39018),typeof t=="string"){let e=0;const n=x1.exec(t);if($e(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rs(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="server_timestamp",Gg="__type__",Wg="__previous_value__",Qg="__local_write_time__";function yc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gg])===null||n===void 0?void 0:n.stringValue)===zg}function Ga(t){const e=t.mapValue.fields[Wg];return yc(e)?Ga(e):e}function $i(t){const e=As(t.mapValue.fields[Qg].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n,s,r,i,o,l,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const pa="(default)";class Fi{constructor(e,n){this.projectId=e,this.database=n||pa}static empty(){return new Fi("","")}get isDefaultDatabase(){return this.database===pa}isEqual(e){return e instanceof Fi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="__type__",V1="__max__",Do={mapValue:{}},Jg="__vector__",ma="value";function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yc(t)?4:O1(t)?9007199254740991:N1(t)?10:11:ge(28295,{value:t})}function Cn(t,e){if(t===e)return!0;const n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $i(t).isEqual($i(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=As(r.timestampValue),l=As(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Rs(r.bytesValue).isEqual(Rs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return rt(r.geoPointValue.latitude)===rt(i.geoPointValue.latitude)&&rt(r.geoPointValue.longitude)===rt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return rt(r.integerValue)===rt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=rt(r.doubleValue),l=rt(i.doubleValue);return o===l?fa(o)===fa(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Pr(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Af(o)!==Af(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Cn(o[u],l[u])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function Bi(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function kr(t,e){if(t===e)return 0;const n=Ss(t),s=Ss(e);if(n!==s)return Te(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=rt(i.integerValue||i.doubleValue),u=rt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Sf(t.timestampValue,e.timestampValue);case 4:return Sf($i(t),$i(e));case 5:return yu(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Rs(i),u=Rs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=Te(l[c],u[c]);if(h!==0)return h}return Te(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Te(rt(i.latitude),rt(o.latitude));return l!==0?l:Te(rt(i.longitude),rt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cf(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,c,h;const p=i.fields||{},g=o.fields||{},y=(l=p[ma])===null||l===void 0?void 0:l.arrayValue,w=(u=g[ma])===null||u===void 0?void 0:u.arrayValue,E=Te(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:Cf(y,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Do.mapValue&&o===Do.mapValue)return 0;if(i===Do.mapValue)return 1;if(o===Do.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const g=yu(u[p],h[p]);if(g!==0)return g;const y=kr(l[u[p]],c[h[p]]);if(y!==0)return y}return Te(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{Pe:n})}}function Sf(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=As(t),s=As(e),r=Te(n.seconds,s.seconds);return r!==0?r:Te(n.nanos,s.nanos)}function Cf(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=kr(n[r],s[r]);if(i)return i}return Te(n.length,s.length)}function xr(t){return vu(t)}function vu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=As(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=vu(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${vu(n.fields[o])}`;return r+"}"}(t.mapValue):ge(61005,{value:t})}function Ho(t){switch(Ss(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ga(t);return e?16+Ho(e):16;case 5:return 2*t.stringValue.length;case 6:return Rs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Ho(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return xs(s.fields,(i,o)=>{r+=i.length+Ho(o)}),r}(t.mapValue);default:throw ge(13486,{value:t})}}function Pf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _u(t){return!!t&&"integerValue"in t}function vc(t){return!!t&&"arrayValue"in t}function kf(t){return!!t&&"nullValue"in t}function xf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ko(t){return!!t&&"mapValue"in t}function N1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Yg])===null||n===void 0?void 0:n.stringValue)===Jg}function Ti(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return xs(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ti(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ti(t.arrayValue.values[n]);return e}return Object.assign({},t)}function O1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===V1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ko(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ti(n)}setAll(e){let n=bt.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Ti(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Ko(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Ko(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){xs(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Kt(Ti(this.value))}}function Xg(t){const e=[];return xs(t.fields,(n,s)=>{const r=new bt([n]);if(Ko(s)){const i=Xg(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Xt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Pt(e,0,_e.min(),_e.min(),_e.min(),Kt.empty(),0)}static newFoundDocument(e,n,s,r){return new Pt(e,1,n,_e.min(),s,r,0)}static newNoDocument(e,n){return new Pt(e,2,n,_e.min(),_e.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new Pt(e,3,n,_e.min(),_e.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n){this.position=e,this.inclusive=n}}function Df(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=he.comparator(he.fromName(o.referenceValue),n.key):s=kr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Vf(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n="asc"){this.field=e,this.dir=n}}function M1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{}class ot extends Zg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new U1(e,n,s):n==="array-contains"?new B1(e,s):n==="in"?new j1(e,s):n==="not-in"?new q1(e,s):n==="array-contains-any"?new H1(e,s):new ot(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new $1(e,s):new F1(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(kr(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(kr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends Zg{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new pn(e,n)}matches(e){return ey(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ey(t){return t.op==="and"}function ty(t){return L1(t)&&ey(t)}function L1(t){for(const e of t.filters)if(e instanceof pn)return!1;return!0}function bu(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+xr(t.value);if(ty(t))return t.filters.map(e=>bu(e)).join(",");{const e=t.filters.map(n=>bu(n)).join(",");return`${t.op}(${e})`}}function ny(t,e){return t instanceof ot?function(s,r){return r instanceof ot&&s.op===r.op&&s.field.isEqual(r.field)&&Cn(s.value,r.value)}(t,e):t instanceof pn?function(s,r){return r instanceof pn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&ny(o,r.filters[l]),!0):!1}(t,e):void ge(19439)}function sy(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${xr(n.value)}`}(t):t instanceof pn?function(n){return n.op.toString()+" {"+n.getFilters().map(sy).join(" ,")+"}"}(t):"Filter"}class U1 extends ot{constructor(e,n,s){super(e,n,s),this.key=he.fromName(s.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class $1 extends ot{constructor(e,n){super(e,"in",n),this.keys=ry("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class F1 extends ot{constructor(e,n){super(e,"not-in",n),this.keys=ry("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ry(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>he.fromName(s.referenceValue))}class B1 extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vc(n)&&Bi(n.arrayValue,this.value)}}class j1 extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bi(this.value.arrayValue,n)}}class q1 extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bi(this.value.arrayValue,n)}}class H1 extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Bi(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function Nf(t,e=null,n=[],s=[],r=null,i=null,o=null){return new K1(t,e,n,s,r,i,o)}function _c(t){const e=be(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>bu(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),za(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>xr(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>xr(s)).join(",")),e.Ie=n}return e.Ie}function bc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!M1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ny(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vf(t.startAt,e.startAt)&&Vf(t.endAt,e.endAt)}function wu(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function z1(t,e,n,s,r,i,o,l){return new Br(t,e,n,s,r,i,o,l)}function wc(t){return new Br(t)}function Of(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iy(t){return t.collectionGroup!==null}function Ii(t){const e=be(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ct(bt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new ji(i,s))}),n.has(bt.keyField().canonicalString())||e.Ee.push(new ji(bt.keyField(),s))}return e.Ee}function In(t){const e=be(t);return e.de||(e.de=G1(e,Ii(t))),e.de}function G1(t,e){if(t.limitType==="F")return Nf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new ji(r.field,i)});const n=t.endAt?new ga(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ga(t.startAt.position,t.startAt.inclusive):null;return Nf(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Eu(t,e){const n=t.filters.concat([e]);return new Br(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ya(t,e,n){return new Br(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wa(t,e){return bc(In(t),In(e))&&t.limitType===e.limitType}function oy(t){return`${_c(In(t))}|lt:${t.limitType}`}function ur(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>sy(r)).join(", ")}]`),za(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>xr(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>xr(r)).join(",")),`Target(${s})`}(In(t))}; limitType=${t.limitType})`}function Qa(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):he.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Ii(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,l,u){const c=Df(o,l,u);return o.inclusive?c<=0:c<0}(s.startAt,Ii(s),r)||s.endAt&&!function(o,l,u){const c=Df(o,l,u);return o.inclusive?c>=0:c>0}(s.endAt,Ii(s),r))}(t,e)}function W1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ay(t){return(e,n)=>{let s=!1;for(const r of Ii(t)){const i=Q1(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function Q1(t,e,n){const s=t.field.isKeyField()?he.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),c=l.data.field(i);return u!==null&&c!==null?kr(u,c):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return Hg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=new Ze(he.comparator);function Wn(){return Y1}const ly=new Ze(he.comparator);function ci(...t){let e=ly;for(const n of t)e=e.insert(n.key,n);return e}function uy(t){let e=ly;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function js(){return Ai()}function cy(){return Ai()}function Ai(){return new Xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const J1=new Ze(he.comparator),X1=new ct(he.comparator);function Pe(...t){let e=X1;for(const n of t)e=e.add(n);return e}const Z1=new ct(Te);function eA(){return Z1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fa(e)?"-0":e}}function dy(t){return{integerValue:""+t}}function tA(t,e){return C1(e)?dy(e):Ec(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this._=void 0}}function nA(t,e,n){return t instanceof va?function(r,i){const o={fields:{[Gg]:{stringValue:zg},[Qg]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&yc(i)&&(i=Ga(i)),i&&(o.fields[Wg]=i),{mapValue:o}}(n,e):t instanceof qi?fy(t,e):t instanceof Hi?py(t,e):function(r,i){const o=hy(r,i),l=Mf(o)+Mf(r.Re);return _u(o)&&_u(r.Re)?dy(l):Ec(r.serializer,l)}(t,e)}function sA(t,e,n){return t instanceof qi?fy(t,e):t instanceof Hi?py(t,e):n}function hy(t,e){return t instanceof _a?function(s){return _u(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class va extends Ya{}class qi extends Ya{constructor(e){super(),this.elements=e}}function fy(t,e){const n=my(e);for(const s of t.elements)n.some(r=>Cn(r,s))||n.push(s);return{arrayValue:{values:n}}}class Hi extends Ya{constructor(e){super(),this.elements=e}}function py(t,e){let n=my(e);for(const s of t.elements)n=n.filter(r=>!Cn(r,s));return{arrayValue:{values:n}}}class _a extends Ya{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Mf(t){return rt(t.integerValue||t.doubleValue)}function my(t){return vc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function rA(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof qi&&r instanceof qi||s instanceof Hi&&r instanceof Hi?Pr(s.elements,r.elements,Cn):s instanceof _a&&r instanceof _a?Cn(s.Re,r.Re):s instanceof va&&r instanceof va}(t.transform,e.transform)}class iA{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ja{}function gy(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tc(t.key,rn.none()):new no(t.key,t.data,rn.none());{const n=t.data,s=Kt.empty();let r=new ct(bt.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Ds(t.key,s,new Xt(r.toArray()),rn.none())}}function oA(t,e,n){t instanceof no?function(r,i,o){const l=r.value.clone(),u=Uf(r.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ds?function(r,i,o){if(!zo(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Uf(r.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(yy(r)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ri(t,e,n,s){return t instanceof no?function(i,o,l,u){if(!zo(i.precondition,o))return l;const c=i.value.clone(),h=$f(i.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof Ds?function(i,o,l,u){if(!zo(i.precondition,o))return l;const c=$f(i.fieldTransforms,u,o),h=o.data;return h.setAll(yy(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(i,o,l){return zo(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function aA(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=hy(s.transform,r||null);i!=null&&(n===null&&(n=Kt.empty()),n.set(s.field,i))}return n||null}function Lf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Pr(s,r,(i,o)=>rA(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class no extends Ja{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ds extends Ja{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yy(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Uf(t,e,n){const s=new Map;$e(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,sA(o,l,n[r]))}return s}function $f(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,nA(i,o,e))}return s}class Tc extends Ja{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lA extends Ja{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&oA(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ri(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ri(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=cy();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const u=gy(o,l);u!==null&&s.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(_e.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Pr(this.mutations,e.mutations,(n,s)=>Lf(n,s))&&Pr(this.baseMutations,e.baseMutations,(n,s)=>Lf(n,s))}}class Ic{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){$e(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let r=function(){return J1}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Ic(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,De;function hA(t){switch(t){case z.OK:return ge(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function vy(t){if(t===void 0)return Gn("GRPC error has no .code"),z.UNKNOWN;switch(t){case it.OK:return z.OK;case it.CANCELLED:return z.CANCELLED;case it.UNKNOWN:return z.UNKNOWN;case it.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case it.INTERNAL:return z.INTERNAL;case it.UNAVAILABLE:return z.UNAVAILABLE;case it.UNAUTHENTICATED:return z.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case it.NOT_FOUND:return z.NOT_FOUND;case it.ALREADY_EXISTS:return z.ALREADY_EXISTS;case it.PERMISSION_DENIED:return z.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case it.ABORTED:return z.ABORTED;case it.OUT_OF_RANGE:return z.OUT_OF_RANGE;case it.UNIMPLEMENTED:return z.UNIMPLEMENTED;case it.DATA_LOSS:return z.DATA_LOSS;default:return ge(39323,{code:t})}}(De=it||(it={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=new vs([4294967295,4294967295],0);function Ff(t){const e=Bg().encode(t),n=new Vg;return n.update(e),new Uint8Array(n.digest())}function Bf(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vs([n,s],0),new vs([r,i],0)]}class Ac{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new di(`Invalid padding: ${n}`);if(s<0)throw new di(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new di(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new di(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=vs.fromNumber(this.pe)}we(e,n,s){let r=e.add(n.multiply(vs.fromNumber(s)));return r.compare(fA)===1&&(r=new vs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Ff(e),[s,r]=Bf(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);if(!this.Se(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ac(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const n=Ff(e),[s,r]=Bf(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);this.be(o)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class di extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,so.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Xa(_e.min(),r,new Ze(Te),Wn(),Pe())}}class so{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new so(s,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n,s,r){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=r}}class _y{constructor(e,n){this.targetId=e,this.Ce=n}}class by{constructor(e,n,s=wt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class jf{constructor(){this.Fe=0,this.Me=qf(),this.xe=wt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Pe(),n=Pe(),s=Pe();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ge(38017,{changeType:i})}}),new so(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=qf()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,$e(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class pA{constructor(e){this.ze=e,this.je=new Map,this.He=Wn(),this.Je=Vo(),this.Ye=Vo(),this.Ze=new Ze(Te)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,s=e.Ce.count,r=this._t(n);if(r){const i=r.target;if(wu(i))if(s===0){const o=new he(i.path);this.tt(n,o,Pt.newNoDocument(o,_e.min()))}else $e(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const l=this.ct(e),u=l?this.lt(l,e,o):1;if(u!==0){this.st(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=Rs(s).toUint8Array()}catch(u){if(u instanceof Kg)return Cr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Ac(o,r,i)}catch(u){return Cr(u instanceof di?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,i,null),r++)}),r}It(e){const n=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&wu(l.target)){const u=new he(l.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,Pt.newNoDocument(u,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let s=Pe();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const c=this._t(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const r=new Xa(e,n,this.Ze,this.He,s);return this.He=Wn(),this.Je=Vo(),this.Ye=Vo(),this.Ze=new Ze(Te),r}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new jf,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new ct(Te),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new ct(Te),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new jf),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Vo(){return new Ze(he.comparator)}function qf(){return new Ze(he.comparator)}const mA={asc:"ASCENDING",desc:"DESCENDING"},gA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yA={and:"AND",or:"OR"};class vA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tu(t,e){return t.useProto3Json||za(e)?e:{value:e}}function ba(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wy(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _A(t,e){return ba(t,e.toTimestamp())}function An(t){return $e(!!t,49232),_e.fromTimestamp(function(n){const s=As(n);return new ut(s.seconds,s.nanos)}(t))}function Rc(t,e){return Iu(t,e).canonicalString()}function Iu(t,e){const n=function(r){return new Ye(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ey(t){const e=Ye.fromString(t);return $e(Sy(e),10190,{key:e.toString()}),e}function Au(t,e){return Rc(t.databaseId,e.path)}function Kl(t,e){const n=Ey(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(Iy(n))}function Ty(t,e){return Rc(t.databaseId,e)}function bA(t){const e=Ey(t);return e.length===4?Ye.emptyPath():Iy(e)}function Ru(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Iy(t){return $e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Hf(t,e,n){return{name:Au(t,e),fields:n.value.mapValue.fields}}function wA(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ge(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?($e(h===void 0||typeof h=="string",58123),wt.fromBase64String(h||"")):($e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),wt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const h=c.code===void 0?z.UNKNOWN:vy(c.code);return new ae(h,c.message||"")}(o);n=new by(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Kl(t,s.document.name),i=An(s.document.updateTime),o=s.document.createTime?An(s.document.createTime):_e.min(),l=new Kt({mapValue:{fields:s.document.fields}}),u=Pt.newFoundDocument(r,i,o,l),c=s.targetIds||[],h=s.removedTargetIds||[];n=new Go(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Kl(t,s.document),i=s.readTime?An(s.readTime):_e.min(),o=Pt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new Go([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Kl(t,s.document),i=s.removedTargetIds||[];n=new Go([],i,r,null)}else{if(!("filter"in e))return ge(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new dA(r,i),l=s.targetId;n=new _y(l,o)}}return n}function EA(t,e){let n;if(e instanceof no)n={update:Hf(t,e.key,e.value)};else if(e instanceof Tc)n={delete:Au(t,e.key)};else if(e instanceof Ds)n={update:Hf(t,e.key,e.data),updateMask:xA(e.fieldMask)};else{if(!(e instanceof lA))return ge(16599,{ft:e.type});n={verify:Au(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof va)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof qi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof _a)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw ge(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:_A(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge(27497)}(t,e.precondition)),n}function TA(t,e){return t&&t.length>0?($e(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?An(r.updateTime):An(i);return o.isEqual(_e.min())&&(o=An(i)),new iA(o,r.transformResults||[])}(n,e))):[]}function IA(t,e){return{documents:[Ty(t,e.path)]}}function AA(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Ty(t,r);const i=function(c){if(c.length!==0)return Ry(pn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(g){return{field:cr(g.field),direction:CA(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Tu(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:n,parent:r}}function RA(t){let e=bA(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){$e(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const g=Ay(p);return g instanceof pn&&ty(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(w){return new ji(dr(w.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,za(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,y=p.values||[];return new ga(y,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,y=p.values||[];return new ga(y,g)}(n.endAt)),z1(e,r,o,i,l,"F",u,c)}function SA(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ay(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=dr(n.unaryFilter.field);return ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=dr(n.unaryFilter.field);return ot.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=dr(n.unaryFilter.field);return ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=dr(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return ot.create(dr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pn.create(n.compositeFilter.filters.map(s=>Ay(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function CA(t){return mA[t]}function PA(t){return gA[t]}function kA(t){return yA[t]}function cr(t){return{fieldPath:t.canonicalString()}}function dr(t){return bt.fromServerFormat(t.fieldPath)}function Ry(t){return t instanceof ot?function(n){if(n.op==="=="){if(xf(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NAN"}};if(kf(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xf(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NOT_NAN"}};if(kf(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cr(n.field),op:PA(n.op),value:n.value}}}(t):t instanceof pn?function(n){const s=n.getFilters().map(r=>Ry(r));return s.length===1?s[0]:{compositeFilter:{op:kA(n.op),filters:s}}}(t):ge(54877,{filter:t})}function xA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Sy(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,s,r,i=_e.min(),o=_e.min(),l=wt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.wt=e}}function VA(t){const e=RA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ya(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.Cn=new OA}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Is.min())}updateCollectionGroup(e,n,s){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class OA{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ct(Ye.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ct(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cy=41943040;class qt{static withCacheSize(e){return new qt(e,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qt.DEFAULT_COLLECTION_PERCENTILE=10,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qt.DEFAULT=new qt(Cy,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qt.DISABLED=new qt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Dr(0)}static lr(){return new Dr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="LruGarbageCollector",MA=1048576;function Gf([t,e],[n,s]){const r=Te(t,n);return r===0?Te(e,s):r}class LA{constructor(e){this.Er=e,this.buffer=new ct(Gf),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Gf(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class UA{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ie(zf,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fr(n)?ie(zf,"Ignoring IndexedDB error during garbage collection: ",n):await $r(n)}await this.mr(3e5)})}}class $A{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return G.resolve(Ka.le);const s=new LA(n);return this.gr.forEachTarget(e,r=>s.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>s.Rr(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Kf)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kf):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,r,i,o,l,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(c=Date.now(),lr()<=Ce.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p})))}}function FA(t,e){return new $A(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.changes=new Xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?G.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Ri(s.mutation,r,Xt.empty(),ut.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Pe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Pe()){const r=js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=ci();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=js();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Pe()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,r){let i=Wn();const o=Ai(),l=function(){return Ai()}();return n.forEach((u,c)=>{const h=s.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Ds)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ri(h.mutation,c,h.mutation.getFieldMask(),ut.now())):o.set(c.key,Xt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var p;return l.set(c,new jA(h,(p=o.get(c))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const s=Ai();let r=new Ze((o,l)=>o-l),i=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=s.get(u)||Xt.empty();h=l.applyToLocalView(c,h),s.set(u,h);const p=(r.get(l.batchId)||Pe()).add(u);r=r.insert(l.batchId,p)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,p=cy();h.forEach(g=>{if(!i.has(g)){const y=gy(n.get(g),s.get(g));y!==null&&p.set(g,y),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return G.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):G.resolve(js());let l=Ui,u=i;return o.next(c=>G.forEach(c,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,Pe())).next(h=>({batchId:l,changes:uy(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(s=>{let r=ci();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=ci();return this.indexManager.getCollectionParents(e,i).next(l=>G.forEach(l,u=>{const c=function(p,g){return new Br(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Pt.newInvalidDocument(h)))});let l=ci();return o.forEach((u,c)=>{const h=i.get(u);h!==void 0&&Ri(h.mutation,c,Xt.empty(),ut.now()),Qa(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return G.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:An(r.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:VA(r.bundledQuery),readTime:An(r.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.overlays=new Ze(he.comparator),this.Qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const s=js();return G.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.bt(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(s)),G.resolve()}getOverlaysForCollection(e,n,s){const r=js(),i=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>s&&r.set(u.getKey(),u)}return G.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ze((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let h=i.get(c.largestBatchId);h===null&&(h=js(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=js(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=r)););return G.resolve(l)}bt(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Qr.get(r.largestBatchId).delete(s.key);this.Qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new cA(n,s));let i=this.Qr.get(n);i===void 0&&(i=Pe(),this.Qr.set(n,i)),this.Qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(){this.$r=new ct(ht.Ur),this.Kr=new ct(ht.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new ht(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new ht(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new he(new Ye([])),s=new ht(n,e),r=new ht(n,e+1),i=[];return this.Kr.forEachInRange([s,r],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new he(new Ye([])),s=new ht(n,e),r=new ht(n,e+1);let i=Pe();return this.Kr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ht(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ht{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return he.comparator(e.key,n.key)||Te(e.Zr,n.Zr)}static Wr(e,n){return Te(e.Zr,n.Zr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new ct(ht.Ur)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uA(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Xr=this.Xr.add(new ht(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ti(s),i=r<0?0:r;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?gc:this.nr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ht(n,0),r=new ht(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([s,r],o=>{const l=this.ei(o.Zr);i.push(l)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ct(Te);return n.forEach(r=>{const i=new ht(r,0),o=new ht(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{s=s.add(l.Zr)})}),G.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;he.isDocumentKey(i)||(i=i.child(""));const o=new ht(new he(i),0);let l=new ct(Te);return this.Xr.forEachWhile(u=>{const c=u.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(l=l.add(u.Zr)),!0)},o),G.resolve(this.ni(l))}ni(e){const n=[];return e.forEach(s=>{const r=this.ei(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){$e(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return G.forEach(n.mutations,r=>{const i=new ht(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new ht(n,0),r=this.Xr.firstAfterOrEqual(s);return G.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.ii=e,this.docs=function(){return new Ze(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return G.resolve(s?s.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(e,n){let s=Wn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Pt.newInvalidDocument(r))}),G.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Wn();const o=n.path,l=new he(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||I1(T1(h),s)<=0||(r.has(h.key)||Qa(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ge(9500)}si(e,n){return G.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new QA(this)}getSize(e){return G.resolve(this.size)}}class QA extends BA{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(s)}),G.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.persistence=e,this.oi=new Xs(n=>_c(n),bc),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this._i=0,this.ai=new Sc,this.targetCount=0,this.ui=Dr.cr()}forEachTarget(e,n){return this.oi.forEach((s,r)=>n(r)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),G.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Dr(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Tr(n),G.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),G.waitFor(i).next(()=>r)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return G.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),G.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return G.resolve(s)}containsKey(e,n){return G.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,n){this.ci={},this.overlays={},this.li=new Ka(0),this.hi=!1,this.hi=!0,this.Pi=new zA,this.referenceDelegate=e(this),this.Ti=new YA(this),this.indexManager=new NA,this.remoteDocumentCache=function(r){return new WA(r)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new DA(n),this.Ei=new HA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new GA(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ie("MemoryPersistence","Starting transaction:",e);const r=new JA(this.li.next());return this.referenceDelegate.di(),s(r).next(i=>this.referenceDelegate.Ai(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ri(e,n){return G.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class JA extends R1{constructor(e){super(),this.currentSequenceNumber=e}}class Cc{constructor(e){this.persistence=e,this.Vi=new Sc,this.mi=null}static fi(e){return new Cc(e)}get gi(){if(this.mi)return this.mi;throw ge(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),G.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.gi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.gi,s=>{const r=he.fromPath(s);return this.pi(e,r).next(i=>{i||n.removeEntry(r,_e.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return G.or([()=>G.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class wa{constructor(e,n){this.persistence=e,this.yi=new Xs(s=>P1(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=FA(this,n)}static fi(e,n){return new wa(e,n)}di(){}Ai(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}Sr(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return G.forEach(this.yi,(s,r)=>this.Dr(e,s,r).next(i=>i?G.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,o=>this.Dr(e,o,n).next(l=>{l||(s++,i.removeEntry(o,_e.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),G.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ho(e.data.value)),n}Dr(e,n,s){return G.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return G.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.ds=s,this.As=r}static Rs(e,n){let s=Pe(),r=Pe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Pc(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return NE()?8:S1(Nt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Ss(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new XA;return this.bs(e,n,o).next(l=>{if(i.result=l,this.fs)return this.Ds(e,n,o,l.size)})}).next(()=>i.result)}Ds(e,n,s,r){return s.documentReadCount<this.gs?(lr()<=Ce.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",ur(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),G.resolve()):(lr()<=Ce.DEBUG&&ie("QueryEngine","Query:",ur(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ps*r?(lr()<=Ce.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",ur(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):G.resolve())}ws(e,n){if(Of(n))return G.resolve(null);let s=In(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ya(n,null,"F"),s=In(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Pe(...i);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(u=>{const c=this.vs(n,l);return this.Cs(n,c,o,u.readTime)?this.ws(e,ya(n,null,"F")):this.Fs(e,c,n,u)}))})))}Ss(e,n,s,r){return Of(n)||r.isEqual(_e.min())?G.resolve(null):this.ys.getDocuments(e,s).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,s,r)?G.resolve(null):(lr()<=Ce.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ur(n)),this.Fs(e,o,n,E1(r,Ui)).next(l=>l))})}vs(e,n){let s=new ct(ay(e));return n.forEach((r,i)=>{Qa(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}bs(e,n,s){return lr()<=Ce.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",ur(n)),this.ys.getDocumentsMatchingQuery(e,n,Is.min(),s)}Fs(e,n,s,r){return this.ys.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="LocalStore",eR=3e8;class tR{constructor(e,n,s,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new Ze(Te),this.Os=new Xs(i=>_c(i),bc),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qA(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function nR(t,e,n,s){return new tR(t,e,n,s)}async function ky(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let u=Pe();for(const c of r){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(s,u).next(c=>({ks:c,removedBatchIds:o,addedBatchIds:l}))})})}function sR(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const p=c.batch,g=p.keys();let y=G.resolve();return g.forEach(w=>{y=y.next(()=>h.getEntry(u,w)).next(E=>{const x=c.docVersions.get(w);$e(x!==null,48541),E.version.compareTo(x)<0&&(p.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let u=Pe();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function xy(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function rR(t,e){const n=be(t),s=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const l=[];e.targetChanges.forEach((h,p)=>{const g=r.get(p);if(!g)return;l.push(n.Ti.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(i,h.addedDocuments,p)));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(wt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,s)),r=r.insert(p,y),function(E,x,N){return E.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=eR?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(g,y,h)&&l.push(n.Ti.updateTargetData(i,y))});let u=Wn(),c=Pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(iR(i,o,e.documentUpdates).next(h=>{u=h.qs,c=h.Qs})),!s.isEqual(_e.min())){const h=n.Ti.getLastRemoteSnapshotVersion(i).next(p=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(h)}return G.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.xs=r,i))}function iR(t,e,n){let s=Pe(),r=Pe();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Wn();return n.forEach((l,u)=>{const c=i.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(_e.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ie(kc,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{qs:o,Qs:r}})}function oR(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=gc),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function aR(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ti.getTargetData(s,e).next(i=>i?(r=i,G.resolve(r)):n.Ti.allocateTargetId(s).next(o=>(r=new fs(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.xs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function Su(t,e,n){const s=be(t),r=s.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Fr(o))throw o;ie(kc,`Failed to update sequence numbers for target ${e}: ${o}`)}s.xs=s.xs.remove(e),s.Os.delete(r.target)}function Wf(t,e,n){const s=be(t);let r=_e.min(),i=Pe();return s.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const p=be(u),g=p.Os.get(h);return g!==void 0?G.resolve(p.xs.get(g)):p.Ti.getTargetData(c,h)}(s,o,In(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,e,n?r:_e.min(),n?i:Pe())).next(l=>(lR(s,W1(e),l),{documents:l,$s:i})))}function lR(t,e,n){let s=t.Ns.get(e)||_e.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ns.set(e,s)}class Qf{constructor(){this.activeTargetIds=eA()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uR{constructor(){this.xo=new Qf,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Qf,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="ConnectivityMonitor";class Jf{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ie(Yf,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ie(Yf,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No=null;function Cu(){return No===null?No=function(){return 268435456+Math.round(2147483648*Math.random())}():No++,"0x"+No.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl="RestConnection",dR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hR{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${r}`,this.Go=this.databaseId.database===pa?`project_id=${s}`:`project_id=${s}&database_id=${r}`}zo(e,n,s,r,i){const o=Cu(),l=this.jo(e,n.toUriEncodedString());ie(zl,`Sending RPC '${e}' ${o}:`,l,s);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,r,i);const{host:c}=new URL(l),h=Wi(c);return this.Jo(e,l,u,s,h).then(p=>(ie(zl,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Cr(zl,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Yo(e,n,s,r,i,o){return this.zo(e,n,s,r,i)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ur}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}jo(e,n){const s=dR[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class pR extends hR{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Cu();return new Promise((l,u)=>{const c=new Ng;c.setWithCredentials(!0),c.listenOnce(Og.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case qo.NO_ERROR:const p=c.getResponseJson();ie(Rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case qo.TIMEOUT:ie(Rt,`RPC '${e}' ${o} timed out`),u(new ae(z.DEADLINE_EXCEEDED,"Request time out"));break;case qo.HTTP_ERROR:const g=c.getStatus();if(ie(Rt,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const w=y==null?void 0:y.error;if(w&&w.status&&w.message){const E=function(N){const R=N.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(R)>=0?R:z.UNKNOWN}(w.status);u(new ae(E,w.message))}else u(new ae(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new ae(z.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ie(Rt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);ie(Rt,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",h,s,15)})}T_(e,n,s){const r=Cu(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ug(),l=Lg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const h=i.join("");ie(Rt,`Creating RPC '${e}' stream ${r}: ${h}`,u);const p=o.createWebChannel(h,u);let g=!1,y=!1;const w=new fR({Zo:x=>{y?ie(Rt,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(g||(ie(Rt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),ie(Rt,`RPC '${e}' stream ${r} sending:`,x),p.send(x))},Xo:()=>p.close()}),E=(x,N,R)=>{x.listen(N,C=>{try{R(C)}catch(D){setTimeout(()=>{throw D},0)}})};return E(p,ui.EventType.OPEN,()=>{y||(ie(Rt,`RPC '${e}' stream ${r} transport opened.`),w.__())}),E(p,ui.EventType.CLOSE,()=>{y||(y=!0,ie(Rt,`RPC '${e}' stream ${r} transport closed`),w.u_())}),E(p,ui.EventType.ERROR,x=>{y||(y=!0,Cr(Rt,`RPC '${e}' stream ${r} transport errored. Name:`,x.name,"Message:",x.message),w.u_(new ae(z.UNAVAILABLE,"The operation could not be completed")))}),E(p,ui.EventType.MESSAGE,x=>{var N;if(!y){const R=x.data[0];$e(!!R,16349);const C=R,D=(C==null?void 0:C.error)||((N=C[0])===null||N===void 0?void 0:N.error);if(D){ie(Rt,`RPC '${e}' stream ${r} received error:`,D);const j=D.status;let L=function(b){const I=it[b];if(I!==void 0)return vy(I)}(j),_=D.message;L===void 0&&(L=z.INTERNAL,_="Unknown error status: "+j+" with message "+D.message),y=!0,w.u_(new ae(L,_)),p.close()}else ie(Rt,`RPC '${e}' stream ${r} received:`,R),w.c_(R)}}),E(l,Mg.STAT_EVENT,x=>{x.stat===gu.PROXY?ie(Rt,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===gu.NOPROXY&&ie(Rt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.a_()},0),w}}function Gl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){return new vA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n,s=1e3,r=1.5,i=6e4){this.xi=e,this.timerId=n,this.I_=s,this.E_=r,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),s=Math.max(0,Date.now()-this.V_),r=Math.max(0,n-s);r>0&&ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="PersistentStream";class Vy{constructor(e,n,s,r,i,o,l,u){this.xi=e,this.y_=s,this.w_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new Dy(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.S_===n&&this.K_(s,r)},s=>{e(()=>{const r=new ae(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.W_(r)})})}K_(e,n){const s=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{s(()=>this.W_(r))}),this.stream.onMessage(r=>{s(()=>++this.v_==1?this.z_(r):this.onNext(r))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return ie(Xf,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(ie(Xf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mR extends Vy{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=wA(this.serializer,e),s=function(i){if(!("targetChange"in i))return _e.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?_e.min():o.readTime?An(o.readTime):_e.min()}(e);return this.listener.j_(n,s)}H_(e){const n={};n.database=Ru(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=wu(u)?{documents:IA(i,u)}:{query:AA(i,u).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=wy(i,o.resumeToken);const c=Tu(i,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(_e.min())>0){l.readTime=ba(i,o.snapshotVersion.toTimestamp());const c=Tu(i,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const s=SA(this.serializer,e);s&&(n.labels=s),this.L_(n)}J_(e){const n={};n.database=Ru(this.serializer),n.removeTarget=e,this.L_(n)}}class gR extends Vy{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=TA(e.writeResults,e.commitTime),s=An(e.commitTime);return this.listener.ea(s,n)}ta(){const e={};e.database=Ru(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>EA(this.serializer,s))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{}class vR extends yR{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.na=!1}ra(){if(this.na)throw new ae(z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,r){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,Iu(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ae(z.UNKNOWN,i.toString())})}Yo(e,n,s,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,Iu(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(z.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class _R{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Gn(n),this.oa=!1):ie("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="RemoteStore";class bR{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No(o=>{s.enqueueAndForget(async()=>{Zs(this)&&(ie(Ys,"Restarting streams for network reachability change."),await async function(u){const c=be(u);c.Ta.add(4),await ro(c),c.da.set("Unknown"),c.Ta.delete(4),await el(c)}(this))})}),this.da=new _R(s,r)}}async function el(t){if(Zs(t))for(const e of t.Ia)await e(!0)}async function ro(t){for(const e of t.Ia)await e(!1)}function Ny(t,e){const n=be(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),Nc(n)?Vc(n):jr(n).M_()&&Dc(n,e))}function xc(t,e){const n=be(t),s=jr(n);n.Pa.delete(e),s.M_()&&Oy(n,e),n.Pa.size===0&&(s.M_()?s.N_():Zs(n)&&n.da.set("Unknown"))}function Dc(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jr(t).H_(e)}function Oy(t,e){t.Aa.Ke(e),jr(t).J_(e)}function Vc(t){t.Aa=new pA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),jr(t).start(),t.da._a()}function Nc(t){return Zs(t)&&!jr(t).F_()&&t.Pa.size>0}function Zs(t){return be(t).Ta.size===0}function My(t){t.Aa=void 0}async function wR(t){t.da.set("Online")}async function ER(t){t.Pa.forEach((e,n)=>{Dc(t,e)})}async function TR(t,e){My(t),Nc(t)?(t.da.ca(e),Vc(t)):t.da.set("Unknown")}async function IR(t,e,n){if(t.da.set("Online"),e instanceof by&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Pa.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Pa.delete(l),r.Aa.removeTarget(l))}(t,e)}catch(s){ie(Ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ea(t,s)}else if(e instanceof Go?t.Aa.Xe(e):e instanceof _y?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(_e.min()))try{const s=await xy(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Aa.It(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Pa.get(c);h&&i.Pa.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=i.Pa.get(u);if(!h)return;i.Pa.set(u,h.withResumeToken(wt.EMPTY_BYTE_STRING,h.snapshotVersion)),Oy(i,u);const p=new fs(h.target,u,c,h.sequenceNumber);Dc(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){ie(Ys,"Failed to raise snapshot:",s),await Ea(t,s)}}async function Ea(t,e,n){if(!Fr(e))throw e;t.Ta.add(1),await ro(t),t.da.set("Offline"),n||(n=()=>xy(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(Ys,"Retrying IndexedDB access"),await n(),t.Ta.delete(1),await el(t)})}function Ly(t,e){return e().catch(n=>Ea(t,n,e))}async function tl(t){const e=be(t),n=Cs(e);let s=e.ha.length>0?e.ha[e.ha.length-1].batchId:gc;for(;AR(e);)try{const r=await oR(e.localStore,s);if(r===null){e.ha.length===0&&n.N_();break}s=r.batchId,RR(e,r)}catch(r){await Ea(e,r)}Uy(e)&&$y(e)}function AR(t){return Zs(t)&&t.ha.length<10}function RR(t,e){t.ha.push(e);const n=Cs(t);n.M_()&&n.Y_&&n.Z_(e.mutations)}function Uy(t){return Zs(t)&&!Cs(t).F_()&&t.ha.length>0}function $y(t){Cs(t).start()}async function SR(t){Cs(t).ta()}async function CR(t){const e=Cs(t);for(const n of t.ha)e.Z_(n.mutations)}async function PR(t,e,n){const s=t.ha.shift(),r=Ic.from(s,e,n);await Ly(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await tl(t)}async function kR(t,e){e&&Cs(t).Y_&&await async function(s,r){if(function(o){return hA(o)&&o!==z.ABORTED}(r.code)){const i=s.ha.shift();Cs(s).O_(),await Ly(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await tl(s)}}(t,e),Uy(t)&&$y(t)}async function Zf(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),ie(Ys,"RemoteStore received new credentials");const s=Zs(n);n.Ta.add(3),await ro(n),s&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await el(n)}async function xR(t,e){const n=be(t);e?(n.Ta.delete(2),await el(n)):e||(n.Ta.add(2),await ro(n),n.da.set("Unknown"))}function jr(t){return t.Ra||(t.Ra=function(n,s,r){const i=be(n);return i.ra(),new mR(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:wR.bind(null,t),n_:ER.bind(null,t),i_:TR.bind(null,t),j_:IR.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),Nc(t)?Vc(t):t.da.set("Unknown")):(await t.Ra.stop(),My(t))})),t.Ra}function Cs(t){return t.Va||(t.Va=function(n,s,r){const i=be(n);return i.ra(),new gR(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:SR.bind(null,t),i_:kR.bind(null,t),X_:CR.bind(null,t),ea:PR.bind(null,t)}),t.Ia.push(async e=>{e?(t.Va.O_(),await tl(t)):(await t.Va.stop(),t.ha.length>0&&(ie(Ys,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new Oc(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mc(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),Fr(t))return new ae(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{static emptySet(e){return new wr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||he.comparator(n.key,s.key):(n,s)=>he.comparator(n.key,s.key),this.keyedMap=ci(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new wr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this.ma=new Ze(he.comparator)}track(e){const n=e.doc.key,s=this.ma.get(n);s?e.type!==0&&s.type===3?this.ma=this.ma.insert(n,e):e.type===3&&s.type!==1?this.ma=this.ma.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ma=this.ma.remove(n):e.type===1&&s.type===2?this.ma=this.ma.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):ge(63341,{Vt:e,fa:s}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,s)=>{e.push(s)}),e}}class Vr{constructor(e,n,s,r,i,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Vr(e,n,wr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class VR{constructor(){this.queries=tp(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,s){const r=be(n),i=r.queries;r.queries=tp(),i.forEach((o,l)=>{for(const u of l.ya)u.onError(s)})})(this,new ae(z.ABORTED,"Firestore shutting down"))}}function tp(){return new Xs(t=>oy(t),Wa)}async function Fy(t,e){const n=be(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.wa()&&e.Sa()&&(s=2):(i=new DR,s=e.Sa()?0:1);try{switch(s){case 0:i.pa=await n.onListen(r,!0);break;case 1:i.pa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Mc(o,`Initialization of query '${ur(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.ya.push(e),e.Da(n.onlineState),i.pa&&e.va(i.pa)&&Lc(n)}async function By(t,e){const n=be(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.ya.indexOf(e);o>=0&&(i.ya.splice(o,1),i.ya.length===0?r=e.Sa()?0:1:!i.wa()&&e.Sa()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function NR(t,e){const n=be(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.ya)l.va(r)&&(s=!0);o.pa=r}}s&&Lc(n)}function OR(t,e,n){const s=be(t),r=s.queries.get(e);if(r)for(const i of r.ya)i.onError(n);s.queries.delete(e)}function Lc(t){t.ba.forEach(e=>{e.next()})}var Pu,np;(np=Pu||(Pu={})).Ca="default",np.Cache="cache";class jy{constructor(e,n,s){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=s||{}}va(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Vr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const s=n!=="Offline";return(!this.options.La||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=Vr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Pu.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e){this.key=e}}class Hy{constructor(e){this.key=e}}class MR{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Pe(),this.mutatedKeys=Pe(),this.Ha=ay(e),this.Ja=new wr(this.Ha)}get Ya(){return this.Ga}Za(e,n){const s=n?n.Xa:new ep,r=n?n.Ja:this.Ja;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,p)=>{const g=r.get(h),y=Qa(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let x=!1;g&&y?g.data.isEqual(y.data)?w!==E&&(s.track({type:3,doc:y}),x=!0):this.eu(g,y)||(s.track({type:2,doc:y}),x=!0,(u&&this.Ha(y,u)>0||c&&this.Ha(y,c)<0)&&(l=!0)):!g&&y?(s.track({type:0,doc:y}),x=!0):g&&!y&&(s.track({type:1,doc:g}),x=!0,(u||c)&&(l=!0)),x&&(y?(o=o.add(y),i=E?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{Ja:o,Xa:s,Cs:l,mutatedKeys:i}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((h,p)=>function(y,w){const E=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Vt:x})}};return E(y)-E(w)}(h.type,p.type)||this.Ha(h.doc,p.doc)),this.tu(s),r=r!=null&&r;const l=n&&!r?this.nu():[],u=this.ja.size===0&&this.current&&!r?1:0,c=u!==this.za;return this.za=u,o.length!==0||c?{snapshot:new Vr(this.query,e.Ja,i,o,e.mutatedKeys,u===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),ru:l}:{ru:l}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new ep,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Pe(),this.Ja.forEach(s=>{this.iu(s.key)&&(this.ja=this.ja.add(s.key))});const n=[];return e.forEach(s=>{this.ja.has(s)||n.push(new Hy(s))}),this.ja.forEach(s=>{e.has(s)||n.push(new qy(s))}),n}su(e){this.Ga=e.$s,this.ja=Pe();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return Vr.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Uc="SyncEngine";class LR{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class UR{constructor(e){this.key=e,this._u=!1}}class $R{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new Xs(l=>oy(l),Wa),this.cu=new Map,this.lu=new Set,this.hu=new Ze(he.comparator),this.Pu=new Map,this.Tu=new Sc,this.Iu={},this.Eu=new Map,this.du=Dr.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function FR(t,e,n=!0){const s=Yy(t);let r;const i=s.uu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.ou()):r=await Ky(s,e,n,!0),r}async function BR(t,e){const n=Yy(t);await Ky(n,e,!0,!1)}async function Ky(t,e,n,s){const r=await aR(t.localStore,In(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await jR(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&Ny(t.remoteStore,r),l}async function jR(t,e,n,s,r){t.Ru=(p,g,y)=>async function(E,x,N,R){let C=x.view.Za(N);C.Cs&&(C=await Wf(E.localStore,x.query,!1).then(({documents:_})=>x.view.Za(_,C)));const D=R&&R.targetChanges.get(x.targetId),j=R&&R.targetMismatches.get(x.targetId)!=null,L=x.view.applyChanges(C,E.isPrimaryClient,D,j);return rp(E,x.targetId,L.ru),L.snapshot}(t,p,g,y);const i=await Wf(t.localStore,e,!0),o=new MR(e,i.$s),l=o.Za(i.documents),u=so.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),c=o.applyChanges(l,t.isPrimaryClient,u);rp(t,n,c.ru);const h=new LR(e,n,o);return t.uu.set(e,h),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),c.snapshot}async function qR(t,e,n){const s=be(t),r=s.uu.get(e),i=s.cu.get(r.targetId);if(i.length>1)return s.cu.set(r.targetId,i.filter(o=>!Wa(o,e))),void s.uu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Su(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&xc(s.remoteStore,r.targetId),ku(s,r.targetId)}).catch($r)):(ku(s,r.targetId),await Su(s.localStore,r.targetId,!0))}async function HR(t,e){const n=be(t),s=n.uu.get(e),r=n.cu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),xc(n.remoteStore,s.targetId))}async function KR(t,e,n){const s=XR(t);try{const r=await function(o,l){const u=be(o),c=ut.now(),h=l.reduce((y,w)=>y.add(w.key),Pe());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Wn(),E=Pe();return u.Bs.getEntries(y,h).next(x=>{w=x,w.forEach((N,R)=>{R.isValidDocument()||(E=E.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(x=>{p=x;const N=[];for(const R of l){const C=aA(R,p.get(R.key).overlayedDocument);C!=null&&N.push(new Ds(R.key,C,Xg(C.value.mapValue),rn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,N,l)}).next(x=>{g=x;const N=x.applyToLocalDocumentSet(p,E);return u.documentOverlayCache.saveOverlays(y,x.batchId,N)})}).then(()=>({batchId:g.batchId,changes:uy(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,u){let c=o.Iu[o.currentUser.toKey()];c||(c=new Ze(Te)),c=c.insert(l,u),o.Iu[o.currentUser.toKey()]=c}(s,r.batchId,n),await io(s,r.changes),await tl(s.remoteStore)}catch(r){const i=Mc(r,"Failed to persist write");n.reject(i)}}async function zy(t,e){const n=be(t);try{const s=await rR(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Pu.get(i);o&&($e(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o._u=!0:r.modifiedDocuments.size>0?$e(o._u,14607):r.removedDocuments.size>0&&($e(o._u,42227),o._u=!1))}),await io(n,s,e)}catch(s){await $r(s)}}function sp(t,e,n){const s=be(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.uu.forEach((i,o)=>{const l=o.view.Da(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const u=be(o);u.onlineState=l;let c=!1;u.queries.forEach((h,p)=>{for(const g of p.ya)g.Da(l)&&(c=!0)}),c&&Lc(u)}(s.eventManager,e),r.length&&s.au.j_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function zR(t,e,n){const s=be(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Pu.get(e),i=r&&r.key;if(i){let o=new Ze(he.comparator);o=o.insert(i,Pt.newNoDocument(i,_e.min()));const l=Pe().add(i),u=new Xa(_e.min(),new Map,new Ze(Te),o,l);await zy(s,u),s.hu=s.hu.remove(i),s.Pu.delete(e),$c(s)}else await Su(s.localStore,e,!1).then(()=>ku(s,e,n)).catch($r)}async function GR(t,e){const n=be(t),s=e.batch.batchId;try{const r=await sR(n.localStore,e);Wy(n,s,null),Gy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await io(n,r)}catch(r){await $r(r)}}async function WR(t,e,n){const s=be(t);try{const r=await function(o,l){const u=be(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(p=>($e(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(s.localStore,e);Wy(s,e,n),Gy(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await io(s,r)}catch(r){await $r(r)}}function Gy(t,e){(t.Eu.get(e)||[]).forEach(n=>{n.resolve()}),t.Eu.delete(e)}function Wy(t,e,n){const s=be(t);let r=s.Iu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Iu[s.currentUser.toKey()]=r}}function ku(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.cu.get(e))t.uu.delete(s),n&&t.au.Vu(s,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(s=>{t.Tu.containsKey(s)||Qy(t,s)})}function Qy(t,e){t.lu.delete(e.path.canonicalString());const n=t.hu.get(e);n!==null&&(xc(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),$c(t))}function rp(t,e,n){for(const s of n)s instanceof qy?(t.Tu.addReference(s.key,e),QR(t,s)):s instanceof Hy?(ie(Uc,"Document no longer in limbo: "+s.key),t.Tu.removeReference(s.key,e),t.Tu.containsKey(s.key)||Qy(t,s.key)):ge(19791,{mu:s})}function QR(t,e){const n=e.key,s=n.path.canonicalString();t.hu.get(n)||t.lu.has(s)||(ie(Uc,"New document in limbo: "+n),t.lu.add(s),$c(t))}function $c(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const n=new he(Ye.fromString(e)),s=t.du.next();t.Pu.set(s,new UR(n)),t.hu=t.hu.insert(n,s),Ny(t.remoteStore,new fs(In(wc(n.path)),s,"TargetPurposeLimboResolution",Ka.le))}}async function io(t,e,n){const s=be(t),r=[],i=[],o=[];s.uu.isEmpty()||(s.uu.forEach((l,u)=>{o.push(s.Ru(u,e,n).then(c=>{var h;if((c||n)&&s.isPrimaryClient){const p=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;s.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){r.push(c);const p=Pc.Rs(u.targetId,c);i.push(p)}}))}),await Promise.all(o),s.au.j_(r),await async function(u,c){const h=be(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>G.forEach(c,g=>G.forEach(g.ds,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>G.forEach(g.As,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Fr(p))throw p;ie(kc,"Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const y=h.xs.get(g),w=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(w);h.xs=h.xs.insert(g,E)}}}(s.localStore,i))}async function YR(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){ie(Uc,"User change. New user:",e.toKey());const s=await ky(n.localStore,e);n.currentUser=e,function(i,o){i.Eu.forEach(l=>{l.forEach(u=>{u.reject(new ae(z.CANCELLED,o))})}),i.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await io(n,s.ks)}}function JR(t,e){const n=be(t),s=n.Pu.get(e);if(s&&s._u)return Pe().add(s.key);{let r=Pe();const i=n.cu.get(e);if(!i)return r;for(const o of i){const l=n.uu.get(o);r=r.unionWith(l.view.Ya)}return r}}function Yy(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zR.bind(null,e),e.au.j_=NR.bind(null,e.eventManager),e.au.Vu=OR.bind(null,e.eventManager),e}function XR(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WR.bind(null,e),e}class Ta{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Za(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return nR(this.persistence,new ZA,e.initialUser,this.serializer)}yu(e){return new Py(Cc.fi,this.serializer)}pu(e){return new uR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ta.provider={build:()=>new Ta};class ZR extends Ta{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){$e(this.persistence.referenceDelegate instanceof wa,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new UA(s,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new Py(s=>wa.fi(s,n),this.serializer)}}class xu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>sp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=YR.bind(null,this.syncEngine),await xR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VR}()}createDatastore(e){const n=Za(e.databaseInfo.databaseId),s=function(i){return new pR(i)}(e.databaseInfo);return function(i,o,l,u){return new vR(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,l){return new bR(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>sp(this.syncEngine,n,0),function(){return Jf.C()?new Jf:new cR}())}createSyncEngine(e,n){return function(r,i,o,l,u,c,h){const p=new $R(r,i,o,l,u,c);return h&&(p.Au=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=be(r);ie(Ys,"RemoteStore shutting down."),i.Ta.add(5),await ro(i),i.Ea.shutdown(),i.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xu.provider={build:()=>new xu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class eS{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=St.UNAUTHENTICATED,this.clientId=jg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ie(Ps,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ie(Ps,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Mc(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Wl(t,e){t.asyncQueue.verifyOperationInProgress(),ie(Ps,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await ky(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ip(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tS(t);ie(Ps,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Zf(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>Zf(e.remoteStore,r)),t._onlineComponents=e}async function tS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(Ps,"Using user provided OfflineComponentProvider");try{await Wl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Cr("Error using user provided cache. Falling back to memory cache: "+n),await Wl(t,new Ta)}}else ie(Ps,"Using default OfflineComponentProvider"),await Wl(t,new ZR(void 0));return t._offlineComponents}async function Xy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(Ps,"Using user provided OnlineComponentProvider"),await ip(t,t._uninitializedComponentsProvider._online)):(ie(Ps,"Using default OnlineComponentProvider"),await ip(t,new xu))),t._onlineComponents}function nS(t){return Xy(t).then(e=>e.syncEngine)}async function Zy(t){const e=await Xy(t),n=e.eventManager;return n.onListen=FR.bind(null,e.syncEngine),n.onUnlisten=qR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=BR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HR.bind(null,e.syncEngine),n}function sS(t,e,n={}){const s=new jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,c){const h=new Jy({next:g=>{h.Cu(),o.enqueueAndForget(()=>By(i,p));const y=g.docs.has(l);!y&&g.fromCache?c.reject(new ae(z.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?c.reject(new ae(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new jy(wc(l.path),h,{includeMetadataChanges:!0,La:!0});return Fy(i,p)}(await Zy(t),t.asyncQueue,e,n,s)),s.promise}function rS(t,e,n={}){const s=new jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,c){const h=new Jy({next:g=>{h.Cu(),o.enqueueAndForget(()=>By(i,p)),g.fromCache&&u.source==="server"?c.reject(new ae(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new jy(l,h,{includeMetadataChanges:!0,La:!0});return Fy(i,p)}(await Zy(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e,n){if(!n)throw new ae(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iS(t,e,n,s){if(e===!0&&s===!0)throw new ae(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ap(t){if(!he.isDocumentKey(t))throw new ae(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lp(t){if(he.isDocumentKey(t))throw new ae(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function mn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nl(t);throw new ae(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="firestore.googleapis.com",up=!0;class cp{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nv,this.ssl=up}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:up;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Cy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MA)throw new ae(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ev((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sl{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new f1;switch(s.type){case"firstParty":return new y1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ae(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=op.get(n);s&&(ie("ComponentProvider","Removing Datastore"),op.delete(n),s.terminate())}(this),Promise.resolve()}}function oS(t,e,n,s={}){var r;t=mn(t,sl);const i=Wi(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(Km(`https://${u}`),zm("Firestore",!0)),o.host!==nv&&o.host!==u&&Cr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:s});if(!Ks(c,l)&&(t._setSettings(c),s.mockUserToken)){let h,p;if(typeof s.mockUserToken=="string")h=s.mockUserToken,p=St.MOCK_USER;else{h=AE(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new ae(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new St(g)}t._authCredentials=new p1(new Fg(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class Ft{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}}class _s extends Vs{constructor(e,n,s){super(e,n,wc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new he(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function ve(t,e,...n){if(t=pt(t),tv("collection","path",e),t instanceof sl){const s=Ye.fromString(e,...n);return lp(s),new _s(t,null,s)}{if(!(t instanceof Ft||t instanceof _s))throw new ae(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ye.fromString(e,...n));return lp(s),new _s(t.firestore,null,s)}}function st(t,e,...n){if(t=pt(t),arguments.length===1&&(e=jg.newId()),tv("doc","path",e),t instanceof sl){const s=Ye.fromString(e,...n);return ap(s),new Ft(t,null,new he(s))}{if(!(t instanceof Ft||t instanceof _s))throw new ae(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ye.fromString(e,...n));return ap(s),new Ft(t.firestore,t instanceof _s?t.converter:null,new he(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="AsyncQueue";class hp{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Dy(this,"async_queue_retry"),this.ec=()=>{const s=Gl();s&&ie(dp,"Visibility state changed to "+s.visibilityState),this.C_.p_()},this.tc=e;const n=Gl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=Gl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new jn;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Fr(e))throw e;ie(dp,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(s=>{throw this.Ju=s,this.Yu=!1,Gn("INTERNAL UNHANDLED ERROR: ",fp(s)),s}).then(s=>(this.Yu=!1,s))));return this.tc=n,n}enqueueAfterDelay(e,n,s){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const r=Oc.createAndSchedule(this,e,n,s,i=>this.oc(i));return this.Hu.push(r),r}nc(){this.Ju&&ge(47125,{_c:fp(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function fp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class er extends sl{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new hp,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hp(e),this._firestoreClient=void 0,await e}}}function aS(t,e){const n=typeof t=="object"?t:Ym(),s=typeof t=="string"?t:pa,r=sc(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=TE("firestore");i&&oS(r,...i)}return r}function Fc(t){if(t._terminated)throw new ae(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lS(t),t._firestoreClient}function lS(t){var e,n,s;const r=t._freezeSettings(),i=function(l,u,c,h){return new D1(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ev(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new eS(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nr(wt.fromBase64String(e))}catch(n){throw new ae(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nr(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=/^__.*__$/;class cS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new no(e,this.data,n,this.fieldTransforms)}}class sv{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{hc:t})}}class Hc{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Hc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tc({path:s,Ec:!1});return r.dc(e),r}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tc({path:s,Ec:!1});return r.Pc(),r}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Ia(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(rv(this.hc)&&uS.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class dS{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Za(e)}gc(e,n,s,r=!1){return new Hc({hc:e,methodName:n,fc:s,path:bt.emptyPath(),Ec:!1,mc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function il(t){const e=t._freezeSettings(),n=Za(t._databaseId);return new dS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iv(t,e,n,s,r,i={}){const o=t.gc(i.merge||i.mergeFields?2:0,e,n,r);Kc("Data must be an object, but it was:",o,s);const l=ov(s,o);let u,c;if(i.merge)u=new Xt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const g=Du(e,p,n);if(!o.contains(g))throw new ae(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);lv(h,g)||h.push(g)}u=new Xt(h),c=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=o.fieldTransforms;return new cS(new Kt(l),u,c)}class ol extends Bc{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ol}}function hS(t,e,n,s){const r=t.gc(1,e,n);Kc("Data must be an object, but it was:",r,s);const i=[],o=Kt.empty();xs(s,(u,c)=>{const h=zc(e,u,n);c=pt(c);const p=r.Ac(h);if(c instanceof ol)i.push(h);else{const g=oo(c,p);g!=null&&(i.push(h),o.set(h,g))}});const l=new Xt(i);return new sv(o,l,r.fieldTransforms)}function fS(t,e,n,s,r,i){const o=t.gc(1,e,n),l=[Du(e,s,n)],u=[r];if(i.length%2!=0)throw new ae(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Du(e,i[g])),u.push(i[g+1]);const c=[],h=Kt.empty();for(let g=l.length-1;g>=0;--g)if(!lv(c,l[g])){const y=l[g];let w=u[g];w=pt(w);const E=o.Ac(y);if(w instanceof ol)c.push(y);else{const x=oo(w,E);x!=null&&(c.push(y),h.set(y,x))}}const p=new Xt(c);return new sv(h,p,o.fieldTransforms)}function pS(t,e,n,s=!1){return oo(n,t.gc(s?4:3,e))}function oo(t,e){if(av(t=pt(t)))return Kc("Unsupported field value:",e,t),ov(t,e);if(t instanceof Bc)return function(s,r){if(!rv(r.hc))throw r.Vc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Vc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let u=oo(l,r.Rc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=pt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return tA(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=ut.fromDate(s);return{timestampValue:ba(r.serializer,i)}}if(s instanceof ut){const i=new ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ba(r.serializer,i)}}if(s instanceof jc)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Nr)return{bytesValue:wy(r.serializer,s._byteString)};if(s instanceof Ft){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Rc(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof qc)return function(o,l){return{mapValue:{fields:{[Yg]:{stringValue:Jg},[ma]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Vc("VectorValues must only contain numeric values.");return Ec(l.serializer,c)})}}}}}}(s,r);throw r.Vc(`Unsupported field value: ${nl(s)}`)}(t,e)}function ov(t,e){const n={};return Hg(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(t,(s,r)=>{const i=oo(r,e.Ic(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function av(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ut||t instanceof jc||t instanceof Nr||t instanceof Ft||t instanceof Bc||t instanceof qc)}function Kc(t,e,n){if(!av(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=nl(n);throw s==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+s)}}function Du(t,e,n){if((e=pt(e))instanceof rl)return e._internalPath;if(typeof e=="string")return zc(t,e);throw Ia("Field path arguments must be of type string or ",t,!1,void 0,n)}const mS=new RegExp("[~\\*/\\[\\]]");function zc(t,e,n){if(e.search(mS)>=0)throw Ia(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rl(...e.split("."))._internalPath}catch{throw Ia(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ia(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${s}`),o&&(u+=` in document ${r}`),u+=")"),new ae(z.INVALID_ARGUMENT,l+t+u)}function lv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(al("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gS extends uv{data(){return super.data()}}function al(t,e){return typeof e=="string"?zc(t,e):e instanceof rl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gc{}class Wc extends Gc{}function zt(t,e,...n){let s=[];e instanceof Gc&&s.push(e),s=s.concat(n),function(i){const o=i.filter(u=>u instanceof Qc).length,l=i.filter(u=>u instanceof ll).length;if(o>1||o>0&&l>0)throw new ae(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class ll extends Wc{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new ll(e,n,s)}_apply(e){const n=this._parse(e);return hv(e._query,n),new Vs(e.firestore,e.converter,Eu(e._query,n))}_parse(e){const n=il(e.firestore);return function(i,o,l,u,c,h,p){let g;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ae(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){mp(p,h);const w=[];for(const E of p)w.push(pp(u,i,E));g={arrayValue:{values:w}}}else g=pp(u,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||mp(p,h),g=pS(l,o,p,h==="in"||h==="not-in");return ot.create(c,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function lt(t,e,n){const s=e,r=al("where",t);return ll._create(r,s,n)}class Qc extends Gc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Qc(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:pn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const u of l)hv(o,u),o=Eu(o,u)}(e._query,n),new Vs(e.firestore,e.converter,Eu(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yc extends Wc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Yc(e,n)}_apply(e){const n=function(r,i,o){if(r.startAt!==null)throw new ae(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ae(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ji(i,o)}(e._query,this._field,this._direction);return new Vs(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Br(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function cv(t,e="asc"){const n=e,s=al("orderBy",t);return Yc._create(s,n)}class Jc extends Wc{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Jc(e,n,s)}_apply(e){return new Vs(e.firestore,e.converter,ya(e._query,this._limit,this._limitType))}}function dv(t){return Jc._create("limit",t,"F")}function pp(t,e,n){if(typeof(n=pt(n))=="string"){if(n==="")throw new ae(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iy(e)&&n.indexOf("/")!==-1)throw new ae(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Ye.fromString(n));if(!he.isDocumentKey(s))throw new ae(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Pf(t,new he(s))}if(n instanceof Ft)return Pf(t,n._key);throw new ae(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nl(n)}.`)}function mp(t,e){if(!Array.isArray(t)||t.length===0)throw new ae(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hv(t,e){const n=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ae(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class vS{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return xs(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[ma].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>rt(o.doubleValue));return new qc(i)}convertGeoPoint(e){return new jc(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ga(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp($i(e));default:return null}}convertTimestamp(e){const n=As(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ye.fromString(e);$e(Sy(s),9688,{name:e});const r=new Fi(s.get(1),s.get(3)),i=new he(s.popFirst(5));return r.isEqual(n)||Gn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t,e,n){let s;return s=t?t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pv extends uv{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(al("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Wo extends pv{data(e={}){return super.data(e)}}class _S{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new hi(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Wo(this._firestore,this._userDataWriter,s.key,s,new hi(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const u=new Wo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new hi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Wo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new hi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:bS(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t){t=mn(t,Ft);const e=mn(t.firestore,er);return sS(Fc(e),t._key).then(n=>wS(e,t,n))}class mv extends vS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function Ae(t){t=mn(t,Vs);const e=mn(t.firestore,er),n=Fc(e),s=new mv(e);return yS(t._query),rS(n,t._query).then(r=>new _S(e,s,t,r))}function gv(t,e,n){t=mn(t,Ft);const s=mn(t.firestore,er),r=fv(t.converter,e);return ul(s,[iv(il(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,rn.none())])}function qr(t,e,n,...s){t=mn(t,Ft);const r=mn(t.firestore,er),i=il(r);let o;return o=typeof(e=pt(e))=="string"||e instanceof rl?fS(i,"updateDoc",t._key,e,n,s):hS(i,"updateDoc",t._key,e),ul(r,[o.toMutation(t._key,rn.exists(!0))])}function bs(t){return ul(mn(t.firestore,er),[new Tc(t._key,rn.none())])}function Pn(t,e){const n=mn(t.firestore,er),s=st(t),r=fv(t.converter,e);return ul(n,[iv(il(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,rn.exists(!1))]).then(()=>s)}function ul(t,e){return function(s,r){const i=new jn;return s.asyncQueue.enqueueAndForget(async()=>KR(await nS(s),r,i)),i.promise}(Fc(t),e)}function wS(t,e,n){const s=n.docs.get(e._key),r=new mv(t);return new pv(t,r,e._key,s,new hi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Ur=r})(Mr),Sr(new zs("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new er(new m1(s.getProvider("auth-internal")),new v1(o,s.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ae(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fi(c.options.projectId,h)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ys(yf,vf,e),ys(yf,vf,"esm2017")})();var ES="firebase",TS="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys(ES,TS,"app");const IS={apiKey:"AIzaSyBQbijFIV0LEavSNMxaa46b43ZkCCr6OK4",authDomain:"akyildiz-yonetim.firebaseapp.com",projectId:"akyildiz-yonetim",storageBucket:"akyildiz-yonetim.firebasestorage.app",messagingSenderId:"1049267525895",appId:"1:1049267525895:web:bff98aec91ad8fd69ecda2",measurementId:"G-921KP8N3WW"},yv=Qm(IS),oe=aS(yv),Aa=to(yv),AS=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},RS={class:"relative bg-gray-800 py-6 border-b border-gray-700 text-center shadow text-white"},SS={key:0,class:"absolute top-4 right-6"},CS={class:"text-sm font-medium text-gray-200 hover:text-white"},PS={key:0,class:"absolute right-0 mt-2 w-40 bg-white text-gray-800 shadow-lg rounded z-10 transition duration-200 ease-out transform origin-top-right scale-95"},kS={__name:"Header",setup(t){const e=B(null),n=Um(),s=to(),r=B(!1);Ot(()=>{document.addEventListener("click",o),hc(s,async c=>{if(c){const h=await ao(st(oe,"users",c.uid));h.exists()&&(e.value=h.data())}})}),Xp(()=>{document.removeEventListener("click",o)});const i=async()=>{await tI(s),n.push("/login")},o=c=>{const h=document.querySelector(".relative");h&&!h.contains(c.target)&&(r.value=!1)},l=()=>{r.value=!r.value},u=async()=>{const c=s.currentUser;c&&(await dc(s,c.email),alert("Şifre sıfırlama bağlantısı e-posta adresinize gönderildi."))};return(c,h)=>($(),Q("header",RS,[h[1]||(h[1]=d("div",null,[d("h1",{class:"text-4xl font-cormorant"},"AKYILDIZ İŞ MERKEZİ"),d("p",{class:"text-3xl font-cormorantSC"},"Yönetim Sistemi")],-1)),e.value?($(),Q("div",SS,[d("div",{class:"relative",onClick:l},[d("button",CS,[tt(F(e.value.firstName)+" "+F(e.value.lastName)+" ",1),h[0]||(h[0]=d("span",{class:"ml-1"},"▼",-1))]),r.value?($(),Q("div",PS,[d("button",{onClick:u,class:"block w-full px-4 py-2 text-left hover:bg-gray-100"}," Şifre Değiştir "),d("button",{onClick:i,class:"block w-full px-4 py-2 text-left hover:bg-gray-100"}," Çıkış Yap ")])):qe("",!0)])])):qe("",!0)]))}},xS=AS(kS,[["__scopeId","data-v-26c1cd77"]]),DS={class:"bg-gray-800 px-6 py-4 border-b border-gray-700 flex flex-col md:flex-row justify-center items-center gap-3 text-white"},VS={class:"flex flex-wrap justify-center gap-4"},NS={__name:"TabMenu",setup(t){ec();const e=B([]),n=B(""),s=B({}),r=to();return Ot(()=>{hc(r,async i=>{if(i){const o=await ao(st(oe,"users",i.uid));if(o.exists()){const l=o.data();n.value=l.role,s.value={name:`${l.firstName} ${l.lastName}`,email:l.email,role:l.role},l.role==="admin"?e.value=[{label:"📊 Özet",value:"dashboard",route:"/dashboard"},{label:"🏢 Kiracılar",value:"tenants",route:"/tenants"},{label:"💸 Ödemeler",value:"payments",route:"/payments"},{label:"📉 Yönetim Giderleri",value:"expenses",route:"/expenses"},{label:"⚙️ Sayaçlar",value:"utilities",route:"/utilities"},{label:"🛠️ Yönetim",value:"admin",route:"/admin"}]:l.role==="manager"?e.value=[{label:"📊 Özet",value:"dashboard",route:"/dashboard"},{label:"🏢 Kiracılar",value:"tenants",route:"/tenants"},{label:"💸 Ödemeler",value:"payments",route:"/payments"},{label:"📉 Yönetim Giderleri",value:"expenses",route:"/expenses"},{label:"⚙️ Sayaçlar",value:"utilities",route:"/utilities"}]:l.role==="tenant"&&(e.value=[{label:"👤 Profilim",value:"profile",route:"/profile"}])}}else e.value=[]})}),(i,o)=>{const l=Oa("router-link");return $(),Q("nav",DS,[d("div",VS,[($(!0),Q(ke,null,Ke(e.value,u=>($(),Ht(l,{key:u.value,to:u.route,class:xt(["btn btn-md transition",i.$route.path===u.route?"btn-primary btn-outline":"btn-outline btn-info"])},{default:ki(()=>[tt(F(u.label),1)]),_:2},1032,["to","class"]))),128))])])}}},OS={class:"min-h-screen bg-base-200"},MS={class:"max-w-6xl mx-auto bg-base-100 shadow-lg rounded-xl overflow-hidden"},LS={__name:"App",setup(t){const e=ec();return(n,s)=>{const r=Oa("router-view");return $(),Q("div",OS,[d("div",MS,[cn(e).meta.hideLayout?qe("",!0):($(),Ht(xS,{key:0})),cn(e).meta.hideLayout?qe("",!0):($(),Ht(NS,{key:1})),nt(r,{class:"p-6"})])])}}},US="modulepreload",$S=function(t){return"/"+t},gp={},FS=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(u=>{if(u=$S(u),u in gp)return;gp[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":US,c||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),c)return new Promise((g,y)=>{p.addEventListener("load",g),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},BS={class:"min-h-screen bg-base-200 p-6"},jS={class:"max-w-6xl mx-auto space-y-8"},qS={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},HS={class:"card bg-base-100 shadow-md"},KS={class:"card-body text-center"},zS={class:"text-3xl font-bold text-green-600"},GS={class:"card bg-base-100 shadow-md"},WS={class:"card-body text-center"},QS={class:"text-3xl font-bold text-blue-600"},YS={class:"card bg-base-100 shadow-md"},JS={class:"card-body text-center"},XS={class:"text-3xl font-bold text-red-600"},ZS={class:"card bg-base-100 shadow-md border border-base-300"},eC={class:"card-body"},tC={class:"flex justify-between items-center mb-2"},nC={class:"overflow-x-auto"},sC={class:"table table-sm w-full text-sm"},rC={class:"whitespace-normal"},iC={key:0,class:"text-gray-400 italic text-sm mt-2"},oC={class:"card bg-base-100 shadow-md border border-base-300"},aC={class:"card-body"},lC={class:"flex justify-between items-center mb-2"},uC={class:"flex gap-2"},cC={class:"overflow-x-auto"},dC={class:"table table-sm w-full text-sm"},hC={class:"text-center"},fC={class:"text-center"},pC={class:"text-center whitespace-normal break-words text-sm"},mC={key:0},gC={key:1},yC={class:"text-center font-medium"},vC={key:0,class:"inline-flex items-center gap-1 text-green-600"},_C={key:1,class:"inline-flex items-center gap-1 text-red-600"},bC={key:0,class:"text-gray-400 italic text-sm mt-2"},wC={class:"text-right mt-4"},EC={__name:"Dashboard",setup(t){const e=B([]),n=B([]),s=B(""),r=B([]),i=B([]),o=B([]),l=async()=>{const C=await Ae(ve(oe,"aidatRecords"));i.value=C.docs.map(D=>({id:D.id,...D.data(),type:"aidat"}))},u=async()=>{const C=await Ae(ve(oe,"readings"));o.value=C.docs.map(D=>({id:D.id,...D.data()}))},c=Re(()=>[...n.value,...i.value,...o.value]),h=C=>{if(!C)return"-";const D={year:"numeric",month:"short",day:"numeric"};return new Date(C).toLocaleDateString("tr-TR",D)},p=Re(()=>{const C=new Date;return c.value.filter(D=>D.dueDate&&new Date(D.dueDate)<C).sort((D,j)=>new Date(j.dueDate)-new Date(D.dueDate)).map(D=>{const j=r.value.find(L=>L.id===D.tenantId);return{...D,company:(j==null?void 0:j.company)||"Bilinmiyor",typeLabel:D.type==="aidat"?"Aidat":D.type==="water"?"Su":D.type==="electricity"?"Elektrik":"Gider"}})}),g=async()=>{const C=await Ae(ve(oe,"tenants"));r.value=C.docs.map(D=>({id:D.id,...D.data()}))},y=Re(()=>e.value.reduce((C,D)=>C+Number(D.amount||0),0)),w=Re(()=>n.value.reduce((C,D)=>C+Number(D.amount||0),0)),E=Re(()=>y.value-w.value),x=C=>C==null||isNaN(C)?"-":Number(C).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),N=Re(()=>{const C=[...e.value.map(j=>({...j,type:"income"})),...n.value.map(j=>({...j,type:"expense"}))];return(s.value?C.filter(j=>j.type===s.value):C).filter(j=>j.date).sort((j,L)=>new Date(L.date)-new Date(j.date)).slice(0,5)}),R=async()=>{const C=await Ae(ve(oe,"payments"));e.value=C.docs.map(j=>{const L=j.data(),_=r.value.find(T=>T.id===L.tenantId);return{...L,payer:(_==null?void 0:_.company)||"Bilinmiyor"}});const D=await Ae(ve(oe,"expenses"));n.value=D.docs.map(j=>{const L=j.data();return{...L,dueDate:L.dueDate?new Date(L.dueDate):null,tenantId:L.tenantId,type:L.type,period:L.period}})};return Ot(async()=>{await g(),await Promise.all([R(),l(),u()])}),(C,D)=>{const j=Oa("router-link");return $(),Q("section",BS,[d("div",jS,[d("div",qS,[d("div",HS,[d("div",KS,[D[3]||(D[3]=d("h3",{class:"text-center text-sm text-base-content/70 font-medium uppercase tracking-wide"},"Kasa Bakiyesi",-1)),d("p",zS,F(x(E.value)),1)])]),d("div",GS,[d("div",WS,[D[4]||(D[4]=d("h3",{class:"text-center text-sm text-base-content/70 font-medium uppercase tracking-wide"},"Toplam Gelir",-1)),d("p",QS,F(x(y.value)),1)])]),d("div",YS,[d("div",JS,[D[5]||(D[5]=d("h3",{class:"text-center text-sm text-base-content/70 font-medium uppercase tracking-wide"},"Toplam Gider",-1)),d("p",XS,F(x(w.value)),1)])])]),d("div",ZS,[d("div",eC,[d("div",tC,[D[7]||(D[7]=d("h2",{class:"text-lg font-semibold text-red-500"},"⏰ Geciken Ödemeler",-1)),nt(j,{to:"/transactions",class:"btn btn-sm btn-outline btn-warning"},{default:ki(()=>D[6]||(D[6]=[tt("Tümünü Gör")])),_:1,__:[6]})]),d("div",nC,[d("table",sC,[D[8]||(D[8]=d("thead",null,[d("tr",null,[d("th",null,"Firma"),d("th",null,"Tip"),d("th",null,"Dönem"),d("th",null,"Son Ödeme")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(p.value.slice(0,5),(L,_)=>($(),Q("tr",{key:_},[d("td",rC,F(L.company),1),d("td",null,F(L.typeLabel),1),d("td",null,F(L.period||"-"),1),d("td",null,F(new Date(L.dueDate).toLocaleDateString("tr-TR")),1)]))),128))])]),p.value.length?qe("",!0):($(),Q("p",iC,"Geciken ödeme bulunmuyor."))])])]),d("div",oC,[d("div",aC,[d("div",lC,[D[9]||(D[9]=d("h2",{class:"text-lg font-semibold text-base-content"},"🔄 Son İşlemler",-1)),d("div",uC,[d("button",{onClick:D[0]||(D[0]=L=>s.value=""),class:xt(s.value===""?"btn btn-sm btn-primary":"btn btn-sm btn-outline")}," Tümü ",2),d("button",{onClick:D[1]||(D[1]=L=>s.value="income"),class:xt(s.value==="income"?"btn btn-sm btn-primary":"btn btn-sm btn-outline")}," Gelir ",2),d("button",{onClick:D[2]||(D[2]=L=>s.value="expense"),class:xt(s.value==="expense"?"btn btn-sm btn-primary":"btn btn-sm btn-outline")}," Gider ",2)])]),d("div",cC,[d("table",dC,[D[10]||(D[10]=d("thead",null,[d("tr",null,[d("th",{class:"text-center"},"Tarih"),d("th",{class:"text-center"},"Açıklama"),d("th",{class:"text-center"},"Ödeyen"),d("th",{class:"text-center"},"Tutar")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(N.value,(L,_)=>($(),Q("tr",{key:_},[d("td",hC,F(h(L.date)),1),d("td",fC,F(L.description||"-"),1),d("td",pC,[L.type==="income"?($(),Q("span",mC,F(L.payer),1)):($(),Q("span",gC,"-"))]),d("td",yC,[L.type==="income"?($(),Q("span",vC," 💰 "+F(x(L.amount)),1)):($(),Q("span",_C," 📤 -"+F(x(L.amount)),1))])]))),128))])]),N.value.length?qe("",!0):($(),Q("p",bC,"Son işlem kaydı bulunamadı.")),d("div",wC,[nt(j,{to:"/transactions",class:"text-sm text-blue-600 hover:underline"},{default:ki(()=>D[11]||(D[11]=[tt(" Tümünü Gör → ")])),_:1,__:[11]})])])])])])])}}},TC={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},IC={class:"bg-base-200 dark:bg-gray-800 dark:text-gray-100 rounded-2xl shadow-2xl w-full max-w-2xl p-6 space-y-6 relative"},AC={class:"text-2xl font-bold text-center"},RC={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},SC={class:"card bg-base-100 dark:bg-gray-700 shadow-md border border-base-200 p-4 space-y-2"},CC={class:"card bg-base-100 dark:bg-gray-700 shadow-md border border-base-200 p-4 space-y-2"},PC={key:0,class:"overflow-x-auto"},kC={class:"table table-sm w-full border"},xC={key:1,class:"text-gray-500 dark:text-gray-400 italic"},DC={class:"flex justify-end gap-3"},vv={__name:"TenantSummary",props:{tenant:Object},setup(t){const e=t,n=B([]),s=B([]),r=B([]),i=B([]),o=B(0),l=B(0),u=B([]),c=async()=>{var C;if(!((C=e.tenant)!=null&&C.id))return;const p=zt(ve(oe,"payments"),lt("tenantId","==",e.tenant.id)),g=await Ae(p);n.value=g.docs.map(D=>D.data()),o.value=n.value.reduce((D,j)=>D+(parseFloat(j.amount)||0),0),u.value=n.value.sort((D,j)=>new Date(j.date)-new Date(D.date)).slice(0,5);const y=zt(ve(oe,"expenses"),lt("tenantId","==",e.tenant.id)),w=await Ae(y);s.value=w.docs.map(D=>D.data());const E=zt(ve(oe,"readings"),lt("tenantId","==",e.tenant.id)),x=await Ae(E);r.value=x.docs.map(D=>D.data());const N=zt(ve(oe,"aidatRecords"),lt("tenantId","==",e.tenant.id)),R=await Ae(N);i.value=R.docs.map(D=>D.data()),l.value=[...s.value,...r.value,...i.value].reduce((D,j)=>{const L=parseFloat(j.toplamTutar||j.amount||0);return D+(isNaN(L)?0:L)},0)},h=Re(()=>l.value-o.value);return Fn(()=>{var p;return(p=e.tenant)==null?void 0:p.id},c,{immediate:!0}),(p,g)=>{const y=Oa("RouterLink");return $(),Q("div",TC,[d("div",IC,[d("button",{onClick:g[0]||(g[0]=w=>p.$emit("close")),class:"absolute top-2 right-2 btn btn-sm btn-circle btn-ghost"},"✕"),d("h2",AC,F(t.tenant.company)+" – Özet Bilgiler",1),d("div",RC,[d("div",SC,[d("p",null,[g[2]||(g[2]=d("span",{class:"font-semibold"},"👤 Ad Soyad:",-1)),tt(" "+F(t.tenant.firstName)+" "+F(t.tenant.lastName),1)]),d("p",null,[g[3]||(g[3]=d("span",{class:"font-semibold"},"📞 Telefon:",-1)),tt(" "+F(t.tenant.phone),1)]),d("p",null,[g[4]||(g[4]=d("span",{class:"font-semibold"},"✉️ E-posta:",-1)),tt(" "+F(t.tenant.email),1)]),d("p",null,[g[5]||(g[5]=d("span",{class:"font-semibold"},"🏢 Kat:",-1)),d("span",null,F(Array.isArray(t.tenant.units)?t.tenant.units.join(", "):t.tenant.unit),1)])]),d("div",CC,[d("p",null,[g[6]||(g[6]=d("span",{class:"font-semibold text-green-600 dark:text-green-400"},"💰 Toplam Ödeme:",-1)),tt(" "+F(Number(o.value).toLocaleString("tr-TR"))+" ₺",1)]),d("p",null,[g[7]||(g[7]=d("span",{class:"font-semibold text-red-600 dark:text-red-400"},"📉 Toplam Borç:",-1)),tt(" "+F(Number(l.value).toLocaleString("tr-TR"))+" ₺",1)]),d("p",null,[g[8]||(g[8]=d("span",{class:"font-semibold text-blue-600 dark:text-blue-400"},"🧾 Kalan Bakiye:",-1)),tt(" "+F(Number(h.value).toLocaleString("tr-TR"))+" ₺",1)])])]),d("div",null,[g[10]||(g[10]=d("h3",{class:"text-lg font-semibold mb-2"},"🕑 Son 5 Ödeme",-1)),u.value.length?($(),Q("div",PC,[d("table",kC,[g[9]||(g[9]=d("thead",null,[d("tr",null,[d("th",null,"Tarih"),d("th",null,"Tutar (₺)"),d("th",null,"Tip")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(u.value,(w,E)=>($(),Q("tr",{key:E},[d("td",null,F(w.date),1),d("td",null,F(Number(w.amount).toLocaleString("tr-TR")),1),d("td",null,F(w.type),1)]))),128))])])])):($(),Q("p",xC,"Henüz ödeme bulunmuyor."))]),d("div",DC,[nt(y,{to:`/tenant/${t.tenant.id}`,class:"btn btn-info btn-sm"},{default:ki(()=>g[11]||(g[11]=[tt("Detay Sayfa")])),_:1,__:[11]},8,["to"]),d("button",{onClick:g[1]||(g[1]=w=>p.$emit("close")),class:"btn btn-outline btn-secondary btn-sm"},"Kapat")])])])}}},VC=Object.freeze(Object.defineProperty({__proto__:null,default:vv},Symbol.toStringTag,{value:"Module"})),NC=["open"],OC={key:0,class:"modal-box max-w-2xl"},MC={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},LC={class:"md:col-span-2"},UC={class:"md:col-span-2"},$C={class:"flex flex-wrap gap-3"},FC=["value","disabled"],BC={class:"md:col-span-2 flex items-center gap-2"},jC={class:"modal-action mt-6"},qC={__name:"TenantEditModal",props:{tenant:Object,unitOptions:Array,visible:Boolean,allTenants:Array},emits:["save","close"],setup(t,{emit:e}){const n=t,s=o=>n.allTenants.some(l=>{var u;return l.id!==n.tenant.id&&l.isActive&&((u=l.units)==null?void 0:u.includes(o))}),r=e,i=()=>{r("save")};return(o,l)=>{const u=tm("mask");return $(),Q("dialog",{id:"editTenantModal",class:"modal",open:t.visible},[t.tenant?($(),Q("div",OC,[l[16]||(l[16]=d("h3",{class:"font-bold text-lg mb-4"},"Kiracı Bilgilerini Güncelle",-1)),d("form",{onSubmit:ft(i,["prevent"])},[d("div",MC,[d("div",null,[l[8]||(l[8]=d("label",{class:"label font-semibold"},"Ad",-1)),ee(d("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>t.tenant.firstName=c),class:"input input-bordered w-full",required:""},null,512),[[ue,t.tenant.firstName]])]),d("div",null,[l[9]||(l[9]=d("label",{class:"label font-semibold"},"Soyad",-1)),ee(d("input",{"onUpdate:modelValue":l[1]||(l[1]=c=>t.tenant.lastName=c),class:"input input-bordered w-full",required:""},null,512),[[ue,t.tenant.lastName]])]),d("div",null,[l[10]||(l[10]=d("label",{class:"label font-semibold"},"Telefon",-1)),ee(d("input",{"onUpdate:modelValue":l[2]||(l[2]=c=>t.tenant.phone=c),class:"input input-bordered w-full",required:""},null,512),[[u,"+90 (###) ### ## ##"],[ue,t.tenant.phone]])]),d("div",null,[l[11]||(l[11]=d("label",{class:"label font-semibold"},"E-posta",-1)),ee(d("input",{type:"email","onUpdate:modelValue":l[3]||(l[3]=c=>t.tenant.email=c),class:"input input-bordered w-full"},null,512),[[ue,t.tenant.email]])]),d("div",LC,[l[12]||(l[12]=d("label",{class:"label font-semibold"},"Şirket Unvanı",-1)),ee(d("input",{"onUpdate:modelValue":l[4]||(l[4]=c=>t.tenant.company=c),class:"input input-bordered w-full",required:""},null,512),[[ue,t.tenant.company]])]),d("div",UC,[l[13]||(l[13]=d("label",{class:"label font-semibold"},"Katlar",-1)),d("div",$C,[($(!0),Q(ke,null,Ke(t.unitOptions,c=>($(),Q("label",{key:c,class:"flex items-center gap-2"},[ee(d("input",{type:"checkbox",value:c,"onUpdate:modelValue":l[5]||(l[5]=h=>t.tenant.units=h),disabled:s(c)},null,8,FC),[[Tr,t.tenant.units]]),d("span",{class:xt(s(c)?"text-gray-400 line-through":"")},F(c),3)]))),128))])]),d("div",BC,[ee(d("input",{type:"checkbox","onUpdate:modelValue":l[6]||(l[6]=c=>t.tenant.isActive=c),class:"toggle toggle-success"},null,512),[[Tr,t.tenant.isActive]]),l[14]||(l[14]=d("label",{class:"label font-semibold"},"Aktif",-1))])]),d("div",jC,[l[15]||(l[15]=d("button",{type:"submit",class:"btn btn-success"},"Kaydet",-1)),d("button",{type:"button",onClick:l[7]||(l[7]=c=>o.$emit("close")),class:"btn btn-ghost"},"Kapat")])],32)])):qe("",!0)],8,NC)}}},HC=["open"],KC={class:"modal-box max-w-2xl p-0 overflow-hidden"},zC={class:"px-6 overflow-y-auto max-h-[70vh]"},GC={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},WC={class:"md:col-span-2"},QC={class:"md:col-span-2"},YC={class:"flex flex-wrap gap-3"},JC=["value","disabled"],XC={class:"md:col-span-2"},ZC={class:"md:col-span-2 flex items-center gap-2"},eP={class:"modal-action px-6 pb-6 pt-4 border-t"},tP={__name:"TenantCreateModal",props:{visible:Boolean,unitOptions:Array,allTenants:Array},emits:["save","close"],setup(t,{emit:e}){const n=t,s=e,r=()=>({firstName:"",lastName:"",phone:"",email:"",company:"",units:[],entryDate:new Date().toISOString().slice(0,10),isActive:!0}),i=B(r());Fn(()=>n.visible,u=>{u&&(i.value=r())});const o=u=>n.allTenants.some(c=>{var h;return c.isActive&&((h=c.units)==null?void 0:h.includes(u))}),l=()=>{s("save",i.value),i.value=r()};return(u,c)=>{const h=tm("mask");return $(),Q("dialog",{id:"createTenantModal",class:"modal",open:t.visible},[d("div",KC,[c[18]||(c[18]=d("div",{class:"px-6 pt-6"},[d("h3",{class:"font-bold text-lg mb-4"},"Yeni Kiracı Ekle")],-1)),d("div",zC,[d("form",{onSubmit:ft(l,["prevent"]),id:"tenantForm"},[d("div",GC,[d("div",null,[c[9]||(c[9]=d("label",{class:"label font-semibold"},"Ad",-1)),ee(d("input",{"onUpdate:modelValue":c[0]||(c[0]=p=>i.value.firstName=p),class:"input input-bordered w-full",required:""},null,512),[[ue,i.value.firstName]])]),d("div",null,[c[10]||(c[10]=d("label",{class:"label font-semibold"},"Soyad",-1)),ee(d("input",{"onUpdate:modelValue":c[1]||(c[1]=p=>i.value.lastName=p),class:"input input-bordered w-full",required:""},null,512),[[ue,i.value.lastName]])]),d("div",null,[c[11]||(c[11]=d("label",{class:"label font-semibold"},"Telefon",-1)),ee(d("input",{"onUpdate:modelValue":c[2]||(c[2]=p=>i.value.phone=p),class:"input input-bordered w-full",required:""},null,512),[[h,"+90 (###) ### ## ##"],[ue,i.value.phone]])]),d("div",null,[c[12]||(c[12]=d("label",{class:"label font-semibold"},"E-posta",-1)),ee(d("input",{type:"email","onUpdate:modelValue":c[3]||(c[3]=p=>i.value.email=p),class:"input input-bordered w-full"},null,512),[[ue,i.value.email]])]),d("div",WC,[c[13]||(c[13]=d("label",{class:"label font-semibold"},"Şirket Unvanı",-1)),ee(d("input",{"onUpdate:modelValue":c[4]||(c[4]=p=>i.value.company=p),class:"input input-bordered w-full",required:""},null,512),[[ue,i.value.company]])]),d("div",QC,[c[14]||(c[14]=d("label",{class:"label font-semibold"},"Katlar",-1)),d("div",YC,[($(!0),Q(ke,null,Ke(t.unitOptions,p=>($(),Q("label",{key:p,class:"flex items-center gap-2"},[ee(d("input",{type:"checkbox",value:p,"onUpdate:modelValue":c[5]||(c[5]=g=>i.value.units=g),disabled:o(p)},null,8,JC),[[Tr,i.value.units]]),d("span",{class:xt(o(p)?"text-gray-400 line-through":"")},F(p),3)]))),128))])]),d("div",XC,[c[15]||(c[15]=d("label",{class:"label font-semibold"},"Giriş Tarihi",-1)),ee(d("input",{type:"date","onUpdate:modelValue":c[6]||(c[6]=p=>i.value.entryDate=p),class:"input input-bordered w-full",required:""},null,512),[[ue,i.value.entryDate]])]),d("div",ZC,[ee(d("input",{type:"checkbox","onUpdate:modelValue":c[7]||(c[7]=p=>i.value.isActive=p),class:"toggle toggle-success"},null,512),[[Tr,i.value.isActive]]),c[16]||(c[16]=d("label",{class:"label font-semibold"},"Aktif",-1))])])],32)]),d("div",eP,[c[17]||(c[17]=d("button",{form:"tenantForm",type:"submit",class:"btn btn-success"},"Kaydet",-1)),d("button",{type:"button",onClick:c[8]||(c[8]=p=>u.$emit("close")),class:"btn btn-ghost"},"İptal")])])],8,HC)}}},yp=["-3. Kat ve -4. Kat","-1. Kat","Zemin Kat A","Zemin Kat B","1. Kat","2. Kat A","2. Kat B","3. Kat","4. Kat","5. Kat","6. Kat","7. Kat"],nP=["open"],sP={class:"modal-box max-w-md"},rP={class:"py-4"},iP={class:"modal-action"},oP={__name:"ConfirmDeleteModal",props:{tenant:Object,visible:Boolean},emits:["confirm","close"],setup(t){return(e,n)=>{var s,r;return $(),Q("dialog",{id:"deleteConfirmModal",class:"modal",open:t.visible},[d("div",sP,[n[3]||(n[3]=d("h3",{class:"font-bold text-lg"},"Silme Onayı",-1)),d("p",rP,[d("strong",null,F((s=t.tenant)==null?void 0:s.firstName)+" "+F((r=t.tenant)==null?void 0:r.lastName),1),n[2]||(n[2]=tt(" isimli kiracıyı silmek istediğinize emin misiniz? "))]),d("div",iP,[d("button",{class:"btn btn-error",onClick:n[0]||(n[0]=i=>e.$emit("confirm"))},"Evet, Sil"),d("button",{class:"btn",onClick:n[1]||(n[1]=i=>e.$emit("cancel"))},"İptal")])])],8,nP)}}},aP={class:"p-4 space-y-6 max-w-5xl mx-auto"},lP={class:"flex justify-end"},uP={class:"card bg-base-100 shadow-lg border border-base-300 p-6 rounded-xl"},cP={class:"overflow-x-auto"},dP={class:"flex gap-2 justify-end mb-4"},hP={class:"table table-zebra w-full text-sm"},fP={class:"text-center"},pP={class:"text-center"},mP={class:"text-center"},gP={class:"text-center"},yP={class:"text-center whitespace-nowrap"},vP={class:"text-center"},_P={class:"text-center"},bP={class:"text-center"},wP={class:"dropdown dropdown-end"},EP={class:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-36"},TP=["onClick"],IP=["onClick"],AP=["onClick"],RP={__name:"Tenants",setup(t){const e=B([]),n=B(null),s=B(!1),r=B(!1),i=B(!1),o=B("all"),l=B(!1),u=B(null),c=R=>{u.value=R,l.value=!0},h=async()=>{await bs(st(oe,"tenants",u.value.id)),e.value=e.value.filter(R=>R.id!==u.value.id),l.value=!1},p=async()=>{e.value=[],(await Ae(ve(oe,"tenants"))).forEach(C=>{e.value.push({id:C.id,...C.data()})})},g=Re(()=>o.value==="active"?e.value.filter(R=>R.isActive):o.value==="passive"?e.value.filter(R=>!R.isActive):e.value),y=R=>{if(!R)return"";const C=R.replace(/\D/g,"");return C.length===11&&C.startsWith("0")?`+90 (${C.slice(1,4)}) ${C.slice(4,7)} ${C.slice(7,9)} ${C.slice(9,11)}`:R},w=async R=>{await Pn(ve(oe,"tenants"),{...R}),p(),showCreateModal.value=!1},E=R=>{n.value={...R},r.value=!0},x=async()=>{var R;if((R=n.value)!=null&&R.id){const C=st(oe,"tenants",n.value.id);await qr(C,{...n.value}),p(),r.value=!1}},N=R=>{n.value=R,s.value=!0};return Ot(p),(R,C)=>($(),Q("section",aP,[d("div",lP,[d("button",{class:"btn btn-primary",onClick:C[0]||(C[0]=D=>i.value=!0)},"Yeni Kiracı Ekle")]),d("div",uP,[C[10]||(C[10]=d("h3",{class:"text-center text-lg font-semibold mb-4"},"Kiracılar",-1)),d("div",cP,[d("div",dP,[d("button",{class:xt(["btn btn-sm",{"btn-primary":o.value==="all"}]),onClick:C[1]||(C[1]=D=>o.value="all")},"Tümü",2),d("button",{class:xt(["btn btn-sm",{"btn-success":o.value==="active"}]),onClick:C[2]||(C[2]=D=>o.value="active")},"Aktif",2),d("button",{class:xt(["btn btn-sm",{"btn-error":o.value==="passive"}]),onClick:C[3]||(C[3]=D=>o.value="passive")},"Pasif",2)]),d("table",hP,[C[9]||(C[9]=d("thead",null,[d("tr",null,[d("th",{class:"text-center"},"Kat(lar)"),d("th",{class:"text-center"},"Şirket"),d("th",{class:"text-center"},"Ad"),d("th",{class:"text-center"},"Soyad"),d("th",{class:"text-center"},"Telefon"),d("th",{class:"text-center"},"E-posta"),d("th",{class:"text-center"},"Giriş Tarihi"),d("th",{class:"text-center"},"İşlem")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(g.value,(D,j)=>{var L;return $(),Q("tr",{key:j},[d("td",fP,F((L=D.units)==null?void 0:L.join(", ")),1),d("td",pP,F(D.company),1),d("td",mP,F(D.firstName),1),d("td",gP,F(D.lastName),1),d("td",yP,F(y(D.phone)),1),d("td",vP,F(D.email),1),d("td",_P,F(D.entryDate),1),d("td",bP,[d("div",wP,[C[8]||(C[8]=d("div",{tabindex:"0",role:"button",class:"btn btn-sm m-1"},"İşlem",-1)),d("ul",EP,[d("li",null,[d("button",{onClick:ft(_=>E(D),["stop","prevent"])},"Düzenle",8,TP)]),d("li",null,[d("button",{onClick:ft(_=>N(D),["stop","prevent"])},"Özet",8,IP)]),d("li",null,[d("button",{onClick:ft(_=>c(D),["stop","prevent"]),class:"text-error"},"Sil",8,AP)])])])])])}),128))])])])]),s.value?($(),Ht(vv,{key:0,tenant:n.value,onClose:C[4]||(C[4]=D=>s.value=!1)},null,8,["tenant"])):qe("",!0),nt(qC,{tenant:n.value,visible:r.value,"unit-options":cn(yp),"all-tenants":e.value,onSave:x,onClose:C[5]||(C[5]=D=>r.value=!1)},null,8,["tenant","visible","unit-options","all-tenants"]),nt(tP,{visible:i.value,"unit-options":cn(yp),"all-tenants":e.value,onSave:w,onClose:C[6]||(C[6]=D=>i.value=!1)},null,8,["visible","unit-options","all-tenants"]),nt(oP,{visible:l.value,tenant:u.value,onConfirm:h,onCancel:C[7]||(C[7]=D=>l.value=!1)},null,8,["visible","tenant"])]))}},SP=["open"],CP={class:"modal-box max-w-3xl"},PP={class:"font-bold text-lg mb-4"},kP=["value"],xP=["value"],DP={class:"md:col-span-3 flex justify-end gap-2"},VP={type:"submit",class:"btn btn-success"},NP={__name:"PaymentModal",props:["visible","payment","tenants","banks","editMode"],emits:["save","cancel"],setup(t,{emit:e}){const n=e,s=()=>{n("save")};return(r,i)=>($(),Q("dialog",{class:"modal",open:t.visible},[d("div",CP,[d("h3",PP,"Ödeme "+F(t.editMode?"Güncelle":"Ekle"),1),d("form",{onSubmit:ft(s,["prevent"]),class:"grid grid-cols-1 md:grid-cols-3 gap-4"},[ee(d("input",{"onUpdate:modelValue":i[0]||(i[0]=o=>t.payment.date=o),type:"date",class:"input input-bordered w-full",required:""},null,512),[[ue,t.payment.date]]),ee(d("select",{"onUpdate:modelValue":i[1]||(i[1]=o=>t.payment.tenantId=o),class:"select select-bordered w-full",required:""},[i[6]||(i[6]=d("option",{disabled:"",value:""},"Kiracı seçin",-1)),($(!0),Q(ke,null,Ke(t.tenants,o=>($(),Q("option",{key:o.id,value:o.id},F(o.company),9,kP))),128))],512),[[Gt,t.payment.tenantId]]),ee(d("input",{"onUpdate:modelValue":i[2]||(i[2]=o=>t.payment.amount=o),type:"number",placeholder:"Tutar (₺)",class:"input input-bordered w-full",required:""},null,512),[[ue,t.payment.amount,void 0,{number:!0}]]),ee(d("select",{"onUpdate:modelValue":i[3]||(i[3]=o=>t.payment.type=o),class:"select select-bordered w-full",required:""},i[7]||(i[7]=[d("option",{disabled:"",value:""},"Ödeme Tipi",-1),d("option",{value:"Aidat"},"Aidat",-1),d("option",{value:"Elektrik"},"Elektrik",-1),d("option",{value:"Su"},"Su",-1)]),512),[[Gt,t.payment.type]]),ee(d("select",{"onUpdate:modelValue":i[4]||(i[4]=o=>t.payment.bank=o),class:"select select-bordered w-full",required:""},[i[8]||(i[8]=d("option",{disabled:"",value:""},"Banka Seçin",-1)),($(!0),Q(ke,null,Ke(t.banks,o=>($(),Q("option",{key:o,value:o},F(o),9,xP))),128))],512),[[Gt,t.payment.bank]]),d("div",DP,[d("button",VP,F(t.editMode?"Kaydet":"Ekle"),1),d("button",{type:"button",class:"btn btn-outline btn-warning",onClick:i[5]||(i[5]=o=>r.$emit("cancel"))},"Vazgeç")])],32)])],8,SP))}},OP={class:"p-4 space-y-6 max-w-5xl mx-auto"},MP={class:"card bg-base-100 shadow-lg border border-base-300 p-6 rounded-xl"},LP={class:"overflow-x-auto"},UP={class:"table table-zebra w-full text-sm"},$P={class:"text-center"},FP={class:"text-center"},BP={class:"text-center text-green-600"},jP={class:"text-center"},qP={class:"text-center"},HP={class:"text-center"},KP={class:"flex justify-center gap-2"},zP=["onClick"],GP=["onClick"],WP={__name:"Payments",setup(t){const e=B([]),n=B([]),s=B(["Ziraat","İş Bankası","Garanti","Yapı Kredi","Halkbank"]),r=B(!1),i=B({date:new Date().toISOString().substring(0,10),tenantId:"",amount:null,type:"",bank:""}),o=B(!1),l=B(null),u=async()=>{e.value=[],(await Ae(ve(oe,"payments"))).forEach(x=>{e.value.push({id:x.id,...x.data()})})},c=async()=>{n.value=[],(await Ae(ve(oe,"tenants"))).forEach(x=>{n.value.push({id:x.id,...x.data()})})},h=E=>{const x=n.value.find(N=>N.id===E);return x?x.company:"Bilinmiyor"},p=async()=>{if(o.value&&l.value){const E=st(oe,"payments",l.value);await qr(E,{...i.value})}else await Pn(ve(oe,"payments"),{...i.value});i.value={date:new Date().toISOString().substring(0,10),tenantId:"",amount:null,type:"",bank:""},o.value=!1,l.value=null,await u(),r.value=!1},g=async E=>{confirm("Bu ödemeyi silmek istediğinize emin misiniz?")&&(await bs(st(oe,"payments",E)),e.value=e.value.filter(N=>N.id!==E))},y=E=>{i.value={date:E.date,tenantId:E.tenantId,amount:E.amount,type:E.type,bank:E.bank},l.value=E.id,o.value=!0,r.value=!0},w=()=>{i.value={date:new Date().toISOString().substring(0,10),tenantId:"",amount:null,type:"",bank:""},o.value=!1,l.value=null,r.value=!1};return Ot(()=>{c(),u()}),(E,x)=>($(),Q("section",OP,[d("button",{class:"btn btn-primary mb-4",onClick:x[0]||(x[0]=N=>r.value=!0)},"➕ Ödeme Ekle"),d("div",MP,[x[2]||(x[2]=d("h3",{class:"text-center text-lg font-semibold mb-4"},"Ödeme Geçmişi",-1)),d("div",LP,[d("table",UP,[x[1]||(x[1]=d("thead",null,[d("tr",null,[d("th",{class:"text-center"},"Tarih"),d("th",{class:"text-center"},"Firma"),d("th",{class:"text-center"},"Tutar"),d("th",{class:"text-center"},"Tip"),d("th",{class:"text-center"},"Banka"),d("th",{class:"text-center"},"İşlem")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(e.value,(N,R)=>($(),Q("tr",{key:R},[d("td",$P,F(N.date),1),d("td",FP,F(h(N.tenantId)),1),d("td",BP,F(N.amount)+" ₺",1),d("td",jP,F(N.type),1),d("td",qP,F(N.bank),1),d("td",HP,[d("div",KP,[d("button",{onClick:C=>y(N),class:"btn btn-xs btn-info"},"Düzenle",8,zP),d("button",{onClick:C=>g(N.id),class:"btn btn-xs btn-error"},"Sil",8,GP)])])]))),128))])])])]),nt(NP,{visible:r.value,payment:i.value,tenants:n.value,banks:s.value,editMode:o.value,onSave:p,onCancel:w},null,8,["visible","payment","tenants","banks","editMode"])]))}},QP=["open"],YP={class:"modal-box max-w-3xl"},JP={class:"form-control"},XP=["value"],ZP={class:"form-control"},ek={class:"form-control"},tk={class:"form-control md:col-span-3"},nk={class:"mt-4 md:col-span-3 flex justify-end gap-2"},sk={__name:"ExpenseModal",props:["visible","expense","types"],emits:["save","close"],setup(t,{emit:e}){const n=e;function s(){n("save")}return(r,i)=>($(),Q("dialog",{class:"modal",open:t.visible},[d("div",YP,[i[11]||(i[11]=d("h3",{class:"font-bold text-lg mb-4"},"Gider Ekle",-1)),d("form",{onSubmit:ft(s,["prevent"]),class:"grid grid-cols-1 md:grid-cols-3 gap-4"},[d("div",JP,[i[6]||(i[6]=d("label",{class:"label font-semibold"},"Gider Tipi",-1)),ee(d("select",{"onUpdate:modelValue":i[0]||(i[0]=o=>t.expense.type=o),class:"select select-bordered",required:""},[i[5]||(i[5]=d("option",{disabled:"",value:""},"Seçiniz",-1)),($(!0),Q(ke,null,Ke(t.types,o=>($(),Q("option",{key:o,value:o},F(o),9,XP))),128))],512),[[Gt,t.expense.type]])]),d("div",ZP,[i[7]||(i[7]=d("label",{class:"label font-semibold"},"Tarih",-1)),ee(d("input",{"onUpdate:modelValue":i[1]||(i[1]=o=>t.expense.date=o),type:"date",class:"input input-bordered",required:""},null,512),[[ue,t.expense.date]])]),d("div",ek,[i[8]||(i[8]=d("label",{class:"label font-semibold"},"Tutar (₺)",-1)),ee(d("input",{"onUpdate:modelValue":i[2]||(i[2]=o=>t.expense.amount=o),type:"number",min:"0",step:"0.01",class:"input input-bordered",required:""},null,512),[[ue,t.expense.amount]])]),d("div",tk,[i[9]||(i[9]=d("label",{class:"label font-semibold"},"Açıklama",-1)),ee(d("input",{"onUpdate:modelValue":i[3]||(i[3]=o=>t.expense.description=o),class:"input input-bordered",placeholder:"Açıklama giriniz",required:""},null,512),[[ue,t.expense.description]])]),d("div",nk,[d("button",{class:"btn",type:"button",onClick:i[4]||(i[4]=o=>r.$emit("close"))},"İptal"),i[10]||(i[10]=d("button",{class:"btn btn-primary",type:"submit"},"Kaydet",-1))])],32)])],8,QP))}},rk={class:"p-4 space-y-6 max-w-5xl mx-auto"},ik={class:"card bg-base-100 shadow-lg border border-base-300 p-6 rounded-xl"},ok={class:"card bg-base-100 shadow-lg border border-base-300 p-6 rounded-xl"},ak={class:"card bg-base-100 border border-base-300 p-4 rounded-xl mb-4"},lk={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end"},uk=["value"],ck={class:"overflow-x-auto rounded-lg border border-base-300"},dk={class:"table table-zebra w-full text-sm"},hk={class:"text-center"},fk={class:"text-center"},pk={class:"text-center text-red-600 font-medium"},mk={class:"text-center"},gk={class:"text-center"},yk={class:"dropdown dropdown-end"},vk={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-32"},_k=["onClick"],bk=["onClick"],wk={class:"mt-4 text-right font-semibold text-lg"},Ek={class:"text-red-600"},Tk={__name:"Expenses",setup(t){const e=B(""),n=B(""),s=B(""),r=B(""),i=Re(()=>g.value.filter(j=>{const L=!e.value||j.type===e.value,_=!n.value||j.date>=n.value,T=!s.value||j.date<=s.value,b=!r.value||j.description.toLowerCase().includes(r.value.toLowerCase());return L&&_&&T&&b})),o=["Elektrik (Genel)","Su (Genel)","Maaş","Vergi","Bakım","Temizlik","Yönetici Ücreti","Diğer"],l=new Date().toISOString().substr(0,10),u=B(!1),c=B({date:l,description:"",amount:"",type:""}),h=B(!1),p=B(null),g=B([]),y=j=>j==null||isNaN(j)?"-":Number(j).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),w=Re(()=>i.value.reduce((j,L)=>j+Number(L.amount||0),0));function E(){e.value="",n.value="",s.value="",r.value=""}const x=j=>{c.value={date:j.date,description:j.description,amount:j.amount,type:j.type},p.value=j.id,h.value=!0},N=()=>{c.value={date:l,description:"",amount:"",type:""},h.value=!1,p.value=null},R=async j=>{if(confirm("Bu gideri silmek istediğinize emin misiniz?"))try{await bs(st(oe,"expenses",j)),g.value=g.value.filter(_=>_.id!==j)}catch(_){console.error("Silme işlemi başarısız:",_)}},C=async()=>{try{if(h.value&&p.value){const j=st(oe,"expenses",p.value);await qr(j,{...c.value})}else await Pn(ve(oe,"expenses"),{...c.value});N(),await D(),alert("Gider başarıyla kaydedildi.")}catch(j){console.error("Kayıt hatası:",j)}},D=async()=>{g.value=[],(await Ae(ve(oe,"expenses"))).forEach(L=>{g.value.push({id:L.id,...L.data()})})};return Ot(()=>{D()}),(j,L)=>($(),Q("section",rk,[d("div",ik,[L[6]||(L[6]=d("h2",{class:"text-center text-lg font-semibold text-base-content mb-4"},"Gider Ekle",-1)),d("button",{class:"btn btn-primary",onClick:L[0]||(L[0]=_=>u.value=!0)},"➕ Gider Ekle")]),d("div",ok,[L[15]||(L[15]=d("h3",{class:"text-center text-lg font-semibold text-base-content mb-4"},"Gider Listesi",-1)),d("div",ak,[d("div",lk,[d("div",null,[L[8]||(L[8]=d("label",{class:"label font-semibold"},"Gider Tipi",-1)),ee(d("select",{"onUpdate:modelValue":L[1]||(L[1]=_=>e.value=_),class:"select select-bordered w-full"},[L[7]||(L[7]=d("option",{value:""},"Tüm Tipler",-1)),($(),Q(ke,null,Ke(o,_=>d("option",{key:_,value:_},F(_),9,uk)),64))],512),[[Gt,e.value]])]),d("div",null,[L[9]||(L[9]=d("label",{class:"label font-semibold"},"Başlangıç Tarihi",-1)),ee(d("input",{type:"date","onUpdate:modelValue":L[2]||(L[2]=_=>n.value=_),class:"input input-bordered w-full"},null,512),[[ue,n.value]])]),d("div",null,[L[10]||(L[10]=d("label",{class:"label font-semibold"},"Bitiş Tarihi",-1)),ee(d("input",{type:"date","onUpdate:modelValue":L[3]||(L[3]=_=>s.value=_),class:"input input-bordered w-full"},null,512),[[ue,s.value]])]),d("div",null,[L[11]||(L[11]=d("label",{class:"label font-semibold"},"Açıklama",-1)),ee(d("input",{type:"text","onUpdate:modelValue":L[4]||(L[4]=_=>r.value=_),placeholder:"Örn: elektrik, maaş",class:"input input-bordered w-full"},null,512),[[ue,r.value]])])])]),d("div",{class:"flex justify-end mt-2"},[d("button",{class:"btn btn-sm btn-outline",onClick:E},"Filtreleri Temizle")]),d("div",ck,[d("table",dk,[L[13]||(L[13]=d("thead",null,[d("tr",null,[d("th",{class:"text-center"},"Tarih"),d("th",{class:"text-center"},"Açıklama"),d("th",{class:"text-center"},"Tutar"),d("th",{class:"text-center"},"Tip"),d("th",{class:"text-center"},"İşlem")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(i.value,(_,T)=>($(),Q("tr",{key:T},[d("td",hk,F(_.date),1),d("td",fk,F(_.description),1),d("td",pk,F(y(_.amount)),1),d("td",mk,F(_.type),1),d("td",gk,[d("div",yk,[L[12]||(L[12]=d("label",{tabindex:"0",class:"btn btn-xs btn-outline"},"İşlemler",-1)),d("ul",vk,[d("li",null,[d("a",{onClick:ft(b=>x(_),["prevent"])},"Düzenle",8,_k)]),d("li",null,[d("a",{onClick:ft(b=>R(_.id),["prevent"])},"Sil",8,bk)])])])])]))),128))])]),d("div",wk,[L[14]||(L[14]=tt(" Toplam Gider: ")),d("span",Ek,F(y(w.value)),1)])])]),nt(sk,{visible:u.value,expense:c.value,types:o,onSave:C,onClose:L[5]||(L[5]=_=>u.value=!1)},null,8,["visible","expense"])]))}},Ik={id:"electricityModal",class:"modal",open:""},Ak={class:"modal-box max-w-6xl"},Rk={class:"form-control w-48 mt-4"},Sk={class:"flex flex-wrap gap-4 mt-2"},Ck={class:"form-control"},Pk={class:"form-control"},kk={class:"form-control"},xk={class:"form-control"},Dk=["value"],Vk={class:"overflow-x-auto mt-6"},Nk={class:"table w-full border"},Ok=["onUpdate:modelValue","onInput"],Mk=["onUpdate:modelValue","onInput"],Lk=["onUpdate:modelValue","onInput"],Uk=["value"],$k={class:"modal-action flex justify-between"},Fk={__name:"ElectricityModal",setup(t){const e=B(new Date().toISOString().slice(0,7)),n=B([]),s=B(""),r=B(""),i=B(""),o=Re(()=>{if(!s.value||!r.value)return 0;const y=new Date(s.value),E=new Date(r.value)-y;return Math.floor(E/(1e3*60*60*24))}),l=y=>{const w=n.value[y],E=Number(w.kdvHaric)*.2;w.toplamTutar=+(Number(w.kdvHaric)+E).toFixed(2)},u=async()=>{const y=await Ae(ve(oe,"tenants"));n.value=[];const w=new Set,E=[{tenantId:"mescit",unit:"MESCİT",company:"MESCİT"},{tenantId:"ortak",unit:"ORTAK ALAN",company:"ORTAK ALAN"}];for(const x of E){const N=await c(x.unit);n.value.push({...x,previous:N,current:0,usage:0,kdvHaric:0,toplamTutar:0}),w.add(x.unit)}y.forEach(x=>{const N=x.data();if(N.isActive)for(const R of N.units||[])w.has(R)||(w.add(R),c(R).then(C=>{n.value.push({tenantId:x.id,unit:R,company:N.company,previous:C,current:0,usage:0,kdvHaric:0,toplamTutar:0})}))})},c=async y=>{const w=zt(ve(oe,"readings"),lt("unit","==",y),lt("type","==","electricity"),cv("endDate","desc"),dv(1)),E=await Ae(w);return E.empty?0:E.docs[0].data().currentValue||0},h=y=>{const w=n.value[y];w.usage=w.current-w.previous,l(y)},p=async()=>{const y=ve(oe,"readings");for(const w of n.value)await Pn(y,{tenantId:w.tenantId,unit:w.unit,period:e.value,type:"electricity",previousValue:w.previous,currentValue:w.current,consumption:w.usage,kdvHaric:w.kdvHaric,toplamTutar:w.toplamTutar,company:w.company,startDate:s.value,endDate:r.value,dueDate:i.value,dayCount:o.value});alert("Tüm elektrik sayaç kayıtları eklendi."),n.value=[],u()},g=async()=>{const y=ve(oe,"readings"),w=n.value.filter(E=>E.current>0);for(const E of w)await Pn(y,{tenantId:E.tenantId,unit:E.unit,period:e.value,type:"electricity",previousValue:E.previous,currentValue:E.current,consumption:E.usage,kdvHaric:E.kdvHaric,toplamTutar:E.toplamTutar,company:E.company,startDate:s.value,endDate:r.value,dueDate:i.value,dayCount:o.value});alert("Girilen elektrik kayıtları başarıyla eklendi."),u()};return Ot(u),(y,w)=>($(),Q("dialog",Ik,[d("div",Ak,[w[11]||(w[11]=d("h3",{class:"font-bold text-lg"},"Elektrik Sayaç Girişi",-1)),d("div",Rk,[w[5]||(w[5]=d("label",{class:"label"},[d("span",{class:"label-text font-semibold"},"Dönem")],-1)),ee(d("input",{type:"month","onUpdate:modelValue":w[0]||(w[0]=E=>e.value=E),class:"input input-bordered"},null,512),[[ue,e.value]])]),d("div",Sk,[d("div",Ck,[w[6]||(w[6]=d("label",{class:"label"},[d("span",{class:"label-text font-semibold"},"İlk Okuma Tarihi")],-1)),ee(d("input",{type:"date","onUpdate:modelValue":w[1]||(w[1]=E=>s.value=E),class:"input input-bordered"},null,512),[[ue,s.value]])]),d("div",Pk,[w[7]||(w[7]=d("label",{class:"label"},[d("span",{class:"label-text font-semibold"},"Son Okuma Tarihi")],-1)),ee(d("input",{type:"date","onUpdate:modelValue":w[2]||(w[2]=E=>r.value=E),class:"input input-bordered"},null,512),[[ue,r.value]])]),d("div",kk,[w[8]||(w[8]=d("label",{class:"label"},[d("span",{class:"label-text font-semibold"},"Son Ödeme Tarihi")],-1)),ee(d("input",{type:"date","onUpdate:modelValue":w[3]||(w[3]=E=>i.value=E),class:"input input-bordered"},null,512),[[ue,i.value]])]),d("div",xk,[w[9]||(w[9]=d("label",{class:"label"},[d("span",{class:"label-text font-semibold"},"Gün Sayısı")],-1)),d("input",{type:"number",value:o.value,disabled:"",class:"input input-bordered"},null,8,Dk)])]),d("div",Vk,[d("table",Nk,[w[10]||(w[10]=d("thead",null,[d("tr",null,[d("th",null,"Kat"),d("th",null,"Şirket"),d("th",null,"Önceki Sayaç"),d("th",null,"Yeni Sayaç"),d("th",null,"Tüketim"),d("th",null,"KDV Hariç Tutar"),d("th",null,"Toplam Tutar")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(n.value,(E,x)=>($(),Q("tr",{key:x},[d("td",null,F(E.unit),1),d("td",null,F(E.company),1),d("td",null,[ee(d("input",{type:"number",class:"input input-bordered w-24","onUpdate:modelValue":N=>E.previous=N,onInput:N=>h(x)},null,40,Ok),[[ue,E.previous,void 0,{number:!0}]])]),d("td",null,[ee(d("input",{type:"number",class:"input input-bordered w-24","onUpdate:modelValue":N=>E.current=N,onInput:N=>h(x)},null,40,Mk),[[ue,E.current,void 0,{number:!0}]])]),d("td",null,F(E.usage),1),d("td",null,[ee(d("input",{type:"number",class:"input input-bordered w-28","onUpdate:modelValue":N=>E.kdvHaric=N,onInput:N=>l(x)},null,40,Lk),[[ue,E.kdvHaric,void 0,{number:!0}]])]),d("td",null,[d("input",{type:"number",class:"input input-bordered w-28 bg-base-200",value:E.toplamTutar,disabled:""},null,8,Uk)])]))),128))])])]),d("div",$k,[d("div",{class:"space-x-2"},[d("button",{class:"btn btn-success",onClick:g},"Girilenleri Kaydet"),d("button",{class:"btn btn-primary",onClick:p},"Tümünü Kaydet")]),d("button",{class:"btn",onClick:w[4]||(w[4]=E=>y.$emit("close"))},"Kapat")])])]))}},Bk={id:"waterModal",class:"modal",open:""},jk={class:"modal-box max-w-6xl"},qk={class:"form-control w-48 mt-4"},Hk={class:"flex flex-wrap gap-4 mt-2"},Kk={class:"form-control"},zk={class:"form-control"},Gk={class:"form-control"},Wk={class:"form-control"},Qk=["value"],Yk={class:"flex gap-4 mt-4"},Jk={class:"form-control w-60"},Xk={class:"form-control w-60"},Zk={class:"overflow-x-auto mt-6"},ex={class:"table w-full border"},tx=["onUpdate:modelValue","onInput"],nx=["onUpdate:modelValue","onInput"],sx={class:"modal-action flex justify-between"},rx={__name:"WaterModal",setup(t){const e=B([]),n=B([]),s=B(new Date().toISOString().slice(0,7)),r=B(""),i=B(""),o=B(""),l=B(0),u=B(0),c=Re(()=>{if(!r.value||!i.value)return 0;const N=new Date(r.value),C=new Date(i.value)-N;return Math.floor(C/(1e3*60*60*24))}),h=N=>isNaN(N)?"0.00":Number(N).toFixed(2),p=async N=>{const R=zt(ve(oe,"readings"),lt("unit","==",N),lt("type","==","water"),cv("endDate","desc"),dv(1)),C=await Ae(R);return C.empty?0:C.docs[0].data().currentValue||0},g=async()=>{e.value=[],n.value=[];const N=[{tenantId:"ortak",unit:"ORTAK ALAN",name:"ORTAK ALAN"},{tenantId:"mescit",unit:"MESCİT",name:"MESCİT"}];for(const C of N){const D=await p(C.unit);n.value.push({...C,previous:D,current:0,usage:0,kdvHaric:0,kdvDahil:0})}(await Ae(ve(oe,"tenants"))).forEach(async C=>{const D=C.data();if(D.isActive)for(const j of D.units||[]){const L=await p(j);n.value.push({tenantId:C.id,unit:j,name:D.company,previous:L,current:0,usage:0,kdvHaric:0,kdvDahil:0})}})},y=N=>{const R=n.value[N];R.usage=R.current-R.previous;const C=R.usage*(l.value+u.value),D=R.usage*l.value*.01,j=R.usage*u.value*.1;R.kdvHaric=C,R.kdvDahil=C+D+j,R.toplamTutar=R.kdvDahil};Fn([l,u],()=>{n.value.forEach((N,R)=>y(R))});const w=async(N=!1)=>{if(!r.value||!i.value||c.value<=0){alert("Lütfen geçerli bir tarih aralığı seçin.");return}const R=ve(oe,"readings"),C=N?n.value.filter(D=>D.previous>=0&&D.current>D.previous):n.value;for(const D of C)await Pn(R,{tenantId:D.tenantId,unit:D.unit,period:s.value,type:"water",previousValue:D.previous,currentValue:D.current,usage:D.usage,kdvHaric:D.kdvHaric,kdvDahil:D.kdvDahil,startDate:r.value,endDate:i.value,dueDate:o.value,dayCount:c.value,waterUnitPrice:l.value,wasteUnitPrice:u.value});alert(N?"Girilen kayıtlar eklendi.":"Tüm kayıtlar eklendi."),n.value=[],g()},E=()=>w(!1),x=()=>w(!0);return Ot(g),(N,R)=>($(),Q("dialog",Bk,[d("div",jk,[R[15]||(R[15]=d("h3",{class:"font-bold text-lg"},"Su Sayaç Girişi",-1)),d("div",qk,[R[7]||(R[7]=d("label",{class:"label font-semibold"},"Dönem",-1)),ee(d("input",{type:"month","onUpdate:modelValue":R[0]||(R[0]=C=>s.value=C),class:"input input-bordered"},null,512),[[ue,s.value]])]),d("div",Hk,[d("div",Kk,[R[8]||(R[8]=d("label",{class:"label font-semibold"},"Başlangıç Tarihi",-1)),ee(d("input",{type:"date","onUpdate:modelValue":R[1]||(R[1]=C=>r.value=C),class:"input input-bordered"},null,512),[[ue,r.value]])]),d("div",zk,[R[9]||(R[9]=d("label",{class:"label font-semibold"},"Bitiş Tarihi",-1)),ee(d("input",{type:"date","onUpdate:modelValue":R[2]||(R[2]=C=>i.value=C),class:"input input-bordered"},null,512),[[ue,i.value]])]),d("div",Gk,[R[10]||(R[10]=d("label",{class:"label font-semibold"},"Son Ödeme Tarihi",-1)),ee(d("input",{type:"date","onUpdate:modelValue":R[3]||(R[3]=C=>o.value=C),class:"input input-bordered"},null,512),[[ue,o.value]])]),d("div",Wk,[R[11]||(R[11]=d("label",{class:"label font-semibold"},"Gün Sayısı",-1)),d("input",{type:"number",value:c.value,disabled:"",class:"input input-bordered"},null,8,Qk)])]),d("div",Yk,[d("div",Jk,[R[12]||(R[12]=d("label",{class:"label font-semibold"},"Su Birim Fiyatı (₺)",-1)),ee(d("input",{type:"number","onUpdate:modelValue":R[4]||(R[4]=C=>l.value=C),class:"input input-bordered",step:"0.01"},null,512),[[ue,l.value,void 0,{number:!0}]])]),d("div",Xk,[R[13]||(R[13]=d("label",{class:"label font-semibold"},"Atık Su Birim Fiyatı (₺)",-1)),ee(d("input",{type:"number","onUpdate:modelValue":R[5]||(R[5]=C=>u.value=C),class:"input input-bordered",step:"0.01"},null,512),[[ue,u.value,void 0,{number:!0}]])])]),d("div",Zk,[d("table",ex,[R[14]||(R[14]=d("thead",null,[d("tr",null,[d("th",null,"Kat"),d("th",null,"Şirket"),d("th",null,"Önceki Sayaç"),d("th",null,"Yeni Sayaç"),d("th",null,"Tüketim"),d("th",null,"KDV Hariç"),d("th",null,"KDV Dahil")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(n.value,(C,D)=>($(),Q("tr",{key:D},[d("td",null,F(C.unit),1),d("td",null,F(C.name),1),d("td",null,[ee(d("input",{type:"number",class:"input input-bordered w-24","onUpdate:modelValue":j=>C.previous=j,onInput:j=>y(D)},null,40,tx),[[ue,C.previous,void 0,{number:!0}]])]),d("td",null,[ee(d("input",{type:"number",class:"input input-bordered w-24","onUpdate:modelValue":j=>C.current=j,onInput:j=>y(D)},null,40,nx),[[ue,C.current,void 0,{number:!0}]])]),d("td",null,F(h(C.usage)),1),d("td",null,F(h(C.kdvHaric)),1),d("td",null,F(h(C.kdvDahil)),1)]))),128))])])]),d("div",sx,[d("div",{class:"space-x-2"},[d("button",{class:"btn btn-success",onClick:x},"Girilenleri Kaydet"),d("button",{class:"btn btn-primary",onClick:E},"Tümünü Kaydet")]),d("button",{class:"btn",onClick:R[6]||(R[6]=C=>N.$emit("close"))},"Kapat")])])]))}},ix={open:"",class:"modal"},ox={class:"modal-box max-w-xl"},ax={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},lx={class:"form-control"},ux={class:"form-control"},cx={__name:"AidatModal",emits:["close","refresh"],setup(t,{emit:e}){const n=e,s=B(""),r=B(""),i=()=>{n("close")},o=async()=>{try{if(!s.value||!r.value){alert("Lütfen dönem ve son ödeme tarihini giriniz.");return}const l=parseInt(s.value.slice(0,4)),u=await Ae(zt(ve(oe,"annualDues"),lt("year","==",l))),c=[];if(u.forEach(h=>{const p=h.data();p.amount>0&&c.push({tenantId:p.tenantId,unit:p.unit,kdvHaric:p.amount,toplamTutar:p.vatIncludedAmount})}),c.length===0){alert("Bu yıla ait tanımlı aidat bilgisi bulunamadı.");return}for(const h of c)await Pn(ve(oe,"aidatRecords"),{tenantId:h.tenantId,unit:h.unit,period:s.value,dueDate:r.value,kdvHaric:h.kdvHaric,toplamTutar:h.toplamTutar,type:"aidat",createdAt:new Date});alert("Aidatlar başarıyla oluşturuldu."),n("refresh"),n("close")}catch(l){console.error("Aidat kayıt hatası:",l),alert("Bir hata oluştu. Konsolu kontrol ediniz.")}};return(l,u)=>($(),Q("dialog",ix,[d("div",ox,[u[5]||(u[5]=d("h3",{class:"font-bold text-lg mb-6 text-center"},"Aidat Oluştur",-1)),d("form",{onSubmit:ft(o,["prevent"]),class:"space-y-4"},[d("div",ax,[d("div",lx,[u[2]||(u[2]=d("label",{class:"label font-semibold"},"Dönem",-1)),ee(d("input",{type:"month","onUpdate:modelValue":u[0]||(u[0]=c=>s.value=c),class:"input input-bordered w-full",required:""},null,512),[[ue,s.value]])]),d("div",ux,[u[3]||(u[3]=d("label",{class:"label font-semibold"},"Son Ödeme Tarihi",-1)),ee(d("input",{type:"date","onUpdate:modelValue":u[1]||(u[1]=c=>r.value=c),class:"input input-bordered w-full",required:""},null,512),[[ue,r.value]])])]),d("div",{class:"flex justify-end mt-6"},[d("button",{type:"button",class:"btn btn-outline mr-2",onClick:i},"İptal"),u[4]||(u[4]=d("button",{type:"submit",class:"btn btn-primary"},"Oluştur",-1))])],32)])]))}},dx={key:0,open:"",class:"modal"},hx={class:"modal-box max-w-2xl"},fx={class:"form-control mb-4"},px=["value"],mx={class:"form-control mb-4"},gx=["value"],yx={class:"form-control mb-4"},vx={class:"form-control mb-4"},_x={class:"form-control mb-4"},bx={class:"text-sm text-gray-500 mb-2"},wx={class:"text-sm text-gray-500 mb-4"},Ex={class:"modal-action"},Tx={__name:"EditElectricityModal",props:{record:Object},emits:["close","updated"],setup(t,{emit:e}){const n=t,s=e,r=B({previousValue:0,currentValue:0,kdvHaric:0});Fn(()=>n.record,l=>{l&&(r.value.previousValue=l.previousValue??0,r.value.currentValue=l.currentValue??0,r.value.kdvHaric=l.kdvHaric??0)},{immediate:!0});const i=l=>isNaN(l)?"-":l.toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),o=async()=>{const l=r.value.currentValue-r.value.previousValue,u=+(r.value.kdvHaric*1.2).toFixed(2),c=st(oe,"readings",n.record.id);await qr(c,{previousValue:r.value.previousValue,currentValue:r.value.currentValue,consumption:l,kdvHaric:r.value.kdvHaric,toplamTutar:u,kdvDahil:u}),alert("Kayıt güncellendi."),s("updated"),s("close")};return(l,u)=>t.record?($(),Q("dialog",dx,[d("div",hx,[u[9]||(u[9]=d("h3",{class:"font-bold text-lg mb-4"},"Elektrik Kaydı Düzenle",-1)),d("div",fx,[u[4]||(u[4]=d("label",{class:"label font-semibold"},"Kat",-1)),d("input",{type:"text",class:"input input-bordered",value:t.record.unit,disabled:""},null,8,px)]),d("div",mx,[u[5]||(u[5]=d("label",{class:"label font-semibold"},"Şirket",-1)),d("input",{type:"text",class:"input input-bordered",value:t.record.tenantName||"-",disabled:""},null,8,gx)]),d("div",yx,[u[6]||(u[6]=d("label",{class:"label font-semibold"},"Önceki Endeks",-1)),ee(d("input",{type:"number","onUpdate:modelValue":u[0]||(u[0]=c=>r.value.previousValue=c),class:"input input-bordered"},null,512),[[ue,r.value.previousValue,void 0,{number:!0}]])]),d("div",vx,[u[7]||(u[7]=d("label",{class:"label font-semibold"},"Yeni Endeks",-1)),ee(d("input",{type:"number","onUpdate:modelValue":u[1]||(u[1]=c=>r.value.currentValue=c),class:"input input-bordered"},null,512),[[ue,r.value.currentValue,void 0,{number:!0}]])]),d("div",_x,[u[8]||(u[8]=d("label",{class:"label font-semibold"},"KDV Hariç Tutar",-1)),ee(d("input",{type:"number","onUpdate:modelValue":u[2]||(u[2]=c=>r.value.kdvHaric=c),class:"input input-bordered"},null,512),[[ue,r.value.kdvHaric,void 0,{number:!0}]])]),d("div",bx," Tüketim: "+F(r.value.currentValue-r.value.previousValue),1),d("div",wx," Toplam (KDV Dahil): "+F(i(r.value.kdvHaric*1.2)),1),d("div",Ex,[d("button",{class:"btn btn-outline",onClick:u[3]||(u[3]=c=>l.$emit("close"))},"İptal"),d("button",{class:"btn btn-primary",onClick:o},"Kaydet")])])])):qe("",!0)}},Ix={open:"",class:"modal"},Ax={class:"modal-box max-w-2xl"},Rx={class:"form-control mb-3"},Sx=["value"],Cx={class:"form-control mb-3"},Px=["value"],kx={class:"form-control mb-3"},xx={class:"form-control mb-3"},Dx={class:"form-control mb-3"},Vx={class:"form-control mb-3"},Nx={class:"text-sm text-gray-500 mb-2"},Ox={class:"text-sm text-gray-500 mb-3"},Mx={class:"modal-action"},Lx={__name:"EditWaterModal",props:{record:Object},emits:["close","updated"],setup(t,{emit:e}){const n=t,s=e,r=B({previousValue:0,currentValue:0,waterAmount:0,wasteAmount:0});fb(()=>{const u=n.record;u&&(r.value.previousValue=typeof u.previousValue=="number"?u.previousValue:0,r.value.currentValue=typeof u.currentValue=="number"?u.currentValue:0,r.value.waterAmount=typeof u.waterAmount=="number"?u.waterAmount:0,r.value.wasteAmount=typeof u.wasteAmount=="number"?u.wasteAmount:0)});const i=Re(()=>{const u=r.value.waterAmount*1.01,c=r.value.wasteAmount*1.1;return+(u+c).toFixed(2)}),o=u=>isNaN(u)?"-":u.toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),l=async()=>{const u=r.value.currentValue-r.value.previousValue;if(u<0){alert("Yeni endeks, önceki endeksten küçük olamaz.");return}const c=+(r.value.waterAmount+r.value.wasteAmount).toFixed(2),h=i.value,p=st(oe,"readings",n.record.id);await qr(p,{previousValue:r.value.previousValue,currentValue:r.value.currentValue,consumption:u,waterAmount:r.value.waterAmount,wasteAmount:r.value.wasteAmount,kdvHaric:c,toplamTutar:h,kdvDahil:h}),alert("Su kaydı başarıyla güncellendi."),s("updated"),s("close")};return(u,c)=>($(),Q("dialog",Ix,[d("div",Ax,[c[11]||(c[11]=d("h3",{class:"font-bold text-lg mb-4"},"Su Kaydı Düzenle",-1)),d("div",Rx,[c[5]||(c[5]=d("label",{class:"label font-semibold"},"Kat",-1)),d("input",{type:"text",class:"input input-bordered",value:t.record.unit,disabled:""},null,8,Sx)]),d("div",Cx,[c[6]||(c[6]=d("label",{class:"label font-semibold"},"Şirket",-1)),d("input",{type:"text",class:"input input-bordered",value:t.record.tenantName||"-",disabled:""},null,8,Px)]),d("div",kx,[c[7]||(c[7]=d("label",{class:"label font-semibold"},"Önceki Endeks",-1)),ee(d("input",{type:"number","onUpdate:modelValue":c[0]||(c[0]=h=>r.value.previousValue=h),class:"input input-bordered"},null,512),[[ue,r.value.previousValue,void 0,{number:!0}]])]),d("div",xx,[c[8]||(c[8]=d("label",{class:"label font-semibold"},"Yeni Endeks",-1)),ee(d("input",{type:"number","onUpdate:modelValue":c[1]||(c[1]=h=>r.value.currentValue=h),class:"input input-bordered"},null,512),[[ue,r.value.currentValue,void 0,{number:!0}]])]),d("div",Dx,[c[9]||(c[9]=d("label",{class:"label font-semibold"},"Su Tutarı (KDV Hariç - %1)",-1)),ee(d("input",{type:"number","onUpdate:modelValue":c[2]||(c[2]=h=>r.value.waterAmount=h),class:"input input-bordered"},null,512),[[ue,r.value.waterAmount,void 0,{number:!0}]])]),d("div",Vx,[c[10]||(c[10]=d("label",{class:"label font-semibold"},"Atık Su Tutarı (KDV Hariç - %10)",-1)),ee(d("input",{type:"number","onUpdate:modelValue":c[3]||(c[3]=h=>r.value.wasteAmount=h),class:"input input-bordered"},null,512),[[ue,r.value.wasteAmount,void 0,{number:!0}]])]),d("div",Nx," Tüketim: "+F(r.value.currentValue-r.value.previousValue),1),d("div",Ox," Toplam (KDV Dahil): "+F(o(i.value)),1),d("div",Mx,[d("button",{class:"btn btn-outline",onClick:c[4]||(c[4]=h=>u.$emit("close"))},"İptal"),d("button",{class:"btn btn-primary",onClick:l},"Kaydet")])])]))}},Ux={open:"",class:"modal"},$x={class:"modal-box max-w-md"},Fx={class:"form-control mb-4"},Bx=["value"],jx={class:"form-control mb-4"},qx=["value"],Hx={class:"form-control mb-4"},Kx={class:"form-control mb-4"},zx={class:"modal-action"},Gx={__name:"EditAidatModal",props:{record:Object},emits:["close","updated"],setup(t,{emit:e}){const n=t,s=e,r=B({kdvHaric:0,toplamTutar:0});Fn(()=>n.record,o=>{o&&(r.value.kdvHaric=o.kdvHaric??0,r.value.toplamTutar=o.toplamTutar??0)},{immediate:!0});const i=async()=>{const o=st(oe,"aidatRecords",n.record.id);await qr(o,{kdvHaric:r.value.kdvHaric,toplamTutar:r.value.toplamTutar}),alert("Aidat kaydı güncellendi."),s("updated"),s("close")};return(o,l)=>($(),Q("dialog",Ux,[d("div",$x,[l[7]||(l[7]=d("h3",{class:"font-bold text-lg mb-4"},"Aidat Kaydı Düzenle",-1)),d("div",Fx,[l[3]||(l[3]=d("label",{class:"label font-semibold"},"Kat",-1)),d("input",{type:"text",class:"input input-bordered",value:t.record.unit,disabled:""},null,8,Bx)]),d("div",jx,[l[4]||(l[4]=d("label",{class:"label font-semibold"},"Şirket",-1)),d("input",{type:"text",class:"input input-bordered",value:t.record.tenantName||"-",disabled:""},null,8,qx)]),d("div",Hx,[l[5]||(l[5]=d("label",{class:"label font-semibold"},"KDV Hariç",-1)),ee(d("input",{type:"number","onUpdate:modelValue":l[0]||(l[0]=u=>r.value.kdvHaric=u),class:"input input-bordered"},null,512),[[ue,r.value.kdvHaric,void 0,{number:!0}]])]),d("div",Kx,[l[6]||(l[6]=d("label",{class:"label font-semibold"},"Toplam Tutar (KDV Dahil)",-1)),ee(d("input",{type:"number","onUpdate:modelValue":l[1]||(l[1]=u=>r.value.toplamTutar=u),class:"input input-bordered"},null,512),[[ue,r.value.toplamTutar,void 0,{number:!0}]])]),d("div",zx,[d("button",{class:"btn btn-outline",onClick:l[2]||(l[2]=u=>o.$emit("close"))},"İptal"),d("button",{class:"btn btn-primary",onClick:i},"Kaydet")])])]))}},Wx={class:"p-4 max-w-5xl mx-auto space-y-6"},Qx={class:"flex gap-4 justify-center"},Yx={class:"flex flex-wrap gap-4 items-center mt-4"},Jx=["disabled"],Xx=["disabled"],Zx={class:"overflow-x-auto mt-6"},eD={class:"table table-zebra w-full border text-sm text-white dark:bg-gray-800 dark:text-gray-100"},tD={key:0},nD={key:1},sD={key:2},rD={key:0,class:"ml-0 badge badge-warning text-xs"},iD={class:"text-right font-semibold text-blue-300"},oD={class:"dropdown dropdown-end"},aD={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-32"},lD=["onClick"],uD=["onClick"],cD=["open"],dD={class:"modal-box"},hD={class:"form-control mb-2"},fD={class:"form-control mb-4"},pD={class:"modal-action"},mD={__name:"Utilities",setup(t){const e=B(!1),n=B(!1),s=B(!1),r=B(!1),i=B(!1),o=B(!1),l=B(null),u=B(null),c=B(null),h=B(!1),p=B([]),g=B(""),y=B(""),w=B("all"),E=Re(()=>p.value.filter(b=>{var A;const I=(A=b.tenantName)==null?void 0:A.toLowerCase().includes(g.value.toLowerCase()),P=y.value===""||b.period===y.value,V=w.value==="all"||b.type===w.value;return I&&P&&V})),x=b=>b==null||isNaN(b)?"-":Number(b).toFixed(0),N=b=>b==null||isNaN(b)?"-":b.toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),R=async()=>{p.value=[];const b=await Ae(ve(oe,"tenants")),I={};b.forEach(A=>{const Oe=A.data();I[A.id]=Oe.company}),(await Ae(ve(oe,"readings"))).forEach(A=>{const Oe=A.data(),dt=Oe.tenantId==="ortak"?"Ortak Alan":Oe.tenantId==="mescit"?"Mescit":I[Oe.tenantId]||"-";p.value.push({id:A.id,...Oe,tenantName:dt})}),(await Ae(ve(oe,"aidatRecords"))).forEach(A=>{const Oe=A.data(),dt=I[Oe.tenantId]||"-";p.value.push({id:A.id,...Oe,type:"aidat",tenantName:dt,consumption:null,kdvDahil:Oe.toplamTutar})})},C=async()=>{if(!y.value||w.value==="all"){alert("Lütfen dönem ve gider tipini seçiniz.");return}const b=zt(ve(oe,"sharedDistributions"),lt("period","==",y.value),lt("type","==",w.value));if(!(await Ae(b)).empty){alert("Bu dönem ve tip için ortak gider zaten paylaştırılmış.");return}const P=zt(ve(oe,"readings"),lt("period","==",y.value),lt("type","==",w.value),lt("tenantId","in",["ortak","mescit"])),V=await Ae(P);let A=0,Oe=null;V.forEach(Je=>{const Fe=Je.data();A+=Number(Fe.kdvDahil||Fe.toplamTutar||0),!Oe&&Fe.dueDate&&(Oe=Fe.dueDate)});const dt=await Ae(ve(oe,"tenants")),Ge=[];if(dt.forEach(Je=>{const Fe=Je.data();Fe.units&&Array.isArray(Fe.units)&&Fe.units.forEach(We=>{Ge.push({tenantId:Je.id,tenantName:Fe.company,unit:We,pay:Fe.company==="YİĞİT HAMDEMİR"?2:1})})}),Ge.length===0){alert("Hiçbir kiracıya ait kat bilgisi bulunamadı.");return}const Se=Ge.reduce((Je,Fe)=>Je+(Fe.pay||1),0),Ie=A/Se,Mt=w.value==="electricity"?"Elektrik":"Su";for(const Je of Ge){const Fe=Ie*(Je.pay||1);await Pn(ve(oe,"readings"),{tenantId:Je.tenantId,tenantName:Je.tenantName,unit:Je.unit,period:y.value,type:w.value,consumption:null,kdvHaric:null,kdvDahil:Fe,toplamTutar:Fe,dueDate:Oe||null,description:`Ortak ${Mt} Gider Payı`})}await Pn(ve(oe,"sharedDistributions"),{period:y.value,type:w.value,distributed:!0,distributedAt:new Date}),alert("Ortak gider başarıyla paylaştırıldı."),o.value=!1,R()},D=()=>{e.value=!1,n.value=!1,s.value=!1,R()},j=async()=>{if(!y.value)return;const b=zt(ve(oe,"readings"),lt("period","==",y.value)),I=await Ae(b);await Promise.all(I.docs.map(A=>bs(st(oe,"readings",A.id))));const P=zt(ve(oe,"aidatRecords"),lt("period","==",y.value)),V=await Ae(P);await Promise.all(V.docs.map(A=>bs(st(oe,"aidatRecords",A.id)))),alert("Seçilen döneme ait kayıtlar silindi."),R()},L=async b=>{if(confirm("Bu kaydı silmek istediğinizden emin misiniz?")){const I=p.value.find(V=>V.id===b),P=(I==null?void 0:I.type)==="aidat"?"aidatRecords":"readings";await bs(st(oe,P,b)),p.value=p.value.filter(V=>V.id!==b)}},_=b=>{b.type==="electricity"?(l.value=b,r.value=!0):b.type==="water"?(u.value=b,i.value=!0):b.type==="aidat"&&(c.value=b,h.value=!0)},T=()=>{if(!y.value){alert("Lütfen önce dönem seçiniz.");return}r.value=!0};return Ot(R),(b,I)=>($(),Q("section",Wx,[I[21]||(I[21]=d("h2",{class:"text-2xl font-bold text-center text-white dark:bg-gray-900 dark:text-white"},"Sayaç Kayıtları",-1)),d("div",Qx,[d("button",{class:"btn btn-primary",onClick:I[0]||(I[0]=P=>e.value=!0)},"⚡ Elektrik Girişi"),d("button",{class:"btn btn-secondary",onClick:I[1]||(I[1]=P=>n.value=!0)},"💧 Su Girişi"),d("button",{class:"btn btn-primary mb-4",onClick:I[2]||(I[2]=P=>s.value=!0)},"💰 Aidat Girişi")]),d("div",Yx,[ee(d("input",{"onUpdate:modelValue":I[3]||(I[3]=P=>g.value=P),type:"text",placeholder:"Şirket Ara...",class:"input input-bordered w-48"},null,512),[[ue,g.value]]),ee(d("input",{"onUpdate:modelValue":I[4]||(I[4]=P=>y.value=P),type:"month",class:"input input-bordered w-40"},null,512),[[ue,y.value]]),ee(d("select",{"onUpdate:modelValue":I[5]||(I[5]=P=>w.value=P),class:"select select-bordered w-40"},I[14]||(I[14]=[d("option",{value:"all"},"Tümü",-1),d("option",{value:"electricity"},"Elektrik",-1),d("option",{value:"water"},"Su",-1),d("option",{value:"aidat"},"Aidat",-1)]),512),[[Gt,w.value]]),d("button",{class:"btn btn-error btn-sm",onClick:j,disabled:!y.value},"Seçilen Dönemi Sil",8,Jx),d("button",{class:"btn btn-outline btn-sm",onClick:T,disabled:!y.value},"Elektrik Kayıtlarını Düzenle",8,Xx),d("button",{onClick:I[6]||(I[6]=P=>o.value=!0),class:"btn btn-warning"},"⚡ Ortak Gider Paylaştır")]),d("div",Zx,[d("table",eD,[I[16]||(I[16]=d("thead",null,[d("tr",null,[d("th",null,"Dönem"),d("th",null,"Kat"),d("th",null,"Şirket"),d("th",null,"Tip"),d("th",null,"Tüketim"),d("th",null,"KDV Hariç"),d("th",null,"Toplam (₺)"),d("th",null,"İşlem")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(E.value,P=>{var V;return $(),Q("tr",{key:P.id},[d("td",null,F(P.period),1),d("td",null,F(P.unit||"-"),1),d("td",null,[P.tenantId==="ortak"?($(),Q("span",tD,"Ortak Alan")):P.tenantId==="mescit"?($(),Q("span",nD,"Mescit")):($(),Q("span",sD,F(P.tenantName||"-"),1))]),d("td",null,[d("span",{class:xt({"text-yellow-600 dark:text-yellow-400":P.type==="electricity","text-blue-600 dark:text-blue-400":P.type==="water","text-green-600 dark:text-green-400":P.type==="aidat"})},F(P.type==="electricity"?"Elektrik":P.type==="water"?"Su":"Aidat"),3),(V=P.description)!=null&&V.toLowerCase().includes("ortak")?($(),Q("span",rD,"Ortak")):qe("",!0)]),d("td",null,F(x(P.consumption??P.usage)),1),d("td",null,F(N(P.kdvHaric)),1),d("td",iD,F(N(P.toplamTutar??P.kdvDahil)),1),d("td",null,[d("div",oD,[I[15]||(I[15]=d("label",{tabindex:"0",class:"btn btn-xs btn-outline"},"İşlemler",-1)),d("ul",aD,[d("li",null,[d("a",{onClick:ft(A=>_(P),["prevent"])},"Düzenle",8,lD)]),d("li",null,[d("a",{onClick:ft(A=>L(P.id),["prevent"])},"Sil",8,uD)])])])])])}),128))])])]),e.value?($(),Ht(Fk,{key:0,onClose:D})):qe("",!0),n.value?($(),Ht(rx,{key:1,onClose:D})):qe("",!0),s.value?($(),Ht(cx,{key:2,onClose:I[7]||(I[7]=()=>s.value=!1),onRefresh:R})):qe("",!0),r.value?($(),Ht(Tx,{key:3,record:l.value,onClose:I[8]||(I[8]=()=>{r.value=!1,l.value=null}),onUpdated:R},null,8,["record"])):qe("",!0),i.value?($(),Ht(Lx,{key:4,record:u.value,onClose:I[9]||(I[9]=()=>{i.value=!1,u.value=null}),onUpdated:R},null,8,["record"])):qe("",!0),h.value?($(),Ht(Gx,{key:5,record:c.value,onClose:I[10]||(I[10]=()=>{h.value=!1,c.value=null}),onUpdated:R},null,8,["record"])):qe("",!0),d("dialog",{id:"distributeModal",class:"modal",open:o.value},[d("div",dD,[I[20]||(I[20]=d("h3",{class:"font-bold text-lg mb-4"},"Ortak Gider Paylaştır",-1)),d("div",hD,[I[17]||(I[17]=d("label",{class:"label"},"Dönem",-1)),ee(d("input",{type:"month","onUpdate:modelValue":I[11]||(I[11]=P=>y.value=P),class:"input input-bordered"},null,512),[[ue,y.value]])]),d("div",fD,[I[19]||(I[19]=d("label",{class:"label"},"Gider Tipi",-1)),ee(d("select",{"onUpdate:modelValue":I[12]||(I[12]=P=>w.value=P),class:"select select-bordered"},I[18]||(I[18]=[d("option",{value:"electricity"},"Elektrik",-1),d("option",{value:"water"},"Su",-1)]),512),[[Gt,w.value]])]),d("div",pD,[d("button",{onClick:C,class:"btn btn-success"},"Paylaştır"),d("button",{onClick:I[13]||(I[13]=P=>o.value=!1),class:"btn"},"Kapat")])])],8,cD)]))}},gD={class:"min-h-screen bg-base-200 dark:bg-gray-900 py-10"},yD={class:"max-w-4xl mx-auto bg-base-100 dark:bg-gray-800 shadow-lg rounded-xl p-6 space-y-8 text-white dark:text-gray-100"},vD={class:"text-2xl font-bold text-center"},_D={key:0},bD={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},wD={class:"card bg-base-100 dark:bg-gray-700 border border-base-300 p-4 space-y-2 shadow-md"},ED={class:"card bg-base-100 dark:bg-gray-700 border border-base-300 p-4 space-y-2 shadow-md"},TD={class:"mb-4 flex justify-between items-center"},ID=["value"],AD={key:0,class:"overflow-x-auto"},RD={class:"table table-sm w-full border"},SD={class:"font-semibold bg-base-200"},CD={key:1,class:"text-gray-400 italic"},PD={key:0,class:"overflow-x-auto"},kD={class:"table table-sm w-full border"},xD={key:0,class:"ml-2 badge badge-warning text-xs"},DD={class:"font-semibold bg-base-200"},VD={key:1,class:"text-gray-400 italic"},ND={__name:"TenantDetailPage",setup(t){const n=ec().params.id,s=B(null),r=B([]),i=B([]),o=B([]),l=B([]),u=B(new Date().getFullYear()),c=B(0);B(0);const h=Re(()=>{const L=[...E.value].sort((_,T)=>new Date(T.date)-new Date(_.date))[0];return L!=null&&L.date?new Date(L.date).toLocaleDateString("tr-TR"):"-"}),p=Re(()=>{const L=new Set;return r.value.forEach(_=>L.add(new Date(_.date).getFullYear())),l.value.forEach(_=>{_.period&&L.add(new Date(_.period).getFullYear())}),Array.from(L).sort((_,T)=>T-_)}),g=Re(()=>E.value.reduce((L,_)=>L+(_.amount||0),0)),y=Re(()=>x.value.reduce((L,_)=>L+(Number(_.toplamTutar)||0),0)),w=Re(()=>y.value-g.value),E=Re(()=>r.value.filter(L=>new Date(L.date).getFullYear()===Number(u.value))),x=Re(()=>l.value.filter(L=>new Date(L.period).getFullYear()===Number(u.value))),N=async()=>{const L=st(oe,"tenants",n),_=await ao(L);_.exists()&&(s.value=_.data())},R=async()=>{const L=zt(ve(oe,"payments"),lt("tenantId","==",n)),_=await Ae(L);r.value=_.docs.map(T=>T.data()),c.value=r.value.reduce((T,b)=>T+(b.amount||0),0)},C=async()=>{const L=zt(ve(oe,"readings"),lt("tenantId","==",n)),_=await Ae(L);i.value=_.docs.map(T=>({id:T.id,...T.data()}))},D=async()=>{const L=zt(ve(oe,"aidatRecords"),lt("tenantId","==",n)),_=await Ae(L);o.value=_.docs.map(T=>({id:T.id,...T.data()}))},j=()=>{l.value=[...i.value,...o.value].map(L=>({...L,toplamTutar:L.toplamTutar??L.kdvDahil??0})).sort((L,_)=>(L.period||"").localeCompare(_.period||""))};return Ot(async()=>{await N(),await R(),await C(),await D(),j()}),(L,_)=>{var T;return $(),Q("div",gD,[d("div",yD,[d("h1",vD,F((T=s.value)==null?void 0:T.company)+" – Kiracı Detayları",1),s.value?($(),Q("div",_D,[d("div",bD,[d("div",wD,[d("p",null,[_[1]||(_[1]=d("strong",null,"👤 Ad Soyad:",-1)),tt(" "+F(s.value.firstName)+" "+F(s.value.lastName),1)]),d("p",null,[_[2]||(_[2]=d("strong",null,"📞 Telefon:",-1)),tt(" "+F(s.value.phone),1)]),d("p",null,[_[3]||(_[3]=d("strong",null,"✉️ E-posta:",-1)),tt(" "+F(s.value.email),1)]),d("p",null,[_[4]||(_[4]=d("strong",null,"🏢 Kat:",-1)),tt(" "+F(Array.isArray(s.value.units)?s.value.units.join(", "):s.value.unit),1)])]),d("div",ED,[d("p",null,[_[5]||(_[5]=d("strong",null,"💰 Ödeme:",-1)),tt(" "+F(g.value.toLocaleString("tr-TR"))+" ₺",1)]),d("p",null,[_[6]||(_[6]=d("strong",null,"📉 Borç:",-1)),tt(" "+F(y.value.toLocaleString("tr-TR"))+" ₺",1)]),d("p",null,[_[7]||(_[7]=d("strong",null,"🧾 Bakiye:",-1)),tt(" "+F(w.value.toLocaleString("tr-TR"))+" ₺",1)]),d("p",null,[_[8]||(_[8]=d("strong",null,"🕒 Son Ödeme:",-1)),tt(" "+F(h.value),1)])])]),d("div",TD,[_[9]||(_[9]=d("h2",{class:"text-lg font-bold"},"🗓️ Dönem Filtresi",-1)),ee(d("select",{"onUpdate:modelValue":_[0]||(_[0]=b=>u.value=b),class:"select select-bordered w-40"},[($(!0),Q(ke,null,Ke(p.value,b=>($(),Q("option",{key:b,value:b},F(b),9,ID))),128))],512),[[Gt,u.value]])]),d("div",null,[_[13]||(_[13]=d("h3",{class:"text-lg font-semibold mt-6 mb-2"},"🕒 Ödeme Geçmişi",-1)),E.value.length?($(),Q("div",AD,[d("table",RD,[_[12]||(_[12]=d("thead",null,[d("tr",null,[d("th",null,"Dönem"),d("th",null,"Tutar (₺)"),d("th",null,"Tip")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(E.value,(b,I)=>($(),Q("tr",{key:I},[d("td",null,F(new Date(b.date).toLocaleDateString("tr-TR")),1),d("td",null,F(b.amount.toLocaleString("tr-TR")),1),d("td",null,F(b.type),1)]))),128))]),d("tfoot",null,[d("tr",SD,[_[10]||(_[10]=d("td",null,"Toplam",-1)),d("td",null,F(g.value.toLocaleString("tr-TR"))+" ₺",1),_[11]||(_[11]=d("td",null,null,-1))])])])])):($(),Q("p",CD,"Seçilen yıl için ödeme kaydı bulunamadı."))]),d("div",null,[_[18]||(_[18]=d("h3",{class:"text-lg font-semibold mt-6 mb-2"},"💸 Gider Geçmişi",-1)),x.value.length?($(),Q("div",PD,[d("table",kD,[_[17]||(_[17]=d("thead",null,[d("tr",null,[d("th",null,"Dönem"),d("th",null,"Tutar (₺)"),d("th",null,"Tip"),d("th",null,"Son Ödeme")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(x.value,(b,I)=>{var P;return $(),Q("tr",{key:I},[d("td",null,F(b.period||"-"),1),d("td",null,F(b.toplamTutar!=null?Number(b.toplamTutar).toLocaleString("tr-TR"):"-"),1),d("td",null,[d("span",{class:xt({"text-yellow-400":b.type==="electricity","text-blue-400":b.type==="water","text-green-400":b.type==="aidat"})},F(b.type==="electricity"?"Elektrik":b.type==="water"?"Su":"Aidat"),3),(P=b.description)!=null&&P.toLowerCase().includes("ortak")?($(),Q("span",xD," Ortak ")):qe("",!0)]),d("td",null,F(b.dueDate||"-"),1)])}),128))]),d("tfoot",null,[d("tr",DD,[_[14]||(_[14]=d("td",null,"Toplam",-1)),d("td",null,F(y.value.toLocaleString("tr-TR"))+" ₺",1),_[15]||(_[15]=d("td",null,null,-1)),_[16]||(_[16]=d("td",null,null,-1))])])])])):($(),Q("p",VD,"Seçilen yıl için gider kaydı bulunamadı."))])])):qe("",!0)])])}}},OD={class:"max-w-3xl mx-auto p-6 space-y-6"},MD={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},LD=["value"],UD=["disabled"],$D=["value"],FD=["value"],BD=["value"],jD={key:0,class:"overflow-x-auto mt-6"},qD={class:"table w-full table-zebra text-sm"},HD={class:"text-right text-green-700 font-semibold"},KD={class:"text-center"},zD={class:"dropdown dropdown-end"},GD={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-40 z-10"},WD=["onClick"],QD=["onClick"],YD={__name:"AidatPanel",setup(t){const e=B([]),n=B(""),s=B(""),r=B(new Date().getFullYear()),i=B(""),o=B([]),l=B(null),u=N=>parseFloat(N).toLocaleString("tr-TR",{minimumFractionDigits:2})+" ₺",c=()=>{const N=i.value.replace(/\./g,"").replace(",",".");return parseFloat(N)||0},h=Re(()=>(c()*1.2).toLocaleString("tr-TR",{minimumFractionDigits:2})+" ₺"),p=N=>{let R=N.target.value.replace(/\D/g,"");i.value=new Intl.NumberFormat("tr-TR").format(Number(R))},g=Re(()=>{const N=e.value.find(R=>R.id===n.value);return N?N.units||[]:[]}),y=async()=>{o.value=[],(await Ae(ve(oe,"annualDues"))).forEach(R=>{const C=R.data(),D=e.value.find(j=>j.id===C.tenantId);D&&o.value.push({id:R.id,year:C.year,amount:C.amount,vatIncludedAmount:C.vatIncludedAmount,unit:C.unit,company:D.company,tenantId:C.tenantId})})},w=async N=>{confirm("Bu aidat kaydını silmek istiyor musunuz?")&&(await bs(st(oe,"annualDues",N)),await y())},E=N=>{n.value=N.tenantId,s.value=N.unit,i.value=new Intl.NumberFormat("tr-TR").format(N.amount),r.value=N.year,l.value=N.id},x=async()=>{const N=c();if(!n.value||!s.value||N<=0||r.value<2020){alert("Lütfen tüm alanları eksiksiz doldurun.");return}const R=parseFloat((N*1.2).toFixed(2));if(l.value){const C=st(oe,"annualDues",l.value);await gv(C,{tenantId:n.value,unit:s.value,year:r.value,amount:N,vatIncludedAmount:R}),alert("Aidat güncellendi.")}else{if(o.value.find(D=>D.year===r.value&&D.tenantId===n.value&&D.unit===s.value)){alert("Bu şirketin bu katı için bu yıl zaten aidat tanımlanmış.");return}await Pn(ve(oe,"annualDues"),{tenantId:n.value,unit:s.value,year:r.value,amount:N,vatIncludedAmount:R}),alert("Aidat kaydı eklendi.")}n.value="",s.value="",i.value="",l.value=null,await y()};return Ot(async()=>{const N=await Ae(ve(oe,"tenants"));e.value=N.docs.map(R=>({id:R.id,...R.data()})),y()}),(N,R)=>($(),Q("section",OD,[R[14]||(R[14]=d("h2",{class:"text-xl font-bold text-center"},"Yıllık Aidat Tutarı Tanımlama",-1)),d("form",{onSubmit:ft(x,["prevent"]),class:"space-y-4 bg-base-100 p-4 rounded-xl shadow"},[d("div",MD,[d("div",null,[R[3]||(R[3]=d("label",{class:"label"},"Yıl",-1)),ee(d("input",{type:"number","onUpdate:modelValue":R[0]||(R[0]=C=>r.value=C),class:"input input-bordered w-full",min:"2020"},null,512),[[ue,r.value,void 0,{number:!0}]])]),d("div",null,[R[5]||(R[5]=d("label",{class:"label"},"Şirket",-1)),ee(d("select",{"onUpdate:modelValue":R[1]||(R[1]=C=>n.value=C),class:"select select-bordered w-full"},[R[4]||(R[4]=d("option",{disabled:"",value:""},"Seçiniz",-1)),($(!0),Q(ke,null,Ke(e.value,C=>($(),Q("option",{key:C.id,value:C.id},F(C.company),9,LD))),128))],512),[[Gt,n.value]])]),d("div",null,[R[7]||(R[7]=d("label",{class:"label"},"Kat",-1)),ee(d("select",{"onUpdate:modelValue":R[2]||(R[2]=C=>s.value=C),class:"select select-bordered w-full",disabled:!n.value},[R[6]||(R[6]=d("option",{disabled:"",value:""},"Seçiniz",-1)),($(!0),Q(ke,null,Ke(g.value,C=>($(),Q("option",{key:C,value:C},F(C),9,$D))),128))],8,UD),[[Gt,s.value]])]),d("div",null,[R[8]||(R[8]=d("label",{class:"label"},"Aidat (KDV Hariç)",-1)),d("input",{value:i.value,onInput:p,class:"input input-bordered w-full",inputmode:"numeric",placeholder:"Örn: 2.500"},null,40,FD)]),d("div",null,[R[9]||(R[9]=d("label",{class:"label"},"KDV Dahil",-1)),d("input",{value:h.value,class:"input input-bordered w-full bg-base-200",disabled:""},null,8,BD)])]),R[10]||(R[10]=d("div",{class:"flex justify-end"},[d("button",{class:"btn btn-primary",type:"submit"},"Kaydet")],-1))],32),o.value.length?($(),Q("div",jD,[R[13]||(R[13]=d("h3",{class:"font-semibold mb-2"},"Kayıtlı Aidat Tutarları",-1)),d("table",qD,[R[12]||(R[12]=d("thead",null,[d("tr",null,[d("th",null,"Yıl"),d("th",null,"Şirket"),d("th",null,"Kat"),d("th",null,"KDV Dahil"),d("th",null,"İşlem")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(o.value,C=>($(),Q("tr",{key:C.id},[d("td",null,F(C.year),1),d("td",null,F(C.company),1),d("td",null,F(C.unit),1),d("td",HD,F(u(C.vatIncludedAmount||C.amount*1.2)),1),d("td",KD,[d("div",zD,[R[11]||(R[11]=d("label",{tabindex:"0",class:"btn btn-sm btn-outline"},"İşlemler",-1)),d("ul",GD,[d("li",null,[d("a",{onClick:ft(D=>E(C),["prevent"])},"Düzenle",8,WD)]),d("li",null,[d("a",{onClick:ft(D=>w(C.id),["prevent"])},"Sil",8,QD)])])])])]))),128))])])])):qe("",!0)]))}},JD={class:"bg-base-200 p-6 rounded-xl"},XD={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ZD={key:0},eV=["value"],tV={__name:"UserAddPanel",setup(t){const e=B(""),n=B(""),s=B(""),r=B(""),i=B(""),o=B([]);Ot(async()=>{const u=await Ae(ve(oe,"tenants"));o.value=u.docs.map(c=>({id:c.id,name:c.data().company}))});const l=async()=>{try{const u=Math.random().toString(36).slice(-8),{user:c}=await J0(Aa,e.value,u);await gv(st(oe,"users",c.uid),{firstName:n.value,lastName:s.value,email:e.value,role:r.value,companyId:r.value==="tenant"?i.value:null}),await dc(Aa,e.value),alert("Kullanıcı eklendi. Şifre oluşturma bağlantısı e-posta ile gönderildi."),e.value="",n.value="",s.value="",r.value="",i.value=""}catch(u){alert("Hata: "+u.message)}};return(u,c)=>($(),Q("div",JD,[c[10]||(c[10]=d("h2",{class:"text-xl font-bold mb-4"},"Yeni Kullanıcı Ekle",-1)),d("form",{onSubmit:ft(l,["prevent"]),class:"space-y-4"},[d("div",XD,[ee(d("input",{"onUpdate:modelValue":c[0]||(c[0]=h=>n.value=h),class:"input input-bordered w-full",placeholder:"Ad",required:""},null,512),[[ue,n.value]]),ee(d("input",{"onUpdate:modelValue":c[1]||(c[1]=h=>s.value=h),class:"input input-bordered w-full",placeholder:"Soyad",required:""},null,512),[[ue,s.value]])]),ee(d("input",{"onUpdate:modelValue":c[2]||(c[2]=h=>e.value=h),class:"input input-bordered w-full",type:"email",placeholder:"E-posta",required:""},null,512),[[ue,e.value]]),d("div",null,[c[6]||(c[6]=d("label",{class:"label"},"Rol",-1)),ee(d("select",{"onUpdate:modelValue":c[3]||(c[3]=h=>r.value=h),class:"select select-bordered w-full",required:""},c[5]||(c[5]=[d("option",{disabled:"",value:""},"Rol Seçin",-1),d("option",{value:"admin"},"Admin",-1),d("option",{value:"manager"},"Yönetici",-1),d("option",{value:"tenant"},"Kiracı",-1)]),512),[[Gt,r.value]])]),r.value==="tenant"?($(),Q("div",ZD,[c[8]||(c[8]=d("label",{class:"label"},"Firma",-1)),ee(d("select",{"onUpdate:modelValue":c[4]||(c[4]=h=>i.value=h),class:"select select-bordered w-full",required:""},[c[7]||(c[7]=d("option",{disabled:"",value:""},"Firma Seçin",-1)),($(!0),Q(ke,null,Ke(o.value,h=>($(),Q("option",{key:h.id,value:h.id},F(h.name),9,eV))),128))],512),[[Gt,i.value]])])):qe("",!0),c[9]||(c[9]=d("button",{class:"btn btn-primary w-full"},"Kaydet",-1))],32)]))}},nV={class:"bg-base-200 p-6 rounded-xl"},sV={class:"table w-full"},rV=["onClick"],iV={__name:"UserListPanel",setup(t){const e=B([]),n=B([]),s=B("");Ot(async()=>{await r(),await i()});const r=async()=>{const c=await Ae(ve(oe,"companies"));e.value=c.docs.map(h=>({id:h.id,...h.data()}))},i=async()=>{const c=await Ae(ve(oe,"users"));n.value=c.docs.map(h=>({id:h.id,...h.data()}))},o=async c=>{confirm("Kullanıcıyı silmek istediğinize emin misiniz?")&&(await bs(st(oe,"users",c)),await i())},l=c=>{const h=e.value.find(p=>p.id===c);return h?h.name:"-"},u=Re(()=>{const c=s.value.toLowerCase();return n.value.filter(h=>(h.firstName||"").toLowerCase().includes(c)||(h.lastName||"").toLowerCase().includes(c)||(h.email||"").toLowerCase().includes(c))});return(c,h)=>($(),Q("div",nV,[h[2]||(h[2]=d("h2",{class:"text-xl font-bold mb-4"},"Kullanıcılar",-1)),ee(d("input",{"onUpdate:modelValue":h[0]||(h[0]=p=>s.value=p),class:"input input-bordered mb-4 w-full",placeholder:"Ad, soyad veya e-posta ile ara"},null,512),[[ue,s.value]]),d("table",sV,[h[1]||(h[1]=d("thead",null,[d("tr",null,[d("th",null,"Ad Soyad"),d("th",null,"E-posta"),d("th",null,"Rol"),d("th",null,"Firma"),d("th",null,"İşlem")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(u.value,p=>($(),Q("tr",{key:p.id},[d("td",null,F(p.firstName)+" "+F(p.lastName),1),d("td",null,F(p.email),1),d("td",null,F(p.role),1),d("td",null,F(l(p.companyId)),1),d("td",null,[d("button",{onClick:g=>o(p.id),class:"btn btn-sm btn-error"},"Sil",8,rV)])]))),128))])])]))}},oV={class:"max-w-5xl mx-auto p-6 space-y-6"},aV={class:"flex justify-center gap-4 mb-6 flex-wrap"},lV=["onClick"],uV={__name:"AdminDashboard",setup(t){const e=B("dues"),n=[{key:"dues",label:"Aidat Tanımlama",icon:"📆"},{key:"addUser",label:"Kullanıcı Ekle",icon:"➕"},{key:"userList",label:"Kullanıcı Listesi",icon:"👥"}];return(s,r)=>($(),Q("section",oV,[d("div",aV,[($(),Q(ke,null,Ke(n,i=>d("button",{key:i.key,onClick:o=>e.value=i.key,class:xt(["btn","btn-md",e.value===i.key?"btn-primary":"btn-outline btn-info"])},F(i.icon)+" "+F(i.label),11,lV)),64))]),d("div",null,[e.value==="dues"?($(),Ht(YD,{key:0})):qe("",!0),e.value==="addUser"?($(),Ht(tV,{key:1})):qe("",!0),e.value==="userList"?($(),Ht(iV,{key:2})):qe("",!0)])]))}},cV="/assets/background-DZPRnSrd.png",dV={class:"relative z-10 bg-white p-8 rounded-md shadow-lg w-full max-w-md"},hV={class:"relative"},fV=["type"],pV={class:"flex items-center justify-between text-sm mt-2"},mV={class:"flex items-center gap-2 text-gray-800"},gV={key:0,class:"text-red-500 text-sm text-center"},yV={key:0,class:"modal",open:""},vV={class:"modal-box max-w-sm"},_V={key:0,class:"text-green-600 text-sm text-center mb-2"},bV={key:1,class:"text-red-500 text-sm text-center mb-2"},wV={class:"modal-action"},EV={__name:"LoginView",setup(t){const e=B(""),n=B(""),s=B(""),r=B(!1),i=B(!1),o=B(!1),l=B(""),u=B(""),c=B(""),h=Um();Ot(()=>{to().currentUser&&h.push("/dashboard")});const p=()=>{i.value=!i.value},g=async()=>{if(u.value="",c.value="",!l.value){c.value="Lütfen e-posta adresinizi girin.";return}try{await dc(Aa,l.value),u.value="Şifre sıfırlama bağlantısı e-posta adresinize gönderildi.",setTimeout(()=>{o.value=!1,l.value="",u.value=""},1500)}catch(w){c.value="Gönderim başarısız: "+(w.message||"Hata oluştu.")}},y=async()=>{try{const{user:w}=await X0(Aa,e.value,n.value),E=await ao(st(oe,"users",w.uid));if(!E.exists())throw new Error("Kullanıcı bilgileri eksik.");const x=E.data().role;x==="admin"?h.push("/admin"):x==="manager"?h.push("/dashboard"):h.push("/profile")}catch(w){s.value="Giriş başarısız: "+(w.message||"Bilinmeyen hata.")}};return(w,E)=>($(),Q("div",{class:"bg-gray-100 min-h-screen flex items-center justify-center relative",style:ka({backgroundImage:`url(${cn(cV)})`,backgroundSize:"cover",backgroundPosition:"center"})},[E[13]||(E[13]=d("div",{class:"absolute inset-0 bg-black opacity-50 z-0"},null,-1)),d("div",dV,[E[12]||(E[12]=d("h1",{class:"text-2xl font-bold mb-6 text-center text-gray-800"},"Akyıldız Yönetim Giriş",-1)),d("form",{onSubmit:ft(y,["prevent"]),class:"space-y-4 text-gray-800"},[d("div",null,[E[6]||(E[6]=d("label",{class:"block font-semibold mb-1",for:"email"},"Email",-1)),ee(d("input",{"onUpdate:modelValue":E[0]||(E[0]=x=>e.value=x),id:"email",type:"email",placeholder:"ornek@firma.com",class:"bg-white text-gray-800 placeholder-gray-400 appearance-none border rounded-md py-2 px-3 w-full focus:outline-none focus:ring-2 focus:ring-cyan-400",required:""},null,512),[[ue,e.value]])]),d("div",null,[E[7]||(E[7]=d("label",{class:"block font-semibold mb-1",for:"password"},"Şifre",-1)),d("div",hV,[ee(d("input",{"onUpdate:modelValue":E[1]||(E[1]=x=>n.value=x),type:i.value?"text":"password",id:"password",placeholder:"••••••••",class:"bg-white text-gray-800 placeholder-gray-400 appearance-none border rounded-md py-2 px-3 w-full focus:outline-none focus:ring-2 focus:ring-cyan-400",required:""},null,8,fV),[[sw,n.value]]),d("button",{type:"button",class:"absolute inset-y-0 right-2 px-2 text-sm text-cyan-600",onClick:p},F(i.value?"Gizle":"Göster"),1)])]),d("div",pV,[d("label",mV,[ee(d("input",{type:"checkbox","onUpdate:modelValue":E[2]||(E[2]=x=>r.value=x),class:"w-5 h-5 accent-cyan-600 border-gray-400 rounded focus:ring-2 focus:ring-cyan-400 transition duration-200"},null,512),[[Tr,r.value]]),E[8]||(E[8]=d("span",null,"Beni Hatırla",-1))]),d("a",{href:"#",onClick:E[3]||(E[3]=ft(x=>o.value=!0,["prevent"])),class:"text-cyan-600 hover:text-cyan-800 hover:underline transition"}," Şifremi unuttum? ")]),s.value?($(),Q("div",gV,F(s.value),1)):qe("",!0),E[9]||(E[9]=d("button",{type:"submit",class:"bg-cyan-500 hover:bg-cyan-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-cyan-300 w-full mt-2"}," Giriş Yap ",-1))],32),o.value?($(),Q("dialog",yV,[d("div",vV,[E[10]||(E[10]=d("h3",{class:"text-lg font-bold mb-2"},"Şifre Sıfırlama",-1)),E[11]||(E[11]=d("p",{class:"text-sm text-gray-600 mb-3"},"Kayıtlı e-posta adresinizi girin:",-1)),ee(d("input",{"onUpdate:modelValue":E[4]||(E[4]=x=>l.value=x),type:"email",placeholder:"ornek@firma.com",class:"input input-bordered w-full mb-3"},null,512),[[ue,l.value]]),u.value?($(),Q("div",_V,F(u.value),1)):qe("",!0),c.value?($(),Q("div",bV,F(c.value),1)):qe("",!0),d("div",wV,[d("button",{class:"btn btn-primary",onClick:g},"Gönder"),d("button",{class:"btn",onClick:E[5]||(E[5]=x=>o.value=!1)},"Kapat")])])])):qe("",!0)])],4))}},TV={class:"p-6 max-w-6xl mx-auto space-y-6"},IV={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},AV={class:"overflow-x-auto border rounded-lg mt-4"},RV={class:"table table-zebra w-full text-sm"},SV={class:"whitespace-normal break-words text-sm"},CV={key:0},PV={key:1},kV={class:"font-medium"},xV={key:0,class:"text-green-600"},DV={key:1,class:"text-red-600"},VV={__name:"Transactions",setup(t){const e=B([]),n=B([]),s=B([]),r=B(""),i=B(""),o=B(""),l=B(""),u=w=>w?new Date(w).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric"}):"-",c=w=>w==null||isNaN(w)?"-":Number(w).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),h=async()=>{const w=await Ae(ve(oe,"tenants"));e.value=w.docs.map(E=>({id:E.id,...E.data()}))},p=async()=>{const w=await Ae(ve(oe,"payments"));n.value=w.docs.map(x=>{const N=x.data(),R=e.value.find(C=>C.id===N.tenantId);return{...N,type:"income",payer:(R==null?void 0:R.company)||"Bilinmiyor"}});const E=await Ae(ve(oe,"expenses"));s.value=E.docs.map(x=>({...x.data(),type:"expense"}))},g=Re(()=>[...n.value,...s.value].sort((w,E)=>new Date(E.date)-new Date(w.date))),y=Re(()=>g.value.filter(w=>{var C;const E=!r.value||w.type===r.value,x=!i.value||w.date>=i.value,N=!o.value||w.date<=o.value,R=!l.value||((C=w.description)==null?void 0:C.toLowerCase().includes(l.value.toLowerCase()));return E&&x&&N&&R}));return Ot(()=>{h().then(()=>p())}),(w,E)=>($(),Q("section",TV,[E[6]||(E[6]=d("h1",{class:"text-2xl font-bold"},"Tüm İşlemler",-1)),d("div",IV,[ee(d("select",{"onUpdate:modelValue":E[0]||(E[0]=x=>r.value=x),class:"select select-bordered w-full"},E[4]||(E[4]=[d("option",{value:""},"Tüm Tipler",-1),d("option",{value:"income"},"Gelir",-1),d("option",{value:"expense"},"Gider",-1)]),512),[[Gt,r.value]]),ee(d("input",{type:"date","onUpdate:modelValue":E[1]||(E[1]=x=>i.value=x),class:"input input-bordered w-full"},null,512),[[ue,i.value]]),ee(d("input",{type:"date","onUpdate:modelValue":E[2]||(E[2]=x=>o.value=x),class:"input input-bordered w-full"},null,512),[[ue,o.value]]),ee(d("input",{type:"text","onUpdate:modelValue":E[3]||(E[3]=x=>l.value=x),placeholder:"Açıklama ara...",class:"input input-bordered w-full"},null,512),[[ue,l.value]])]),d("div",AV,[d("table",RV,[E[5]||(E[5]=d("thead",null,[d("tr",null,[d("th",null,"Tarih"),d("th",null,"Ödeyen"),d("th",null,"Açıklama"),d("th",null,"Banka"),d("th",null,"Tip"),d("th",null,"Tutar")])],-1)),d("tbody",null,[($(!0),Q(ke,null,Ke(y.value,(x,N)=>($(),Q("tr",{key:N},[d("td",null,F(u(x.date)),1),d("td",SV,[x.type==="income"?($(),Q("span",CV,F(x.payer),1)):($(),Q("span",PV,"-"))]),d("td",null,F(x.description),1),d("td",null,F(x.bank||"-"),1),d("td",null,[d("span",{class:xt(x.type==="income"?"text-green-600":"text-red-600")},F(x.type==="income"?"Gelir":"Gider"),3)]),d("td",kV,[x.type==="income"?($(),Q("span",xV,"+"+F(c(x.amount)),1)):($(),Q("span",DV,"-"+F(c(x.amount)),1))])]))),128))])])])]))}},NV=[{path:"/",redirect:"/dashboard"},{path:"/dashboard",name:"Dashboard",component:EC,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/tenants",name:"Tenants",component:RP,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/payments",name:"Payments",component:WP,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/expenses",name:"Expenses",component:Tk,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/utilities",name:"Utilities",component:mD,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/tenant/:id",name:"TenantDetail",component:ND,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/admin",name:"Admin",component:uV,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/profile",name:"Profile",component:()=>FS(()=>Promise.resolve().then(()=>VC),void 0),meta:{requiresAuth:!0,roles:["tenant"]}},{path:"/login",name:"Login",component:EV,meta:{public:!0,hideLayout:!0}},{path:"/transactions",name:"Transactions",component:VV}],_v=fE({history:jw(),routes:NV});_v.beforeEach((t,e,n)=>{const s=t.meta.requiresAuth,r=t.meta.roles,i=hc(to(),async o=>{if(i(),!o&&s)return n("/login");if(o&&r){const l=st(oe,"users",o.uid),u=await ao(l),c=u.exists()?u.data().role:null;if(!r.includes(c))return n("/dashboard")}return n()})});var OV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bv={exports:{}};(function(t,e){(function(n,s){t.exports=s()})(OV,function(){return function(n){function s(i){if(r[i])return r[i].exports;var o=r[i]={i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}var r={};return s.m=n,s.c=r,s.i=function(i){return i},s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p=".",s(s.s=10)}([function(n,s){n.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(r){return r.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(r){return r.toLocaleLowerCase()}},"!":{escape:!0}}},function(n,s,r){function i(c){var h=document.createEvent("Event");return h.initEvent(c,!0,!0),h}var o=r(2),l=r(0),u=r.n(l);s.a=function(c,h){var p=h.value;if((Array.isArray(p)||typeof p=="string")&&(p={mask:p,tokens:u.a}),c.tagName.toLocaleUpperCase()!=="INPUT"){var g=c.getElementsByTagName("input");if(g.length!==1)throw new Error("v-mask directive requires 1 input, found "+g.length);c=g[0]}c.oninput=function(w){if(w.isTrusted){var E=c.selectionEnd,x=c.value[E-1];for(c.value=r.i(o.a)(c.value,p.mask,!0,p.tokens);E<c.value.length&&c.value.charAt(E-1)!==x;)E++;c===document.activeElement&&(c.setSelectionRange(E,E),setTimeout(function(){c.setSelectionRange(E,E)},0)),c.dispatchEvent(i("input"))}};var y=r.i(o.a)(c.value,p.mask,!0,p.tokens);y!==c.value&&(c.value=y,c.dispatchEvent(i("input")))}},function(n,s,r){var i=r(6),o=r(5);s.a=function(l,u){var c=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],h=arguments[3];return Array.isArray(u)?r.i(o.a)(i.a,u,h)(l,u,c,h):r.i(i.a)(l,u,c,h)}},function(n,s,r){function i(g){g.component(h.a.name,h.a),g.directive("mask",u.a)}Object.defineProperty(s,"__esModule",{value:!0});var o=r(0),l=r.n(o),u=r(1),c=r(7),h=r.n(c);r.d(s,"TheMask",function(){return h.a}),r.d(s,"mask",function(){return u.a}),r.d(s,"tokens",function(){return l.a}),r.d(s,"version",function(){return p});var p="0.11.1";s.default=i,typeof window<"u"&&window.Vue&&window.Vue.use(i)},function(n,s,r){Object.defineProperty(s,"__esModule",{value:!0});var i=r(1),o=r(0),l=r.n(o),u=r(2);s.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return l.a}}},directives:{mask:i.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(c){c!==this.lastValue&&(this.display=c)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(c){c.isTrusted||this.refresh(c.target.value)},refresh:function(h){this.display=h;var h=r.i(u.a)(h,this.mask,this.masked,this.tokens);h!==this.lastValue&&(this.lastValue=h,this.$emit("input",h))}}}},function(n,s,r){function i(o,l,u){return l=l.sort(function(c,h){return c.length-h.length}),function(c,h){for(var p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],g=0;g<l.length;){var y=l[g];g++;var w=l[g];if(!(w&&o(c,w,!0,u).length>y.length))return o(c,y,p,u)}return""}}s.a=i},function(n,s,r){function i(o,l){var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],c=arguments[3];o=o||"",l=l||"";for(var h=0,p=0,g="";h<l.length&&p<o.length;){var y=l[h],w=c[y],E=o[p];w&&!w.escape?(w.pattern.test(E)&&(g+=w.transform?w.transform(E):E,h++),p++):(w&&w.escape&&(h++,y=l[h]),u&&(g+=y),E===y&&p++,h++)}for(var x="";h<l.length&&u;){var y=l[h];if(c[y]){x="";break}x+=y,h++}return g+x}s.a=i},function(n,s,r){var i=r(8)(r(4),r(9),null,null);n.exports=i.exports},function(n,s){n.exports=function(r,i,o,l){var u,c=r=r||{},h=typeof r.default;h!=="object"&&h!=="function"||(u=r,c=r.default);var p=typeof c=="function"?c.options:c;if(i&&(p.render=i.render,p.staticRenderFns=i.staticRenderFns),o&&(p._scopeId=o),l){var g=p.computed||(p.computed={});Object.keys(l).forEach(function(y){var w=l[y];g[y]=function(){return w}})}return{esModule:u,exports:c,options:p}}},function(n,s){n.exports={render:function(){var r=this,i=r.$createElement;return(r._self._c||i)("input",{directives:[{name:"mask",rawName:"v-mask",value:r.config,expression:"config"}],attrs:{type:"text"},domProps:{value:r.display},on:{input:r.onInput}})},staticRenderFns:[]}},function(n,s,r){n.exports=r(3)}])})})(bv);var MV=bv.exports;const Xc=uw(LS);Xc.use(_v);Xc.directive("mask",MV.mask);Xc.mount("#app");
