import{r as e,C as a,o as t,a as l,w as r,c as n,e as s,l as o,b as i,n as d,D as u,J as c,E as m,F as b,i as g,t as v,H as p,G as y,I as k,h as x,f as h,u as f,p as w,x as M}from"./vue-vendor-B4bLxnmP.js";import{p as A}from"./paymentsService-ynK3N560.js";import{o as D}from"./ownersService-BBftqt2W.js";import{u as C}from"./utilityDebtsService-Bz_V1koj.js";import{u as S,a as z}from"./useErrorHandler-DB_Jk_TF.js";import{u as B}from"./useEventBus-yINTLNlH.js";import{_ as T}from"./CustomFilterBar-BfoK5NKb.js";import{t as j}from"./tenantsService-B2_anAuD.js";import{b as I,a as P,c as V,d as N,p as H,i as U,f as E}from"./utils-vendor-B12Z4TIw.js";import{_ as L}from"./index-ErXur627.js";const Y={key:0,class:"modal",open:""},W={class:"modal-box max-w-4xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700 shadow-2xl"},F={class:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700 mb-6"},K={class:"space-y-6"},O={class:"form-control"},_={class:"flex gap-4"},R={class:"flex items-center gap-2"},G={class:"flex items-center gap-2"},$={key:0,class:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800"},q={class:"form-control"},X=["value"],J={key:1,class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800"},Z={class:"form-control"},Q=["value"],ee={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800"},ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},te={class:"form-control"},le={class:"form-control"},re={class:"form-control"},ne={class:"form-control"},se=["value"],oe={key:2,class:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border border-amber-200 dark:border-amber-800"},ie={class:"flex items-center justify-between mb-4"},de={class:"flex gap-2"},ue={class:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800"},ce={class:"flex items-center gap-2"},me={class:"text-sm text-blue-700 dark:text-blue-300"},be={key:0},ge={key:1},ve={key:0,class:"space-y-3 max-h-64 overflow-y-auto"},pe=["value"],ye={class:"flex-1"},ke={class:"flex items-center justify-between"},xe={class:"font-semibold text-gray-800 dark:text-gray-100"},he={class:"text-sm text-gray-600 dark:text-gray-400"},fe={key:0,class:"ml-2 text-blue-600 dark:text-blue-400"},we={class:"text-right"},Me={class:"font-bold text-red-600 dark:text-red-400"},Ae={class:"text-xs text-gray-500 dark:text-gray-400"},De={key:0,class:"text-xs text-yellow-600 dark:text-yellow-400"},Ce={key:0,class:"mt-2"},Se=["onUpdate:modelValue","max"],ze={key:1,class:"mt-4 p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600"},Be={class:"space-y-2"},Te={class:"flex justify-between items-center"},je={class:"font-semibold text-gray-800 dark:text-gray-100"},Ie={class:"flex justify-between items-center"},Pe={class:"font-semibold text-gray-800 dark:text-gray-100"},Ve={class:"flex justify-between items-center"},Ne={class:"font-semibold text-primary"},He={key:3,class:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800"},Ue={class:"flex items-center gap-3"},Ee={class:"text-green-600 dark:text-green-400 text-sm"},Le={key:4,class:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800 mb-2"},Ye={class:"flex items-center gap-3"},We={class:"text-red-700 dark:text-red-300 font-semibold"},Fe={class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},Ke=["disabled"],Oe=["disabled"],_e={key:0,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Re={key:1,class:"w-4 h-4 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ge={__name:"PaymentModal",props:["visible","payment","tenants","banks","editMode"],emits:["save","cancel","close"],setup(x,{emit:h}){const f=x,w=h,{handleNetworkError:M,showError:T}=S(),{showCreateSuccess:j,showUpdateSuccess:I}=z(),{emit:P}=B(),V=e("tenant"),N=e([]),H=e([]),U=e([]),E=e(!1),L=e(""),Ge=e=>null==e||isNaN(e)?"â‚º0.00":Number(e).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),$e=a(()=>U.value.reduce((e,a)=>{const t=Je(a);return e+Number((null==t?void 0:t.amount)||0)},0)),qe=(a(()=>Math.max(0,Number(f.payment.amount||0)-$e.value)),a(()=>f.payment.date&&f.payment.amount>0&&f.payment.type&&f.payment.bank&&("tenant"===V.value&&f.payment.tenantId||"owner"===V.value&&f.payment.ownerId))),Xe=e=>{if(!e)return 0;const a=new Date-new Date(e),t=Math.ceil(a/864e5);return t>0?t:0},Je=e=>H.value.find(a=>a.id===e),Ze=async()=>{if(f.payment.tenantId)try{const e=await C.getUtilityDebts({tenantId:f.payment.tenantId,status:"Unpaid"});H.value=e||[]}catch(e){M(e,{component:"PaymentModal",action:"fetchTenantDebts"}),H.value=[]}},Qe=async()=>{if(f.payment.ownerId)try{const e=await C.getUtilityDebts({ownerId:f.payment.ownerId,status:"Unpaid"});H.value=e||[]}catch(e){M(e,{component:"PaymentModal",action:"fetchOwnerDebts"}),H.value=[]}},ea=e(!0),aa=e({}),ta=e=>{ea.value=e,e&&(U.value=[],aa.value={})},la=a(()=>U.value.reduce((e,a)=>e+(aa.value[a]||0),0)),ra=()=>{U.value=[]},na=()=>{},sa=async()=>{if(!qe.value)return L.value="LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurun ve geÃ§erli bir tutar girin.",void ia("LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurun ve geÃ§erli bir tutar girin.");E.value=!0,L.value="";try{const e={tenantId:"tenant"===V.value?f.payment.tenantId:null,ownerId:"owner"===V.value?f.payment.ownerId:null,amount:Number(f.payment.amount),paymentDate:f.payment.date,type:parseInt(f.payment.type)||0,bank:f.payment.bank,description:f.payment.description||"",autoAllocate:ea.value,debtAllocations:ea.value?[]:U.value.map(e=>({debtId:e,amount:aa.value[e]||0}))},a=await A.createPaymentWithAllocation(e);f.editMode?I("Ã–deme"):j("Ã–deme"),P("payment:created",{tenantId:f.payment.tenantId,amount:f.payment.amount,paymentId:a.id}),w("save",a)}catch(e){try{M(e,{component:"PaymentModal",action:"savePayment"})}catch(a){ia("Ã–deme kaydedilirken bir hata oluÅŸtu.")}}finally{E.value=!1}},oa=()=>{H.value=[],U.value=[],E.value=!1,L.value="",w("cancel")};function ia(e){try{"undefined"!=typeof window&&window.$toast?window.$toast.error(e):T&&"function"==typeof T?T(e):alert(e)}catch(a){alert(e)}}const da=e=>{f.visible&&"Escape"===e.key&&oa()};return t(async()=>{Ze(),window.addEventListener("keydown",da);try{const e=await D.getOwners();N.value=e||[]}catch(e){N.value=[]}}),l(()=>{window.removeEventListener("keydown",da)}),r(V,e=>{"tenant"===e?Ze():Qe()}),r(()=>f.payment.tenantId,e=>{"tenant"===V.value&&Ze()}),r(()=>f.payment.ownerId,e=>{"owner"===V.value&&Qe()}),(e,a)=>x.visible?(o(),n("dialog",Y,[i("div",W,[i("div",F,[a[13]||(a[13]=i("h3",{class:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2"},[i("span",{class:"text-2xl"},"ğŸ’³"),d(" AkÄ±llÄ± Ã–deme Sistemi ")],-1)),i("button",{onClick:a[0]||(a[0]=a=>e.$emit("cancel")),class:"btn btn-sm btn-ghost text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},a[12]||(a[12]=[i("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),i("form",K,[i("div",O,[a[16]||(a[16]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Ã–deme TÃ¼rÃ¼")],-1)),i("div",_,[i("label",R,[u(i("input",{type:"radio",value:"tenant","onUpdate:modelValue":a[1]||(a[1]=e=>V.value=e)},null,512),[[c,V.value]]),a[14]||(a[14]=i("span",null,"KÄ°RACI",-1))]),i("label",G,[u(i("input",{type:"radio",value:"owner","onUpdate:modelValue":a[2]||(a[2]=e=>V.value=e)},null,512),[[c,V.value]]),a[15]||(a[15]=i("span",null,"MAL SAHÄ°BÄ°",-1))])])]),"tenant"===V.value?(o(),n("div",$,[a[19]||(a[19]=i("h4",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2"},[i("span",{class:"text-xl"},"ğŸ‘¤"),d(" KiracÄ± SeÃ§imi ")],-1)),i("div",q,[a[18]||(a[18]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"KiracÄ±")],-1)),u(i("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>x.payment.tenantId=e),onChange:Ze,class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},[a[17]||(a[17]=i("option",{disabled:"",value:""},"KiracÄ± seÃ§in",-1)),(o(!0),n(b,null,g(x.tenants,e=>(o(),n("option",{key:e.id,value:e.id},v(e.company||`${e.firstName} ${e.lastName}`),9,X))),128))],544),[[m,x.payment.tenantId]])])])):s("",!0),"owner"===V.value?(o(),n("div",J,[a[22]||(a[22]=i("h4",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2"},[i("span",{class:"text-xl"},"ğŸ "),d(" Mal Sahibi SeÃ§imi ")],-1)),i("div",Z,[a[21]||(a[21]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Mal Sahibi")],-1)),u(i("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>x.payment.ownerId=e),onChange:Qe,class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},[a[20]||(a[20]=i("option",{disabled:"",value:""},"Mal Sahibi seÃ§in",-1)),(o(!0),n(b,null,g(N.value,e=>(o(),n("option",{key:e.id,value:e.id},v(e.company||e.fullName||e.name||e.email),9,Q))),128))],544),[[m,x.payment.ownerId]])])])):s("",!0),i("div",ee,[a[29]||(a[29]=i("h4",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2"},[i("span",{class:"text-xl"},"ğŸ¦"),d(" Banka Hareketi Bilgileri ")],-1)),i("div",ae,[i("div",te,[a[23]||(a[23]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Hareket Tarihi")],-1)),u(i("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>x.payment.date=e),type:"date",class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},null,512),[[p,x.payment.date]])]),i("div",le,[a[24]||(a[24]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Gelen Tutar (â‚º)")],-1)),u(i("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>x.payment.amount=e),type:"number",step:"0.01",placeholder:"0.00",class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},null,512),[[p,x.payment.amount,void 0,{number:!0}]])]),i("div",re,[a[26]||(a[26]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Ã–deme Tipi")],-1)),u(i("select",{"onUpdate:modelValue":a[7]||(a[7]=e=>x.payment.type=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},a[25]||(a[25]=[y('<option disabled value="">Ã–deme Tipi SeÃ§in</option><option value="0">Aidat</option><option value="1">Elektrik</option><option value="2">Su</option><option value="3">DoÄŸalgaz</option><option value="4">DiÄŸer</option>',6)]),512),[[m,x.payment.type]])]),i("div",ne,[a[28]||(a[28]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Banka")],-1)),u(i("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>x.payment.bank=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},[a[27]||(a[27]=i("option",{disabled:"",value:""},"Banka SeÃ§in",-1)),(o(!0),n(b,null,g(x.banks,e=>(o(),n("option",{key:e,value:e},v(e),9,se))),128))],512),[[m,x.payment.bank]])])])]),x.payment.tenantId&&H.value.length>0?(o(),n("div",oe,[i("div",ie,[a[33]||(a[33]=i("h4",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2"},[i("span",{class:"text-xl"},"ğŸ“‹"),d(" BorÃ§ EÅŸleÅŸtirme ")],-1)),i("div",de,[i("button",{type:"button",onClick:a[9]||(a[9]=e=>ta(!0)),class:"btn btn-sm btn-primary bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border-0 text-white"},a[30]||(a[30]=[i("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),d(" Otomatik EÅŸleÅŸtir ")])),i("button",{type:"button",onClick:a[10]||(a[10]=e=>ta(!1)),class:"btn btn-sm btn-outline border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},a[31]||(a[31]=[i("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1),d(" Manuel SeÃ§ ")])),i("button",{type:"button",onClick:ra,class:"btn btn-sm btn-outline border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},a[32]||(a[32]=[i("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),d(" Temizle ")]))])]),i("div",ue,[i("div",ce,[a[35]||(a[35]=i("svg",{class:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),i("span",me,[a[34]||(a[34]=i("strong",null,"AkÄ±llÄ± Ã–deme Sistemi:",-1)),ea.value?(o(),n("span",be,"Otomatik mod - Backend borÃ§larÄ± kapatacak ve fazla tutarÄ± avans hesabÄ±na aktaracak.")):(o(),n("span",ge,"Manuel mod - Hangi borÃ§larÄ±n Ã¶deneceÄŸini seÃ§ebilirsiniz."))])])]),ea.value?s("",!0):(o(),n("div",ve,[(o(!0),n(b,null,g(H.value,e=>(o(),n("div",{key:e.id,class:"flex items-center gap-3 p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600"},[u(i("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":a[11]||(a[11]=e=>U.value=e),onChange:na,class:"checkbox checkbox-primary"},null,40,pe),[[k,U.value]]),i("div",ye,[i("div",ke,[i("div",null,[i("p",xe,v(e.typeLabel||e.type),1),i("p",he,[d(v(e.period||e.dueDateFormatted)+" ",1),e.unit&&"-"!==e.unit?(o(),n("span",fe," ("+v(e.unit)+") ",1)):s("",!0)])]),i("div",we,[i("p",Me,v(Ge(e.remainingAmount||e.amount)),1),i("p",Ae,v(Xe(e.dueDate))+" gÃ¼n gecikmiÅŸ",1),e.paidAmount>0?(o(),n("p",De,v(Ge((e.remainingAmount||e.amount)-e.paidAmount))+" kalan ",1)):s("",!0)])]),U.value.includes(e.id)?(o(),n("div",Ce,[u(i("input",{"onUpdate:modelValue":a=>aa.value[e.id]=a,type:"number",step:"0.01",max:e.remainingAmount||e.amount,class:"input input-sm input-bordered w-32",placeholder:"Tutar"},null,8,Se),[[p,aa.value[e.id]]])])):s("",!0)])]))),128))])),U.value.length>0||ea.value?(o(),n("div",ze,[a[39]||(a[39]=i("h5",{class:"font-semibold text-gray-800 dark:text-gray-100 mb-2"},"Ã–deme Ã–zeti",-1)),i("div",Be,[i("div",Te,[a[36]||(a[36]=i("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Toplam Tutar:",-1)),i("span",je,v(Ge(x.payment.amount)),1)]),i("div",Ie,[a[37]||(a[37]=i("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"EÅŸleÅŸtirilecek:",-1)),i("span",Pe,v(Ge(la.value)),1)]),i("div",Ve,[a[38]||(a[38]=i("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Avans HesabÄ±na:",-1)),i("span",Ne,v(Ge(x.payment.amount-la.value)),1)])])])):s("",!0)])):s("",!0),x.payment.tenantId&&0===H.value.length?(o(),n("div",He,[i("div",Ue,[a[43]||(a[43]=i("svg",{class:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),i("div",null,[a[42]||(a[42]=i("p",{class:"text-green-700 dark:text-green-300 font-semibold"},"BorÃ§ BulunamadÄ±",-1)),i("p",Ee,[a[40]||(a[40]=d(" SeÃ§ilen kiracÄ±nÄ±n Ã¶denmemiÅŸ borcu bulunmuyor. ")),i("strong",null,v(Ge(x.payment.amount||0)),1),a[41]||(a[41]=d(" tutarÄ± avans hesabÄ±na aktarÄ±lacak. "))])])])])):s("",!0),L.value?(o(),n("div",Le,[i("div",Ye,[a[44]||(a[44]=i("svg",{class:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),i("span",We,v(L.value),1)])])):s("",!0),i("div",Fe,[i("button",{type:"button",class:"btn btn-outline border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:oa,disabled:E.value},[a[45]||(a[45]=i("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),d(" "+v(E.value?"Ä°ÅŸlem Devam Ediyor...":"Ä°ptal"),1)],8,Ke),i("button",{type:"button",class:"btn btn-success bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 border-0 text-white shadow-lg",disabled:!qe.value||E.value,onClick:sa},[E.value?(o(),n("svg",Re,a[47]||(a[47]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(o(),n("svg",_e,a[46]||(a[46]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))),d(" "+v(E.value?"Kaydediliyor...":"Ã–demeyi Kaydet"),1)],8,Oe)])])])])):s("",!0)}},$e={0:"Aidat",1:"Elektrik",2:"Su",3:"DoÄŸalgaz"},qe={Create:"OluÅŸturuldu",Update:"GÃ¼ncellendi",Delete:"Silindi",Payment:"Ã–deme",DebtAllocation:"BorÃ§ EÅŸleÅŸtirme",AdvanceUsage:"Avans KullanÄ±mÄ±"},Xe={Payment:"Ã–deme",UtilityDebt:"BorÃ§",AdvanceAccount:"Avans HesabÄ±",Tenant:"KiracÄ±",Owner:"Malik",Flat:"Daire"};function Je(e){return $e[e]||"Bilinmeyen"}function Ze(e){return qe[e]||e}function Qe(e){return Xe[e]||e}const ea={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarÄ±m dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklaÅŸÄ±k 1 saat",other:"yaklaÅŸÄ±k {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gÃ¼n",other:"{{count}} gÃ¼n"},aboutXWeeks:{one:"yaklaÅŸÄ±k 1 hafta",other:"yaklaÅŸÄ±k {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklaÅŸÄ±k 1 ay",other:"yaklaÅŸÄ±k {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklaÅŸÄ±k 1 yÄ±l",other:"yaklaÅŸÄ±k {{count}} yÄ±l"},xYears:{one:"1 yÄ±l",other:"{{count}} yÄ±l"},overXYears:{one:"1 yÄ±ldan fazla",other:"{{count}} yÄ±ldan fazla"},almostXYears:{one:"neredeyse 1 yÄ±l",other:"neredeyse {{count}} yÄ±l"}},aa={date:I({formats:{full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},defaultWidth:"full"}),time:I({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:I({formats:{full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ta={lastWeek:"'geÃ§en hafta' eeee 'saat' p",yesterday:"'dÃ¼n saat' p",today:"'bugÃ¼n saat' p",tomorrow:"'yarÄ±n saat' p",nextWeek:"eeee 'saat' p",other:"P"},la={code:"tr",formatDistance:(e,a,t)=>{let l;const r=ea[e];return l="string"==typeof r?r:1===a?r.one:r.other.replace("{{count}}",a.toString()),(null==t?void 0:t.addSuffix)?t.comparison&&t.comparison>0?l+" sonra":l+" Ã¶nce":l},formatLong:aa,formatRelative:(e,a,t,l)=>ta[e],localize:{ordinalNumber:(e,a)=>Number(e)+".",era:P({values:{narrow:["MÃ–","MS"],abbreviated:["MÃ–","MS"],wide:["Milattan Ã–nce","Milattan Sonra"]},defaultWidth:"wide"}),quarter:P({values:{narrow:["1","2","3","4"],abbreviated:["1Ã‡","2Ã‡","3Ã‡","4Ã‡"],wide:["Ä°lk Ã§eyrek","Ä°kinci Ã‡eyrek","ÃœÃ§Ã¼ncÃ¼ Ã§eyrek","Son Ã§eyrek"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:P({values:{narrow:["O","Å","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","Åub","Mar","Nis","May","Haz","Tem","AÄŸu","Eyl","Eki","Kas","Ara"],wide:["Ocak","Åubat","Mart","Nisan","MayÄ±s","Haziran","Temmuz","AÄŸustos","EylÃ¼l","Ekim","KasÄ±m","AralÄ±k"]},defaultWidth:"wide"}),day:P({values:{narrow:["P","P","S","Ã‡","P","C","C"],short:["Pz","Pt","Sa","Ã‡a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","Ã‡ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","SalÄ±","Ã‡arÅŸamba","PerÅŸembe","Cuma","Cumartesi"]},defaultWidth:"wide"}),dayPeriod:P({values:{narrow:{am:"Ã¶Ã¶",pm:"Ã¶s",midnight:"gy",noon:"Ã¶",morning:"sa",afternoon:"Ã¶s",evening:"ak",night:"ge"},abbreviated:{am:"Ã–Ã–",pm:"Ã–S",midnight:"gece yarÄ±sÄ±",noon:"Ã¶ÄŸle",morning:"sabah",afternoon:"Ã¶ÄŸleden sonra",evening:"akÅŸam",night:"gece"},wide:{am:"Ã–.Ã–.",pm:"Ã–.S.",midnight:"gece yarÄ±sÄ±",noon:"Ã¶ÄŸle",morning:"sabah",afternoon:"Ã¶ÄŸleden sonra",evening:"akÅŸam",night:"gece"}},defaultWidth:"wide",formattingValues:{narrow:{am:"Ã¶Ã¶",pm:"Ã¶s",midnight:"gy",noon:"Ã¶",morning:"sa",afternoon:"Ã¶s",evening:"ak",night:"ge"},abbreviated:{am:"Ã–Ã–",pm:"Ã–S",midnight:"gece yarÄ±sÄ±",noon:"Ã¶ÄŸlen",morning:"sabahleyin",afternoon:"Ã¶ÄŸleden sonra",evening:"akÅŸamleyin",night:"geceleyin"},wide:{am:"Ã¶.Ã¶.",pm:"Ã¶.s.",midnight:"gece yarÄ±sÄ±",noon:"Ã¶ÄŸlen",morning:"sabahleyin",afternoon:"Ã¶ÄŸleden sonra",evening:"akÅŸamleyin",night:"geceleyin"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:N({matchPattern:/^(\d+)(\.)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:V({matchPatterns:{narrow:/^(mÃ¶|ms)/i,abbreviated:/^(mÃ¶|ms)/i,wide:/^(milattan Ã¶nce|milattan sonra)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(^mÃ¶|^milattan Ã¶nce)/i,/(^ms|^milattan sonra)/i]},defaultParseWidth:"any"}),quarter:V({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^[1234]Ã§/i,wide:/^((i|Ä°)lk|(i|Ä°)kinci|Ã¼Ã§Ã¼ncÃ¼|son) Ã§eyrek/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1Ã§/i,/2Ã§/i,/3Ã§/i,/4Ã§/i],wide:[/^(i|Ä°)lk Ã§eyrek/i,/(i|Ä°)kinci Ã§eyrek/i,/Ã¼Ã§Ã¼ncÃ¼ Ã§eyrek/i,/son Ã§eyrek/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:V({matchPatterns:{narrow:/^[oÅŸmnhtaek]/i,abbreviated:/^(oca|ÅŸub|mar|nis|may|haz|tem|aÄŸu|eyl|eki|kas|ara)/i,wide:/^(ocak|ÅŸubat|mart|nisan|mayÄ±s|haziran|temmuz|aÄŸustos|eylÃ¼l|ekim|kasÄ±m|aralÄ±k)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^o/i,/^ÅŸ/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^ÅŸ/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^aÄŸ/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},defaultParseWidth:"any"}),day:V({matchPatterns:{narrow:/^[psÃ§c]/i,short:/^(pz|pt|sa|Ã§a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|Ã§ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|salÄ±|Ã§arÅŸamba|perÅŸembe|cuma(?!rtesi)|cumartesi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^p/i,/^p/i,/^s/i,/^Ã§/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^Ã§a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^salÄ±/i,/^Ã§arÅŸamba/i,/^perÅŸembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},defaultParseWidth:"any"}),dayPeriod:V({matchPatterns:{narrow:/^(Ã¶Ã¶|Ã¶s|gy|Ã¶|sa|Ã¶s|ak|ge)/i,any:/^(Ã¶\.?\s?[Ã¶s]\.?|Ã¶ÄŸleden sonra|gece yarÄ±sÄ±|Ã¶ÄŸle|(sabah|Ã¶ÄŸ|akÅŸam|gece)(leyin))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^Ã¶\.?Ã¶\.?/i,pm:/^Ã¶\.?s\.?/i,midnight:/^(gy|gece yarÄ±sÄ±)/i,noon:/^Ã¶ÄŸ/i,morning:/^sa/i,afternoon:/^Ã¶ÄŸleden sonra/i,evening:/^ak/i,night:/^ge/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};const ra={key:0,class:"flex justify-center items-center py-12"},na={key:1,class:"advance-account-manager bg-base-100 p-6 rounded-lg shadow-lg"},sa={class:"form-control mb-6"},oa=["value"],ia={key:0,class:"mb-6"},da={class:"bg-base-200 p-4 rounded-lg"},ua={class:"text-3xl font-bold text-primary"},ca={class:"text-sm text-gray-600 mt-2"},ma={key:1,class:"border-t pt-6"},ba={class:"space-y-3 mb-4"},ga={class:"flex items-center justify-between"},va={class:"flex items-center space-x-3"},pa=["value","disabled"],ya={class:"font-medium"},ka={class:"text-sm text-gray-600"},xa={key:0,class:"w-32"},ha=["onUpdate:modelValue","max"],fa={key:0,class:"text-sm text-warning mt-2"},wa={key:0,class:"bg-base-200 p-4 rounded-lg mb-4"},Ma={class:"flex justify-between mb-2"},Aa={class:"font-semibold"},Da={class:"flex justify-between mb-2"},Ca={class:"font-semibold"},Sa={class:"flex justify-between"},za={key:0,class:"text-sm text-error mt-2"},Ba=["disabled"],Ta={key:0,class:"loading loading-spinner loading-sm"},ja={key:2,class:"text-center py-8"},Ia={key:3,class:"text-center py-8"},Pa={__name:"AdvanceAccountManager",emits:["success"],setup(l,{emit:c}){const M=c,D=e(!1),S=e([]),z=e(""),B=e(null),T=e([]),I=e([]),P=e({}),V=a(()=>I.value.reduce((e,a)=>e+(P.value[a]||0),0)),N=a(()=>B.value?B.value.balance-V.value:0),L=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e),Y=e=>function(e,a="dd.MM.yyyy"){if(!e)return"Tarih belirtilmedi";try{let t;if("string"==typeof e)t=H(e);else{if(!(e instanceof Date))return"GeÃ§ersiz tarih";t=e}return U(t)?t.getFullYear()<=1900?"Tarih belirtilmedi":E(t,a,{locale:la}):"GeÃ§ersiz tarih"}catch(t){return"GeÃ§ersiz tarih"}}(e,"dd MMM yyyy"),W=async()=>{if(!z.value)return B.value=null,void(T.value=[]);D.value=!0;try{const e=await A.getAdvanceAccounts({tenantId:z.value,activeOnly:!0});B.value=e&&e.length>0?e[0]:null;const a=await C.getUtilityDebts({tenantId:z.value,status:0});T.value=a||[],I.value=[],P.value={}}catch(e){}finally{D.value=!1}},F=async()=>{if(!(D.value||0===I.value.length||N.value<0)){D.value=!0;try{const e=I.value.map(e=>({debtId:e,amount:P.value[e]||0})),a={tenantId:z.value,debtPayments:e,description:"Avans hesabÄ±ndan borÃ§ Ã¶demesi"},t=await A.useAdvanceAccount(a);M("success",t),await W()}catch(e){alert("Avans kullanÄ±lamadÄ±: "+e.message)}finally{D.value=!1}}};return r(z,()=>{W()}),t(()=>{(async()=>{D.value=!0;try{const e=await j.getTenants();S.value=e||[]}catch(e){}finally{D.value=!1}})()}),(e,a)=>{const t=x("LoadingSpinner");return D.value?(o(),n("div",ra,[h(t)])):(o(),n("div",na,[a[12]||(a[12]=i("h2",{class:"text-2xl font-bold mb-6 text-primary"},"Avans HesabÄ± YÃ¶netimi",-1)),i("div",sa,[a[3]||(a[3]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"KiracÄ± SeÃ§in")],-1)),u(i("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>z.value=e),class:"select select-bordered",onChange:W},[a[2]||(a[2]=i("option",{value:""},"KiracÄ± seÃ§iniz",-1)),(o(!0),n(b,null,g(S.value,e=>(o(),n("option",{key:e.id,value:e.id},v(e.firstName)+" "+v(e.lastName),9,oa))),128))],544),[[m,z.value]])]),B.value?(o(),n("div",ia,[i("div",da,[a[4]||(a[4]=i("h3",{class:"text-lg font-semibold mb-3"},"Mevcut Bakiye",-1)),i("div",ua,v(L(B.value.balance)),1),i("div",ca," Son gÃ¼ncelleme: "+v(Y(B.value.updatedAt||B.value.createdAt)),1)])])):s("",!0),B.value&&T.value.length>0?(o(),n("div",ma,[a[9]||(a[9]=i("h3",{class:"text-lg font-semibold mb-4"},"BorÃ§ Ã–de",-1)),i("div",ba,[(o(!0),n(b,null,g(T.value,e=>(o(),n("div",{key:e.id,class:"border rounded-lg p-3"},[i("div",ga,[i("div",va,[u(i("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>I.value=e),value:e.id,type:"checkbox",class:"checkbox checkbox-sm checkbox-primary",disabled:e.remainingAmount>B.value.balance},null,8,pa),[[k,I.value]]),i("div",null,[i("div",ya,v(e.description||`${f(Je)(e.type)} - ${e.periodYear}/${e.periodMonth}`),1),i("div",ka," Kalan: "+v(L(e.remainingAmount))+" | Vade: "+v(Y(e.dueDate)),1)])]),I.value.includes(e.id)?(o(),n("div",xa,[u(i("input",{"onUpdate:modelValue":a=>P.value[e.id]=a,type:"number",step:"0.01",max:Math.min(e.remainingAmount,B.value.balance),class:"input input-sm input-bordered",placeholder:"Tutar"},null,8,ha),[[p,P.value[e.id]]])])):s("",!0)]),e.remainingAmount>B.value.balance?(o(),n("div",fa," âš ï¸ Yetersiz bakiye ")):s("",!0)]))),128))]),I.value.length>0?(o(),n("div",wa,[a[8]||(a[8]=i("h4",{class:"font-semibold mb-2"},"Ã–deme Ã–zeti",-1)),i("div",Ma,[a[5]||(a[5]=i("span",null,"Toplam Ã–denecek:",-1)),i("span",Aa,v(L(V.value)),1)]),i("div",Da,[a[6]||(a[6]=i("span",null,"Mevcut Bakiye:",-1)),i("span",Ca,v(L(B.value.balance)),1)]),i("div",Sa,[a[7]||(a[7]=i("span",null,"Kalan Bakiye:",-1)),i("span",{class:w(["font-semibold",N.value<0?"text-error":"text-success"])},v(L(N.value)),3)]),N.value<0?(o(),n("div",za," âš ï¸ Yetersiz bakiye! LÃ¼tfen Ã¶deme tutarlarÄ±nÄ± azaltÄ±n. ")):s("",!0)])):s("",!0),i("button",{onClick:F,class:"btn btn-primary",disabled:D.value||0===I.value.length||N.value<0},[D.value?(o(),n("span",Ta)):s("",!0),d(" "+v(D.value?"Ä°ÅŸleniyor...":"Avans Kullan"),1)],8,Ba)])):B.value&&0===T.value.length?(o(),n("div",ja,a[10]||(a[10]=[y('<div class="text-gray-500"><svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class="text-lg font-medium">Ã–denecek borÃ§ bulunmuyor</p><p class="text-sm">Bu kiracÄ±nÄ±n Ã¶denmemiÅŸ borcu bulunmamaktadÄ±r.</p></div>',1)]))):z.value&&!B.value?(o(),n("div",Ia,a[11]||(a[11]=[y('<div class="text-gray-500"><svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg><p class="text-lg font-medium">Avans hesabÄ± bulunamadÄ±</p><p class="text-sm">Bu kiracÄ±nÄ±n avans hesabÄ± bulunmamaktadÄ±r.</p></div>',1)]))):s("",!0)]))}}},Va={class:"financial-reports bg-base-100 p-6 rounded-lg shadow-lg"},Na={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Ha={class:"form-control"},Ua={class:"form-control"},Ea={class:"form-control"},La=["value"],Ya={class:"form-control"},Wa=["disabled"],Fa={key:0,class:"loading loading-spinner loading-sm"},Ka={key:0,class:"space-y-6"},Oa={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},_a={class:"stat bg-base-200 rounded-lg"},Ra={class:"stat-value text-primary"},Ga={class:"stat-desc"},$a={class:"stat bg-base-200 rounded-lg"},qa={class:"stat-value text-error"},Xa={class:"stat-desc"},Ja={class:"stat bg-base-200 rounded-lg"},Za={class:"stat-value text-success"},Qa={class:"stat-desc"},et={class:"stat bg-base-200 rounded-lg"},at={class:"overflow-x-auto"},tt={class:"table table-zebra w-full"},lt={class:"text-success"},rt={class:"text-error"},nt={key:1,class:"text-center py-8"},st={__name:"FinancialReports",setup(a){const l=e(!1),r=e([]),c=e(null),k=e({startDate:E(new Date((new Date).getFullYear(),(new Date).getMonth(),1),"yyyy-MM-dd"),endDate:E(new Date,"yyyy-MM-dd"),tenantId:"",ownerId:""}),x=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e),h=async()=>{l.value=!0;try{const e=await A.getFinancialReports(k.value);c.value=e}catch(e){alert("Rapor yÃ¼klenemedi: "+e.message)}finally{l.value=!1}};return t(()=>{(async()=>{try{const e=await j.getTenants();r.value=e||[]}catch(e){}})(),h()}),(e,a)=>(o(),n("div",Va,[a[16]||(a[16]=i("h2",{class:"text-2xl font-bold mb-6 text-primary"},"Finansal Raporlar",-1)),i("div",Na,[i("div",Ha,[a[3]||(a[3]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"BaÅŸlangÄ±Ã§ Tarihi")],-1)),u(i("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>k.value.startDate=e),type:"date",class:"input input-bordered"},null,512),[[p,k.value.startDate]])]),i("div",Ua,[a[4]||(a[4]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"BitiÅŸ Tarihi")],-1)),u(i("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>k.value.endDate=e),type:"date",class:"input input-bordered"},null,512),[[p,k.value.endDate]])]),i("div",Ea,[a[6]||(a[6]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"KiracÄ±")],-1)),u(i("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>k.value.tenantId=e),class:"select select-bordered"},[a[5]||(a[5]=i("option",{value:""},"TÃ¼m KiracÄ±lar",-1)),(o(!0),n(b,null,g(r.value,e=>(o(),n("option",{key:e.id,value:e.id},v(e.firstName)+" "+v(e.lastName),9,La))),128))],512),[[m,k.value.tenantId]])]),i("div",Ya,[a[7]||(a[7]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"Â ")],-1)),i("button",{onClick:h,class:"btn btn-primary",disabled:l.value},[l.value?(o(),n("span",Fa)):s("",!0),d(" "+v(l.value?"YÃ¼kleniyor...":"Rapor YÃ¼kle"),1)],8,Wa)])]),c.value?(o(),n("div",Ka,[i("div",Oa,[i("div",_a,[a[8]||(a[8]=i("div",{class:"stat-title"},"Toplam Ã–deme",-1)),i("div",Ra,v(x(c.value.totalPayments)),1),i("div",Ga,v(c.value.paymentCount)+" Ã¶deme",1)]),i("div",$a,[a[9]||(a[9]=i("div",{class:"stat-title"},"Toplam BorÃ§",-1)),i("div",qa,v(x(c.value.totalDebts)),1),i("div",Xa,v(c.value.debtCount)+" borÃ§",1)]),i("div",Ja,[a[10]||(a[10]=i("div",{class:"stat-title"},"Avans Bakiyesi",-1)),i("div",Za,v(x(c.value.advanceBalance)),1),i("div",Qa,v(c.value.advanceAccountCount)+" hesap",1)]),i("div",et,[a[11]||(a[11]=i("div",{class:"stat-title"},"Net Durum",-1)),i("div",{class:w(["stat-value",c.value.netBalance>=0?"text-success":"text-error"])},v(x(c.value.netBalance)),3),a[12]||(a[12]=i("div",{class:"stat-desc"},"Ã–deme - BorÃ§",-1))])]),i("div",at,[i("table",tt,[a[13]||(a[13]=i("thead",null,[i("tr",null,[i("th",null,"Tarih"),i("th",null,"KiracÄ±"),i("th",null,"Ã–deme"),i("th",null,"BorÃ§"),i("th",null,"Kalan"),i("th",null,"Durum")])],-1)),i("tbody",null,[(o(!0),n(b,null,g(c.value.details,e=>{return o(),n("tr",{key:e.id},[i("td",null,v((a=e.date,E(new Date(a),"dd MMM yyyy",{locale:la}))),1),i("td",null,v(e.tenantName),1),i("td",lt,v(x(e.paymentAmount)),1),i("td",rt,v(x(e.debtAmount)),1),i("td",{class:w(e.remainingAmount>=0?"text-success":"text-error")},v(x(e.remainingAmount)),3),i("td",null,[i("span",{class:w(["badge",e.remainingAmount>=0?"badge-success":"badge-error"])},v(e.remainingAmount>=0?"Pozitif":"Negatif"),3)])]);var a}),128))])])]),a[14]||(a[14]=y('<div class="bg-base-200 p-4 rounded-lg"><h3 class="text-lg font-semibold mb-3">Grafik GÃ¶rÃ¼nÃ¼mÃ¼</h3><div class="text-center py-8 text-gray-500"><svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg><p>Grafik gÃ¶rÃ¼nÃ¼mÃ¼ yakÄ±nda eklenecek</p></div></div>',1))])):l.value?s("",!0):(o(),n("div",nt,a[15]||(a[15]=[y('<div class="text-gray-500"><svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><p class="text-lg font-medium">Rapor bulunamadÄ±</p><p class="text-sm">Filtreleri deÄŸiÅŸtirip tekrar deneyin.</p></div>',1)])))]))}},ot={class:"audit-logs bg-base-100 p-6 rounded-lg shadow-lg"},it={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},dt={class:"form-control"},ut={class:"form-control"},ct={class:"form-control"},mt=["value"],bt={class:"form-control"},gt=["value"],vt={class:"form-control"},pt=["disabled"],yt={key:0,class:"loading loading-spinner loading-sm"},kt={key:0,class:"overflow-x-auto"},xt={class:"table table-zebra w-full"},ht={class:"flex items-center space-x-2"},ft={class:"avatar placeholder"},wt={class:"bg-neutral text-neutral-content rounded-full w-8"},Mt={class:"text-xs"},At={class:"font-medium"},Dt={class:"text-sm text-gray-500"},Ct={class:"font-medium"},St={class:"text-sm text-gray-500"},zt={class:"text-sm text-gray-500"},Bt=["onClick"],Tt={key:1,class:"text-center py-8"},jt={id:"log_details_modal",class:"modal"},It={class:"modal-box w-11/12 max-w-4xl"},Pt={key:0,class:"space-y-4"},Vt={class:"grid grid-cols-2 gap-4"},Nt={class:"text-sm"},Ht={class:"text-sm"},Ut={class:"text-sm"},Et={class:"text-sm"},Lt={class:"text-sm"},Yt={class:"text-sm text-xs"},Wt={key:0},Ft={class:"bg-base-200 p-4 rounded-lg"},Kt={key:0,class:"mb-3"},Ot={class:"text-xs bg-error text-error-content p-2 rounded"},_t={key:1},Rt={class:"text-xs bg-success text-success-content p-2 rounded"},Gt={key:1},$t={class:"bg-base-200 p-4 rounded-lg"},qt={class:"text-xs"},Xt={__name:"AuditLogs",setup(a){const l=e(!1),r=e([]),c=e(null),k=e({startDate:E(new Date((new Date).getFullYear(),(new Date).getMonth(),1),"yyyy-MM-dd"),endDate:E(new Date,"yyyy-MM-dd"),action:"",entityType:"",userId:""}),x=e=>E(new Date(e),"dd MMM yyyy HH:mm",{locale:la}),h=async()=>{l.value=!0;try{const e=await A.getAuditLogs(k.value);r.value=e||[]}catch(e){alert("Loglar yÃ¼klenemedi: "+e.message)}finally{l.value=!1}};return t(()=>{h()}),(e,a)=>(o(),n("div",ot,[a[25]||(a[25]=i("h2",{class:"text-2xl font-bold mb-6 text-primary"},"Sistem LoglarÄ±",-1)),i("div",it,[i("div",dt,[a[4]||(a[4]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"BaÅŸlangÄ±Ã§ Tarihi")],-1)),u(i("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>k.value.startDate=e),type:"date",class:"input input-bordered"},null,512),[[p,k.value.startDate]])]),i("div",ut,[a[5]||(a[5]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"BitiÅŸ Tarihi")],-1)),u(i("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>k.value.endDate=e),type:"date",class:"input input-bordered"},null,512),[[p,k.value.endDate]])]),i("div",ct,[a[7]||(a[7]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"Ä°ÅŸlem TÃ¼rÃ¼")],-1)),u(i("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>k.value.action=e),class:"select select-bordered"},[a[6]||(a[6]=i("option",{value:""},"TÃ¼m Ä°ÅŸlemler",-1)),(o(!0),n(b,null,g(f(qe),(e,a)=>(o(),n("option",{key:a,value:a},v(e),9,mt))),128))],512),[[m,k.value.action]])]),i("div",bt,[a[9]||(a[9]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"VarlÄ±k TÃ¼rÃ¼")],-1)),u(i("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>k.value.entityType=e),class:"select select-bordered"},[a[8]||(a[8]=i("option",{value:""},"TÃ¼m VarlÄ±klar",-1)),(o(!0),n(b,null,g(f(Xe),(e,a)=>(o(),n("option",{key:a,value:a},v(e),9,gt))),128))],512),[[m,k.value.entityType]])]),i("div",vt,[a[10]||(a[10]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"Â ")],-1)),i("button",{onClick:h,class:"btn btn-primary",disabled:l.value},[l.value?(o(),n("span",yt)):s("",!0),d(" "+v(l.value?"YÃ¼kleniyor...":"Log YÃ¼kle"),1)],8,pt)])]),r.value.length>0?(o(),n("div",kt,[i("table",xt,[a[11]||(a[11]=i("thead",null,[i("tr",null,[i("th",null,"Tarih"),i("th",null,"KullanÄ±cÄ±"),i("th",null,"Ä°ÅŸlem"),i("th",null,"VarlÄ±k"),i("th",null,"IP Adresi"),i("th",null,"Detaylar")])],-1)),i("tbody",null,[(o(!0),n(b,null,g(r.value,e=>{var a,t;return o(),n("tr",{key:e.id},[i("td",null,v(x(e.createdAt)),1),i("td",null,[i("div",ht,[i("div",ft,[i("div",wt,[i("span",Mt,v((null==(a=e.userName)?void 0:a.charAt(0))||"U"),1)])]),i("div",null,[i("div",At,v(e.userName||"Sistem"),1),i("div",Dt,v(e.userEmail||"-"),1)])])]),i("td",null,[i("span",{class:w(["badge",(t=e.action,{Create:"badge-success",Update:"badge-warning",Delete:"badge-error",Payment:"badge-primary",DebtAllocation:"badge-info",AdvanceUsage:"badge-secondary"}[t]||"badge-neutral")])},v(f(Ze)(e.action)),3)]),i("td",null,[i("div",null,[i("div",Ct,v(f(Qe)(e.entityType)),1),i("div",St,"ID: "+v(e.entityId),1)])]),i("td",zt,v(e.ipAddress||"-"),1),i("td",null,[i("button",{onClick:a=>(e=>{c.value=e,document.getElementById("log_details_modal").showModal()})(e),class:"btn btn-sm btn-outline"}," Detaylar ",8,Bt)])])}),128))])])])):l.value?s("",!0):(o(),n("div",Tt,a[12]||(a[12]=[y('<div class="text-gray-500"><svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><p class="text-lg font-medium">Log bulunamadÄ±</p><p class="text-sm">Filtreleri deÄŸiÅŸtirip tekrar deneyin.</p></div>',1)]))),i("dialog",jt,[i("div",It,[a[23]||(a[23]=i("h3",{class:"font-bold text-lg mb-4"},"Log DetaylarÄ±",-1)),c.value?(o(),n("div",Pt,[i("div",Vt,[i("div",null,[a[13]||(a[13]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"Tarih")],-1)),i("div",Nt,v(x(c.value.createdAt)),1)]),i("div",null,[a[14]||(a[14]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"KullanÄ±cÄ±")],-1)),i("div",Ht,v(c.value.userName||"Sistem"),1)]),i("div",null,[a[15]||(a[15]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"Ä°ÅŸlem")],-1)),i("div",Ut,v(f(Ze)(c.value.action)),1)]),i("div",null,[a[16]||(a[16]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"VarlÄ±k")],-1)),i("div",Et,v(f(Qe)(c.value.entityType))+" (ID: "+v(c.value.entityId)+")",1)]),i("div",null,[a[17]||(a[17]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"IP Adresi")],-1)),i("div",Lt,v(c.value.ipAddress||"-"),1)]),i("div",null,[a[18]||(a[18]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"User Agent")],-1)),i("div",Yt,v(c.value.userAgent||"-"),1)])]),c.value.oldValues||c.value.newValues?(o(),n("div",Wt,[a[21]||(a[21]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"DeÄŸiÅŸiklikler")],-1)),i("div",Ft,[c.value.oldValues?(o(),n("div",Kt,[a[19]||(a[19]=i("div",{class:"font-semibold text-error mb-2"},"Eski DeÄŸerler:",-1)),i("pre",Ot,v(JSON.stringify(c.value.oldValues,null,2)),1)])):s("",!0),c.value.newValues?(o(),n("div",_t,[a[20]||(a[20]=i("div",{class:"font-semibold text-success mb-2"},"Yeni DeÄŸerler:",-1)),i("pre",Rt,v(JSON.stringify(c.value.newValues,null,2)),1)])):s("",!0)])])):s("",!0),c.value.additionalData?(o(),n("div",Gt,[a[22]||(a[22]=i("label",{class:"label"},[i("span",{class:"label-text font-semibold"},"Ek Bilgiler")],-1)),i("div",$t,[i("pre",qt,v(JSON.stringify(c.value.additionalData,null,2)),1)])])):s("",!0)])):s("",!0),a[24]||(a[24]=i("div",{class:"modal-action"},[i("form",{method:"dialog"},[i("button",{class:"btn"},"Kapat")])],-1))])])]))}},Jt={class:"loading-content"},Zt={key:0,class:"loading-text"},Qt={key:1,class:"progress-container"},el={class:"progress-bar"},al={class:"progress-text"},tl=L({__name:"LoadingSpinner",props:{loading:{type:Boolean,default:!1},text:{type:String,default:"YÃ¼kleniyor..."},fullscreen:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!1},progress:{type:Number,default:null},size:{type:String,default:"medium",validator:e=>["small","medium","large"].includes(e)}},setup(e){const t=e;return a(()=>{switch(t.size){case"small":return"w-8 h-8";case"large":return"w-16 h-16";default:return"w-12 h-12"}}),(a,t)=>e.loading?(o(),n("div",{key:0,class:w(["loading-overlay",{fullscreen:e.fullscreen,overlay:e.overlay}])},[i("div",Jt,[t[0]||(t[0]=i("div",{class:"spinner"},[i("div",{class:"spinner-ring"}),i("div",{class:"spinner-ring"}),i("div",{class:"spinner-ring"})],-1)),e.text?(o(),n("p",Zt,v(e.text),1)):s("",!0),e.showProgress&&null!==e.progress?(o(),n("div",Qt,[i("div",el,[i("div",{class:"progress-fill",style:M({width:`${e.progress}%`})},null,4)]),i("span",al,v(Math.round(e.progress))+"%",1)])):s("",!0)])],2)):s("",!0)}},[["__scopeId","data-v-83a88369"]]),ll=["Aidat","Elektrik","Su","DoÄŸalgaz","DiÄŸer"],rl=[{value:"Aidat",label:"Aidat",icon:"ğŸ¢"},{value:"Elektrik",label:"Elektrik",icon:"âš¡ï¸"},{value:"Su",label:"Su",icon:"ğŸ’§"},{value:"DoÄŸalgaz",label:"DoÄŸalgaz",icon:"ğŸ”¥"},{value:"DiÄŸer",label:"DiÄŸer",icon:"ğŸ“¦"}];function nl(e){return"number"==typeof e&&ll[e]?ll[e]:"string"==typeof e&&ll.includes(e)?e:"Other"}function sl(e){const a=nl(e),t=rl.find(e=>e.value===a);return t?t.label:a}function ol(e){const a=nl(e),t=rl.find(e=>e.value===a);return t?t.icon:"â“"}const il={class:"p-4 sm:p-6 bg-gray-50 min-h-screen font-sans dark:bg-gray-900"},dl={class:"max-w-7xl mx-auto"},ul={class:"flex items-center justify-between mb-6"},cl={class:"flex items-center gap-4"},ml={class:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 px-3 py-1 rounded-full text-sm"},bl={class:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-full text-sm"},gl={class:"bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-400 px-3 py-1 rounded-full text-sm"},vl={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},pl={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},yl={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},kl={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},xl={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},hl={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},fl={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},wl={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},Ml={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},Al={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-8"},Dl={class:"h-64 flex items-end justify-between gap-2"},Cl={class:"text-xs text-gray-500 dark:text-gray-400"},Sl={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-8"},zl={class:"grid grid-cols-2 sm:grid-cols-4 gap-4"},Bl={class:"flex items-center gap-3 mb-2"},Tl={class:"text-2xl"},jl={class:"font-semibold text-gray-800 dark:text-gray-100"},Il={class:"text-sm text-gray-500 dark:text-gray-400"},Pl={class:"text-lg font-bold text-green-600 dark:text-green-400"},Vl={class:"mb-6"},Nl={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Hl={key:0,class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-6"},Ul={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},El={class:"flex items-center justify-between mb-2"},Ll={class:"font-semibold text-gray-800 dark:text-gray-100"},Yl={class:"text-2xl font-bold text-purple-600 dark:text-purple-400 mb-1"},Wl={class:"text-sm text-gray-600 dark:text-gray-400"},Fl={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700"},Kl={class:"mt-6 space-y-2"},Ol={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},_l={key:1},Rl={class:"md:col-span-5 flex items-center gap-4"},Gl={class:"font-bold text-gray-800 dark:text-gray-100"},$l={class:"text-sm text-gray-500 dark:text-gray-400"},ql={class:"md:col-span-3 text-left md:text-center text-2xl font-semibold text-green-600 dark:text-green-400"},Xl={class:"md:col-span-2 text-left md:text-center text-sm text-gray-600 dark:text-gray-300"},Jl={class:"font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2"},Zl={class:"md:col-span-2 text-right"},Ql={class:"dropdown dropdown-end"},er={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-200 rounded-box w-32 z-10"},ar=["onClick"],tr=["onClick"],lr={key:0,class:"modal",open:""},rr={class:"modal-box max-w-4xl"},nr={class:"flex items-center justify-between mb-4"},sr={key:1,class:"modal",open:""},or={class:"modal-box max-w-6xl"},ir={class:"flex items-center justify-between mb-4"},dr={key:2,class:"modal",open:""},ur={class:"modal-box max-w-6xl"},cr={class:"flex items-center justify-between mb-4"},mr={key:3,class:"flex justify-center items-center py-12"},br={__name:"Payments",setup(l){const{handleNetworkError:r,showSuccess:u}=S(),{showCreateSuccess:c,showDeleteSuccess:m}=z(),p=e([]),y=e([]),k=e([]),x=e(["Ziraat","Ä°ÅŸ BankasÄ±","Garanti","YapÄ± Kredi","Halkbank"]),D=e(!1),C=e(!1),B=e(!1),I=e(!1);e(!0);const P=e(!1),V=e({searchTerm:"",period:"",type:""}),N=a(()=>[{value:"",label:"TÃ¼m Tipler",icon:"ğŸ“¦"},...rl]),H=e=>null==e||isNaN(e)?"â‚º0.00":Number(e).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),U=a(()=>p.value.reduce((e,a)=>e+Number(a.amount||0),0)),E=a(()=>{const e=new Date,a=e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0");return p.value.filter(e=>K(e).startsWith(a)).reduce((e,a)=>e+Number(a.amount||0),0)}),L=a(()=>{const e=new Date,a=e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0");return p.value.filter(e=>K(e).startsWith(a)).length}),Y=a(()=>p.value.length),W=a(()=>k.value.reduce((e,a)=>e+Number(a.amount||0),0)),F=e=>{if(!e)return"bg-gray-500";const a=["bg-blue-500","bg-purple-500","bg-amber-500","bg-emerald-500","bg-red-500","bg-pink-500","bg-indigo-500","bg-teal-500"];return a[e.split("").reduce((e,a)=>e+a.charCodeAt(0),0)%a.length]};function K(e){return e.date||e.paymentDate||""}const O=a(()=>{let e=p.value;const a=V.value.searchTerm.toLowerCase();return V.value.type&&(e=e.filter(e=>nl(e.type)===V.value.type)),V.value.period&&(e=e.filter(e=>{const a=K(e);if(!a)return!1;const t=new Date(V.value.period),l=new Date(a);return l.getFullYear()===t.getFullYear()&&l.getMonth()===t.getMonth()})),a&&(e=e.filter(e=>X(e.tenantId).toLowerCase().includes(a)||sl(e.type).toLowerCase().includes(a)||e.bank&&e.bank.toLowerCase().includes(a)||e.amount&&e.amount.toString().includes(a))),e.sort((e,a)=>new Date(K(a))-new Date(K(e)))}),_=e({date:(new Date).toISOString().substring(0,10),tenantId:"",amount:null,type:"",bank:""}),R=e(!1),G=e(null),$=async()=>{P.value=!0;try{const e=await A.getPayments();p.value=e}catch(e){r(e,{component:"Payments",action:"fetchPayments"})}finally{P.value=!1}},q=async()=>{P.value=!0;try{const e=(await A.getAdvanceAccounts()).filter(e=>e.balance>0);k.value=e}catch(e){k.value=[],r(e,{component:"Payments",action:"fetchAdvanceAccounts"})}finally{P.value=!1}},X=e=>{const a=y.value.find(a=>a.id===e);return a?a.company||`${a.firstName} ${a.lastName}`:"Bilinmiyor"},J=()=>{D.value=!1,_.value={date:(new Date).toISOString().substring(0,10),tenantId:"",amount:null,type:"",bank:""},R.value=!1,G.value=null},Z=()=>{V.value={searchTerm:"",period:"",type:""},$()},Q=async()=>{D.value=!1,_.value={date:(new Date).toISOString().substring(0,10),tenantId:"",amount:null,type:"",bank:""},R.value=!1,G.value=null,await Promise.all([$(),q()]),c("Ã–deme")},ee=()=>{C.value=!1,q(),u("Avans hesabÄ± iÅŸlemi baÅŸarÄ±yla tamamlandÄ±")},ae=a(()=>{const e=[],a=new Date;for(let t=5;t>=0;t--){const l=new Date(a.getFullYear(),a.getMonth()-t,1),r=l.getFullYear()+"-"+String(l.getMonth()+1).padStart(2,"0"),n=l.toLocaleDateString("tr-TR",{month:"short"}),s=p.value.filter(e=>K(e).startsWith(r)).reduce((e,a)=>e+Number(a.amount||0),0);e.push({month:n,total:s})}return e}),te=a(()=>{const e=ae.value.map(e=>e.total);return Math.max(...e,1)}),le=a(()=>{const e={};return p.value.forEach(a=>{const t=nl(a.type)||"Other";e[t]||(e[t]={name:t,label:sl(t),icon:ol(t),count:0,total:0}),e[t].count++,e[t].total+=Number(a.amount||0)}),Object.values(e).sort((e,a)=>a.total-e.total)});return t(()=>{(async()=>{P.value=!0;try{const e=await j.getTenants();y.value=e}catch(e){r(e,{component:"Payments",action:"fetchTenants"})}finally{P.value=!1}})(),q(),$()}),(e,a)=>(o(),n("div",il,[i("div",dl,[i("div",ul,[a[10]||(a[10]=i("h1",{class:"text-3xl font-bold text-gray-800 dark:text-gray-100"},"KiracÄ± Ã–demeleri",-1)),i("div",cl,[i("div",ml," Toplam: "+v(H(U.value)),1),i("div",bl," Bu Ay: "+v(H(E.value)),1),i("div",gl,v(Y.value)+" Ã¶deme ",1)])]),i("section",vl,[i("div",pl,[a[12]||(a[12]=i("div",{class:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 rounded-full p-3"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),i("div",null,[a[11]||(a[11]=i("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Bu Ayki Gelir",-1)),i("p",yl,v(H(E.value)),1)])]),i("div",kl,[a[14]||(a[14]=i("div",{class:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 rounded-full p-3"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),i("div",null,[a[13]||(a[13]=i("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Toplam Gelir",-1)),i("p",xl,v(H(U.value)),1)])]),i("div",hl,[a[16]||(a[16]=i("div",{class:"bg-amber-100 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400 rounded-full p-3"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),i("div",null,[a[15]||(a[15]=i("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Bu Ayki Ä°ÅŸlem SayÄ±sÄ±",-1)),i("p",fl,v(L.value),1)])]),i("div",wl,[a[18]||(a[18]=i("div",{class:"bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-400 rounded-full p-3"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),i("div",null,[a[17]||(a[17]=i("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Toplam Avans",-1)),i("p",Ml,v(H(W.value)),1)])])]),i("section",Al,[a[19]||(a[19]=i("div",{class:"flex items-center justify-between mb-4"},[i("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-100"},"AylÄ±k Ã–deme GrafiÄŸi")],-1)),i("div",Dl,[(o(!0),n(b,null,g(ae.value,(e,a)=>(o(),n("div",{key:a,class:"flex-1 flex flex-col items-center gap-2"},[i("div",{class:"w-full bg-green-500 rounded-t",style:M({height:e.total/te.value*200+"px"})},null,4),i("span",Cl,v(e.month),1)]))),128))])]),i("section",Sl,[a[20]||(a[20]=i("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4"},"Ã–deme Tipi DaÄŸÄ±lÄ±mÄ±",-1)),i("div",zl,[(o(!0),n(b,null,g(le.value,e=>(o(),n("div",{key:e.name,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600"},[i("div",Bl,[i("span",Tl,v(e.icon),1),i("div",null,[i("p",jl,v(e.label),1),i("p",Il,v(e.count)+" Ã¶deme",1)])]),i("p",Pl,v(H(e.total)),1)]))),128))])]),i("div",Vl,[i("button",{onClick:a[0]||(a[0]=e=>D.value=!0),class:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all duration-300 flex items-center justify-center gap-3"},a[21]||(a[21]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),i("span",null,"Yeni Ã–deme Ekle",-1)]))]),i("div",Nl,[i("button",{onClick:a[1]||(a[1]=e=>C.value=!0),class:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-semibold py-3 px-4 rounded-xl shadow-lg transition-all duration-300 flex items-center justify-center gap-2"},a[22]||(a[22]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1),i("span",null,"Avans HesabÄ±",-1)])),i("button",{onClick:a[2]||(a[2]=e=>B.value=!0),class:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-3 px-4 rounded-xl shadow-lg transition-all duration-300 flex items-center justify-center gap-2"},a[23]||(a[23]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2z"})],-1),i("span",null,"Finansal Raporlar",-1)])),i("button",{onClick:a[3]||(a[3]=e=>I.value=!0),class:"bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white font-semibold py-3 px-4 rounded-xl shadow-lg transition-all duration-300 flex items-center justify-center gap-2"},a[24]||(a[24]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),i("span",null,"Sistem LoglarÄ±",-1)]))]),k.value.length>0?(o(),n("div",Hl,[a[26]||(a[26]=i("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),d(" Avans HesaplarÄ± ")],-1)),i("div",Ul,[(o(!0),n(b,null,g(k.value,e=>(o(),n("div",{key:e.id,class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800"},[i("div",El,[i("span",Ll,v(X(e.tenantId)),1),a[25]||(a[25]=i("span",{class:"badge badge-success badge-sm"},"Aktif",-1))]),i("p",Yl,v(H(e.amount)),1),i("p",Wl,v(e.paymentDate),1)]))),128))])])):s("",!0),i("div",Fl,[h(T,{search:V.value.searchTerm,"search-placeholder":"Firma, tutar, tip veya banka ara...",period:V.value.period,"select-type":V.value.type,"select-type-options":N.value,"onUpdate:search":a[4]||(a[4]=e=>V.value.value.searchTerm=e),"onUpdate:period":a[5]||(a[5]=e=>V.value.value.period=e),"onUpdate:selectType":a[6]||(a[6]=e=>V.value.value.type=e),onClearFilters:Z},null,8,["search","period","select-type","select-type-options"]),i("div",Kl,[0===O.value.length?(o(),n("div",Ol,a[27]||(a[27]=[i("p",null,"AramanÄ±zla eÅŸleÅŸen Ã¶deme bulunamadÄ±.",-1)]))):(o(),n("div",_l,[(o(!0),n(b,null,g(O.value,e=>{return o(),n("div",{key:e.id,class:"grid grid-cols-1 md:grid-cols-12 gap-4 items-center p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200 border-b dark:border-gray-700/50"},[i("div",Rl,[i("div",{class:w(["flex-shrink-0 h-12 w-12 flex items-center justify-center text-white rounded-full text-xl font-bold",F(X(e.tenantId))])},v((t=X(e.tenantId),t&&"Bilinmiyor"!==t?t.charAt(0).toUpperCase():"?")),3),i("div",null,[i("p",Gl,v(X(e.tenantId)),1),i("p",$l,v(K(e)),1)])]),i("div",ql,v(H(e.amount)),1),i("div",Xl,[i("p",Jl,[i("span",null,v(f(ol)(e.type)),1),i("span",null,v(f(sl)(e.type)),1)]),i("p",null,v(e.bank),1)]),i("div",Zl,[i("div",Ql,[a[28]||(a[28]=i("label",{tabindex:"0",class:"btn btn-ghost btn-sm"},"Ä°ÅŸlemler",-1)),i("ul",er,[i("li",null,[i("a",{onClick:a=>{return t=e,_.value={...t},G.value=t.id,R.value=!0,void(D.value=!0);var t}},"DÃ¼zenle",8,ar)]),i("li",null,[i("a",{onClick:a=>(async e=>{try{await A.deletePayment(e),m("Ã–deme"),await $(),await q()}catch(a){r(a,{component:"Payments",action:"deletePayment"})}})(e.id),class:"text-red-500"},"Sil",8,tr)])])])])]);var t}),128))]))])])]),h(Ge,{visible:D.value,payment:_.value,tenants:y.value,banks:x.value,editMode:R.value,onSave:Q,onCancel:J},null,8,["visible","payment","tenants","banks","editMode"]),C.value?(o(),n("dialog",lr,[i("div",rr,[i("div",nr,[a[29]||(a[29]=i("h3",{class:"text-xl font-bold"},"Avans HesabÄ± YÃ¶netimi",-1)),i("button",{onClick:a[7]||(a[7]=e=>C.value=!1),class:"btn btn-sm btn-ghost"},"âœ•")]),h(Pa,{onSuccess:ee})])])):s("",!0),B.value?(o(),n("dialog",sr,[i("div",or,[i("div",ir,[a[30]||(a[30]=i("h3",{class:"text-xl font-bold"},"Finansal Raporlar",-1)),i("button",{onClick:a[8]||(a[8]=e=>B.value=!1),class:"btn btn-sm btn-ghost"},"âœ•")]),h(st)])])):s("",!0),I.value?(o(),n("dialog",dr,[i("div",ur,[i("div",cr,[a[31]||(a[31]=i("h3",{class:"text-xl font-bold"},"Sistem LoglarÄ±",-1)),i("button",{onClick:a[9]||(a[9]=e=>I.value=!1),class:"btn btn-sm btn-ghost"},"âœ•")]),h(Xt)])])):s("",!0),P.value?(o(),n("div",mr,[h(tl)])):s("",!0)]))}};export{br as default};
