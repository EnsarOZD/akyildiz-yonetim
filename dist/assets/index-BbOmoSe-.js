const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OwnerDues-BC2H4Ddr.js","assets/vue-vendor-Bart4FG5.js","assets/utils-vendor-Cy2sLATb.js","assets/LoginView-C3NpLpQY.js","assets/useErrorHandler-ClkkjmfK.js","assets/LoginView-C1iQRfj9.css","assets/LandingPage-rC4XxpFa.js","assets/LandingPage-Dh5cAk9d.css","assets/Dashboard-BrM6_qUQ.js","assets/paymentsService-C0mR9Igb.js","assets/expensesService-hXWDEm0r.js","assets/tenantsService-D7zXuWjI.js","assets/ownerDuesService-DhGMKQL0.js","assets/ownersService-DzIHhHEK.js","assets/utilityDebtsService-C9I6VQLZ.js","assets/ManualDebtModal-wQQuZByz.js","assets/Tenants-Bt_MbnYc.js","assets/tenantsService-DJ11mlzP.js","assets/uiHelpers-DqgNUpgi.js","assets/ConfirmDeleteModal-OapZcbNC.js","assets/TenantDetailPage-D8YUUl0n.js","assets/AdvanceAccountManager-FSxumZeR.js","assets/enums-CeMB0k1K.js","assets/AdvanceAccountManager-CKigNg8W.css","assets/Payments-BtDy1YXV.js","assets/CustomFilterBar-qL-H0Yc_.js","assets/Expenses-D-0nQQRp.js","assets/Utilities-Bp8Gue2h.js","assets/FilterBar-BokencTL.js","assets/Flats-D9lz4Umx.js","assets/ReportsView-CObagIPo.js","assets/ReportsView-Bf-Xa7Nz.css","assets/NotificationsView-9J2bDNwq.js","assets/AdminDashboard-D1b0RFIX.js","assets/OwnerDuesPanel-DmetM4V0.js","assets/units-DJG6lNYB.js","assets/Owners-CnrvhQh7.js","assets/ProfileView-OeYLgPyb.js","assets/SetPasswordView-BGTbX80H.js","assets/NotFound-BwAkckp8.js","assets/Transactions-BTSapfbb.js","assets/Overdue-DMztKknI.js","assets/OwnerPayments-CTniHkHC.js","assets/OverdueOwnerPayments-BeaWg69e.js"])))=>i.map(i=>d[i]);
import{d as e,r as t,c as a,o as r,a as n,u as s,w as o,b as i,e as l,f as u,g as c,h as d,F as m,i as h,j as p,t as g,T as y,k as f,l as v,m as w,n as k,p as b,q as x,s as _,v as A,x as E,y as S,z as M,A as T,B as L,C as P,D as C}from"./vue-vendor-Bart4FG5.js";import{b as O,a as z,c as I,d as N,f as D}from"./utils-vendor-Cy2sLATb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const R=(()=>{let e="https://api.akyildizyonetim.com/api";return!e||e.endsWith("/api")||e.endsWith("/api/")||(e=e.endsWith("/")?`${e}api`:`${e}/api`),e})();const j=new class{constructor(){this.baseURL=R}getAuthToken(){return localStorage.getItem("authToken")}async request(e,t={}){const a=`${this.baseURL}${e}`,r={"Content-Type":"application/json",...t.headers},n=this.getAuthToken();n&&(r.Authorization=`Bearer ${n}`);const s={headers:r,...t};try{const t=await fetch(a,s);if(!t.ok){let a=null,r=`Bir hata oluştu. (HTTP ${t.status})`;try{const e=await t.text();if(e)try{a=JSON.parse(e),r=a.errorMessage||a.message||r}catch{a=e}}catch(o){}const n=new Error(r);n.status=t.status,n.response={status:t.status,data:a},n.apiError={status:t.status,data:a,message:r};const s=e.includes("/auth/login"),i="/login"===window.location.pathname||window.location.hash.includes("/login");throw 401!==t.status||s||i||(localStorage.removeItem("authToken"),window.location.href="/login"),n}const r=await t.text();if(!r)return null;try{return JSON.parse(r)}catch(i){throw new Error("Geçersiz JSON yanıtı")}}catch(l){throw l}}async get(e,t={}){const a=new URLSearchParams(t).toString(),r=a?`${e}?${a}`:e;return this.request(r,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:JSON.stringify(t)})}async put(e,t){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async patch(e,t){return this.request(e,{method:"PATCH",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}async uploadFile(e,t,a=null){const r=new FormData;r.append("file",t);const n={},s=this.getAuthToken();return s&&(n.Authorization=`Bearer ${s}`),this.request(e,{method:"POST",headers:n,body:r})}};const V=new class{constructor(){this.currentUser=null,this.authListeners=[]}async login(e,t){try{const a=await j.post("/Auth/login",{email:e,password:t});if(a){const e=a.token||a.accessToken||a.access_token||a.jwt;if(e)return localStorage.setItem("authToken",e),this.currentUser=a.user||a.data||a,this.notifyAuthListeners(this.currentUser),a;{this.currentUser=a.user||a.data||a;const e=btoa(JSON.stringify(this.currentUser));return localStorage.setItem("authToken",e),this.notifyAuthListeners(this.currentUser),a}}throw new Error("Boş yanıt alındı")}catch(a){throw a}}async logout(){try{await j.post("/Auth/logout")}catch(e){}finally{localStorage.removeItem("authToken"),this.currentUser=null,this.notifyAuthListeners(null)}}async register(e){try{const t=await j.post("/auth/register",e);return t.token&&(localStorage.setItem("authToken",t.token),this.currentUser=t.user,this.notifyAuthListeners(this.currentUser)),t}catch(t){throw t}}async checkAuthStatus(){try{if(this.currentUser)return this.currentUser;const a=localStorage.getItem("authToken");if(!a)return this.currentUser=null,this.notifyAuthListeners(null),null;if(!this.isTokenValid(a)){try{const e=JSON.parse(atob(a));if(e&&e.email)return this.currentUser=e,this.notifyAuthListeners(this.currentUser),this.currentUser}catch(e){}return localStorage.removeItem("authToken"),this.currentUser=null,this.notifyAuthListeners(null),null}try{const e=await j.get("/Auth/me");return this.currentUser=e.user||e,this.notifyAuthListeners(this.currentUser),this.currentUser}catch(t){const e=this.decodeJWT(a);return e&&e.sub?(this.currentUser={id:e.sub,email:e.email,role:e.role||e.role_name,firstName:e.firstName||e.given_name,lastName:e.lastName||e.family_name},this.notifyAuthListeners(this.currentUser),this.currentUser):(localStorage.removeItem("authToken"),this.currentUser=null,this.notifyAuthListeners(null),null)}}catch(a){return localStorage.removeItem("authToken"),this.currentUser=null,this.notifyAuthListeners(null),null}}async resetPassword(e){return j.post("/auth/reset-password-request",{email:e})}async setPassword(e,t,a){return j.post("/auth/reset-password",{email:e,token:t,newPassword:a})}async changePassword(e,t){return j.post("/auth/change-password",{currentPassword:e,newPassword:t})}onAuthStateChanged(e){return this.authListeners.push(e),this.currentUser&&e(this.currentUser),()=>{const t=this.authListeners.indexOf(e);t>-1&&this.authListeners.splice(t,1)}}notifyAuthListeners(e){this.authListeners.forEach(t=>{try{t(e)}catch(a){}})}getToken(){return localStorage.getItem("authToken")}isAuthenticated(){return!!this.currentUser&&!!this.getToken()}hasRole(e){return this.currentUser&&this.currentUser.role===e}decodeJWT(e){try{const t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(a)}catch(t){return null}}isTokenValid(e){if(!e)return!1;try{const t=this.decodeJWT(e);if(!t)return!1;const a=Date.now()/1e3;return!(t.exp&&t.exp<a)}catch(t){return!1}}async testBackendConnection(){try{return await j.get("/health")}catch(e){throw e}}async testAuthEndpoints(){try{return await j.get("/auth/me")}catch(e){return null}}async testJWTToken(){const e=localStorage.getItem("authToken");if(e){return this.decodeJWT(e)}return null}},B=e("auth",()=>{const e=t(null),a=t(null),r=t(null),n=t(null),s=t(null),o=t(!1),i=t(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));async function l(){try{const t=await V.checkAuthStatus();t?(e.value={id:t.id,email:t.email},a.value=t.role?t.role.toLowerCase():null,r.value=t.companyId,n.value=`${t.firstName||""} ${t.lastName||""}`.trim(),s.value=t.email):u()}catch(t){u()}finally{o.value=!0}}function u(){e.value=null,a.value=null,r.value=null,n.value=null,s.value=null}return{user:e,role:a,companyId:r,fullName:n,email:s,isInitialized:o,theme:i,fetchUserProfile:l,clearUser:u,initAuthListener:function(){return l(),void V.onAuthStateChanged(e=>{e?l():(u(),o.value=!0)})},toggleTheme:function(){i.value="dark"===i.value?"light":"dark",localStorage.setItem("theme",i.value)}}}),U={getNotifications:async(e=!1,t=20,a=0)=>await j.get("/notifications",{unreadOnly:e,take:t,skip:a}),async markAsRead(e){await j.post(`/notifications/${e}/read`)},async markAllAsRead(){await j.post("/notifications/read-all")}},W=e("notifications",()=>{const e=t([]),r=t(0),n=t(0),s=t(!1),o=a(()=>e.value.filter(e=>!e.isRead));return{items:e,unreadCount:r,totalCount:n,loading:s,unreadItems:o,refresh:async function(){s.value=!0;try{const t=await U.getNotifications(!1,20,0);e.value=t.items||[],n.value=t.totalCount||0,r.value=t.unreadCount||0}catch(t){}finally{s.value=!1}},fetchMore:async function(){if(!(e.value.length>=n.value)){s.value=!0;try{const t=await U.getNotifications(!1,20,e.value.length);e.value=[...e.value,...t.items||[]],n.value=t.totalCount||n.value,r.value=t.unreadCount||r.value}catch(t){}finally{s.value=!1}}},markAsRead:async function(t){try{await U.markAsRead(t);const a=e.value.find(e=>e.id===t);a&&!a.isRead&&(a.isRead=!0,r.value=Math.max(0,r.value-1))}catch(a){}},markAllAsRead:async function(){try{await U.markAllAsRead(),e.value.forEach(e=>e.isRead=!0),r.value=0}catch(t){}}}});function H(){const e=a(()=>"Akyıldız İş Merkezi"),t=a(()=>"Akyıldız");return{logoUrl:a(()=>"/logo-default.svg"),appName:e,shortName:t,themeColor:a(()=>"#0b1220")}}const q={ADMIN:"admin",MANAGER:"manager",OWNER:"owner",TENANT:"tenant",OBSERVER:"observer",DATA_ENTRY:"dataentry"},$={[q.ADMIN]:"Sistem Yöneticisi",[q.MANAGER]:"Yönetici (Müdür)",[q.OWNER]:"Mal Sahibi",[q.TENANT]:"Kiracı",[q.OBSERVER]:"Gözlemci (Avukat vb.)",[q.DATA_ENTRY]:"Veri Giriş Sorumlusu"},K={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarım dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklaşık 1 saat",other:"yaklaşık {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gün",other:"{{count}} gün"},aboutXWeeks:{one:"yaklaşık 1 hafta",other:"yaklaşık {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklaşık 1 ay",other:"yaklaşık {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklaşık 1 yıl",other:"yaklaşık {{count}} yıl"},xYears:{one:"1 yıl",other:"{{count}} yıl"},overXYears:{one:"1 yıldan fazla",other:"{{count}} yıldan fazla"},almostXYears:{one:"neredeyse 1 yıl",other:"neredeyse {{count}} yıl"}},Y={date:O({formats:{full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},defaultWidth:"full"}),time:O({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:O({formats:{full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},G={lastWeek:"'geçen hafta' eeee 'saat' p",yesterday:"'dün saat' p",today:"'bugün saat' p",tomorrow:"'yarın saat' p",nextWeek:"eeee 'saat' p",other:"P"},J={code:"tr",formatDistance:(e,t,a)=>{let r;const n=K[e];return r="string"==typeof n?n:1===t?n.one:n.other.replace("{{count}}",t.toString()),(null==a?void 0:a.addSuffix)?a.comparison&&a.comparison>0?r+" sonra":r+" önce":r},formatLong:Y,formatRelative:(e,t,a,r)=>G[e],localize:{ordinalNumber:(e,t)=>Number(e)+".",era:z({values:{narrow:["MÖ","MS"],abbreviated:["MÖ","MS"],wide:["Milattan Önce","Milattan Sonra"]},defaultWidth:"wide"}),quarter:z({values:{narrow:["1","2","3","4"],abbreviated:["1Ç","2Ç","3Ç","4Ç"],wide:["İlk çeyrek","İkinci Çeyrek","Üçüncü çeyrek","Son çeyrek"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:z({values:{narrow:["O","Ş","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],wide:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"]},defaultWidth:"wide"}),day:z({values:{narrow:["P","P","S","Ç","P","C","C"],short:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","Çar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"]},defaultWidth:"wide"}),dayPeriod:z({values:{narrow:{am:"öö",pm:"ös",midnight:"gy",noon:"ö",morning:"sa",afternoon:"ös",evening:"ak",night:"ge"},abbreviated:{am:"ÖÖ",pm:"ÖS",midnight:"gece yarısı",noon:"öğle",morning:"sabah",afternoon:"öğleden sonra",evening:"akşam",night:"gece"},wide:{am:"Ö.Ö.",pm:"Ö.S.",midnight:"gece yarısı",noon:"öğle",morning:"sabah",afternoon:"öğleden sonra",evening:"akşam",night:"gece"}},defaultWidth:"wide",formattingValues:{narrow:{am:"öö",pm:"ös",midnight:"gy",noon:"ö",morning:"sa",afternoon:"ös",evening:"ak",night:"ge"},abbreviated:{am:"ÖÖ",pm:"ÖS",midnight:"gece yarısı",noon:"öğlen",morning:"sabahleyin",afternoon:"öğleden sonra",evening:"akşamleyin",night:"geceleyin"},wide:{am:"ö.ö.",pm:"ö.s.",midnight:"gece yarısı",noon:"öğlen",morning:"sabahleyin",afternoon:"öğleden sonra",evening:"akşamleyin",night:"geceleyin"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:N({matchPattern:/^(\d+)(\.)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:I({matchPatterns:{narrow:/^(mö|ms)/i,abbreviated:/^(mö|ms)/i,wide:/^(milattan önce|milattan sonra)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(^mö|^milattan önce)/i,/(^ms|^milattan sonra)/i]},defaultParseWidth:"any"}),quarter:I({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^[1234]ç/i,wide:/^((i|İ)lk|(i|İ)kinci|üçüncü|son) çeyrek/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1ç/i,/2ç/i,/3ç/i,/4ç/i],wide:[/^(i|İ)lk çeyrek/i,/(i|İ)kinci çeyrek/i,/üçüncü çeyrek/i,/son çeyrek/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:I({matchPatterns:{narrow:/^[oşmnhtaek]/i,abbreviated:/^(oca|şub|mar|nis|may|haz|tem|ağu|eyl|eki|kas|ara)/i,wide:/^(ocak|şubat|mart|nisan|mayıs|haziran|temmuz|ağustos|eylül|ekim|kasım|aralık)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^o/i,/^ş/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^ş/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^ağ/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},defaultParseWidth:"any"}),day:I({matchPatterns:{narrow:/^[psçc]/i,short:/^(pz|pt|sa|ça|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|çar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|salı|çarşamba|perşembe|cuma(?!rtesi)|cumartesi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^p/i,/^p/i,/^s/i,/^ç/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^ça/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^salı/i,/^çarşamba/i,/^perşembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},defaultParseWidth:"any"}),dayPeriod:I({matchPatterns:{narrow:/^(öö|ös|gy|ö|sa|ös|ak|ge)/i,any:/^(ö\.?\s?[ös]\.?|öğleden sonra|gece yarısı|öğle|(sabah|öğ|akşam|gece)(leyin))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^ö\.?ö\.?/i,pm:/^ö\.?s\.?/i,midnight:/^(gy|gece yarısı)/i,noon:/^öğ/i,morning:/^sa/i,afternoon:/^öğleden sonra/i,evening:/^ak/i,night:/^ge/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};function F(e,t){const a=a=>{const r=s(e);r&&!r.contains(a.target)&&t(a)};r(()=>{setTimeout(()=>{window.addEventListener("mousedown",a),window.addEventListener("touchstart",a)},0)}),n(()=>{window.removeEventListener("mousedown",a),window.removeEventListener("touchstart",a)})}const X={NETWORK:"network",AUTH:"auth",VALIDATION:"validation",PERMISSION:"permission",NOT_FOUND:"not_found",SYSTEM:"system"},Z={[X.NETWORK]:{title:"Bağlantı Hatası",message:"İnternet bağlantınızı kontrol edin ve tekrar deneyin.",action:"Tekrar Dene"},[X.AUTH]:{title:"Yetkilendirme Hatası",message:"Bu işlem için yetkiniz bulunmuyor. Lütfen tekrar giriş yapın.",action:"Giriş Yap"},[X.VALIDATION]:{title:"Geçersiz Veri",message:"Lütfen girdiğiniz bilgileri kontrol edin.",action:"Düzelt"},[X.PERMISSION]:{title:"Erişim Reddedildi",message:"Bu sayfaya erişim yetkiniz bulunmuyor.",action:"Ana Sayfaya Dön"},[X.NOT_FOUND]:{title:"Bulunamadı",message:"Aradığınız kayıt bulunamadı.",action:"Geri Dön"},[X.SYSTEM]:{title:"Sistem Hatası",message:"Beklenmeyen bir hata oluştu. Lütfen daha sonra tekrar deneyin.",action:"Tekrar Dene"}},Q={400:"Geçersiz istek gönderildi.",401:"Oturum süresi doldu. Lütfen tekrar giriş yapın.",403:"Bu işlem için yetkiniz bulunmuyor.",404:"Aradığınız kayıt bulunamadı.",409:"Bu kayıt zaten mevcut.",422:"Geçersiz veri gönderildi.",429:"Çok fazla istek gönderildi. Lütfen bir süre bekleyin.",500:"Sunucu hatası oluştu. Lütfen daha sonra tekrar deneyin.",502:"Sunucu geçici olarak kullanılamıyor.",503:"Servis geçici olarak kullanılamıyor.",504:"Sunucu yanıt vermiyor."};class ee extends Error{constructor(e,t,a=null,r={}){super(t),this.name="AppError",this.type=e,this.originalError=a,this.context=r,this.timestamp=(new Date).toISOString()}getDisplayMessage(){const e=Z[this.type]||{title:"Hata",message:"Beklenmeyen bir hata oluştu.",action:"Tekrar Dene"};return{title:e.title,message:this.message||e.message,action:e.action}}}function te(e,t,a=null,r={}){return{type:e,message:t,originalError:a,context:r,timestamp:(new Date).toISOString(),id:Math.random().toString(36).substr(2,9)}}function ae(e){var t,a,r,n;const s=e=>{if(!e)return null;if(Array.isArray(e)&&e.length)return e.join("\n");if("object"==typeof e){const t=[];for(const a of Object.keys(e)){const r=e[a];Array.isArray(r)?t.push(...r.filter(Boolean)):"string"==typeof r&&r.trim()&&t.push(r)}if(t.length)return t.join("\n")}return null};try{const r=null==(t=null==e?void 0:e.apiError)?void 0:t.data;if(r){const e=s(r.errors);if(e)return e;if("string"==typeof r.errorMessage&&r.errorMessage.trim())return r.errorMessage;if("string"==typeof r&&r.trim())return r;if("string"==typeof r.message&&r.message.trim())return r.message;if("string"==typeof r.title&&r.title.trim())return r.title}const n=null==(a=null==e?void 0:e.response)?void 0:a.data;if(n){if("string"==typeof n&&n.trim())return n;const e=s(n.errors);if(e)return e;if("string"==typeof n.errorMessage&&n.errorMessage.trim())return n.errorMessage;if("string"==typeof n.message&&n.message.trim())return n.message;if("string"==typeof n.title&&n.title.trim())return n.title}}catch(i){}const o=(null==(r=null==e?void 0:e.apiError)?void 0:r.status)||(null==e?void 0:e.status)||(null==(n=null==e?void 0:e.response)?void 0:n.status);return o&&Q[o]?Q[o]:"string"==typeof(null==e?void 0:e.message)&&e.message.trim()?e.message:"Beklenmeyen bir hata oluştu."}const re=new class{constructor(){this.errorListeners=[],this.errorHistory=[]}logError(e,t={}){const a=e instanceof ee?e:new ee(function(e){var t,a,r,n;const s=(null==(t=null==e?void 0:e.apiError)?void 0:t.status)||(null==e?void 0:e.status)||(null==(a=null==e?void 0:e.response)?void 0:a.status);if(s){if(401===s)return X.AUTH;if(403===s)return X.PERMISSION;if(404===s)return X.NOT_FOUND;if(400===s||422===s)return X.VALIDATION;if(s>=500)return X.SYSTEM;if(s>=400)return X.VALIDATION}return(null==(r=null==e?void 0:e.message)?void 0:r.toLowerCase().includes("network"))||(null==(n=null==e?void 0:e.message)?void 0:n.toLowerCase().includes("fetch"))?X.NETWORK:X.SYSTEM}(e),ae(e),e,t);return this.errorHistory.push(a),this.notifyListeners(a),a}logSuccess(e,t,a={}){const r={id:Math.random().toString(36).substr(2,9),type:e,message:t,context:a,timestamp:(new Date).toISOString()};return this.notifyListeners(r),r}addListener(e){"function"==typeof e&&this.errorListeners.push(e)}removeListener(e){this.errorListeners=this.errorListeners.filter(t=>t!==e)}notifyListeners(e){this.errorListeners.forEach(t=>{try{t(e)}catch(a){}})}getErrorHistory(){return this.errorHistory}clearErrorHistory(){this.errorHistory=[]}};function ne(){const e=(e,t={})=>{re.logSuccess("success",e,t)};return{showError:(e,t={})=>{re.logError("error",e,t)},showSuccess:e,showInfo:(e,t={})=>{re.logSuccess("info",e,t)},showWarning:(e,t={})=>{re.logSuccess("warning",e,t)},showCreateSuccess:t=>{e(`${t} başarıyla oluşturuldu.`,{action:"create"})},showUpdateSuccess:t=>{e(`${t} başarıyla güncellendi.`,{action:"update"})},showDeleteSuccess:t=>{e(`${t} başarıyla silindi.`,{action:"delete"})},showSaveSuccess:t=>{e(`${t} başarıyla kaydedildi.`,{action:"save"})},showImportSuccess:t=>{e(`${t} kayıt başarıyla içe aktarıldı.`,{action:"import"})},showExportSuccess:t=>{e(`${t} başarıyla dışa aktarıldı.`,{action:"export"})}}}function se(){const{showSuccess:e,showError:t,showInfo:a,showWarning:r}=ne();return{notifySuccess:(t,a={})=>{e(t,a)},notifyError:(e,a={})=>{t(e,a)},notifyInfo:(e,t={})=>{a(e,t)},notifyWarning:(e,t={})=>{r(e,t)}}}window.addEventListener("error",e=>{re.logError(e.error,{filename:e.filename,lineno:e.lineno,colno:e.colno})}),window.addEventListener("unhandledrejection",e=>{re.logError(e.reason,{type:"unhandledrejection"})});const oe=(e,t)=>{const a=e.__vccOpts||e;for(const[r,n]of t)a[r]=n;return a},ie={class:"bg-white dark:bg-gray-800 shadow-md sticky top-0 z-50"},le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ue={class:"flex items-center justify-between h-16"},ce={class:"flex items-center"},de=["src","alt"],me={class:"text-xl font-semibold font-cormorantSC hidden md:block uppercase"},he={class:"hidden md:flex md:items-center md:space-x-2"},pe={class:"flex items-center"},ge={key:0,class:"absolute top-1 right-1 flex h-4 w-4"},ye={class:"relative inline-flex rounded-full h-4 w-4 bg-red-500 text-[10px] text-white items-center justify-center font-bold"},fe={key:0,class:"origin-top-right absolute right-0 mt-2 w-80 rounded-lg shadow-xl py-1 bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden"},ve={class:"px-4 py-2 text-sm font-bold border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-900/50"},we={class:"max-h-96 overflow-y-auto"},ke={key:0,class:"p-8 text-center"},be={key:1,class:"p-8 text-center text-gray-500"},xe={key:2},_e=["onClick"],Ae={key:0,class:"absolute left-1 top-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-blue-600 rounded-full"},Ee={class:"text-sm font-semibold text-gray-900 dark:text-white line-clamp-1"},Se={class:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2 mt-0.5"},Me={class:"text-[10px] text-gray-400 mt-1"},Te=["aria-label"],Le={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Pe={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ce={class:"hidden sm:inline"},Oe={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"},ze={class:"px-4 py-2 text-xs text-gray-500 border-b"},Ie={class:"font-semibold text-gray-700"},Ne={class:"ml-2 -mr-2 flex md:hidden"},De={key:0,class:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},Re={key:1,class:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},je={key:0,class:"md:hidden fixed inset-x-0 top-16 bg-white dark:bg-gray-800 shadow-xl border-b border-gray-200 dark:border-gray-700 z-50 overflow-y-auto max-h-[calc(100vh-4rem)]",id:"mobile-menu"},Ve={class:"px-3 pt-2 pb-6 space-y-1"},Be={key:0,class:"pt-4 border-t border-gray-100 dark:border-gray-700 px-4"},Ue={key:1,class:"border-t border-gray-100 dark:border-gray-700 pt-4 mt-4 px-4"},We=oe({__name:"Header",setup(e){const A=B(),E=W(),{logoUrl:S,appName:M}=H(),T=f(),L=v(),P=t(null),C=t([]),O=t(!1),z=t(!1),I=t(!1),{isDemoMode:N}=function(){const e="https://api.akyildizyonetim.com/api",t=a(()=>!1),r=a(()=>e.includes("akyildizyonetim.com"));return{apiBaseUrl:e,isDemoMode:t,isProduction:r}}(),{notifySuccess:R,notifyError:j,notifyInfo:U}=se(),$=t(null),K=t(null);F($,()=>{O.value=!1}),F(K,()=>{z.value=!1});const Y=e=>{const t=(e||"").toLowerCase();C.value=t===q.ADMIN||t===q.MANAGER||t===q.DATA_ENTRY?[{label:"Özet",value:"dashboard",route:"/dashboard"},{label:"Kiracılar",value:"tenants",route:"/tenants"},{label:"Mal Sahipleri",value:"owners",route:"/owners"},{label:"Ödemeler",value:"payments",route:"/payments"},{label:"Giderler",value:"expenses",route:"/expenses"},{label:"Borçlar",value:"utilities",route:"/utilities"},{label:"Üniteler",value:"flats",route:"/flats"},{label:"Raporlar",value:"reports",route:"/reports"}]:t===q.TENANT?[{label:"Özet",value:"dashboard",route:"/dashboard"},{label:"Profilim",value:"profile",route:"/profile"}]:t===q.OWNER?[{label:"Özet",value:"dashboard",route:"/dashboard"},{label:"Mülklerim",value:"my-properties",route:"/my-properties"}]:t===q.OBSERVER?[{label:"Özet",value:"dashboard",route:"/dashboard"},{label:"Ödemeler",value:"payments",route:"/payments"},{label:"Raporlar",value:"reports",route:"/reports"}]:[]};r(()=>{(async()=>{try{const e=await V.checkAuthStatus();e?(P.value={firstName:e.firstName||e.name||"Kullanıcı",lastName:e.lastName||"",role:e.role||"Bilinmiyor"},Y(e.role)):(P.value=null,C.value=[])}catch(e){P.value=null,C.value=[]}})(),A.user&&E.refresh()}),n(()=>{}),o(()=>A.user,e=>{e&&E.refresh()}),o(T,()=>{I.value=!1});const G=()=>{O.value=!O.value,O.value&&(z.value=!1)},X=()=>{z.value=!z.value,z.value&&(O.value=!1,E.refresh())},Z=async()=>{O.value=!1;try{await V.logout(),P.value=null,C.value=[],L.push("/login")}catch(e){P.value=null,C.value=[],L.push("/login")}},Q=async()=>{if(N.value)return U("Demo modu: Şifre sıfırlama bağlantısı e-posta adresinize gönderildi."),void(O.value=!1);try{const e=await V.checkAuthStatus();e&&e.email?(await V.resetPassword(e.email),R("Şifre sıfırlama bağlantısı e-posta adresinize gönderildi.")):j("Kullanıcı bilgileri bulunamadı.")}catch(e){j("Bir hata oluştu. Lütfen tekrar deneyin.")}O.value=!1};return(e,t)=>{const a=d("router-link");return w(),i("header",ie,[l("div",le,[l("div",ue,[l("div",ce,[u(a,{to:"/",class:"flex-shrink-0 flex items-center gap-2"},{default:c(()=>[l("img",{src:s(S),class:"h-9 w-9 text-blue-600 dark:text-blue-400",alt:s(M)},null,8,de),l("span",me,g(s(M)),1)]),_:1})]),l("nav",he,[(w(!0),i(m,null,h(C.value,e=>(w(),k(a,{key:e.value,to:e.route,class:x(["px-3 py-2 rounded-md text-sm font-medium transition-colors",[s(T).path===e.route?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"]])},{default:c(()=>[b(g(e.label),1)]),_:2},1032,["to","class"]))),128))]),l("div",pe,[P.value?(w(),i("div",{key:0,class:"relative mr-2",ref_key:"notificationsRef",ref:K},[l("button",{onClick:X,class:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition relative","aria-label":"Bildirimleri göster"},[t[8]||(t[8]=l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})],-1)),s(E).unreadCount>0?(w(),i("span",ge,[t[7]||(t[7]=l("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"},null,-1)),l("span",ye,g(s(E).unreadCount>9?"9+":s(E).unreadCount),1)])):p("",!0)]),u(y,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:c(()=>[z.value?(w(),i("div",fe,[l("div",ve,[t[9]||(t[9]=l("span",{class:"text-gray-900 dark:text-white"},"Bildirimler",-1)),l("button",{onClick:t[0]||(t[0]=(...e)=>s(E).markAllAsRead&&s(E).markAllAsRead(...e)),class:"text-xs text-blue-600 hover:underline font-medium"},"Tümünü oku")]),l("div",we,[s(E).loading&&0===s(E).items.length?(w(),i("div",ke,t[10]||(t[10]=[l("span",{class:"loading loading-spinner text-blue-600"},null,-1)]))):0===s(E).items.length?(w(),i("div",be,t[11]||(t[11]=[l("p",{class:"text-sm"},"Henüz bildirim bulunmuyor.",-1)]))):(w(),i("div",xe,[(w(!0),i(m,null,h(s(E).items.slice(0,5),e=>{return w(),i("div",{key:e.id,onClick:t=>(async e=>{e.isRead||await E.markAsRead(e.id),z.value=!1,"Debt"===e.type&&L.push("/dashboard")})(e),class:x(["px-4 py-3 border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition relative",{"bg-blue-50/50 dark:bg-blue-900/10":!e.isRead}])},[e.isRead?p("",!0):(w(),i("div",Ae)),l("p",Ee,g(e.title),1),l("p",Se,g(e.message),1),l("p",Me,g((t=e.createdAt,t?D(new Date(t),{addSuffix:!0,locale:J}):"")),1)],10,_e);var t}),128))]))]),u(a,{to:"/notifications",onClick:t[1]||(t[1]=e=>z.value=!1),class:"block w-full text-center py-2 text-sm text-blue-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition font-semibold border-t dark:border-gray-700"},{default:c(()=>t[12]||(t[12]=[b(" Tüm Bildirimleri Gör ")])),_:1,__:[12]})])):p("",!0)]),_:1})],512)):p("",!0),l("button",{onClick:t[2]||(t[2]=(...e)=>s(A).toggleTheme&&s(A).toggleTheme(...e)),class:"mr-2 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition","aria-label":"dark"===s(A).theme?"Açık moda geç":"Karanlık moda geç"},["dark"===s(A).theme?(w(),i("svg",Le,t[13]||(t[13]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v1m0 16v1m8.66-13.66l-.71.71M4.05 19.07l-.71.71M21 12h-1M4 12H3m16.66 5.66l-.71-.71M4.05 4.93l-.71-.71M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)]))):(w(),i("svg",Pe,t[14]||(t[14]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z"},null,-1)])))],8,Te),P.value?(w(),i("div",{key:1,class:"relative",ref_key:"userMenuRef",ref:$},[l("button",{onClick:G,class:"flex items-center gap-2 text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white","aria-label":"Kullanıcı menüsünü aç"},[t[15]||(t[15]=l("span",{class:"sr-only"},"Kullanıcı menüsünü aç",-1)),l("span",Ce,g(P.value.firstName),1),t[16]||(t[16]=l("svg",{class:"h-8 w-8 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-5.5-2.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zM10 12a5.5 5.5 0 00-4.52 2.39a.75.75 0 001.33.82a3.5 3.5 0 016.38 0a.75.75 0 001.33-.82A5.5 5.5 0 0010 12z","clip-rule":"evenodd"})],-1))]),u(y,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:c(()=>[O.value?(w(),i("div",Oe,[l("div",ze,[l("p",Ie,g(P.value.firstName)+" "+g(P.value.lastName),1),l("p",null,g(P.value.role),1)]),P.value.role.toLowerCase()===s(q).ADMIN?(w(),k(a,{key:0,to:"/admin",class:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:t[3]||(t[3]=e=>O.value=!1)},{default:c(()=>t[17]||(t[17]=[l("svg",{class:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.094c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.894.15c.542.09.94.56.94 1.109v1.094c0 .55-.398 1.02-.94 1.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107 1.204l.527.738a1.125 1.125 0 01-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527a1.125 1.125 0 01-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15a1.125 1.125 0 01-.94-1.11v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125 1.125 0 01.12-1.45l.774-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),b(" Sistem Ayarları ")])),_:1,__:[17]})):p("",!0),l("a",{href:"#",onClick:_(Q,["prevent"]),class:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},t[18]||(t[18]=[l("svg",{class:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})],-1),b(" Şifre Değiştir ")])),l("a",{href:"#",onClick:_(Z,["prevent"]),class:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},t[19]||(t[19]=[l("svg",{class:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})],-1),b(" Çıkış Yap ")]))])):p("",!0)]),_:1})],512)):p("",!0),l("div",Ne,[l("button",{onClick:t[4]||(t[4]=(...t)=>e.toggleMobileMenu&&e.toggleMobileMenu(...t)),class:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white"},[t[22]||(t[22]=l("span",{class:"sr-only"},"Ana menüyü aç",-1)),I.value?(w(),i("svg",Re,t[21]||(t[21]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(w(),i("svg",De,t[20]||(t[20]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},null,-1)])))])])])])]),u(y,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:c(()=>[I.value?(w(),i("div",je,[l("div",Ve,[(w(!0),i(m,null,h(C.value,e=>(w(),k(a,{key:e.value,to:e.route,onClick:t[5]||(t[5]=e=>I.value=!1),class:x(["flex items-center gap-3 px-4 py-3 rounded-lg text-base font-semibold transition-all",[s(T).path===e.route?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"]])},{default:c(()=>[b(g(e.label),1)]),_:2},1032,["to","class"]))),128)),s(A).user?(w(),i("div",Ue,[t[25]||(t[25]=l("p",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3"},"Hesap",-1)),l("button",{onClick:Z,class:"flex items-center gap-3 w-full text-left px-0 py-3 text-red-600 font-bold hover:opacity-80"},t[24]||(t[24]=[l("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})],-1),b(" Çıkış Yap ")]))])):(w(),i("div",Be,[u(a,{to:"/",onClick:t[6]||(t[6]=e=>I.value=!1),class:"btn btn-primary w-full"},{default:c(()=>t[23]||(t[23]=[b("Giriş Yap")])),_:1,__:[23]})]))])])):p("",!0)]),_:1})])}}},[["__scopeId","data-v-ea7fc41b"]]),He={class:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50 px-6 pb-safe pt-2 shadow-[0_-4px_10px_rgba(0,0,0,0.05)]"},qe={class:"flex justify-between items-center max-w-sm mx-auto"},$e=oe({__name:"MobileBottomNav",setup(e){const t=B(),r=a(()=>{const e=(t.role||"").toLowerCase();return"tenant"===e?[{name:"Ana Sayfa",path:"/dashboard",icon:n},{name:"Profilim",path:"/profile",icon:p},{name:"Ödemelerim",path:"/dashboard",icon:o}]:[{name:"Panel",path:"admin"===e?"/admin":"/dashboard",icon:n},{name:"Kiracılar",path:"/tenants",icon:s},{name:"Ödemeler",path:"/payments",icon:o},{name:"Raporlar",path:"/reports",icon:u}]}),n={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25v2.25a2.25 2.25 0 01-2.25 2.25h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25v2.25a2.25 2.25 0 01-2.25 2.25h-2.25a2.25 2.25 0 01-2.25-2.25v-2.25z" /></svg>'},s={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" /></svg>'},o={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3" /></svg>'},u={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" /></svg>'},p={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /></svg>'};return(e,t)=>{const a=d("router-link");return w(),i("nav",He,[l("div",qe,[(w(!0),i(m,null,h(r.value,e=>(w(),k(a,{key:e.path,to:e.path,class:"flex flex-col items-center gap-1 group"},{default:c(({isActive:t})=>[l("div",{class:x(["p-2 rounded-xl transition-all duration-300",t?"bg-blue-600 text-white shadow-lg shadow-blue-200 dark:shadow-none -translate-y-1":"text-gray-400 dark:text-gray-500 group-hover:text-blue-500"])},[(w(),k(A(e.icon),{class:"w-6 h-6"}))],2),l("span",{class:x(["text-[10px] font-bold transition-all duration-300",t?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-500"])},g(e.name),3)]),_:2},1032,["to"]))),128))])])}}},[["__scopeId","data-v-bc3ba339"]]);let Ke=null;const Ye={isSupported:()=>"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window,getPermission:()=>Notification.permission,async isSubscribed(){if(!this.isSupported())return!1;const e=await navigator.serviceWorker.ready;return null!==await e.pushManager.getSubscription()},async requestPermission(){return this.isSupported()?await Notification.requestPermission():"denied"},async subscribeUser(){if(!this.isSupported())return null;try{const e=await navigator.serviceWorker.ready;if(!Ke){const e=await j.get("/notifications/vapid-public-key");Ke=e.publicKey}const t=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ge(Ke)}),a={endpoint:t.endpoint,p256dh:btoa(String.fromCharCode.apply(null,new Uint8Array(t.getKey("p256dh")))),auth:btoa(String.fromCharCode.apply(null,new Uint8Array(t.getKey("auth"))))};return await j.post("/notifications/subscribe",a),t}catch(e){throw e}},async unsubscribeUser(){if(this.isSupported())try{const e=await navigator.serviceWorker.ready,t=await e.pushManager.getSubscription();if(t){const e=t.endpoint;await t.unsubscribe(),await j.delete(`/notifications/unsubscribe?endpoint=${encodeURIComponent(e)}`)}}catch(e){throw e}}};function Ge(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(t),r=new Uint8Array(a.length);for(let n=0;n<a.length;++n)r[n]=a.charCodeAt(n);return r}const Je={key:0,class:"bg-blue-600 text-white py-3 px-4 shadow-lg sticky top-16 z-40 flex flex-col md:flex-row items-center justify-between gap-3 text-sm"},Fe={class:"flex items-center gap-2 w-full md:w-auto"},Xe=["disabled"],Ze={key:0,class:"loading loading-spinner loading-xs mr-1"},Qe=["disabled"],et={key:0,class:"absolute inset-x-0 -bottom-8 bg-amber-100 text-amber-800 text-[10px] text-center py-1 font-medium md:static md:bg-transparent md:text-white/80 md:w-full md:text-center animate-pulse"},tt="notif_prompt_dismissed_at",at={__name:"NotificationPermissionBanner",setup(e){const a=B(),n=f(),s=t(!1),o=t(!1),u=t(!1);r(async()=>{d()});const d=async()=>{if(!a.user||"/login"===n.path||"/landing"===n.path)return void(s.value=!1);if(!Ye.isSupported())return;const e=Ye.getPermission();if("granted"===e)return void(s.value=!1);if("denied"===e)return;const t=localStorage.getItem(tt);if(t){const e=new Date(parseInt(t));if(Date.now()-e.getTime()<6048e5)return}await Ye.isSubscribed()||(s.value=!0)},m=async()=>{o.value=!0;try{const e=await Ye.requestPermission();"granted"===e?(await Ye.subscribeUser(),s.value=!1):"denied"===e&&(u.value=!0,setTimeout(()=>{s.value=!1},5e3))}catch(e){setTimeout(()=>{s.value=!1},3e3)}finally{o.value=!1}},h=()=>{localStorage.setItem(tt,Date.now().toString()),s.value=!1};return(e,t)=>(w(),k(y,{"enter-active-class":"transform transition ease-out duration-300","enter-from-class":"-translate-y-full opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transform transition ease-in duration-200","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"-translate-y-full opacity-0"},{default:c(()=>[s.value?(w(),i("div",Je,[t[2]||(t[2]=l("div",{class:"flex items-center gap-2"},[l("div",{class:"p-1.5 bg-white/20 rounded-full"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})])]),l("p",{class:"font-medium text-center md:text-left"}," Bildirimleri açmak ister misiniz? Yeni borç, tahsilat ve duyurular için anlık bildirim alın. ")],-1)),l("div",Fe,[l("button",{onClick:m,class:"flex-1 md:flex-none px-4 py-2 bg-white text-blue-600 font-bold rounded-lg hover:bg-blue-50 transition active:scale-95 disabled:opacity-50",disabled:o.value},[o.value?(w(),i("span",Ze)):p("",!0),t[0]||(t[0]=b(" Bildirimleri Aç "))],8,Xe),l("button",{onClick:h,class:"flex-1 md:flex-none px-4 py-2 bg-transparent text-white border border-white/30 font-medium rounded-lg hover:bg-white/10 transition",disabled:o.value}," Şimdi Değil ",8,Qe)]),u.value?(w(),i("div",et," Lütfen tarayıcı ayarlarından bildirim iznini aktif hale getirin. ")):p("",!0),l("button",{onClick:h,class:"absolute right-2 top-2 p-1 hover:bg-white/10 rounded-full md:static","aria-label":"Kapat"},t[1]||(t[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))])):p("",!0)]),_:1}))}},rt={class:"flex items-start justify-between"},nt={class:"flex items-center gap-3"},st={class:"font-semibold text-gray-900 dark:text-gray-100 text-sm"},ot={class:"text-gray-600 dark:text-gray-400 text-sm mt-1"},it=["onClick"],lt={key:0,class:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700"},ut=["onClick"],ct=["onClick"],dt={class:"mt-3 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},mt={class:"modal-box max-w-2xl"},ht={class:"flex items-center justify-between mb-4"},pt={class:"space-y-4"},gt={class:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4"},yt={class:"font-semibold text-gray-900 dark:text-gray-100 mb-2"},ft={class:"text-gray-600 dark:text-gray-400 text-sm"},vt={key:0,class:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4"},wt={class:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-900 p-3 rounded border overflow-x-auto"},kt={key:1,class:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4"},bt={class:"text-sm text-gray-600 dark:text-gray-400 space-y-1"},xt={key:0},_t={key:1},At={class:"modal-action"},Et=oe({__name:"ErrorNotification",setup(e){const a=t([]),n=t(null),s=e=>{const t=a.value.findIndex(t=>t.id===e);-1!==t&&a.value.splice(t,1)},o=e=>{if(["success","info","warning"].includes(e.type))return;const t=Z[e.type]||{title:"Hata",message:"Beklenmeyen bir hata oluştu.",action:"Tekrar Dene"};(e=>{const t=Date.now()+Math.random(),r={id:t,title:e.title||"Hata",message:e.message||"Beklenmeyen bir hata oluştu.",action:e.action,type:e.type,timestamp:e.timestamp,context:e.context,technicalDetails:e.originalError,progress:100};a.value.push(r);const n=setInterval(()=>{-1!==a.value.findIndex(e=>e.id===t)?(r.progress-=2,r.progress<=0&&(s(t),clearInterval(n))):clearInterval(n)},100);setTimeout(()=>{s(t)},5e3)})({title:e.title||t.title,message:e.message||t.message,action:e.action||t.action,type:"error",timestamp:e.timestamp,context:e.context,originalError:e.originalError})};return r(()=>re.addListener(o)),E(()=>re.removeListener(o)),(e,t)=>{return w(),i(m,null,[u(S,{name:"error-notification",tag:"div",class:"fixed top-4 right-4 z-50 space-y-2 max-w-md"},{default:c(()=>[(w(!0),i(m,null,h(a.value,e=>(w(),i("div",{key:e.id,class:"bg-white dark:bg-gray-800 border-l-4 border-red-500 shadow-lg rounded-lg p-4 max-w-sm w-full"},[l("div",rt,[l("div",nt,[t[3]||(t[3]=l("div",{class:"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 rounded-full p-2"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),l("div",null,[l("h4",st,g(e.title),1),l("p",ot,g(e.message),1)])]),l("button",{onClick:t=>s(e.id),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200"},t[4]||(t[4]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,it)]),e.action?(w(),i("div",lt,[l("button",{onClick:t=>(e=>{switch(e.action){case"Tekrar Dene":window.location.reload();break;case"Giriş Yap":window.location.href="/login";break;case"Ana Sayfaya Dön":window.location.href="/dashboard";break;case"Geri Dön":window.history.back()}s(e.id)})(e),class:"text-xs bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 px-3 py-1 rounded-md hover:bg-red-200 dark:hover:bg-red-900/70 transition-colors duration-200"},g(e.action),9,ut),l("button",{onClick:t=>(e=>{n.value=e})(e),class:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors duration-200"}," Detaylar ",8,ct)])):p("",!0),l("div",dt,[l("div",{class:"h-full bg-red-500 transition-all duration-300 ease-linear",style:M({width:`${e.progress}%`})},null,4)])]))),128))]),_:1}),n.value?(w(),i("dialog",{key:0,class:"modal modal-open",onClick:t[2]||(t[2]=_(e=>n.value=null,["self"]))},[l("div",mt,[l("div",ht,[t[5]||(t[5]=l("h3",{class:"font-bold text-lg text-gray-900 dark:text-gray-100"}," Hata Detayları ",-1)),l("button",{onClick:t[0]||(t[0]=e=>n.value=null),class:"btn btn-sm btn-circle btn-ghost"}," ✕ ")]),l("div",pt,[l("div",gt,[l("h4",yt,g(n.value.title),1),l("p",ft,g(n.value.message),1)]),n.value.technicalDetails?(w(),i("div",vt,[t[6]||(t[6]=l("h4",{class:"font-semibold text-gray-900 dark:text-gray-100 mb-2"}," Teknik Detaylar ",-1)),l("pre",wt,"            "+g(JSON.stringify(n.value.technicalDetails,null,2))+"\n          ",1)])):p("",!0),n.value.context?(w(),i("div",kt,[t[11]||(t[11]=l("h4",{class:"font-semibold text-gray-900 dark:text-gray-100 mb-2"}," Bağlam Bilgileri ",-1)),l("div",bt,[l("div",null,[t[7]||(t[7]=l("strong",null,"Zaman:",-1)),b(" "+g((r=n.value.timestamp,new Date(r).toLocaleString("tr-TR"))),1)]),l("div",null,[t[8]||(t[8]=l("strong",null,"Tip:",-1)),b(" "+g(n.value.type),1)]),n.value.context.component?(w(),i("div",xt,[t[9]||(t[9]=l("strong",null,"Bileşen:",-1)),b(" "+g(n.value.context.component),1)])):p("",!0),n.value.context.action?(w(),i("div",_t,[t[10]||(t[10]=l("strong",null,"İşlem:",-1)),b(" "+g(n.value.context.action),1)])):p("",!0)])])):p("",!0)]),l("div",At,[l("button",{onClick:t[1]||(t[1]=e=>n.value=null),class:"btn btn-primary btn-sm"}," Kapat ")])])])):p("",!0)],64);var r}}},[["__scopeId","data-v-6f563132"]]),St={class:"flex items-start justify-between"},Mt={class:"flex items-center gap-3"},Tt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Lt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Pt={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Ct={key:3,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Ot={class:"font-semibold text-gray-900 dark:text-gray-100 text-sm"},zt={class:"text-gray-600 dark:text-gray-400 text-sm mt-1"},It=["onClick"],Nt={class:"mt-3 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},Dt=oe({__name:"SuccessNotification",setup(e){const a=t([]),n=e=>{const t=a.value.findIndex(t=>t.id===e);-1!==t&&a.value.splice(t,1)},s=e=>{const t="bg-white dark:bg-gray-800";switch(e){case"success":default:return`${t} border-l-4 border-green-500`;case"info":return`${t} border-l-4 border-blue-500`;case"warning":return`${t} border-l-4 border-yellow-500`}},o=e=>{switch(e){case"success":default:return"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400";case"info":return"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400";case"warning":return"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-600 dark:text-yellow-400"}},u=e=>{switch(e){case"success":default:return"bg-green-500";case"info":return"bg-blue-500";case"warning":return"bg-yellow-500"}},d=e=>{if("success"===e.type||"info"===e.type||"warning"===e.type){(e=>{const t=Date.now()+Math.random(),r={id:t,title:e.title||"Başarılı",message:e.message||"İşlem başarıyla tamamlandı.",type:e.type,timestamp:e.timestamp,context:e.context,progress:100};a.value.push(r);const s=setInterval(()=>{-1!==a.value.findIndex(e=>e.id===t)?(r.progress-=2,r.progress<=0&&(n(t),clearInterval(s))):clearInterval(s)},100),o="success"===e.type?3e3:5e3;setTimeout(()=>{n(t)},o)})({...e.getDisplayMessage(),type:e.type,timestamp:e.timestamp,context:e.context})}};return r(()=>{re.addListener(d)}),E(()=>{}),(e,t)=>(w(),k(S,{name:"success-notification",tag:"div",class:"fixed top-4 right-4 z-50 space-y-2 max-w-md"},{default:c(()=>[(w(!0),i(m,null,h(a.value,e=>(w(),i("div",{key:e.id,class:x([s(e.type),"shadow-lg rounded-lg p-4 max-w-sm w-full"])},[l("div",St,[l("div",Mt,[l("div",{class:x([o(e.type),"rounded-full p-2"])},["success"===e.type?(w(),i("svg",Tt,t[0]||(t[0]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):"info"===e.type?(w(),i("svg",Lt,t[1]||(t[1]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):"warning"===e.type?(w(),i("svg",Pt,t[2]||(t[2]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"},null,-1)]))):(w(),i("svg",Ct,t[3]||(t[3]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))],2),l("div",null,[l("h4",Ot,g(e.title),1),l("p",zt,g(e.message),1)])]),l("button",{onClick:t=>n(e.id),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200"},t[4]||(t[4]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,It)]),l("div",Nt,[l("div",{class:x([u(e.type),"h-full transition-all duration-300 ease-linear"]),style:M({width:`${e.progress}%`})},null,6)])],2))),128))]),_:1}))}},[["__scopeId","data-v-d9698972"]]),Rt=["data-theme"],jt={class:"min-h-screen bg-base-200"},Vt={class:"w-full md:max-w-7xl mx-auto bg-base-100 md:shadow-lg md:rounded-xl overflow-hidden mb-20 md:mb-0"},Bt={__name:"App",setup(e){const t=f(),n=B(),c=a(()=>n.user&&!t.meta.hideLayout);return r(()=>{n.initAuthListener()}),o(()=>n.theme,e=>{"dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},{immediate:!0}),(e,a)=>{const r=d("router-view");return w(),i("div",{"data-theme":s(n).theme,class:"min-h-screen"},[s(t).meta.hideLayout?(w(),k(r,{key:0})):(w(),i(m,{key:1},[l("div",jt,[u(We),u(at),l("div",Vt,[u(r,{class:"p-4 sm:p-6"})])]),c.value?(w(),k($e,{key:0})):p("",!0)],64)),u(Et),u(Dt)],8,Rt)}}},Ut={},Wt=function(e,t,a){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in Ut)return;Ut[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,a&&n.setAttribute("nonce",a),document.head.appendChild(n),t?new Promise((t,a)=>{n.addEventListener("load",t),n.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},Ht=()=>Wt(()=>import("./OwnerDues-BC2H4Ddr.js"),__vite__mapDeps([0,1,2])),qt=[{path:"/",name:"Login",component:()=>Wt(()=>import("./LoginView-C3NpLpQY.js"),__vite__mapDeps([3,1,4,2,5])),meta:{public:!0,hideLayout:!0}},{path:"/landing",name:"Landing",component:()=>Wt(()=>import("./LandingPage-rC4XxpFa.js"),__vite__mapDeps([6,1,2,7])),meta:{public:!0,hideLayout:!0}},{path:"/dashboard",name:"Dashboard",component:()=>Wt(()=>import("./Dashboard-BrM6_qUQ.js"),__vite__mapDeps([8,1,9,10,11,12,13,14,15,4,2])),meta:{requiresAuth:!0,roles:["admin","manager","viewer","tenant","observer","dataentry"]}},{path:"/tenants",name:"Tenants",component:()=>Wt(()=>import("./Tenants-Bt_MbnYc.js"),__vite__mapDeps([16,1,17,18,19,2])),meta:{requiresAuth:!0,roles:["admin","manager","dataentry"]}},{path:"/tenants/:id",name:"TenantDetailPage",component:()=>Wt(()=>import("./TenantDetailPage-D8YUUl0n.js"),__vite__mapDeps([20,1,21,9,11,14,22,23,17,4,2])),meta:{requiresAuth:!0,roles:["admin","manager","dataentry"]}},{path:"/payments",name:"Payments",component:()=>Wt(()=>import("./Payments-BtDy1YXV.js"),__vite__mapDeps([24,1,9,13,14,4,18,17,25,21,11,22,23,2])),meta:{requiresAuth:!0,roles:["admin","manager","dataentry","observer"]}},{path:"/expenses",name:"Expenses",component:()=>Wt(()=>import("./Expenses-D-0nQQRp.js"),__vite__mapDeps([26,1,10,25,4,22,2])),meta:{requiresAuth:!0,roles:["admin","manager","dataentry"]}},{path:"/utilities",name:"Utilities",component:()=>Wt(()=>import("./Utilities-Bp8Gue2h.js"),__vite__mapDeps([27,28,1,4,14,15,2])),meta:{requiresAuth:!0,roles:["admin","manager","dataentry"]}},{path:"/flats",name:"Flats",component:()=>Wt(()=>import("./Flats-D9lz4Umx.js"),__vite__mapDeps([29,1,2])),meta:{requiresAuth:!0,roles:["admin","manager","dataentry"]}},{path:"/reports",name:"Reports",component:()=>Wt(()=>import("./ReportsView-CObagIPo.js").then(e=>e.R),__vite__mapDeps([30,1,11,13,14,9,2,31])),meta:{requiresAuth:!0,roles:["admin","manager","observer"]}},{path:"/notifications",name:"Notifications",component:()=>Wt(()=>import("./NotificationsView-9J2bDNwq.js"),__vite__mapDeps([32,1,2])),meta:{requiresAuth:!0}},{path:"/admin",name:"Admin",component:()=>Wt(()=>import("./AdminDashboard-D1b0RFIX.js"),__vite__mapDeps([33,1,34,12,11,4,35,2,36,13,19,28])),meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/profile",name:"Profile",component:()=>Wt(()=>import("./ProfileView-OeYLgPyb.js"),__vite__mapDeps([37,1,2])),meta:{requiresAuth:!0}},{path:"/login",redirect:"/"},{path:"/set-password",name:"SetPassword",component:()=>Wt(()=>import("./SetPasswordView-BGTbX80H.js"),__vite__mapDeps([38,1,2])),meta:{public:!0,hideLayout:!0}},{path:"/reset-password",name:"ResetPassword",component:()=>Wt(()=>import("./SetPasswordView-BGTbX80H.js"),__vite__mapDeps([38,1,2])),meta:{public:!0,hideLayout:!0}},{path:"/invite",name:"Invite",component:()=>Wt(()=>import("./SetPasswordView-BGTbX80H.js"),__vite__mapDeps([38,1,2])),meta:{public:!0,hideLayout:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>Wt(()=>import("./NotFound-BwAkckp8.js"),__vite__mapDeps([39,1,2]))},{path:"/transactions",name:"Transactions",component:()=>Wt(()=>import("./Transactions-BTSapfbb.js"),__vite__mapDeps([40,1,2])),meta:{requiresAuth:!0,roles:["admin","manager","dataentry"]}},{path:"/overdue",name:"Overdue",component:()=>Wt(()=>import("./Overdue-DMztKknI.js"),__vite__mapDeps([41,1,2])),meta:{requiresAuth:!0,roles:["admin","manager","dataentry","observer"]}},{path:"/owner-dues",name:"OwnerDues",component:()=>Wt(()=>import("./OwnerDuesPanel-DmetM4V0.js"),__vite__mapDeps([34,1,12,11,4,35,2])),meta:{requiresAuth:!0,roles:["admin","manager","dataentry"]}},{path:"/owners",name:"Owners",component:()=>Wt(()=>import("./Owners-CnrvhQh7.js"),__vite__mapDeps([36,13,11,4,19,1,28,35,2])),meta:{requiresAuth:!0,roles:["admin","manager","dataentry"]}},{path:"/owner-dues-list",name:"OwnerDuesList",component:Ht,meta:{requiresAuth:!0,roles:["admin","manager","dataentry"]}},{path:"/OwnerDues",name:"OwnerDuesPage",component:Ht,meta:{requiresAuth:!0,roles:["admin","manager","dataentry"]}},{path:"/owner-payments",name:"OwnerPayments",component:()=>Wt(()=>import("./OwnerPayments-CTniHkHC.js"),__vite__mapDeps([42,1,2])),meta:{requiresAuth:!0,roles:["admin","manager","dataentry"]}},{path:"/overdue-owner-payments",name:"OverdueOwnerPayments",component:()=>Wt(()=>import("./OverdueOwnerPayments-BeaWg69e.js"),__vite__mapDeps([43,1,2])),meta:{requiresAuth:!0,roles:["admin","manager","dataentry"]}}],$t=T({history:L("/"),routes:qt});$t.beforeEach(async(e,t,a)=>{const r=e.meta.requiresAuth,n=e.meta.public;if("/login"===e.path&&("/login"===t.path||!r))return a();if(n)return a();{const t=await V.checkAuthStatus();if(!t&&r)return"/login"!==e.path?a("/login"):a();if(t&&e.meta.roles){const r=(t.role||"").toLowerCase();if(!e.meta.roles.map(e=>e.toLowerCase()).includes(r))return"/dashboard"!==e.path?a("/dashboard"):a()}if(t&&("/"===e.path||"/login"===e.path)){let r="/dashboard";return"admin"===t.role?r="/admin":"manager"===t.role?r="/dashboard":"viewer"===t.role?r="/overdue":"tenant"===t.role&&(r="/profile"),e.path!==r?a(r):a()}return a()}});var Kt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Yt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gt={exports:{}},Jt=Gt.exports=function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=".",t(t.s=10)}([function(e,t){e.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleLowerCase()}},"!":{escape:!0}}},function(e,t,a){function r(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}var n=a(2),s=a(0),o=a.n(s);t.a=function(e,t){var s=t.value;if((Array.isArray(s)||"string"==typeof s)&&(s={mask:s,tokens:o.a}),"INPUT"!==e.tagName.toLocaleUpperCase()){var i=e.getElementsByTagName("input");if(1!==i.length)throw new Error("v-mask directive requires 1 input, found "+i.length);e=i[0]}e.oninput=function(t){if(t.isTrusted){var o=e.selectionEnd,i=e.value[o-1];for(e.value=a.i(n.a)(e.value,s.mask,!0,s.tokens);o<e.value.length&&e.value.charAt(o-1)!==i;)o++;e===document.activeElement&&(e.setSelectionRange(o,o),setTimeout(function(){e.setSelectionRange(o,o)},0)),e.dispatchEvent(r("input"))}};var l=a.i(n.a)(e.value,s.mask,!0,s.tokens);l!==e.value&&(e.value=l,e.dispatchEvent(r("input")))}},function(e,t,a){var r=a(6),n=a(5);t.a=function(e,t){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments[3];return Array.isArray(t)?a.i(n.a)(r.a,t,o)(e,t,s,o):a.i(r.a)(e,t,s,o)}},function(e,t,a){function r(e){e.component(l.a.name,l.a),e.directive("mask",o.a)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),s=a.n(n),o=a(1),i=a(7),l=a.n(i);a.d(t,"TheMask",function(){return l.a}),a.d(t,"mask",function(){return o.a}),a.d(t,"tokens",function(){return s.a}),a.d(t,"version",function(){return u});var u="0.11.1";t.default=r,"undefined"!=typeof window&&window.Vue&&window.Vue.use(r)},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),n=a(0),s=a.n(n),o=a(2);t.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return s.a}}},directives:{mask:r.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(e){e!==this.lastValue&&(this.display=e)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(e){e.isTrusted||this.refresh(e.target.value)},refresh:function(e){this.display=e,(e=a.i(o.a)(e,this.mask,this.masked,this.tokens))!==this.lastValue&&(this.lastValue=e,this.$emit("input",e))}}}},function(e,t,a){function r(e,t,a){return t=t.sort(function(e,t){return e.length-t.length}),function(r,n){for(var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=0;o<t.length;){var i=t[o];o++;var l=t[o];if(!(l&&e(r,l,!0,a).length>i.length))return e(r,i,s,a)}return""}}t.a=r},function(e,t,a){function r(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments[3];e=e||"",t=t||"";for(var n=0,s=0,o="";n<t.length&&s<e.length;){var i=r[c=t[n]],l=e[s];i&&!i.escape?(i.pattern.test(l)&&(o+=i.transform?i.transform(l):l,n++),s++):(i&&i.escape&&(c=t[++n]),a&&(o+=c),l===c&&s++,n++)}for(var u="";n<t.length&&a;){var c;if(r[c=t[n]]){u="";break}u+=c,n++}return o+u}t.a=r},function(e,t,a){var r=a(8)(a(4),a(9),null,null);e.exports=r.exports},function(e,t){e.exports=function(e,t,a,r){var n,s=e=e||{},o=typeof e.default;"object"!==o&&"function"!==o||(n=e,s=e.default);var i="function"==typeof s?s.options:s;if(t&&(i.render=t.render,i.staticRenderFns=t.staticRenderFns),a&&(i._scopeId=a),r){var l=i.computed||(i.computed={});Object.keys(r).forEach(function(e){var t=r[e];l[e]=function(){return t}})}return{esModule:n,exports:s,options:i}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"mask",rawName:"v-mask",value:e.config,expression:"config"}],attrs:{type:"text"},domProps:{value:e.display},on:{input:e.onInput}})},staticRenderFns:[]}},function(e,t,a){e.exports=a(3)}]);!function(e={}){const{immediate:t=!1,onNeedRefresh:a,onOfflineReady:r,onRegistered:n,onRegisteredSW:s,onRegisterError:o}=e;let i,l;l=async function(){if("serviceWorker"in navigator){if(i=await Wt(async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5-CLYUWRvB.js");return{Workbox:e}},[]).then(({Workbox:e})=>new e("/service-worker.js",{scope:"/",type:"classic"})).catch(e=>{null==o||o(e)}),!i)return;i.addEventListener("activated",e=>{(e.isUpdate||e.isExternal)&&window.location.reload()}),i.addEventListener("installed",e=>{e.isUpdate||null==r||r()}),i.register({immediate:t}).then(e=>{s?s("/service-worker.js",e):null==n||n(e)}).catch(e=>{null==o||o(e)})}}()}({immediate:!0});const Ft=P(Bt),Xt=C();Ft.use(Xt),Ft.use($t),Ft.directive("mask",Jt.mask),Ft.mount("#app");export{X as E,q as R,oe as _,j as a,se as b,ne as c,$ as d,re as e,H as f,V as g,ae as h,te as i,Wt as j,W as k,Kt as l,Yt as m,Ye as p,J as t,B as u};
