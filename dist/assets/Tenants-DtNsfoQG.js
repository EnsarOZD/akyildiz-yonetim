import{r as e,C as a,w as t,c as r,l,e as o,b as s,n,q as i,D as d,H as u,E as c,F as b,i as g,t as y,u as m,G as p,p as v,I as f,o as k,f as x,m as h,k as w}from"./vue-vendor-B4bLxnmP.js";import{C as T}from"./units-BVkJ3cEn.js";import{a as N}from"./index-ErXur627.js";import{u as C}from"./useEventBus-yINTLNlH.js";import{l as P}from"./index-BCHEzJ6T.js";const A=["open"],D={key:0,class:"modal-box max-w-4xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700 shadow-2xl"},V={class:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700 mb-6"},K={class:"overflow-y-auto max-h-[70vh] pr-2"},j={class:"card bg-base-200 p-4"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},U={class:"form-control"},E={class:"form-control"},S=["value"],B={class:"form-control"},M={class:"form-control"},q={class:"label"},$={class:"label-text font-semibold text-gray-700 dark:text-gray-300"},O=["placeholder","required","maxlength","pattern"],X={key:0,class:"label"},z={class:"label-text-alt text-error"},L={class:"card bg-base-200 p-4"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},F={class:"form-control"},G={class:"form-control"},Y={class:"form-control"},_={class:"card bg-base-200 p-4"},R={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},J={class:"form-control"},Q={class:"form-control"},W={class:"label cursor-pointer"},Z={class:"form-control"},ee={class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700 mt-6"},ae={__name:"TenantEditModal",props:{tenant:Object,visible:Boolean},emits:["save","close"],setup(k,{emit:x}){const h=k,w=x,N=e(null),C=a(()=>{var e,a;return"Individual"===(null==(e=N.value)?void 0:e.companyType)?"TC Kimlik NumarasÄ±":"Corporate"===(null==(a=N.value)?void 0:a.companyType)?"Vergi NumarasÄ±":"Kimlik/Vergi NumarasÄ±"}),P=a(()=>{var e,a;return"Individual"===(null==(e=N.value)?void 0:e.companyType)?"12345678901":"Corporate"===(null==(a=N.value)?void 0:a.companyType)?"1234567890":"Numara girin"});a(()=>{var e,a;return!(!(null==(e=N.value)?void 0:e.companyType)||!(null==(a=N.value)?void 0:a.identityNumber))&&("Individual"===N.value.companyType?11===N.value.identityNumber.length&&/^\d{11}$/.test(N.value.identityNumber):"Corporate"===N.value.companyType&&(10===N.value.identityNumber.length&&/^\d{10}$/.test(N.value.identityNumber)))});const ae=a(()=>{var e,a;if(!(null==(e=N.value)?void 0:e.companyType))return"";if(!(null==(a=N.value)?void 0:a.identityNumber))return"";if("Individual"===N.value.companyType){if(11!==N.value.identityNumber.length)return"TC Kimlik NumarasÄ± 11 hane olmalÄ±dÄ±r";if(!/^\d{11}$/.test(N.value.identityNumber))return"TC Kimlik NumarasÄ± sadece rakam iÃ§ermelidir"}else if("Corporate"===N.value.companyType){if(10!==N.value.identityNumber.length)return"Vergi NumarasÄ± 10 hane olmalÄ±dÄ±r";if(!/^\d{10}$/.test(N.value.identityNumber))return"Vergi NumarasÄ± sadece rakam iÃ§ermelidir"}return""});t(()=>h.tenant,e=>{if(e){const a={...e,identityNumber:e.identityNumber||e.taxNumber||"",companyType:e.companyType||"Corporate",contractStartDate:e.contractStartDate?new Date(e.contractStartDate).toISOString().slice(0,10):"",contractEndDate:e.contractEndDate?new Date(e.contractEndDate).toISOString().slice(0,10):"",entryDate:e.entryDate?new Date(e.entryDate).toISOString().slice(0,10):""};N.value=a}},{immediate:!0});const te=()=>{if(!N.value||!h.tenant)return;if("Individual"===N.value.companyType){if(!N.value.identityNumber||11!==N.value.identityNumber.length)return void alert("TC Kimlik NumarasÄ± 11 hane olmalÄ±dÄ±r!")}else if("Corporate"===N.value.companyType&&(!N.value.identityNumber||10!==N.value.identityNumber.length))return void alert("Vergi NumarasÄ± 10 hane olmalÄ±dÄ±r!");const e=h.tenant,a=((e,a)=>{const t={};return["companyName","companyType","businessType","identityNumber","contactPersonName","contactPersonPhone","contactPersonEmail","flatId","monthlyAidat","isActive"].forEach(r=>{void 0!==a[r]&&a[r]!==e[r]&&(t[r]=a[r])}),["contractStartDate","contractEndDate","entryDate"].forEach(r=>{if(a[r]){const l=new Date(a[r]),o=e[r]?new Date(e[r]):null;o&&l.getTime()===o.getTime()||(t[r]=l)}}),t})(e,N.value);if(0===Object.keys(a).length)return void alert("Herhangi bir deÄŸiÅŸiklik yapmadÄ±nÄ±z!");const t={id:e.id,...e,...a};a.identityNumber&&(t.taxNumber=a.identityNumber,delete t.identityNumber),delete t.companyType,w("save",t)};return(e,a)=>(l(),r("dialog",{id:"editTenantModal",class:"modal",open:k.visible},[N.value?(l(),r("div",D,[s("div",V,[a[13]||(a[13]=s("h3",{class:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2"},[s("span",{class:"text-2xl"},"âœï¸"),n(" Ä°ÅŸ Yeri KiracÄ±sÄ± Bilgilerini GÃ¼ncelle ")],-1)),s("button",{onClick:a[0]||(a[0]=a=>e.$emit("close")),class:"btn btn-sm btn-ghost text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},a[12]||(a[12]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),s("div",K,[s("form",{onSubmit:i(te,["prevent"]),class:"space-y-6"},[s("div",j,[a[19]||(a[19]=s("h4",{class:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300"},"ðŸ¢ Ä°ÅŸ Yeri Bilgileri",-1)),s("div",I,[s("div",U,[a[14]||(a[14]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Åžirket AdÄ± *")],-1)),d(s("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>N.value.companyName=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},null,512),[[u,N.value.companyName]])]),s("div",E,[a[16]||(a[16]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Firma TÃ¼rÃ¼ *")],-1)),d(s("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>N.value.companyType=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},[a[15]||(a[15]=s("option",{value:""},"Firma tÃ¼rÃ¼ seÃ§in",-1)),(l(!0),r(b,null,g(m(T),e=>(l(),r("option",{key:e.value,value:e.value},y(e.label),9,S))),128))],512),[[c,N.value.companyType]])]),s("div",B,[a[18]||(a[18]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Ä°ÅŸ TÃ¼rÃ¼ *")],-1)),d(s("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>N.value.businessType=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},a[17]||(a[17]=[p('<option value="">Ä°ÅŸ tÃ¼rÃ¼ seÃ§in</option><option value="Ticaret">Ticaret</option><option value="Hizmet">Hizmet</option><option value="Ãœretim">Ãœretim</option><option value="Ofis">Ofis</option><option value="Depo">Depo</option><option value="DiÄŸer">DiÄŸer</option>',7)]),512),[[c,N.value.businessType]])]),s("div",M,[s("label",q,[s("span",$,y(C.value)+" *",1)]),d(s("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>N.value.identityNumber=e),class:v(["input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",ae.value?"input-error":""]),placeholder:P.value,required:!!N.value.companyType,maxlength:"Individual"===N.value.companyType?11:10,pattern:"Individual"===N.value.companyType?"[0-9]{11}":"[0-9]{10}",type:"text",inputmode:"numeric"},null,10,O),[[u,N.value.identityNumber]]),ae.value?(l(),r("label",X,[s("span",z,y(ae.value),1)])):o("",!0)])])]),s("div",L,[a[23]||(a[23]=s("h4",{class:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300"},"ðŸ‘¤ Ä°letiÅŸim KiÅŸisi Bilgileri",-1)),s("div",H,[s("div",F,[a[20]||(a[20]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Ä°letiÅŸim KiÅŸisi *")],-1)),d(s("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>N.value.contactPersonName=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},null,512),[[u,N.value.contactPersonName]])]),s("div",G,[a[21]||(a[21]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Telefon *")],-1)),d(s("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>N.value.contactPersonPhone=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",placeholder:"+90 (5XX) XXX XX XX",required:""},null,512),[[u,N.value.contactPersonPhone]])]),s("div",Y,[a[22]||(a[22]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"E-posta")],-1)),d(s("input",{type:"email","onUpdate:modelValue":a[7]||(a[7]=e=>N.value.contactPersonEmail=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",placeholder:"ornek@email.com"},null,512),[[u,N.value.contactPersonEmail]])])])]),s("div",_,[a[25]||(a[25]=s("h4",{class:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300"},"ðŸ’° Aidat ve Tarife Bilgileri",-1)),s("div",R,[s("div",J,[a[24]||(a[24]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"AylÄ±k Aidat (â‚º) *")],-1)),d(s("input",{type:"number","onUpdate:modelValue":a[8]||(a[8]=e=>N.value.monthlyAidat=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",placeholder:"500",min:"0",step:"0.01",required:""},null,512),[[u,N.value.monthlyAidat,void 0,{number:!0}]])])])]),s("div",Q,[s("label",W,[a[26]||(a[26]=s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Aktif KiracÄ±",-1)),d(s("input",{type:"checkbox","onUpdate:modelValue":a[9]||(a[9]=e=>N.value.isActive=e),class:"toggle toggle-success"},null,512),[[f,N.value.isActive]])])]),s("div",Z,[a[27]||(a[27]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"GiriÅŸ Tarihi *")],-1)),d(s("input",{type:"date","onUpdate:modelValue":a[10]||(a[10]=e=>N.value.entryDate=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},null,512),[[u,N.value.entryDate]])])],32)]),s("div",ee,[s("button",{type:"button",onClick:a[11]||(a[11]=a=>e.$emit("close")),class:"btn btn-outline border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"},a[28]||(a[28]=[s("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),n(" Ä°ptal ")])),s("button",{onClick:te,class:"btn btn-primary bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border-0 text-white shadow-lg"},a[29]||(a[29]=[s("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),n(" GÃ¼ncelle ")]))])])):o("",!0)],8,A))}},te=["open"],re={class:"modal-box max-w-4xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700 shadow-2xl"},le={class:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700 mb-6"},oe={class:"overflow-y-auto max-h-[70vh] pr-2"},se={class:"card bg-base-200 p-4"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ie={class:"form-control"},de={class:"form-control"},ue=["value"],ce={class:"form-control"},be={class:"form-control"},ge={class:"label"},ye={class:"label-text font-semibold text-gray-700 dark:text-gray-300"},me=["placeholder","required","maxlength","pattern"],pe={key:0,class:"label"},ve={class:"label-text-alt text-error"},fe={class:"card bg-base-200 p-4"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe={class:"form-control"},he={class:"form-control"},we={class:"form-control"},Te={class:"card bg-base-200 p-4"},Ne={class:"form-control"},Ce=["value"],Pe={class:"card bg-base-200 p-4"},Ae={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},De={class:"form-control"},Ve={class:"form-control"},Ke={class:"label cursor-pointer"},je={class:"form-control"},Ie={class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700 mt-6"},Ue={__name:"TenantCreateModal",props:{visible:Boolean},emits:["save","close"],setup(x,{emit:h}){const w=x,P=h,{on:A}=C(),D=e([]),V=a(()=>"Individual"===I.value.companyType?"TC Kimlik NumarasÄ±":"Corporate"===I.value.companyType?"Vergi NumarasÄ±":"Kimlik/Vergi NumarasÄ±"),K=a(()=>"Individual"===I.value.companyType?"12345678901":"Corporate"===I.value.companyType?"1234567890":"Numara girin");a(()=>!(!I.value.companyType||!I.value.identityNumber)&&("Individual"===I.value.companyType?11===I.value.identityNumber.length&&/^\d{11}$/.test(I.value.identityNumber):"Corporate"===I.value.companyType&&(10===I.value.identityNumber.length&&/^\d{10}$/.test(I.value.identityNumber))));const j=a(()=>{if(!I.value.companyType)return"";if(!I.value.identityNumber)return"";if("Individual"===I.value.companyType){if(11!==I.value.identityNumber.length)return"TC Kimlik NumarasÄ± 11 hane olmalÄ±dÄ±r";if(!/^\d{11}$/.test(I.value.identityNumber))return"TC Kimlik NumarasÄ± sadece rakam iÃ§ermelidir"}else if("Corporate"===I.value.companyType){if(10!==I.value.identityNumber.length)return"Vergi NumarasÄ± 10 hane olmalÄ±dÄ±r";if(!/^\d{10}$/.test(I.value.identityNumber))return"Vergi NumarasÄ± sadece rakam iÃ§ermelidir"}return""}),I=e({companyName:"",companyType:"",businessType:"",identityNumber:"",contactPersonName:"",contactPersonPhone:"",contactPersonEmail:"",flatId:"",monthlyAidat:0,isActive:!0,entryDate:""}),U=async()=>{try{const e=await N.get("/tenants/available-flats");D.value=e}catch(e){}};t(()=>w.visible,e=>{e&&(I.value={companyName:"",companyType:"",businessType:"",identityNumber:"",contactPersonName:"",contactPersonPhone:"",contactPersonEmail:"",flatId:"",monthlyAidat:0,isActive:!0,entryDate:""},U())}),k(()=>{w.visible&&U(),A("tenant:deleted",()=>{U()})});const E=()=>{if("Individual"===I.value.companyType){if(!I.value.identityNumber||11!==I.value.identityNumber.length)return void alert("TC Kimlik NumarasÄ± 11 hane olmalÄ±dÄ±r!")}else if("Corporate"===I.value.companyType&&(!I.value.identityNumber||10!==I.value.identityNumber.length))return void alert("Vergi NumarasÄ± 10 hane olmalÄ±dÄ±r!");const e={...I.value};P("save",e),I.value={companyName:"",companyType:"",businessType:"",identityNumber:"",contactPersonName:"",contactPersonPhone:"",contactPersonEmail:"",flatId:"",monthlyAidat:0,isActive:!0,entryDate:""}};return(e,a)=>(l(),r("dialog",{id:"createTenantModal",class:"modal",open:x.visible},[s("div",re,[s("div",le,[a[14]||(a[14]=s("h3",{class:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2"},[s("span",{class:"text-2xl"},"ðŸ¢"),n(" Yeni Ä°ÅŸ Yeri KiracÄ±sÄ± Ekle ")],-1)),s("button",{onClick:a[0]||(a[0]=a=>e.$emit("close")),class:"btn btn-sm btn-ghost text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},a[13]||(a[13]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),s("div",oe,[s("form",{onSubmit:i(E,["prevent"]),id:"tenantForm",class:"space-y-6"},[s("div",se,[a[20]||(a[20]=s("h4",{class:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300"},"ðŸ¢ Ä°ÅŸ Yeri Bilgileri",-1)),s("div",ne,[s("div",ie,[a[15]||(a[15]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Åžirket AdÄ± *")],-1)),d(s("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>I.value.companyName=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",placeholder:"ABC Ticaret Ltd. Åžti.",required:""},null,512),[[u,I.value.companyName]])]),s("div",de,[a[17]||(a[17]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Firma TÃ¼rÃ¼ *")],-1)),d(s("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>I.value.companyType=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},[a[16]||(a[16]=s("option",{value:""},"Firma tÃ¼rÃ¼ seÃ§in",-1)),(l(!0),r(b,null,g(m(T),e=>(l(),r("option",{key:e.value,value:e.value},y(e.label),9,ue))),128))],512),[[c,I.value.companyType]])]),s("div",ce,[a[19]||(a[19]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Ä°ÅŸ TÃ¼rÃ¼ *")],-1)),d(s("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>I.value.businessType=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},a[18]||(a[18]=[p('<option value="">Ä°ÅŸ tÃ¼rÃ¼ seÃ§in</option><option value="Ticaret">Ticaret</option><option value="Hizmet">Hizmet</option><option value="Ãœretim">Ãœretim</option><option value="Ofis">Ofis</option><option value="Depo">Depo</option><option value="DiÄŸer">DiÄŸer</option>',7)]),512),[[c,I.value.businessType]])]),s("div",be,[s("label",ge,[s("span",ye,y(V.value)+" *",1)]),d(s("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>I.value.identityNumber=e),class:v(["input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",j.value?"input-error":""]),placeholder:K.value,required:!!I.value.companyType,maxlength:"Individual"===I.value.companyType?11:10,pattern:"Individual"===I.value.companyType?"[0-9]{11}":"[0-9]{10}",type:"text",inputmode:"numeric"},null,10,me),[[u,I.value.identityNumber]]),j.value?(l(),r("label",pe,[s("span",ve,y(j.value),1)])):o("",!0)])])]),s("div",fe,[a[24]||(a[24]=s("h4",{class:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300"},"ðŸ‘¤ Ä°letiÅŸim KiÅŸisi Bilgileri",-1)),s("div",ke,[s("div",xe,[a[21]||(a[21]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Ä°letiÅŸim KiÅŸisi *")],-1)),d(s("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>I.value.contactPersonName=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",placeholder:"Ahmet YÄ±lmaz",required:""},null,512),[[u,I.value.contactPersonName]])]),s("div",he,[a[22]||(a[22]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Telefon *")],-1)),d(s("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>I.value.contactPersonPhone=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",placeholder:"+90 (5XX) XXX XX XX",required:""},null,512),[[u,I.value.contactPersonPhone]])]),s("div",we,[a[23]||(a[23]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"E-posta")],-1)),d(s("input",{type:"email","onUpdate:modelValue":a[7]||(a[7]=e=>I.value.contactPersonEmail=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",placeholder:"ornek@email.com"},null,512),[[u,I.value.contactPersonEmail]])])])]),s("div",Te,[a[27]||(a[27]=s("h4",{class:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300"},"ðŸ“ Kat SeÃ§imi",-1)),s("div",Ne,[a[26]||(a[26]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"BoÅŸ Kat SeÃ§in *")],-1)),d(s("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>I.value.flatId=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},[a[25]||(a[25]=s("option",{value:""},"Kat seÃ§in",-1)),(l(!0),r(b,null,g(D.value,e=>(l(),r("option",{key:e.id,value:e.id},y(e.unitNumber)+" - "+y(e.floor)+". Kat ("+y(e.unitArea)+"mÂ²) ",9,Ce))),128))],512),[[c,I.value.flatId]])])]),s("div",Pe,[a[29]||(a[29]=s("h4",{class:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300"},"ðŸ’° Aidat ve Tarife Bilgileri",-1)),s("div",Ae,[s("div",De,[a[28]||(a[28]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"AylÄ±k Aidat (â‚º) *")],-1)),d(s("input",{type:"number","onUpdate:modelValue":a[9]||(a[9]=e=>I.value.monthlyAidat=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",placeholder:"500",min:"0",step:"0.01",required:""},null,512),[[u,I.value.monthlyAidat,void 0,{number:!0}]])])])]),s("div",Ve,[s("label",Ke,[a[30]||(a[30]=s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Aktif KiracÄ±",-1)),d(s("input",{type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=e=>I.value.isActive=e),class:"toggle toggle-success"},null,512),[[f,I.value.isActive]])])]),s("div",je,[a[31]||(a[31]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"GiriÅŸ Tarihi *")],-1)),d(s("input",{type:"date","onUpdate:modelValue":a[11]||(a[11]=e=>I.value.entryDate=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},null,512),[[u,I.value.entryDate]])])],32)]),s("div",Ie,[s("button",{type:"button",onClick:a[12]||(a[12]=a=>e.$emit("close")),class:"btn btn-outline border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"},a[32]||(a[32]=[s("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),n(" Ä°ptal ")])),a[33]||(a[33]=s("button",{form:"tenantForm",type:"submit",class:"btn btn-success bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 border-0 text-white shadow-lg"},[s("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n(" Kaydet ")],-1))])])],8,te))}},Ee={async getTenants(e={}){const a=new URLSearchParams;void 0!==e.isActive&&a.append("isActive",e.isActive),e.searchTerm&&a.append("searchTerm",e.searchTerm),e.period&&a.append("period",e.period),void 0!==e.showOnlyOccupied&&a.append("showOnlyOccupied",e.showOnlyOccupied),e.floor&&a.append("floor",e.floor),e.category&&a.append("category",e.category);const t=a.toString(),r=t?`/tenants?${t}`:"/tenants";return await N.get(r)},async getAvailableFlats(e={}){const a=new URLSearchParams;e.floor&&a.append("floor",e.floor),e.category&&a.append("category",e.category),e.searchTerm&&a.append("searchTerm",e.searchTerm);const t=a.toString(),r=t?`/tenants/available-flats?${t}`:"/tenants/available-flats";return await N.get(r)},getTenantById:async e=>await N.get(`/tenants/${e}`),createTenant:async e=>await N.post("/tenants",e),updateTenant:async(e,a)=>await N.put(`/tenants/${e}`,a),deleteTenant:async e=>await N.delete(`/tenants/${e}`),getTenantStats:async()=>await N.get("/tenants/stats")},Se={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-6"},Be={class:"mb-8"},Me={class:"flex items-center justify-between"},qe={class:"card bg-white dark:bg-gray-800 shadow-lg mb-6"},$e={class:"card-body"},Oe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Xe={class:"form-control"},ze={class:"form-control"},Le={class:"form-control"},He=["value"],Fe={class:"form-control"},Ge={class:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},Ye={class:"text-sm text-gray-500 dark:text-gray-400"},_e={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},Re={class:"absolute top-4 right-4 z-10"},Je={class:"dropdown dropdown-end"},Qe={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-200 rounded-box w-40 z-10"},We=["onClick"],Ze=["onClick"],ea=["onClick"],aa={class:"flex items-center gap-4 mb-4"},ta={class:"flex items-center gap-2 mb-1"},ra={class:"text-lg font-bold text-gray-800 dark:text-gray-100"},la={key:0,class:"badge badge-info text-xs"},oa={class:"flex items-center gap-2"},sa={class:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-2"},na={key:0,class:"text-xs text-gray-400 truncate mb-1"},ia={key:1,class:"text-xs text-gray-400 truncate"},da={class:"card-body border-t border-gray-200 dark:border-gray-700"},ua={class:"flex items-center justify-between"},ca={class:"text-sm text-gray-600 dark:text-gray-400"},ba={class:"join"},ga=["disabled"],ya={class:"join-item btn btn-sm"},ma=["disabled"],pa={__name:"Tenants",setup(i){const m=w(),{emit:f}=C(),T=e([]),A=e(!1),D=e(!1),V=e(!1),K=e(null),j=e(1),I=e({searchTerm:"",isActive:"",floor:"",businessType:""}),U=a(()=>{let e=T.value;if(I.value.searchTerm){const a=I.value.searchTerm.toLowerCase();e=e.filter(e=>{var t,r;return e.companyName.toLowerCase().includes(a)||e.contactPersonName.toLowerCase().includes(a)||(null==(t=e.identityNumber||e.taxNumber)?void 0:t.includes(a))||(null==(r=e.contactPersonEmail)?void 0:r.toLowerCase().includes(a))||e.contactPersonPhone.includes(a)})}return""!==I.value.isActive&&(e=e.filter(e=>e.isActive===("true"===I.value.isActive))),I.value.floor&&(e=e.filter(e=>e.flats.some(e=>e.floor===parseInt(I.value.floor)))),I.value.businessType&&(e=e.filter(e=>e.businessType===I.value.businessType)),e}),E=a(()=>{const e=10*(j.value-1),a=e+10;return U.value.slice(e,a)}),S=a(()=>Math.ceil(U.value.length/10)),B=a(()=>{const e=new Set;return T.value.forEach(a=>{a.flats.forEach(a=>e.add(a.floor))}),Array.from(e).sort((e,a)=>e-a)}),M=async()=>{A.value=!0;try{const e=await Ee.getTenants();T.value=e}catch(e){P.error("KiracÄ±lar yÃ¼klenirken hata oluÅŸtu")}finally{A.value=!1}},q=()=>{j.value=1},$=()=>{I.value={searchTerm:"",isActive:"",floor:"",businessType:""},j.value=1},O=async e=>{try{await Ee.createTenant(e),P.success("KiracÄ± baÅŸarÄ±yla eklendi"),D.value=!1,await M()}catch(a){P.error("KiracÄ± eklenirken hata oluÅŸtu")}},X=async e=>{try{await Ee.updateTenant(K.value.id,e),P.success("KiracÄ± baÅŸarÄ±yla gÃ¼ncellendi"),z(),await M()}catch(a){P.error("KiracÄ± gÃ¼ncellenirken hata oluÅŸtu")}},z=()=>{K.value=null,V.value=!1},L=e=>{const a=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500"];return a[e.split("").reduce((e,a)=>e+a.charCodeAt(0),0)%a.length]};return k(()=>{M()}),t(I,()=>{q()},{deep:!0}),(e,a)=>(l(),r("div",Se,[s("div",Be,[s("div",Me,[a[9]||(a[9]=s("div",null,[s("h1",{class:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2 flex items-center gap-3"},[s("span",{class:"text-4xl"},"ðŸ¢"),n(" Ä°ÅŸ HanÄ± KiracÄ±larÄ± ")]),s("p",{class:"text-gray-600 dark:text-gray-400"},"Ä°ÅŸ hanÄ±ndaki tÃ¼m kiracÄ±larÄ± yÃ¶netin")],-1)),s("button",{onClick:a[0]||(a[0]=e=>D.value=!0),class:"btn btn-success bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 border-0 text-white shadow-lg"},a[8]||(a[8]=[s("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),n(" Yeni KiracÄ± Ekle ")]))])]),s("div",qe,[s("div",$e,[s("div",Oe,[s("div",Xe,[a[10]||(a[10]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Arama")],-1)),d(s("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>I.value.searchTerm=e),onInput:q,class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",placeholder:"Åžirket adÄ±, kiÅŸi adÄ±, vergi no..."},null,544),[[u,I.value.searchTerm]])]),s("div",ze,[a[12]||(a[12]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Durum")],-1)),d(s("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>I.value.isActive=e),onChange:q,class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400"},a[11]||(a[11]=[s("option",{value:""},"TÃ¼mÃ¼",-1),s("option",{value:"true"},"Aktif",-1),s("option",{value:"false"},"Pasif",-1)]),544),[[c,I.value.isActive]])]),s("div",Le,[a[14]||(a[14]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Kat")],-1)),d(s("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>I.value.floor=e),onChange:q,class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400"},[a[13]||(a[13]=s("option",{value:""},"TÃ¼m Katlar",-1)),(l(!0),r(b,null,g(B.value,e=>(l(),r("option",{key:e,value:e},y(e)+". Kat",9,He))),128))],544),[[c,I.value.floor]])]),s("div",Fe,[a[16]||(a[16]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Ä°ÅŸ TÃ¼rÃ¼")],-1)),d(s("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>I.value.businessType=e),onChange:q,class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400"},a[15]||(a[15]=[p('<option value="">TÃ¼m Ä°ÅŸ TÃ¼rleri</option><option value="Ticaret">Ticaret</option><option value="Hizmet">Hizmet</option><option value="Ãœretim">Ãœretim</option><option value="Ofis">Ofis</option><option value="Depo">Depo</option><option value="DiÄŸer">DiÄŸer</option>',7)]),544),[[c,I.value.businessType]])])]),s("div",Ge,[s("div",{class:"flex gap-2"},[s("button",{onClick:$,class:"btn btn-outline btn-sm border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"},a[17]||(a[17]=[s("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),n(" Filtreleri Temizle ")]))]),s("div",Ye,y(U.value.length)+" kiracÄ± bulundu ",1)])])]),U.value.length>0?(l(),r("div",_e,[(l(!0),r(b,null,g(E.value,e=>{return l(),r("div",{key:e.id,class:"relative group bg-white dark:bg-gray-800 rounded-2xl shadow-lg transition-transform duration-200 hover:scale-105 hover:shadow-2xl p-6 flex flex-col"},[s("div",Re,[s("div",Je,[a[18]||(a[18]=p('<button tabindex="0" class="btn btn-ghost btn-circle btn-sm"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="1.5"></circle><circle cx="19" cy="12" r="1.5"></circle><circle cx="5" cy="12" r="1.5"></circle></svg></button>',1)),s("ul",Qe,[s("li",null,[s("a",{onClick:a=>(e=>{m.push(`/tenants/${e.id}`)})(e)},"DetaylarÄ± GÃ¶r",8,We)]),s("li",null,[s("a",{onClick:a=>(e=>{K.value=e,V.value=!0})(e)},"DÃ¼zenle",8,Ze)]),s("li",null,[s("a",{onClick:a=>(async e=>{if(confirm(`${e.companyName} kiracÄ±sÄ±nÄ± silmek istediÄŸinizden emin misiniz?\n\nBu iÅŸlem kiracÄ±nÄ±n kullandÄ±ÄŸÄ± Ã¼niteyi de boÅŸaltacaktÄ±r.`))try{if(await Ee.deleteTenant(e.id),e.flats&&e.flats.length>0){const t=e.flats[0].id;try{await N.put(`/flats/${t}`,{isOccupied:!1,tenantId:null})}catch(a){}}P.success("KiracÄ± baÅŸarÄ±yla silindi ve Ã¼nite boÅŸaltÄ±ldÄ±"),f("tenant:deleted"),await M()}catch(t){P.error("KiracÄ± silinirken hata oluÅŸtu")}})(e),class:"text-error"},"Sil",8,ea)])])])]),s("div",aa,[s("div",{class:v(L(e.contactPersonName)+" flex items-center justify-center rounded-full w-16 h-16 text-2xl font-bold text-white shadow-lg")},y((n=e.companyName,n?n.substring(0,3).toUpperCase():"?")),3),s("div",null,[s("div",ta,[s("span",ra,y(e.contactPersonName),1),e.flats&&e.flats.length?(l(),r("span",la,"Daire "+y(e.flats[0].unitNumber),1)):o("",!0)]),s("div",oa,[s("span",{class:v(["badge font-semibold",e.isActive?"badge-success":"badge-ghost"])},y(e.isActive?"Aktif":"Pasif"),3)])])]),s("div",sa,[a[19]||(a[19]=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),s("span",null,"GiriÅŸ: "+y((t=e.contractStartDate,new Date(t).toLocaleDateString("tr-TR"))),1)]),e.contactPersonEmail?(l(),r("div",na,y(e.contactPersonEmail),1)):o("",!0),e.contactPersonPhone?(l(),r("div",ia,y(e.contactPersonPhone),1)):o("",!0)]);var t,n}),128))])):o("",!0),s("div",da,[s("div",ua,[s("div",ca,y(10*(j.value-1)+1)+"-"+y(Math.min(10*j.value,U.value.length))+" / "+y(U.value.length)+" kiracÄ± ",1),s("div",ba,[s("button",{onClick:a[5]||(a[5]=e=>j.value--),disabled:1===j.value,class:"join-item btn btn-sm"},"Â«",8,ga),s("button",ya,y(j.value),1),s("button",{onClick:a[6]||(a[6]=e=>j.value++),disabled:j.value>=S.value,class:"join-item btn btn-sm"},"Â»",8,ma)])])]),x(Ue,{visible:D.value,onSave:O,onClose:a[7]||(a[7]=e=>D.value=!1)},null,8,["visible"]),K.value?(l(),h(ae,{key:1,visible:V.value,tenant:K.value,onSave:X,onClose:z},null,8,["visible","tenant"])):o("",!0)]))}};export{pa as default};
