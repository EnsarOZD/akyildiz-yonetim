import{t as e,b as a,c as t,e as l,u as r,R as s}from"./index-BbOmoSe-.js";import{K as n,w as o,r as d,c as i,o as u,b as c,j as b,m,e as v,p as g,G as p,L as y,I as x,F as k,i as h,t as f,H as w,E as A,J as D,s as M,q as C,u as I,d as N,f as j,z as B}from"./vue-vendor-Bart4FG5.js";import{p as S}from"./paymentsService-C0mR9Igb.js";import{o as T}from"./ownersService-DzIHhHEK.js";import{u as V}from"./utilityDebtsService-C9I6VQLZ.js";import{u as z}from"./useErrorHandler-ClkkjmfK.js";import{u as P,a as F,f as E,g as L,b as U}from"./uiHelpers-DqgNUpgi.js";import{_ as H}from"./CustomFilterBar-qL-H0Yc_.js";import{_ as R,L as Y}from"./AdvanceAccountManager-FSxumZeR.js";import{t as K}from"./tenantsService-D7zXuWjI.js";import{p as O,i as _,e as G}from"./utils-vendor-Cy2sLATb.js";import{a as $,e as q,g as J,b as W,p as Z,c as Q}from"./enums-CeMB0k1K.js";import"./tenantsService-DJ11mlzP.js";const X={class:"modal-box max-w-4xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700 shadow-2xl"},ee={class:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700 mb-6"},ae={class:"space-y-6"},te={class:"form-control"},le={class:"flex gap-4"},re={class:"flex items-center gap-2"},se={class:"flex items-center gap-2"},ne={key:0,class:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800"},oe={class:"form-control"},de=["value"],ie={key:1,class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800"},ue={class:"form-control"},ce=["value"],be={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800"},me={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},ve={class:"form-control"},ge={class:"form-control"},pe={class:"form-control"},ye={class:"form-control"},xe=["value"],ke={key:2,class:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border border-amber-200 dark:border-amber-800"},he={class:"flex items-center justify-between mb-4"},fe={class:"flex gap-2"},we={class:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800"},Ae={class:"flex items-center gap-2"},De={class:"text-sm text-blue-700 dark:text-blue-300"},Me={key:0},Ce={key:1},Ie={key:0,class:"space-y-3 max-h-64 overflow-y-auto"},Ne=["value"],je={class:"flex-1"},Be={class:"flex items-center justify-between"},Se={class:"font-semibold text-gray-800 dark:text-gray-100"},Te={class:"text-sm text-gray-600 dark:text-gray-400"},Ve={key:0,class:"ml-2 text-blue-600 dark:text-blue-400"},ze={class:"text-right"},Pe={class:"font-bold text-red-600 dark:text-red-400"},Fe={class:"text-xs text-gray-500 dark:text-gray-400"},Ee={key:0,class:"text-xs text-yellow-600 dark:text-yellow-400"},Le={key:0,class:"mt-2"},Ue=["onUpdate:modelValue","max"],He={key:1,class:"mt-4 p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600"},Re={class:"space-y-2"},Ye={class:"flex justify-between items-center"},Ke={class:"font-semibold text-gray-800 dark:text-gray-100"},Oe={class:"flex justify-between items-center"},_e={class:"font-semibold text-gray-800 dark:text-gray-100"},Ge={class:"flex justify-between items-center"},$e={class:"font-semibold text-primary"},qe={key:3,class:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800"},Je={class:"flex items-center gap-3"},We={class:"text-green-600 dark:text-green-400 text-sm"},Ze={key:4,class:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800 mb-2"},Qe={class:"flex items-center gap-3"},Xe={class:"text-red-700 dark:text-red-300 font-semibold"},ea={class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},aa=["disabled"],ta=["disabled"],la={key:0,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ra={key:1,class:"w-4 h-4 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},sa={__name:"PaymentModal",props:{visible:{type:Boolean,default:!1},payment:{type:Object,default:()=>({tenantId:null,ownerId:null,amount:null,date:"",type:"",bank:"",description:""})},tenants:{type:Array,default:()=>[]},banks:{type:Array,default:()=>[]},editMode:{type:Boolean,default:!1}},emits:["save","cancel","dirty-changed"],setup(e,{expose:t,emit:l}){const r=e,s=l,{handleNetworkError:C}=z(),I=n({tenantId:null,ownerId:null,amount:null,date:"",type:"",bank:"",description:""});o(()=>r.payment,e=>{Object.assign(I,e||{})},{immediate:!0,deep:!0});const N=d([]),j=i(()=>r.tenants||[]),B=i(()=>r.banks||[]),{notifyError:F}=a(),{isDirty:E,resetDirty:L}=P(()=>I);t({isDirty:E,resetDirty:L}),o(E,e=>s("dirty-changed",e),{immediate:!0}),o(()=>r.visible,e=>{e&&L()});const U=d("tenant");o(()=>r.payment,e=>{(null==e?void 0:e.ownerId)?U.value="owner":(null==e?void 0:e.tenantId)&&(U.value="tenant")},{immediate:!0});const H=d([]),R=d([]),Y=d(!0),K=d({}),O=e=>{Y.value=e,e&&(R.value=[],K.value={})},_=i(()=>R.value.reduce((e,a)=>e+(Number(K.value[a])||0),0)),G=()=>{R.value=[],K.value={}},$=()=>{},q=d(!1),J=d(""),W=e=>Number(e||0).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),Z=e=>{if(!e)return 0;const a=new Date,t=new Date(e),l=Math.ceil((a-t)/864e5);return l>0?l:0},Q=i(()=>!!I.date&&Number(I.amount)>0&&Number.isFinite(Number(I.type))&&!!I.bank&&("tenant"===U.value&&!!I.tenantId||"owner"===U.value&&!!I.ownerId)),sa=async()=>{if(I.tenantId)try{const e=await V.getUtilityDebts({tenantId:I.tenantId,status:0});H.value=e||[]}catch(e){C(e,{component:"PaymentModal",action:"fetchTenantDebts"}),H.value=[]}},na=async()=>{if(I.ownerId)try{const e=await V.getUtilityDebts({ownerId:I.ownerId,status:0});H.value=e||[]}catch(e){C(e,{component:"PaymentModal",action:"fetchOwnerDebts"}),H.value=[]}},oa=async()=>{if(!Q.value)return J.value="L√ºtfen t√ºm zorunlu alanlarƒ± doldurun ve ge√ßerli bir tutar girin.",void ia(J.value);q.value=!0,J.value="";try{const e=Number.isFinite(Number(I.type))?Number(I.type):null,a={tenantId:"tenant"===U.value?I.tenantId:null,ownerId:"owner"===U.value?I.ownerId:null,amount:Number(I.amount),paymentDate:I.date,type:e,bank:I.bank,description:I.description||"",autoAllocate:Y.value,debtAllocations:Y.value?[]:R.value.map(e=>({debtId:e,amount:Number(K.value[e]||0)}))},t=await S.createPaymentWithAllocation(a);L(),s("save",t)}catch(e){try{C(e,{component:"PaymentModal",action:"savePayment"})}catch{ia("√ñdeme kaydedilirken bir hata olu≈ütu.")}}finally{q.value=!1}},da=()=>{s("cancel")};function ia(e){F(e)}return u(async()=>{try{const e=await T.getOwners();N.value=e||[]}catch{N.value=[]}"tenant"===U.value?await sa():await na()}),o(U,e=>{H.value=[],R.value=[],K.value={},"tenant"===e?(I.ownerId=null,sa()):(I.tenantId=null,na())}),o(()=>I.tenantId,()=>{"tenant"===U.value&&sa()}),o(()=>I.ownerId,()=>{"owner"===U.value&&na()}),(a,t)=>e.visible?(m(),c("dialog",{key:0,class:"modal",open:"",onCancel:t[12]||(t[12]=M(()=>{},["prevent"]))},[v("div",X,[v("div",ee,[t[14]||(t[14]=v("h3",{class:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2"},[v("span",{class:"text-2xl"},"üí≥"),g(" Akƒ±llƒ± √ñdeme Sistemi ")],-1)),v("button",{onClick:t[0]||(t[0]=e=>a.$emit("cancel")),class:"btn btn-sm btn-ghost text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},t[13]||(t[13]=[v("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),v("form",ae,[v("div",te,[t[17]||(t[17]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"√ñdeme T√ºr√º")],-1)),v("div",le,[v("label",re,[p(v("input",{type:"radio",value:"tenant","onUpdate:modelValue":t[1]||(t[1]=e=>U.value=e)},null,512),[[y,U.value]]),t[15]||(t[15]=v("span",null,"Kƒ∞RACI",-1))]),v("label",se,[p(v("input",{type:"radio",value:"owner","onUpdate:modelValue":t[2]||(t[2]=e=>U.value=e)},null,512),[[y,U.value]]),t[16]||(t[16]=v("span",null,"MAL SAHƒ∞Bƒ∞",-1))])])]),"tenant"===U.value?(m(),c("div",ne,[t[20]||(t[20]=v("h4",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2"},[v("span",{class:"text-xl"},"üë§"),g(" Kiracƒ± Se√ßimi ")],-1)),v("div",oe,[t[19]||(t[19]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Kiracƒ±")],-1)),p(v("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>I.tenantId=e),onChange:sa,class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},[t[18]||(t[18]=v("option",{disabled:"",value:""},"Kiracƒ± se√ßin",-1)),(m(!0),c(k,null,h(j.value,e=>{return m(),c("option",{key:e.id,value:e.id},f((null==(a=e)?void 0:a.companyName)||(null==a?void 0:a.company)||(null==a?void 0:a.contactPersonName)||(null==a?void 0:a.fullName)||[null==a?void 0:a.firstName,null==a?void 0:a.lastName].filter(Boolean).join(" ")||(null==a?void 0:a.email)||`#${null==a?void 0:a.id}`),9,de);var a}),128))],544),[[x,I.tenantId]])])])):b("",!0),"owner"===U.value?(m(),c("div",ie,[t[23]||(t[23]=v("h4",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2"},[v("span",{class:"text-xl"},"üè†"),g(" Mal Sahibi Se√ßimi ")],-1)),v("div",ue,[t[22]||(t[22]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Mal Sahibi")],-1)),p(v("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>I.ownerId=e),onChange:na,class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},[t[21]||(t[21]=v("option",{disabled:"",value:""},"Mal Sahibi se√ßin",-1)),(m(!0),c(k,null,h(N.value,e=>(m(),c("option",{key:e.id,value:e.id},f(e.company||e.fullName||e.name||e.email||`#${e.id}`),9,ce))),128))],544),[[x,I.ownerId]])])])):b("",!0),v("div",be,[t[30]||(t[30]=v("h4",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2"},[v("span",{class:"text-xl"},"üè¶"),g(" Banka Hareketi Bilgileri ")],-1)),v("div",me,[v("div",ve,[t[24]||(t[24]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Hareket Tarihi")],-1)),p(v("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>I.date=e),type:"date",class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},null,512),[[w,I.date]])]),v("div",ge,[t[25]||(t[25]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Gelen Tutar (‚Ç∫)")],-1)),p(v("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>I.amount=e),type:"number",step:"0.01",placeholder:"0.00",class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},null,512),[[w,I.amount,void 0,{number:!0}]])]),v("div",pe,[t[27]||(t[27]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"√ñdeme Tipi")],-1)),p(v("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>I.type=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},t[26]||(t[26]=[A('<option disabled value="">√ñdeme Tipi Se√ßin</option><option value="0">Aidat</option><option value="1">Elektrik</option><option value="2">Su</option><option value="3">Doƒüalgaz</option><option value="4">Diƒüer</option>',6)]),512),[[x,I.type]])]),v("div",ye,[t[29]||(t[29]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Banka")],-1)),p(v("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>I.bank=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",required:""},[t[28]||(t[28]=v("option",{disabled:"",value:""},"Banka Se√ßin",-1)),(m(!0),c(k,null,h(B.value,e=>(m(),c("option",{key:e,value:e},f(e),9,xe))),128))],512),[[x,I.bank]])])])]),("tenant"===U.value?I.tenantId:I.ownerId)&&H.value.length>0?(m(),c("div",ke,[v("div",he,[t[34]||(t[34]=v("h4",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2"},[v("span",{class:"text-xl"},"üìã"),g(" Bor√ß E≈üle≈ütirme ")],-1)),v("div",fe,[v("button",{type:"button",onClick:t[9]||(t[9]=e=>O(!0)),class:"btn btn-sm btn-primary bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border-0 text-white"},t[31]||(t[31]=[v("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),g(" Otomatik E≈üle≈ütir ")])),v("button",{type:"button",onClick:t[10]||(t[10]=e=>O(!1)),class:"btn btn-sm btn-outline border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},t[32]||(t[32]=[v("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1),g(" Manuel Se√ß ")])),v("button",{type:"button",onClick:G,class:"btn btn-sm btn-outline border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},t[33]||(t[33]=[v("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),g(" Temizle ")]))])]),v("div",we,[v("div",Ae,[t[36]||(t[36]=v("svg",{class:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),v("span",De,[t[35]||(t[35]=v("strong",null,"Akƒ±llƒ± √ñdeme Sistemi:",-1)),Y.value?(m(),c("span",Me,"Otomatik mod - Backend bor√ßlarƒ± kapatacak ve fazla tutarƒ± avans hesabƒ±na aktaracak.")):(m(),c("span",Ce,"Manuel mod - Hangi bor√ßlarƒ±n √∂deneceƒüini se√ßebilirsiniz."))])])]),Y.value?b("",!0):(m(),c("div",Ie,[(m(!0),c(k,null,h(H.value,e=>(m(),c("div",{key:e.id,class:"flex items-center gap-3 p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600"},[p(v("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":t[11]||(t[11]=e=>R.value=e),onChange:$,class:"checkbox checkbox-primary"},null,40,Ne),[[D,R.value]]),v("div",je,[v("div",Be,[v("div",null,[v("p",Se,f(e.typeLabel||e.type),1),v("p",Te,[g(f(e.period||e.dueDateFormatted)+" ",1),e.unit&&"-"!==e.unit?(m(),c("span",Ve," ("+f(e.unit)+") ",1)):b("",!0)])]),v("div",ze,[v("p",Pe,f(W(e.remainingAmount||e.amount)),1),v("p",Fe,f(Z(e.dueDate))+" g√ºn gecikmi≈ü",1),e.paidAmount>0?(m(),c("p",Ee,f(W((e.remainingAmount||e.amount)-e.paidAmount))+" kalan ",1)):b("",!0)])]),R.value.includes(e.id)?(m(),c("div",Le,[p(v("input",{"onUpdate:modelValue":a=>K.value[e.id]=a,type:"number",step:"0.01",max:e.remainingAmount||e.amount,class:"input input-sm input-bordered w-32",placeholder:"Tutar"},null,8,Ue),[[w,K.value[e.id]]])])):b("",!0)])]))),128))])),R.value.length>0||Y.value?(m(),c("div",He,[t[40]||(t[40]=v("h5",{class:"font-semibold text-gray-800 dark:text-gray-100 mb-2"},"√ñdeme √ñzeti",-1)),v("div",Re,[v("div",Ye,[t[37]||(t[37]=v("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Toplam Tutar:",-1)),v("span",Ke,f(W(I.amount)),1)]),v("div",Oe,[t[38]||(t[38]=v("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"E≈üle≈ütirilecek:",-1)),v("span",_e,f(W(_.value)),1)]),v("div",Ge,[t[39]||(t[39]=v("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Avans Hesabƒ±na:",-1)),v("span",$e,f(W((I.amount||0)-_.value)),1)])])])):b("",!0)])):b("",!0),("tenant"===U.value?I.tenantId:I.ownerId)&&0===H.value.length?(m(),c("div",qe,[v("div",Je,[t[43]||(t[43]=v("svg",{class:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),v("div",null,[t[42]||(t[42]=v("p",{class:"text-green-700 dark:text-green-300 font-semibold"},"Bor√ß Bulunamadƒ±",-1)),v("p",We,[g(" Se√ßilen "+f("tenant"===U.value?"kiracƒ±nƒ±n":"mal sahibinin")+" √∂denmemi≈ü borcu bulunmuyor. ",1),v("strong",null,f(W(I.amount||0)),1),t[41]||(t[41]=g(" tutarƒ± avans hesabƒ±na aktarƒ±lacak. "))])])])])):b("",!0),J.value?(m(),c("div",Ze,[v("div",Qe,[t[44]||(t[44]=v("svg",{class:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),v("span",Xe,f(J.value),1)])])):b("",!0),v("div",ea,[v("button",{type:"button",class:"btn btn-outline border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:da,disabled:q.value},[t[45]||(t[45]=v("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),g(" "+f(q.value?"ƒ∞≈ülem Devam Ediyor...":"ƒ∞ptal"),1)],8,aa),v("button",{type:"button",class:"btn btn-success bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 border-0 text-white shadow-lg",disabled:!Q.value||q.value,onClick:oa},[q.value?(m(),c("svg",ra,t[47]||(t[47]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(m(),c("svg",la,t[46]||(t[46]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))),g(" "+f(q.value?"Kaydediliyor...":"√ñdemeyi Kaydet"),1)],8,ta)])])])],32)):b("",!0)}},na={class:"financial-reports bg-base-100 p-6 rounded-lg shadow-lg"},oa={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},da={class:"form-control"},ia={class:"form-control"},ua={class:"form-control"},ca=["value"],ba={class:"form-control"},ma=["disabled","title"],va={key:0,class:"loading loading-spinner loading-sm"},ga={key:0,class:"alert alert-warning mb-4"},pa={key:1,class:"text-center py-8 text-gray-500"},ya={key:2,class:"space-y-6"},xa={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ka={class:"stat bg-base-200 rounded-lg"},ha={class:"stat-value text-primary"},fa={class:"stat-desc"},wa={class:"stat bg-base-200 rounded-lg"},Aa={class:"stat-value text-error"},Da={class:"stat-desc"},Ma={class:"stat bg-base-200 rounded-lg"},Ca={class:"stat-value text-success"},Ia={class:"stat-desc"},Na={class:"stat bg-base-200 rounded-lg"},ja={class:"overflow-x-auto"},Ba={class:"table table-zebra w-full"},Sa={class:"text-success"},Ta={class:"text-error"},Va={key:3,class:"text-center py-8"},za={__name:"FinancialReports",setup(a){const{handleNetworkError:l,handleValidationError:r}=z(),{showError:s,showSuccess:n}=t(),o=d(!1),y=d([]),D=d(null),M=new Date,I=new Date(M.getFullYear(),M.getMonth(),1),N=d({startDate:G(I,"yyyy-MM-dd"),endDate:G(M,"yyyy-MM-dd"),tenantId:"",ownerId:""}),j=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(Number(e||0)),B=a=>{if(!a)return"-";const t="string"==typeof a||"number"==typeof a?new Date(a):a;return isNaN(t)?"-":G(t,"dd MMM yyyy",{locale:e})},T=i(()=>!N.value.startDate||!N.value.endDate||new Date(N.value.startDate)<=new Date(N.value.endDate)),V=Object.freeze({totalPayments:0,paymentCount:0,totalDebts:0,debtCount:0,advanceBalance:0,advanceAccountCount:0,netBalance:0,details:[]}),P=i(()=>{const e=D.value||{};return{totalPayments:Number(e.totalPayments||0),paymentCount:Number(e.paymentCount||0),totalDebts:Number(e.totalDebts||0),debtCount:Number(e.debtCount||0),advanceBalance:Number(e.advanceBalance||0),advanceAccountCount:Number(e.advanceAccountCount||0),netBalance:Number(e.netBalance||(e.totalPayments||0)-(e.totalDebts||0)),details:Array.isArray(e.details)?e.details.map((e,a)=>({_idx:a,...e})):[]}}),F=i(()=>{const e=P.value;return e.paymentCount>0||e.debtCount>0||e.advanceAccountCount>0||e.details&&e.details.length>0});function E(e){return e.companyName||e.company||e.fullName||[e.firstName,e.lastName].filter(Boolean).join(" ")||e.email||"Kiracƒ±"}function L(e){const a=y.value.find(a=>a.id===e);return a?E(a):"Bilinmiyor"}async function U(){if(T.value){o.value=!0;try{const e=await S.getFinancialReports({startDate:N.value.startDate,endDate:N.value.endDate,tenantId:N.value.tenantId||void 0,ownerId:N.value.ownerId||void 0});D.value=e&&"object"==typeof e?e:V,n("Rapor g√ºncellendi")}catch(e){D.value=V,l(e,{component:"FinancialReports",action:"loadReports"}),s("Rapor y√ºklenemedi")}finally{o.value=!1}}else r(new Error("Tarih aralƒ±ƒüƒ± ge√ßersiz"),{component:"FinancialReports",action:"loadReports"})}return u(()=>{!async function(){try{const e=await K.getTenants();y.value=Array.isArray(e)?e:[]}catch(e){l(e,{component:"FinancialReports",action:"loadTenants"}),y.value=[]}}(),U()}),(e,a)=>(m(),c("div",na,[a[16]||(a[16]=v("h2",{class:"text-2xl font-bold mb-6 text-primary"},"Finansal Raporlar",-1)),v("div",oa,[v("div",da,[a[3]||(a[3]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"Ba≈ülangƒ±√ß Tarihi")],-1)),p(v("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>N.value.startDate=e),type:"date",class:"input input-bordered"},null,512),[[w,N.value.startDate]])]),v("div",ia,[a[4]||(a[4]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"Biti≈ü Tarihi")],-1)),p(v("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>N.value.endDate=e),type:"date",class:"input input-bordered"},null,512),[[w,N.value.endDate]])]),v("div",ua,[a[6]||(a[6]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"Kiracƒ±")],-1)),p(v("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>N.value.tenantId=e),class:"select select-bordered"},[a[5]||(a[5]=v("option",{value:""},"T√ºm Kiracƒ±lar",-1)),(m(!0),c(k,null,h(y.value,e=>(m(),c("option",{key:e.id,value:e.id},f(E(e)),9,ca))),128))],512),[[x,N.value.tenantId]])]),v("div",ba,[a[7]||(a[7]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"¬†")],-1)),v("button",{onClick:U,class:"btn btn-primary",disabled:o.value||!T.value,title:T.value?"":"Ba≈ülangƒ±√ß tarihi biti≈üten b√ºy√ºk olamaz"},[o.value?(m(),c("span",va)):b("",!0),g(" "+f(o.value?"Y√ºkleniyor...":"Rapor Y√ºkle"),1)],8,ma)])]),T.value?b("",!0):(m(),c("div",ga," Ba≈ülangƒ±√ß tarihi, biti≈ü tarihinden b√ºy√ºk olamaz. ")),o.value?(m(),c("div",pa,"Y√ºkleniyor‚Ä¶")):F.value?(m(),c("div",ya,[v("div",xa,[v("div",ka,[a[8]||(a[8]=v("div",{class:"stat-title"},"Toplam √ñdeme",-1)),v("div",ha,f(j(P.value.totalPayments)),1),v("div",fa,f(P.value.paymentCount)+" √∂deme",1)]),v("div",wa,[a[9]||(a[9]=v("div",{class:"stat-title"},"Toplam Bor√ß",-1)),v("div",Aa,f(j(P.value.totalDebts)),1),v("div",Da,f(P.value.debtCount)+" bor√ß",1)]),v("div",Ma,[a[10]||(a[10]=v("div",{class:"stat-title"},"Avans Bakiyesi",-1)),v("div",Ca,f(j(P.value.advanceBalance)),1),v("div",Ia,f(P.value.advanceAccountCount)+" hesap",1)]),v("div",Na,[a[11]||(a[11]=v("div",{class:"stat-title"},"Net Durum",-1)),v("div",{class:C(["stat-value",P.value.netBalance>=0?"text-success":"text-error"])},f(j(P.value.netBalance)),3),a[12]||(a[12]=v("div",{class:"stat-desc"},"√ñdeme - Bor√ß",-1))])]),v("div",ja,[v("table",Ba,[a[13]||(a[13]=v("thead",null,[v("tr",null,[v("th",null,"Tarih"),v("th",null,"Kiracƒ±"),v("th",null,"√ñdeme"),v("th",null,"Bor√ß"),v("th",null,"Kalan"),v("th",null,"Durum")])],-1)),v("tbody",null,[(m(!0),c(k,null,h(P.value.details,e=>(m(),c("tr",{key:e.id||e._idx},[v("td",null,f(B(e.date)),1),v("td",null,f(e.tenantName||L(e.tenantId)),1),v("td",Sa,f(j(e.paymentAmount||0)),1),v("td",Ta,f(j(e.debtAmount||0)),1),v("td",{class:C((e.remainingAmount||0)>=0?"text-success":"text-error")},f(j(e.remainingAmount||0)),3),v("td",null,[v("span",{class:C(["badge",(e.remainingAmount||0)>=0?"badge-success":"badge-error"])},f((e.remainingAmount||0)>=0?"Pozitif":"Negatif"),3)])]))),128))])])]),a[14]||(a[14]=A('<div class="bg-base-200 p-4 rounded-lg"><h3 class="text-lg font-semibold mb-3">Grafik G√∂r√ºn√ºm√º</h3><div class="text-center py-8 text-gray-500"><svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg><p>Grafik g√∂r√ºn√ºm√º yakƒ±nda eklenecek</p></div></div>',1))])):o.value?b("",!0):(m(),c("div",Va,a[15]||(a[15]=[A('<div class="text-gray-500"><svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><p class="text-lg font-medium">Rapor bulunamadƒ±</p><p class="text-sm">Filtreleri deƒüi≈ütirip tekrar deneyin.</p></div>',1)])))]))}},Pa={class:"audit-logs bg-base-100 p-6 rounded-lg shadow-lg"},Fa={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},Ea={class:"form-control"},La={class:"form-control"},Ua={class:"form-control"},Ha=["value"],Ra={class:"form-control"},Ya=["value"],Ka={class:"form-control"},Oa=["disabled"],_a={key:0,class:"loading loading-spinner loading-sm"},Ga={key:0,class:"overflow-x-auto"},$a={class:"table table-zebra w-full"},qa={class:"flex items-center space-x-2"},Ja={class:"avatar placeholder"},Wa={class:"bg-neutral text-neutral-content rounded-full w-8"},Za={class:"text-xs"},Qa={class:"font-medium"},Xa={class:"text-sm text-gray-500"},et={class:"font-medium"},at={class:"text-sm text-gray-500"},tt={class:"text-sm text-gray-500"},lt=["onClick"],rt={key:1,class:"text-center py-8"},st={id:"log_details_modal",class:"modal"},nt={class:"modal-box w-11/12 max-w-4xl"},ot={key:0,class:"space-y-4"},dt={class:"grid grid-cols-2 gap-4"},it={class:"text-sm"},ut={class:"text-sm"},ct={class:"text-sm"},bt={class:"text-sm"},mt={class:"text-sm"},vt={class:"text-sm text-xs"},gt={key:0},pt={class:"bg-base-200 p-4 rounded-lg"},yt={key:0,class:"mb-3"},xt={class:"text-xs bg-error text-error-content p-2 rounded"},kt={key:1},ht={class:"text-xs bg-success text-success-content p-2 rounded"},ft={key:1},wt={class:"bg-base-200 p-4 rounded-lg"},At={class:"text-xs"},Dt={__name:"AuditLogs",setup(t){const{notifyError:l}=a(),r=d(!1),s=d([]),n=d(null),o=d({startDate:G(new Date((new Date).getFullYear(),(new Date).getMonth(),1),"yyyy-MM-dd"),endDate:G(new Date,"yyyy-MM-dd"),action:"",entityType:"",userId:""}),i=a=>G(new Date(a),"dd MMM yyyy HH:mm",{locale:e}),y=async()=>{r.value=!0;try{const e=await S.getAuditLogs(o.value);s.value=e||[]}catch(e){l("Loglar y√ºklenemedi: "+e.message)}finally{r.value=!1}};return u(()=>{y()}),(e,a)=>(m(),c("div",Pa,[a[25]||(a[25]=v("h2",{class:"text-2xl font-bold mb-6 text-primary"},"Sistem Loglarƒ±",-1)),v("div",Fa,[v("div",Ea,[a[4]||(a[4]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"Ba≈ülangƒ±√ß Tarihi")],-1)),p(v("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.startDate=e),type:"date",class:"input input-bordered"},null,512),[[w,o.value.startDate]])]),v("div",La,[a[5]||(a[5]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"Biti≈ü Tarihi")],-1)),p(v("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.endDate=e),type:"date",class:"input input-bordered"},null,512),[[w,o.value.endDate]])]),v("div",Ua,[a[7]||(a[7]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"ƒ∞≈ülem T√ºr√º")],-1)),p(v("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.action=e),class:"select select-bordered"},[a[6]||(a[6]=v("option",{value:""},"T√ºm ƒ∞≈ülemler",-1)),(m(!0),c(k,null,h(I($),(e,a)=>(m(),c("option",{key:a,value:a},f(e),9,Ha))),128))],512),[[x,o.value.action]])]),v("div",Ra,[a[9]||(a[9]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"Varlƒ±k T√ºr√º")],-1)),p(v("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>o.value.entityType=e),class:"select select-bordered"},[a[8]||(a[8]=v("option",{value:""},"T√ºm Varlƒ±klar",-1)),(m(!0),c(k,null,h(I(q),(e,a)=>(m(),c("option",{key:a,value:a},f(e),9,Ya))),128))],512),[[x,o.value.entityType]])]),v("div",Ka,[a[10]||(a[10]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"¬†")],-1)),v("button",{onClick:y,class:"btn btn-primary",disabled:r.value},[r.value?(m(),c("span",_a)):b("",!0),g(" "+f(r.value?"Y√ºkleniyor...":"Log Y√ºkle"),1)],8,Oa)])]),s.value.length>0?(m(),c("div",Ga,[v("table",$a,[a[11]||(a[11]=v("thead",null,[v("tr",null,[v("th",null,"Tarih"),v("th",null,"Kullanƒ±cƒ±"),v("th",null,"ƒ∞≈ülem"),v("th",null,"Varlƒ±k"),v("th",null,"IP Adresi"),v("th",null,"Detaylar")])],-1)),v("tbody",null,[(m(!0),c(k,null,h(s.value,e=>{var a,t;return m(),c("tr",{key:e.id},[v("td",null,f(i(e.createdAt)),1),v("td",null,[v("div",qa,[v("div",Ja,[v("div",Wa,[v("span",Za,f((null==(a=e.userName)?void 0:a.charAt(0))||"U"),1)])]),v("div",null,[v("div",Qa,f(e.userName||"Sistem"),1),v("div",Xa,f(e.userEmail||"-"),1)])])]),v("td",null,[v("span",{class:C(["badge",(t=e.action,{Create:"badge-success",Update:"badge-warning",Delete:"badge-error",Payment:"badge-primary",DebtAllocation:"badge-info",AdvanceUsage:"badge-secondary"}[t]||"badge-neutral")])},f(I(J)(e.action)),3)]),v("td",null,[v("div",null,[v("div",et,f(I(W)(e.entityType)),1),v("div",at,"ID: "+f(e.entityId),1)])]),v("td",tt,f(e.ipAddress||"-"),1),v("td",null,[v("button",{onClick:a=>(e=>{n.value=e,document.getElementById("log_details_modal").showModal()})(e),class:"btn btn-sm btn-outline"}," Detaylar ",8,lt)])])}),128))])])])):r.value?b("",!0):(m(),c("div",rt,a[12]||(a[12]=[A('<div class="text-gray-500"><svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><p class="text-lg font-medium">Log bulunamadƒ±</p><p class="text-sm">Filtreleri deƒüi≈ütirip tekrar deneyin.</p></div>',1)]))),v("dialog",st,[v("div",nt,[a[23]||(a[23]=v("h3",{class:"font-bold text-lg mb-4"},"Log Detaylarƒ±",-1)),n.value?(m(),c("div",ot,[v("div",dt,[v("div",null,[a[13]||(a[13]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"Tarih")],-1)),v("div",it,f(i(n.value.createdAt)),1)]),v("div",null,[a[14]||(a[14]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"Kullanƒ±cƒ±")],-1)),v("div",ut,f(n.value.userName||"Sistem"),1)]),v("div",null,[a[15]||(a[15]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"ƒ∞≈ülem")],-1)),v("div",ct,f(I(J)(n.value.action)),1)]),v("div",null,[a[16]||(a[16]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"Varlƒ±k")],-1)),v("div",bt,f(I(W)(n.value.entityType))+" (ID: "+f(n.value.entityId)+")",1)]),v("div",null,[a[17]||(a[17]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"IP Adresi")],-1)),v("div",mt,f(n.value.ipAddress||"-"),1)]),v("div",null,[a[18]||(a[18]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"User Agent")],-1)),v("div",vt,f(n.value.userAgent||"-"),1)])]),n.value.oldValues||n.value.newValues?(m(),c("div",gt,[a[21]||(a[21]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"Deƒüi≈üiklikler")],-1)),v("div",pt,[n.value.oldValues?(m(),c("div",yt,[a[19]||(a[19]=v("div",{class:"font-semibold text-error mb-2"},"Eski Deƒüerler:",-1)),v("pre",xt,f(JSON.stringify(n.value.oldValues,null,2)),1)])):b("",!0),n.value.newValues?(m(),c("div",kt,[a[20]||(a[20]=v("div",{class:"font-semibold text-success mb-2"},"Yeni Deƒüerler:",-1)),v("pre",ht,f(JSON.stringify(n.value.newValues,null,2)),1)])):b("",!0)])])):b("",!0),n.value.additionalData?(m(),c("div",ft,[a[22]||(a[22]=v("label",{class:"label"},[v("span",{class:"label-text font-semibold"},"Ek Bilgiler")],-1)),v("div",wt,[v("pre",At,f(JSON.stringify(n.value.additionalData,null,2)),1)])])):b("",!0)])):b("",!0),a[24]||(a[24]=v("div",{class:"modal-action"},[v("form",{method:"dialog"},[v("button",{class:"btn"},"Kapat")])],-1))])])]))}},Mt=N("payments",{state:()=>({payments:[],advanceAccounts:[],loading:!1,lastFetched:null}),actions:{async fetchPayments(e=!1){if(!e&&this.payments.length>0&&this.lastFetched&&Date.now()-this.lastFetched<3e5)return this.payments;this.loading=!0;try{const e=await S.getPayments();return this.payments=e||[],this.lastFetched=Date.now(),this.payments}catch(a){throw l.logError(a,{component:"PaymentsStore",action:"fetchPayments"}),a}finally{this.loading=!1}},async fetchAdvanceAccounts(){this.loading=!0;try{const e=await S.getAdvanceAccounts(),a=Array.isArray(e)?e:(null==e?void 0:e.items)||[];return this.advanceAccounts=a.map(e=>({...e,balance:Number(e.balance??0)})).filter(e=>e.balance>0),this.advanceAccounts}catch(e){throw l.logError(e,{component:"PaymentsStore",action:"fetchAdvanceAccounts"}),e}finally{this.loading=!1}},async deletePayment(e){try{await S.deletePayment(e),this.payments=this.payments.filter(a=>a.id!==e),await this.fetchAdvanceAccounts()}catch(a){throw a}}}}),Ct={class:"p-4 sm:p-6 bg-gray-50 min-h-screen font-sans dark:bg-gray-900"},It={class:"max-w-7xl mx-auto"},Nt={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6"},jt={class:"flex flex-wrap items-center justify-center sm:justify-end gap-2 sm:gap-4"},Bt={class:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 px-3 py-1 rounded-full text-xs sm:text-sm whitespace-nowrap"},St={class:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-full text-xs sm:text-sm whitespace-nowrap"},Tt={class:"bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-400 px-3 py-1 rounded-full text-xs sm:text-sm whitespace-nowrap"},Vt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},zt={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},Pt={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},Ft={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},Et={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},Lt={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},Ut={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},Ht={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},Rt={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},Yt={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-8"},Kt={class:"h-64 flex items-end justify-between gap-2"},Ot={class:"text-xs text-gray-500 dark:text-gray-400"},_t={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-8"},Gt={class:"grid grid-cols-2 sm:grid-cols-4 gap-4"},$t={class:"flex items-center gap-3 mb-2"},qt={class:"text-2xl"},Jt={class:"font-semibold text-gray-800 dark:text-gray-100"},Wt={class:"text-sm text-gray-500 dark:text-gray-400"},Zt={class:"text-lg font-bold text-green-600 dark:text-green-400"},Qt={key:0,class:"mb-6"},Xt={key:1,class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},el={key:2,class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-6"},al={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},tl={class:"flex items-center justify-between mb-2"},ll={class:"font-semibold text-gray-800 dark:text-gray-100"},rl={class:"text-2xl font-bold text-purple-600 dark:text-purple-400 mb-1"},sl={class:"text-sm text-gray-600 dark:text-gray-400"},nl={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700"},ol={class:"mt-6 space-y-2"},dl={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},il={key:1},ul={class:"md:col-span-5 flex items-center gap-4"},cl={class:"font-bold text-gray-800 dark:text-gray-100"},bl={class:"text-sm text-gray-500 dark:text-gray-400"},ml={class:"md:col-span-3 text-left md:text-center text-2xl font-semibold text-green-600 dark:text-green-400"},vl={class:"md:col-span-2 text-left md:text-center text-sm text-gray-600 dark:text-gray-300"},gl={class:"font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2"},pl={key:0,class:"md:col-span-2 text-right"},yl={class:"dropdown dropdown-end"},xl={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-200 rounded-box w-32 z-10"},kl=["onClick"],hl=["onClick"],fl={key:0,class:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-6 pt-6 border-t dark:border-gray-700"},wl={class:"text-sm text-gray-500"},Al={class:"font-medium"},Dl={class:"font-medium"},Ml={class:"font-medium"},Cl={class:"flex items-center gap-1"},Il=["disabled"],Nl=["disabled"],jl={class:"flex items-center gap-1"},Bl=["onClick"],Sl=["disabled"],Tl=["disabled"],Vl={key:0,class:"modal",open:""},zl={key:1,class:"modal",open:""},Pl={class:"modal-box max-w-4xl"},Fl={class:"flex items-center justify-between mb-4"},El={key:2,class:"modal",open:""},Ll={class:"modal-box max-w-6xl"},Ul={class:"flex items-center justify-between mb-4"},Hl={key:3,class:"modal",open:""},Rl={class:"modal-box max-w-6xl"},Yl={class:"flex items-center justify-between mb-4"},Kl={key:4,class:"flex justify-center items-center py-12"},Ol={__name:"Payments",setup(t){const{handleNetworkError:l}=z(),{notifySuccess:n,notifyError:p}=a(),y=r(),x=Mt(),w=F(),A=a=>function(a,t="dd.MM.yyyy"){if(!a)return"Tarih belirtilmedi";try{let l;if("string"==typeof a)l=O(a);else{if(!(a instanceof Date))return"Ge√ßersiz tarih";l=a}return _(l)?l.getFullYear()<=1900?"Tarih belirtilmedi":G(l,t,{locale:e}):"Ge√ßersiz tarih"}catch(l){return"Ge√ßersiz tarih"}}(a,"dd MMM yyyy"),D=i(()=>x.payments),M=i(()=>w.tenants),N=i(()=>x.advanceAccounts),S=d(["Ziraat","ƒ∞≈ü Bankasƒ±","Garanti","Yapƒ± Kredi","Halkbank"]),T=d(!1),V=d(!1),P=d(!1),K=d(!1),$=i(()=>x.loading||w.loading),q=d(!1),J=d(!1),W=d(null),X=d({searchTerm:"",period:"",type:""}),ee=e=>{if("number"==typeof e)return e;if(""===e||null==e)return"";if(!Number.isNaN(Number(e)))return Number(e);const a=Object.entries(Z).find(([,a])=>a===e);return a?Number(a[0]):""},ae={0:"üè¢",1:"‚ö°Ô∏è",2:"üíß",3:"üî•",4:"üí≥"},te=e=>ae[ee(e)]??"üí≥",le=i(()=>Object.entries(Z).map(([e,a])=>({value:Number(e),label:a,icon:te(Number(e))}))),re=i(()=>[{value:"",label:"T√ºm Tipler",icon:"üì¶"},...le.value]),se=e=>(null==e?void 0:e.date)||(null==e?void 0:e.paymentDate)||(null==e?void 0:e.createdAt)||"",ne=i(()=>D.value.reduce((e,a)=>e+Number(a.amount||0),0)),oe=i(()=>{const e=new Date,a=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`;return D.value.filter(e=>(se(e)||"").startsWith(a)).reduce((e,a)=>e+Number(a.amount||0),0)}),de=i(()=>{const e=new Date,a=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`;return D.value.filter(e=>(se(e)||"").startsWith(a)).length}),ie=i(()=>D.value.length),ue=i(()=>N.value.reduce((e,a)=>e+Number(a.balance??0),0)),ce=e=>{if(!e)return"Mal Sahibi √ñdemesi";const a=w.getTenantById(e);return(null==a?void 0:a.companyName)||(null==a?void 0:a.company)||(null==a?void 0:a.contactPersonName)||(null==a?void 0:a.fullName)||[null==a?void 0:a.firstName,null==a?void 0:a.lastName].filter(Boolean).join(" ")||(null==a?void 0:a.email)||`#${e}`},be=i(()=>{let e=D.value;const a=(X.value.searchTerm||"").toLowerCase(),t=ee(X.value.type);return""!==t&&void 0!==t&&(e=e.filter(e=>ee(e.type)===t)),X.value.period&&(e=e.filter(e=>{const a=se(e);if(!a)return!1;const t=new Date(X.value.period),l=new Date(a);return l.getFullYear()===t.getFullYear()&&l.getMonth()===t.getMonth()})),a&&(e=e.filter(e=>ce(e.tenantId).toLowerCase().includes(a)||Q(ee(e.type)).toLowerCase().includes(a)||e.bank&&e.bank.toLowerCase().includes(a)||e.amount&&String(e.amount).includes(a))),e.sort((e,a)=>new Date(se(a))-new Date(se(e)))}),me=d(1),ve=d(10),ge=i(()=>Math.ceil(be.value.length/ve.value)),pe=i(()=>{const e=(me.value-1)*ve.value,a=e+ve.value;return be.value.slice(e,a)}),ye=i(()=>pe.value.map(e=>({...e,company:ce(e.tenantId)}))),xe=i(()=>{const e=ge.value;if(e<=7)return Array.from({length:e},(e,a)=>a+1);const a=me.value;let t=Math.max(1,a-3),l=Math.min(e,a+3);return a<=4&&(l=7),a>=e-3&&(t=e-6),Array.from({length:l-t+1},(e,a)=>t+a)});o(X,()=>{me.value=1},{deep:!0});const ke=d({date:(new Date).toISOString().substring(0,10),tenantId:"",ownerId:null,amount:null,type:"",bank:"",description:""}),he=d(!1),fe=d(null),we=()=>{T.value=!1,q.value=!1,J.value=!1,W.value=null,ke.value={date:(new Date).toISOString().substring(0,10),tenantId:"",ownerId:null,amount:null,type:"",bank:"",description:""},he.value=!1,fe.value=null},Ae=()=>{if(q.value)return W.value="closePaymentModal",void(J.value=!0);we()},De=()=>{"closePaymentModal"===W.value&&we()},Me=()=>{J.value=!1,W.value=null},Ce=()=>{X.value={searchTerm:"",period:"",type:""},x.fetchPayments(!0)},Ie=async()=>{T.value=!1,ke.value={date:(new Date).toISOString().substring(0,10),tenantId:"",ownerId:null,amount:null,type:"",bank:"",description:""};const e=he.value;he.value=!1,fe.value=null,await Promise.all([x.fetchPayments(!0),x.fetchAdvanceAccounts()]),n(e?"√ñdeme g√ºncellendi.":"√ñdeme kaydedildi.")},Ne=()=>{V.value=!1,x.fetchAdvanceAccounts(),n("Avans hesabƒ± i≈ülemi ba≈üarƒ±yla tamamlandƒ±.")},je=i(()=>{const e=[],a=new Date;for(let t=5;t>=0;t--){const l=new Date(a.getFullYear(),a.getMonth()-t,1),r=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`,s=l.toLocaleDateString("tr-TR",{month:"short"}),n=D.value.filter(e=>(se(e)||"").startsWith(r)).reduce((e,a)=>e+Number(a.amount||0),0);e.push({month:s,total:n})}return e}),Be=i(()=>Math.max(...je.value.map(e=>e.total),1)),Se=i(()=>{const e={};return D.value.forEach(a=>{const t=ee(a.type);""!==t&&(e[t]||(e[t]={name:t,label:Q(t),icon:te(t),count:0,total:0}),e[t].count++,e[t].total+=Number(a.amount||0))}),Object.values(e).sort((e,a)=>a.total-e.total)});return u(()=>{w.fetchTenants(),x.fetchAdvanceAccounts(),x.fetchPayments()}),(e,a)=>(m(),c("div",Ct,[v("div",It,[v("div",Nt,[a[21]||(a[21]=v("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-800 dark:text-gray-100 text-center sm:text-left"},"√ñdemeler",-1)),v("div",jt,[v("div",Bt,[a[15]||(a[15]=v("span",{class:"hidden sm:inline"},"Toplam:",-1)),a[16]||(a[16]=v("span",{class:"sm:hidden"},"Top:",-1)),g(" "+f(I(E)(ne.value)),1)]),v("div",St,[a[17]||(a[17]=v("span",{class:"hidden sm:inline"},"Bu Ay:",-1)),a[18]||(a[18]=v("span",{class:"sm:hidden"},"Ay:",-1)),g(" "+f(I(E)(oe.value)),1)]),v("div",Tt,[g(f(ie.value)+" ",1),a[19]||(a[19]=v("span",{class:"hidden sm:inline"},"√∂deme",-1)),a[20]||(a[20]=v("span",{class:"sm:hidden"},"kayƒ±t",-1))])])]),v("section",Vt,[v("div",zt,[a[23]||(a[23]=v("div",{class:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 rounded-full p-3"},[v("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),v("div",null,[a[22]||(a[22]=v("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Bu Ayki Gelir",-1)),v("p",Pt,f(I(E)(oe.value)),1)])]),v("div",Ft,[a[25]||(a[25]=v("div",{class:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 rounded-full p-3"},[v("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),v("div",null,[a[24]||(a[24]=v("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Toplam Gelir",-1)),v("p",Et,f(I(E)(ne.value)),1)])]),v("div",Lt,[a[27]||(a[27]=v("div",{class:"bg-amber-100 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400 rounded-full p-3"},[v("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),v("div",null,[a[26]||(a[26]=v("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Bu Ayki ƒ∞≈ülem Sayƒ±sƒ±",-1)),v("p",Ut,f(de.value),1)])]),v("div",Ht,[a[29]||(a[29]=v("div",{class:"bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-400 rounded-full p-3"},[v("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),v("div",null,[a[28]||(a[28]=v("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Toplam Avans",-1)),v("p",Rt,f(I(E)(ue.value)),1)])])]),v("section",Yt,[a[30]||(a[30]=v("div",{class:"flex items-center justify-between mb-4"},[v("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-100"},"Aylƒ±k √ñdeme Grafiƒüi")],-1)),v("div",Kt,[(m(!0),c(k,null,h(je.value,(e,a)=>(m(),c("div",{key:a,class:"flex-1 flex flex-col items-center gap-2"},[v("div",{class:"w-full bg-green-500 rounded-t",style:B({height:e.total/Be.value*200+"px"})},null,4),v("span",Ot,f(e.month),1)]))),128))])]),v("section",_t,[a[31]||(a[31]=v("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4"},"√ñdeme Tipi Daƒüƒ±lƒ±mƒ±",-1)),v("div",Gt,[(m(!0),c(k,null,h(Se.value,e=>(m(),c("div",{key:e.name,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600"},[v("div",$t,[v("span",qt,f(e.icon),1),v("div",null,[v("p",Jt,f(e.label),1),v("p",Wt,f(e.count)+" √∂deme",1)])]),v("p",Zt,f(I(E)(e.total)),1)]))),128))])]),I(y).role===I(s).ADMIN||I(y).role===I(s).MANAGER?(m(),c("div",Qt,[v("button",{onClick:a[0]||(a[0]=e=>T.value=!0),class:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all duration-300 active:scale-[0.98] active:opacity-90 flex items-center justify-center gap-3"},a[32]||(a[32]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),v("span",null,"Yeni √ñdeme Ekle",-1)]))])):b("",!0),I(y).role===I(s).ADMIN||I(y).role===I(s).MANAGER?(m(),c("div",Xt,[v("button",{onClick:a[1]||(a[1]=e=>V.value=!0),class:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-semibold py-3 px-4 rounded-xl shadow-lg transition-all duration-300 flex items-center justify-center gap-2"},a[33]||(a[33]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1),v("span",null,"Avans Hesabƒ±",-1)])),v("button",{onClick:a[2]||(a[2]=e=>P.value=!0),class:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-3 px-4 rounded-xl shadow-lg transition-all duration-300 flex items-center justify-center gap-2"},a[34]||(a[34]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2z"})],-1),v("span",null,"Finansal Raporlar",-1)])),I(y).role===I(s).ADMIN?(m(),c("button",{key:0,onClick:a[3]||(a[3]=e=>K.value=!0),class:"bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white font-semibold py-3 px-4 rounded-xl shadow-lg transition-all duration-300 flex items-center justify-center gap-2"},a[35]||(a[35]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),v("span",null,"Sistem Loglarƒ±",-1)]))):b("",!0)])):b("",!0),N.value.length>0?(m(),c("div",el,[a[37]||(a[37]=v("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2"},[v("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),g(" Avans Hesaplarƒ± ")],-1)),v("div",al,[(m(!0),c(k,null,h(N.value,e=>(m(),c("div",{key:e.id,class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800"},[v("div",tl,[v("span",ll,f(ce(e.tenantId)),1),a[36]||(a[36]=v("span",{class:"badge badge-success badge-sm"},"Aktif",-1))]),v("p",rl,f(I(E)(Number(e.balance??e.amount??0))),1),v("p",sl,f(A(e.updatedAt||e.lastMovementAt||e.createdAt||e.paymentDate)),1)]))),128))])])):b("",!0),v("div",nl,[j(H,{search:X.value.searchTerm,"search-placeholder":"Firma, tutar, tip veya banka ara...",period:X.value.period,"select-type":X.value.type,"select-type-options":re.value,"onUpdate:search":a[4]||(a[4]=e=>X.value.searchTerm=e),"onUpdate:period":a[5]||(a[5]=e=>X.value.period=e),"onUpdate:selectType":a[6]||(a[6]=e=>X.value.type=e),onClearFilters:Ce},null,8,["search","period","select-type","select-type-options"]),v("div",ol,[0===be.value.length?(m(),c("div",dl,a[38]||(a[38]=[v("p",null,"Aramanƒ±zla e≈üle≈üen √∂deme bulunamadƒ±.",-1)]))):(m(),c("div",il,[(m(!0),c(k,null,h(ye.value,e=>(m(),c("div",{key:e.id,class:"grid grid-cols-1 md:grid-cols-12 gap-4 items-center p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200 border-b dark:border-gray-700/50"},[v("div",ul,[v("div",{class:C(["flex-shrink-0 h-12 w-12 flex items-center justify-center text-white rounded-full text-xl font-bold",I(L)(e.company)])},f(I(U)(e.company)),3),v("div",null,[v("p",cl,f(e.company),1),v("p",bl,f(A(se(e))),1)])]),v("div",ml,f(I(E)(e.amount)),1),v("div",vl,[v("p",gl,[v("span",null,f(te(e.type)),1),v("span",null,f(I(Q)(ee(e.type))),1)]),v("p",null,f(e.bank),1)]),I(y).role===I(s).ADMIN||I(y).role===I(s).MANAGER?(m(),c("div",pl,[v("div",yl,[a[39]||(a[39]=v("label",{tabindex:"0",class:"btn btn-ghost btn-sm"},"ƒ∞≈ülemler",-1)),v("ul",xl,[v("li",null,[v("a",{onClick:a=>{return t=e,ke.value={date:(se(t)||(new Date).toISOString()).substring(0,10),tenantId:t.tenantId||"",ownerId:t.ownerId??null,amount:t.amount??null,type:ee(t.type),bank:t.bank??"",description:t.description??""},fe.value=t.id,he.value=!0,void(T.value=!0);var t}},"D√ºzenle",8,kl)]),v("li",null,[v("a",{onClick:a=>(async e=>{try{await x.deletePayment(e),n("√ñdeme silindi.")}catch(a){p("√ñdeme silinemedi."),l(a,{component:"Payments",action:"deletePayment"})}})(e.id),class:"text-red-500"},"Sil",8,hl)])])])])):b("",!0)]))),128)),ge.value>1?(m(),c("div",fl,[v("p",wl,[a[40]||(a[40]=g(" Toplam ")),v("span",Al,f(be.value.length),1),a[41]||(a[41]=g(" kayƒ±t arasƒ±ndan ")),v("span",Dl,f((me.value-1)*ve.value+1),1),a[42]||(a[42]=g(" - ")),v("span",Ml,f(Math.min(me.value*ve.value,be.value.length)),1),a[43]||(a[43]=g(" arasƒ± g√∂steriliyor "))]),v("div",Cl,[v("button",{onClick:a[7]||(a[7]=e=>me.value=1),disabled:1===me.value,class:"btn btn-sm btn-ghost","aria-label":"ƒ∞lk Sayfa"}," ¬´¬´ ",8,Il),v("button",{onClick:a[8]||(a[8]=e=>me.value--),disabled:1===me.value,class:"btn btn-sm btn-ghost"}," √ñnceki ",8,Nl),v("div",jl,[(m(!0),c(k,null,h(xe.value,e=>(m(),c("button",{key:e,onClick:a=>me.value=e,class:C(["btn btn-sm",me.value===e?"btn-primary":"btn-ghost"])},f(e),11,Bl))),128))]),v("button",{onClick:a[9]||(a[9]=e=>me.value++),disabled:me.value===ge.value,class:"btn btn-sm btn-ghost"}," Sonraki ",8,Sl),v("button",{onClick:a[10]||(a[10]=e=>me.value=ge.value),disabled:me.value===ge.value,class:"btn btn-sm btn-ghost","aria-label":"Son Sayfa"}," ¬ª¬ª ",8,Tl)])])):b("",!0)]))])])]),j(sa,{visible:T.value,payment:ke.value,tenants:M.value,banks:S.value,editMode:he.value,onSave:Ie,onCancel:Ae,onDirtyChanged:a[11]||(a[11]=e=>q.value=e)},null,8,["visible","payment","tenants","banks","editMode"]),J.value?(m(),c("dialog",Vl,[v("div",{class:"modal-box"},[a[44]||(a[44]=v("h3",{class:"font-bold text-lg"},"Deƒüi≈üiklikler kaybolacak",-1)),a[45]||(a[45]=v("p",{class:"py-4"},"Kaydetmeden √ßƒ±kmak istediƒüine emin misin?",-1)),v("div",{class:"modal-action"},[v("button",{class:"btn btn-ghost",onClick:Me},"Vazge√ß"),v("button",{class:"btn btn-primary",onClick:De},"Devam Et")])])])):b("",!0),V.value?(m(),c("dialog",zl,[v("div",Pl,[v("div",Fl,[a[46]||(a[46]=v("h3",{class:"text-xl font-bold"},"Avans Hesabƒ± Y√∂netimi",-1)),v("button",{onClick:a[12]||(a[12]=e=>V.value=!1),class:"btn btn-sm btn-ghost"},"‚úï")]),j(R,{onSuccess:Ne})])])):b("",!0),P.value?(m(),c("dialog",El,[v("div",Ll,[v("div",Ul,[a[47]||(a[47]=v("h3",{class:"text-xl font-bold"},"Finansal Raporlar",-1)),v("button",{onClick:a[13]||(a[13]=e=>P.value=!1),class:"btn btn-sm btn-ghost"},"‚úï")]),j(za)])])):b("",!0),K.value?(m(),c("dialog",Hl,[v("div",Rl,[v("div",Yl,[a[48]||(a[48]=v("h3",{class:"text-xl font-bold"},"Sistem Loglarƒ±",-1)),v("button",{onClick:a[14]||(a[14]=e=>K.value=!1),class:"btn btn-sm btn-ghost"},"‚úï")]),j(Dt)])])):b("",!0),$.value?(m(),c("div",Kl,[j(Y)])):b("",!0)]))}};export{Ol as default};
