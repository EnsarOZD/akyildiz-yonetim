import{a as t}from"./index-C-WeNbY_.js";const a=new class{constructor(){this.backendAvailable=null,this.lastHealthCheck=0,this.healthTTLms=6e4}async ensureAvailable(){const a=Date.now();if(null!==this.backendAvailable&&a-this.lastHealthCheck<this.healthTTLms)return this.backendAvailable;try{await t.get("/health"),this.backendAvailable=!0}catch(e){this.backendAvailable=!1}finally{this.lastHealthCheck=a}return this.backendAvailable}async getAidatDefinitions(a={}){if(await this.ensureAvailable()){const e={};return a.year&&(e.year=a.year),a.tenantId&&(e.tenantId=a.tenantId),a.unit&&(e.unit=a.unit),t.get("/aidat-definitions",{params:e})}return[]}async getAidatDefinitionById(a){return await this.ensureAvailable()?t.get(`/aidat-definitions/${a}`):null}async createAidatDefinition(a){return await this.ensureAvailable()?t.post("/aidat-definitions",a):{success:!0,message:"Aidat tanımı oluşturuldu (fallback)"}}async updateAidatDefinition(a,e){return await this.ensureAvailable()?t.put(`/aidat-definitions/${a}`,e):{success:!0,message:"Aidat tanımı güncellendi (fallback)"}}async deleteAidatDefinition(a){return await this.ensureAvailable()?t.delete(`/aidat-definitions/${a}`):{success:!0,message:"Aidat tanımı silindi (fallback)"}}async getAidatStats(){return await this.ensureAvailable()?t.get("/aidat-definitions/stats"):{totalCount:0,totalAmount:0,thisMonthCount:0,thisMonthAmount:0}}async getDues(a={}){const e=await this.ensureAvailable(),i={};return a.period&&(i.period=a.period),a.flatId&&(i.flatId=a.flatId),a.status&&(i.status=a.status),e?t.get("/utilitydebts",{params:i}):[]}async createPeriodDues({period:a,dueDate:e,year:i}){const s={period:a,dueDate:e,year:i};return await this.ensureAvailable()?t.post("/utilitydebts/create-aidat",s):{tenantDuesCreated:0,ownerDuesCreated:0}}async getDueById(a){return await this.ensureAvailable()?t.get(`/utilitydebts/${a}`):null}async updateAidat(a,e){return await this.ensureAvailable()?t.patch(`/utilitydebts/${a}`,e):{success:!0}}async deleteAidat(a){return await this.ensureAvailable()?t.delete(`/utilitydebts/${a}`):{success:!0}}async markAsPaid(a,e){const i={isPaid:!0,remainingAmount:0,paidAmount:e};return await this.ensureAvailable()?t.patch(`/utilitydebts/${a}`,i):{success:!0}}};export{a};
