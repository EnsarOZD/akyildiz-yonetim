import{r as e,c as a,o as l,b as t,e as r,t as s,G as d,H as o,I as u,E as n,F as i,i as c,j as b,m as g,q as v}from"./vue-vendor-Bart4FG5.js";import{a as p}from"./index-BbOmoSe-.js";import"./utils-vendor-Cy2sLATb.js";const m={class:"p-4 sm:p-6 bg-gray-50 min-h-screen font-sans dark:bg-gray-900"},y={class:"max-w-7xl mx-auto"},x={class:"flex items-center justify-between mb-6"},k={class:"flex items-center gap-4"},w={class:"bg-orange-100 dark:bg-orange-900/50 text-orange-600 dark:text-orange-400 px-3 py-1 rounded-full text-sm"},h={class:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 px-3 py-1 rounded-full text-sm"},f={class:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-full text-sm"},T={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-6"},M={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},A=["value"],C=["value"],N={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 overflow-hidden"},S={class:"overflow-x-auto"},D={class:"table w-full"},z={class:"p-4"},j={class:"font-medium text-gray-800 dark:text-gray-100"},E={class:"text-sm text-gray-500 dark:text-gray-400"},L={class:"p-4 text-gray-800 dark:text-gray-100"},F={class:"p-4"},B={class:"p-4 text-gray-800 dark:text-gray-100"},H={class:"p-4"},U={class:"font-semibold text-green-600 dark:text-green-400"},V={class:"p-4 text-gray-800 dark:text-gray-100"},Y={class:"p-4"},R={class:"flex items-center gap-2"},W=["onClick"],I=["onClick"],K={key:0,class:"text-center py-12"},O={__name:"OwnerPayments",setup(O){const _=e([]),q=e([]),G=e(""),P=e(""),J=e(""),Q=[{value:"01",label:"Ocak"},{value:"02",label:"Şubat"},{value:"03",label:"Mart"},{value:"04",label:"Nisan"},{value:"05",label:"Mayıs"},{value:"06",label:"Haziran"},{value:"07",label:"Temmuz"},{value:"08",label:"Ağustos"},{value:"09",label:"Eylül"},{value:"10",label:"Ekim"},{value:"11",label:"Kasım"},{value:"12",label:"Aralık"}],X=e=>null==e||isNaN(e)?"₺0.00":Number(e).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),Z=a(()=>_.value.filter(e=>{var a,l,t,r;const s=!G.value||(null==(a=e.date)?void 0:a.startsWith(G.value)),d=!P.value||(null==(l=e.date)?void 0:l.startsWith(P.value)),o=!J.value||(null==(t=e.ownerName)?void 0:t.toLowerCase().includes(J.value.toLowerCase()))||(null==(r=e.description)?void 0:r.toLowerCase().includes(J.value.toLowerCase()));return s&&d&&o})),$=a(()=>Z.value.reduce((e,a)=>e+Number(a.amount||0),0)),ee=a(()=>{const e=new Date,a=e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0");return _.value.filter(e=>e.date&&e.date.startsWith(a)).reduce((e,a)=>e+Number(a.amount||0),0)}),ae=a(()=>_.value.length),le=a(()=>{const e=new Set(_.value.map(e=>new Date(e.date).getFullYear()));return Array.from(e).sort((e,a)=>a-e)});return l(()=>{(async()=>{try{const e=await p.get("/owners");q.value=e||[]}catch(e){q.value=[]}})().then(()=>(async()=>{try{const e=await p.get("/owner-payments");_.value=(e||[]).map(e=>{const a=q.value.find(a=>a.id===e.ownerId);return{...e,ownerName:(null==a?void 0:a.name)||"Bilinmiyor"}})}catch(e){_.value=[]}})())}),(e,a)=>(g(),t("div",m,[r("div",y,[r("div",x,[a[4]||(a[4]=r("h1",{class:"text-3xl font-bold text-gray-800 dark:text-gray-100"},"Mal Sahibi Ödemeleri",-1)),r("div",k,[r("div",w," Toplam: "+s(X($.value)),1),r("div",h," Bu Ay: "+s(X(ee.value)),1),r("div",f,s(ae.value)+" ödeme ",1)])]),r("div",T,[r("div",M,[r("div",null,[a[5]||(a[5]=r("label",{class:"label"},"Arama",-1)),d(r("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>J.value=e),type:"text",placeholder:"Mal sahibi adı veya açıklama ara...",class:"input input-bordered w-full"},null,512),[[o,J.value]])]),r("div",null,[a[7]||(a[7]=r("label",{class:"label"},"Ödeme Türü",-1)),d(r("select",{"onUpdate:modelValue":a[1]||(a[1]=a=>e.paymentTypeFilter=a),class:"select select-bordered w-full"},a[6]||(a[6]=[n('<option value="">Tümü</option><option value="aidat">Aidat</option><option value="su">Su</option><option value="elektrik">Elektrik</option><option value="diger">Diğer</option>',5)]),512),[[u,e.paymentTypeFilter]])]),r("div",null,[a[9]||(a[9]=r("label",{class:"label"},"Yıl",-1)),d(r("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>G.value=e),class:"select select-bordered w-full"},[a[8]||(a[8]=r("option",{value:""},"Tümü",-1)),(g(!0),t(i,null,c(le.value,e=>(g(),t("option",{key:e,value:e},s(e),9,A))),128))],512),[[u,G.value]])]),r("div",null,[a[11]||(a[11]=r("label",{class:"label"},"Ay",-1)),d(r("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>P.value=e),class:"select select-bordered w-full"},[a[10]||(a[10]=r("option",{value:""},"Tümü",-1)),(g(),t(i,null,c(Q,e=>r("option",{key:e.value,value:e.value},s(e.label),9,C)),64))],512),[[u,P.value]])])])]),r("div",N,[r("div",S,[r("table",D,[a[12]||(a[12]=r("thead",{class:"bg-gray-50 dark:bg-gray-700"},[r("tr",null,[r("th",{class:"text-left p-4"},"Mal Sahibi"),r("th",{class:"text-left p-4"},"Kat"),r("th",{class:"text-left p-4"},"Ödeme Türü"),r("th",{class:"text-left p-4"},"Açıklama"),r("th",{class:"text-left p-4"},"Tutar"),r("th",{class:"text-left p-4"},"Ödeme Tarihi"),r("th",{class:"text-left p-4"},"İşlemler")])],-1)),r("tbody",null,[(g(!0),t(i,null,c(Z.value,e=>{return g(),t("tr",{key:e.id,class:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50"},[r("td",z,[r("div",null,[r("p",j,s(e.ownerName),1),r("p",E,s(e.ownerEmail),1)])]),r("td",L,s(e.unit),1),r("td",F,[r("span",{class:v([{"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-400":"aidat"===e.type,"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-400":"su"===e.type,"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-400":"elektrik"===e.type,"bg-gray-100 text-gray-800 dark:bg-gray-900/50 dark:text-gray-400":"diger"===e.type},"px-2 py-1 rounded-full text-xs font-medium"])},s((l=e.type,{aidat:"Aidat",su:"Su",elektrik:"Elektrik",diger:"Diğer"}[l]||"Bilinmiyor")),3)]),r("td",B,s(e.description||"-"),1),r("td",H,[r("span",U,s(X(e.amount)),1)]),r("td",V,s((a=e.date,a?new Date(a).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric"}):"-")),1),r("td",Y,[r("div",R,[r("button",{onClick:e=>{},class:"btn btn-sm btn-outline"}," Detay ",8,W),r("button",{onClick:e=>{},class:"btn btn-sm btn-primary"}," Düzenle ",8,I)])])]);var a,l}),128))])])]),0===Z.value.length?(g(),t("div",K,a[13]||(a[13]=[r("div",{class:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-full p-3 w-fit mx-auto mb-3"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1),r("p",{class:"text-gray-500 dark:text-gray-400"},"Arama kriterlerinize uygun ödeme kaydı bulunamadı.",-1)]))):b("",!0)])])]))}};export{O as default};
