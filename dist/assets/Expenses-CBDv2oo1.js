import{r as e,c as t,w as a,M as r,o as l,b as s,m as n,e as o,j as d,p as i,t as u,s as c,G as g,I as p,q as b,F as x,i as m,H as v,K as y,f as k,E as h,u as f,z as w}from"./vue-vendor-Ozfyq2CR.js";import{e as D}from"./expensesService-BmjV8ALn.js";import{u as S}from"./useDirtyGuard-BI3HvuSG.js";import{_ as T}from"./CustomFilterBar-D3sISYEJ.js";import{u as G}from"./useErrorHandler-DHEYCdiA.js";import{d as j,f as z,h as C,i as M}from"./enums-CeMB0k1K.js";import{b as E}from"./index-CZWRhATJ.js";import"./utils-vendor-Cy2sLATb.js";const B=["open"],L={class:"modal-box max-w-3xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700 shadow-2xl"},N={class:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700 mb-6"},O={class:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2"},Y={key:0,class:"alert alert-error mb-4"},A={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},F={class:"form-control"},_=["value"],I={key:0,class:"label"},U={class:"label-text-alt text-red-500"},V={class:"form-control"},H={key:0,class:"label"},R={class:"label-text-alt text-red-500"},K={class:"form-control"},q={key:0,class:"label"},$={class:"label-text-alt text-red-500"},W={class:"form-control"},X={key:0,class:"label"},Z={class:"label-text-alt text-red-500"},J={class:"form-control"},P={key:0,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},ee={class:"ml-2 text-gray-600 dark:text-gray-400"},te={class:"ml-2 text-gray-600 dark:text-gray-400"},ae={class:"ml-2 text-gray-600 dark:text-gray-400"},re={class:"ml-2 text-gray-600 dark:text-gray-400"},le={class:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700"},se={class:"flex gap-3"},ne=["disabled"],oe=["disabled"],de={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"},ie={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ue={__name:"ExpenseModal",props:["visible","expense","types","editMode"],emits:["close","save"],setup(y,{emit:k}){const h=y,f=k,{isDirty:w,resetDirty:D}=S(()=>h.expense),T=e(null),G=e(!1),j=e(!1),z=e(null),C=e({}),M=t(()=>h.types&&h.types.length>0?h.types:[{value:"Electricity",label:"Elektrik (Genel)"},{value:"Water",label:"Su (Genel)"},{value:"Gas",label:"Gaz"},{value:"Maintenance",label:"BakÄ±m"},{value:"Cleaning",label:"Temizlik"},{value:"Security",label:"GÃ¼venlik"},{value:"Other",label:"DiÄŸer"}]),E=()=>{if(C.value={},h.expense.type||(C.value.type="Gider tipi seÃ§ilmelidir"),h.expense.expenseDate){new Date(h.expense.expenseDate)>new Date&&(C.value.expenseDate="Gelecek tarih seÃ§ilemez")}else C.value.expenseDate="Tarih seÃ§ilmelidir";return h.expense.amount?isNaN(h.expense.amount)||Number(h.expense.amount)<=0?C.value.amount="GeÃ§erli bir tutar girilmelidir":Number(h.expense.amount)>1e6&&(C.value.amount="Tutar 1.000.000 TL'den fazla olamaz"):C.value.amount="Tutar girilmelidir",h.expense.title&&""!==h.expense.title.trim()?h.expense.title.length<3?C.value.title="BaÅŸlÄ±k en az 3 karakter olmalÄ±dÄ±r":h.expense.title.length>100&&(C.value.title="BaÅŸlÄ±k en fazla 100 karakter olabilir"):C.value.title="BaÅŸlÄ±k girilmelidir",0===Object.keys(C.value).length},ue=t(()=>E());a(()=>h.visible,e=>{e&&(r(()=>{T.value&&T.value.focus()}),z.value=null,C.value={},G.value=!1,D())});const ce=e=>{h.visible&&("Escape"===e.key&&pe(),"Enter"===e.key&&"TEXTAREA"!==e.target.tagName&&(e.preventDefault(),ge()),(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),ge()))};l(()=>{document.addEventListener("keydown",ce)});async function ge(){if(E()){j.value=!0,z.value=null;try{const e=Number(h.expense.amount);if(isNaN(e)||e<=0)throw new Error("GeÃ§ersiz tutar");const t={...h.expense,amount:e};f("save",t)}catch(e){z.value=e.message||"Gider kaydedilirken bir hata oluÅŸtu"}finally{j.value=!1}}else z.value="LÃ¼tfen form hatalarÄ±nÄ± dÃ¼zeltin"}function pe(){j.value||w.value&&!confirm("KaydedilmemiÅŸ deÄŸiÅŸiklikleriniz var. Kapatmak istediÄŸinizden emin misiniz?")||(z.value=null,C.value={},G.value=!1,f("close"))}function be(){G.value=!G.value}function xe(e){const t=M.value.find(t=>t.value===e);return t?t.label:null}function me(e){if(!e)return null;try{return new Date(e).toLocaleDateString("tr-TR")}catch(t){return"GeÃ§ersiz tarih"}}function ve(e){if(!e||isNaN(e))return null;try{return Number(e).toLocaleString("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2,maximumFractionDigits:2})}catch(t){return"â‚º0.00"}}a(()=>h.visible,e=>{e||document.removeEventListener("keydown",ce)});const ye=e=>{const t=e.target;let a=t.value.replace(/[^\d.,]/g,"");a=a.replace(",",".");const r=a.split(".");r.length>2&&(a=r[0]+"."+r.slice(1).join("")),2===r.length&&r[1].length>2&&(a=r[0]+"."+r[1].substring(0,2)),t.value=a};return(e,t)=>(n(),s("dialog",{class:"modal",open:y.visible},[o("div",L,[o("div",N,[o("h3",O,[t[5]||(t[5]=o("span",{class:"text-2xl"},"ðŸ’°",-1)),i(" "+u(y.editMode?"Gider DÃ¼zenle":"Yeni Gider Ekle"),1)]),o("button",{onClick:pe,class:"btn btn-sm btn-ghost text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},t[6]||(t[6]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),z.value?(n(),s("div",Y,[t[7]||(t[7]=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",null,u(z.value),1)])):d("",!0),o("form",{onSubmit:c(ge,["prevent"]),class:"space-y-6"},[o("div",A,[o("div",F,[t[9]||(t[9]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Gider Tipi *")],-1)),g(o("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>y.expense.type=e),class:b(["select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",{"border-red-500":C.value.type}]),required:"",ref_key:"typeSelect",ref:T},[t[8]||(t[8]=o("option",{disabled:"",value:""},"SeÃ§iniz",-1)),(n(!0),s(x,null,m(M.value,e=>(n(),s("option",{key:e.value,value:e.value},u(e.label),9,_))),128))],2),[[p,y.expense.type]]),C.value.type?(n(),s("label",I,[o("span",U,u(C.value.type),1)])):d("",!0)]),o("div",V,[t[10]||(t[10]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Tarih *")],-1)),g(o("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>y.expense.expenseDate=e),type:"date",class:b(["input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",{"border-red-500":C.value.expenseDate}]),required:""},null,2),[[v,y.expense.expenseDate]]),C.value.expenseDate?(n(),s("label",H,[o("span",R,u(C.value.expenseDate),1)])):d("",!0)]),o("div",K,[t[11]||(t[11]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Tutar (â‚º) *")],-1)),g(o("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>y.expense.amount=e),type:"number",min:"0",step:"0.01",class:b(["input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",{"border-red-500":C.value.amount}]),placeholder:"0.00",required:"",onInput:ye},null,34),[[v,y.expense.amount]]),C.value.amount?(n(),s("label",q,[o("span",$,u(C.value.amount),1)])):d("",!0)])]),o("div",W,[t[12]||(t[12]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"BaÅŸlÄ±k *")],-1)),g(o("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>y.expense.title=e),type:"text",class:b(["input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",{"border-red-500":C.value.title}]),placeholder:"Gider baÅŸlÄ±ÄŸÄ± giriniz",required:""},null,2),[[v,y.expense.title]]),C.value.title?(n(),s("label",X,[o("span",Z,u(C.value.title),1)])):d("",!0)]),o("div",J,[t[13]||(t[13]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"AÃ§Ä±klama")],-1)),g(o("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>y.expense.description=e),class:"textarea textarea-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",placeholder:"Gider aÃ§Ä±klamasÄ± giriniz",rows:"3"},null,512),[[v,y.expense.description]])]),G.value?(n(),s("div",P,[t[18]||(t[18]=o("h4",{class:"font-semibold text-blue-800 dark:text-blue-200 mb-2"},"Ã–nizleme:",-1)),o("div",Q,[o("div",null,[t[14]||(t[14]=o("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Tip:",-1)),o("span",ee,u(xe(y.expense.type)||"SeÃ§ilmedi"),1)]),o("div",null,[t[15]||(t[15]=o("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Tarih:",-1)),o("span",te,u(me(y.expense.expenseDate)||"SeÃ§ilmedi"),1)]),o("div",null,[t[16]||(t[16]=o("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Tutar:",-1)),o("span",ae,u(ve(y.expense.amount)||"0.00"),1)]),o("div",null,[t[17]||(t[17]=o("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"BaÅŸlÄ±k:",-1)),o("span",re,u(y.expense.title||"Girilmedi"),1)])])])):d("",!0),o("div",le,[o("button",{type:"button",onClick:be,class:"btn btn-ghost btn-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"},[t[19]||(t[19]=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),i(" "+u(G.value?"Ã–nizlemeyi Gizle":"Ã–nizle"),1)]),o("div",se,[o("button",{class:"btn btn-outline border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",type:"button",onClick:pe,disabled:j.value},t[20]||(t[20]=[o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),i(" Ä°ptal ")]),8,ne),o("button",{class:"btn btn-primary bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border-0 text-white shadow-lg",type:"submit",disabled:j.value||!ue.value},[j.value?(n(),s("div",de)):(n(),s("svg",ie,t[21]||(t[21]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))),i(" "+u(y.editMode?"GÃ¼ncelle":"Kaydet"),1)],8,oe)])])],32)])],8,B))}},ce={class:"p-4 sm:p-6 bg-gray-50 min-h-screen font-sans dark:bg-gray-900"},ge={class:"max-w-7xl mx-auto"},pe={class:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4"},be={class:"flex items-center justify-center md:justify-end gap-3 flex-wrap"},xe=["disabled"],me={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},ve={key:1,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-1"},ye={key:0,class:"flex items-center justify-center py-12"},ke={key:1,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6"},he={class:"flex items-center gap-3"},fe={class:"text-red-600 dark:text-red-300"},we={key:2},De={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Se={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},Te={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},Ge={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},je={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},ze={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},Ce={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},Me={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-8"},Ee={class:"h-64 flex items-end justify-between gap-2"},Be={class:"text-xs text-gray-500 dark:text-gray-400"},Le={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-8"},Ne={class:"grid grid-cols-2 sm:grid-cols-4 gap-4"},Oe={class:"flex items-center gap-3 mb-2"},Ye={class:"text-2xl"},Ae={class:"font-semibold text-gray-800 dark:text-gray-100"},Fe={class:"text-sm text-gray-500 dark:text-gray-400"},_e={class:"text-lg font-bold text-red-600 dark:text-red-400"},Ie={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700"},Ue={class:"mt-6 space-y-2"},Ve={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},He={key:1},Re={class:"md:col-span-5 flex items-center gap-4"},Ke={class:"flex-shrink-0 h-12 w-12 flex items-center justify-center bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full text-2xl"},qe={class:"font-bold text-gray-800 dark:text-gray-100"},$e={class:"text-sm text-gray-500 dark:text-gray-400"},We={class:"md:col-span-3 text-left md:text-center text-xl font-semibold text-red-600 dark:text-red-400"},Xe={class:"md:col-span-2 text-left md:text-center"},Ze={class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/60 dark:text-blue-200"},Je={class:"md:col-span-2 text-right"},Pe={class:"dropdown dropdown-end"},Qe={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-200 rounded-box w-32 z-10"},et=["onClick"],tt=["onClick"],at={__name:"Expenses",setup(a){const{handleNetworkError:r,showSuccess:d}=G(),c=e([]),b=e(!1),v=e(null),S=e({}),B=e(!1),L=e(!1),N=e(null),O=e("all"),Y=e(!1),A=e(null),F=y({searchTerm:"",period:"",type:""}),_=e=>null==e||isNaN(e)?"â‚º0.00":Number(e).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),I=e=>{if(!e)return"";return new Date(e).toLocaleDateString("tr-TR")},U=t(()=>{var e;return(null==(e=S.value)?void 0:e.totalAmount)||0}),V=t(()=>{var e;return(null==(e=S.value)?void 0:e.thisMonthAmount)||0}),H=t(()=>{var e;return(null==(e=S.value)?void 0:e.thisMonthCount)||0}),R=e=>{const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},K=t(()=>{const e=[],t=new Date;for(let a=5;a>=0;a--){const r=new Date(t.getFullYear(),t.getMonth()-a,1),l=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`,s=r.toLocaleDateString("tr-TR",{month:"short"}),n=c.value.filter(e=>e.expenseDate&&R(e.expenseDate)===l).reduce((e,t)=>e+Number(t.amount||0),0);e.push({month:s,expense:n})}return e}),q=t(()=>{const e=K.value.map(e=>e.expense);return Math.max(...e,1)}),$=t(()=>{const e={};return c.value.forEach(t=>{const a=j(t.type);e[a]||(e[a]={name:a,label:z(a),count:0,total:0}),e[a].count++,e[a].total+=Number(t.amount||0)}),Object.values(e).sort((e,t)=>t.total-e.total)}),W=t(()=>{let e=c.value.slice();const t=(F.searchTerm||"").toLowerCase();return F.period&&(e=e.filter(e=>{const t=new Date(e.expenseDate),a=new Date(F.period);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()})),F.type&&(e=e.filter(e=>j(e.type)===F.type)),t&&(e=e.filter(e=>e.title&&e.title.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||z(e.type).toLowerCase().includes(t)||e.amount&&String(e.amount).includes(t))),e.sort((e,t)=>{const a=e.expenseDate?new Date(e.expenseDate).getTime():0;return(t.expenseDate?new Date(t.expenseDate).getTime():0)-a})}),X=(new Date).toISOString().substr(0,10),Z=e({expenseDate:X,title:"",amount:"",type:"Other",description:""}),{notifyError:J}=E(),P=async()=>{b.value=!0,v.value=null;try{const e={};if("all"!==O.value){const{startDate:t,endDate:a}=(e=>{const t=new Date,a=t.getFullYear(),r=t.getMonth();switch(e){case"this_month":return{startDate:new Date(a,r,1).toISOString().split("T")[0],endDate:new Date(a,r+1,0).toISOString().split("T")[0]};case"last_month":return{startDate:new Date(a,r-1,1).toISOString().split("T")[0],endDate:new Date(a,r,0).toISOString().split("T")[0]};case"this_year":return{startDate:new Date(a,0,1).toISOString().split("T")[0],endDate:new Date(a,11,31).toISOString().split("T")[0]};default:return{startDate:null,endDate:null}}})(O.value);e.startDate=t,e.endDate=a}const t=await D.getExpenses(e);c.value=t||[];try{const t=await D.getExpenseStats(e);S.value=t||{}}catch{const e=await D.getExpenseStats();S.value=e||{}}}catch(e){r(e,{component:"Expenses",action:"fetchExpenses"}),v.value=(null==e?void 0:e.message)||"Giderler yÃ¼klenemedi.",c.value=[],S.value={}}finally{b.value=!1}},Q=()=>{Z.value={expenseDate:X,title:"",amount:"",type:"Other",description:""},L.value=!1,N.value=null,B.value=!0},ee=()=>{Z.value={expenseDate:X,title:"",amount:"",type:"Other",description:""},L.value=!1,N.value=null,B.value=!1,A.value=null,Y.value=!1},te=async e=>{var t,a;Y.value=!0,A.value=null;try{const r=parseFloat(e.amount);if(!Number.isFinite(r)||r<=0)return A.value="GeÃ§erli bir tutar girin.",void(Y.value=!1);const l={title:(null==(t=e.title)?void 0:t.trim())||"",amount:r,type:j(e.type),expenseDate:new Date(e.expenseDate).toISOString(),description:(null==(a=e.description)?void 0:a.trim())||""};L.value&&N.value?(await D.updateExpense(N.value,l),d("Gider gÃ¼ncellendi")):(await D.createExpense(l),d("Gider eklendi")),await P(),ee()}catch(r){A.value=(null==r?void 0:r.message)||"Gider kaydedilirken bir hata oluÅŸtu"}finally{Y.value=!1}},ae=()=>{Object.assign(F,{searchTerm:"",period:"",type:""}),O.value="all",P()};return l(()=>{P()}),(e,t)=>(n(),s("div",ce,[o("div",ge,[o("div",pe,[t[7]||(t[7]=o("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-800 dark:text-gray-100 text-center md:text-left"},"Giderler",-1)),o("div",be,[g(o("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>O.value=e),onChange:P,class:"select select-sm select-bordered bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 min-w-[140px]"},t[4]||(t[4]=[o("option",{value:"all"},"TÃ¼m Zamanlar",-1),o("option",{value:"this_month"},"Bu Ay",-1),o("option",{value:"last_month"},"GeÃ§en Ay",-1),o("option",{value:"this_year"},"Bu YÄ±l",-1)]),544),[[p,O.value]]),o("button",{onClick:P,disabled:b.value,class:"btn btn-sm btn-outline btn-primary shadow-sm"},[b.value?(n(),s("div",ve)):(n(),s("svg",me,t[5]||(t[5]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))),t[6]||(t[6]=i(" Yenile "))],8,xe)])]),b.value?(n(),s("div",ye,t[8]||(t[8]=[o("div",{class:"text-center"},[o("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),o("p",{class:"text-gray-500 dark:text-gray-400 text-lg"},"Giderler yÃ¼kleniyor...")],-1)]))):v.value?(n(),s("div",ke,[o("div",he,[t[10]||(t[10]=o("div",{class:"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 rounded-full p-2"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),o("div",null,[t[9]||(t[9]=o("h3",{class:"text-lg font-semibold text-red-800 dark:text-red-200"},"Veri YÃ¼kleme HatasÄ±",-1)),o("p",fe,u(v.value),1)])]),o("button",{onClick:P,class:"mt-4 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors duration-200"}," Tekrar Dene ")])):(n(),s("div",we,[o("section",De,[o("div",Se,[t[12]||(t[12]=o("div",{class:"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 rounded-full p-3"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 17h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),o("div",null,[t[11]||(t[11]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Bu Ayki Gider",-1)),o("p",Te,u(_(V.value)),1)])]),o("div",Ge,[t[14]||(t[14]=o("div",{class:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 rounded-full p-3"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 7h6m0 0v6m0-6L9 13"})])],-1)),o("div",null,[t[13]||(t[13]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Toplam Gider",-1)),o("p",je,u(_(U.value)),1)])]),o("div",ze,[t[16]||(t[16]=o("div",{class:"bg-amber-100 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400 rounded-full p-3"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})])],-1)),o("div",null,[t[15]||(t[15]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Ä°ÅŸlem SayÄ±sÄ± (Bu Ay)",-1)),o("p",Ce,u(H.value),1)])]),o("div",{class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600 hover:border-red-500 dark:hover:border-red-400 transition-colors duration-300",onClick:Q},t[17]||(t[17]=[o("button",{class:"w-full h-full text-red-500 dark:text-red-400 flex items-center justify-center gap-2"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),o("span",{class:"font-semibold"},"Yeni Gider Ekle")],-1)]))]),o("section",Me,[t[18]||(t[18]=h('<div class="flex items-center justify-between mb-4"><h2 class="text-xl font-semibold text-gray-800 dark:text-gray-100">AylÄ±k Gider GrafiÄŸi</h2><div class="flex items-center gap-4"><div class="flex items-center gap-2"><div class="w-3 h-3 bg-red-500 rounded-full"></div><span class="text-sm text-gray-600 dark:text-gray-400">Gider</span></div></div></div>',1)),o("div",Ee,[(n(!0),s(x,null,m(K.value,(e,t)=>(n(),s("div",{key:t,class:"flex-1 flex flex-col items-center gap-2"},[o("div",{class:"w-full bg-red-500 rounded-t",style:w({height:e.expense/q.value*200+"px"})},null,4),o("span",Be,u(e.month),1)]))),128))])]),o("section",Le,[t[19]||(t[19]=o("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4"},"Gider Tipi DaÄŸÄ±lÄ±mÄ±",-1)),o("div",Ne,[(n(!0),s(x,null,m($.value,e=>(n(),s("div",{key:e.name,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600"},[o("div",Oe,[o("span",Ye,u(f(M)(e.name)),1),o("div",null,[o("p",Ae,u(e.label),1),o("p",Fe,u(e.count)+" gider",1)])]),o("p",_e,u(_(e.total)),1)]))),128))])]),o("div",Ie,[k(T,{search:F.searchTerm,period:F.period,"select-type":F.type,"select-type-options":f(C),"onUpdate:search":t[1]||(t[1]=e=>F.searchTerm=e),"onUpdate:period":t[2]||(t[2]=e=>F.period=e),"onUpdate:selectType":t[3]||(t[3]=e=>F.type=e),onClearFilters:ae},null,8,["search","period","select-type","select-type-options"]),o("div",Ue,[0===W.value.length?(n(),s("div",Ve,t[20]||(t[20]=[o("p",null,"AramanÄ±zla eÅŸleÅŸen gider bulunamadÄ±.",-1)]))):(n(),s("div",He,[(n(!0),s(x,null,m(W.value,e=>(n(),s("div",{key:e.id,class:"grid grid-cols-1 md:grid-cols-12 gap-4 items-center p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200 border-b dark:border-gray-700/50"},[o("div",Re,[o("div",Ke,u(f(M)(e.type)),1),o("div",null,[o("p",qe,u(e.title||"AÃ§Ä±klama Yok"),1),o("p",$e,u(I(e.expenseDate)||"Tarih Yok"),1)])]),o("div",We,u(_(e.amount)),1),o("div",Xe,[o("span",Ze,u(f(z)(e.type)||"Tip Yok"),1)]),o("div",Je,[o("div",Pe,[t[21]||(t[21]=o("label",{tabindex:"0",class:"btn btn-ghost btn-sm"},"Ä°ÅŸlemler",-1)),o("ul",Qe,[o("li",null,[o("a",{onClick:t=>{return a=e,Z.value={...a,expenseDate:new Date(a.expenseDate).toISOString().substr(0,10)},N.value=a.id,L.value=!0,void(B.value=!0);var a}},"DÃ¼zenle",8,et)]),o("li",null,[o("a",{onClick:t=>(async e=>{if(confirm("Bu gideri silmek istediÄŸinizden emin misiniz?"))try{await D.deleteExpense(e),d("Gider"),await P()}catch(t){J("Gider silinirken bir hata oluÅŸtu")}})(e.id),class:"text-red-500"},"Sil",8,tt)])])])])]))),128))]))])])]))]),k(ue,{visible:B.value,expense:Z.value,types:f(C),editMode:L.value,loading:Y.value,error:A.value,onSave:te,onClose:ee},null,8,["visible","expense","types","editMode","loading","error"])]))}};export{at as default};
