(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function xu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ue={},fr=[],wn=()=>{},Hy=()=>!1,Ra=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Vu=t=>t.startsWith("onUpdate:"),Pt=Object.assign,Du=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Ky=Object.prototype.hasOwnProperty,Ne=(t,e)=>Ky.call(t,e),pe=Array.isArray,pr=t=>qi(t)==="[object Map]",Or=t=>qi(t)==="[object Set]",Bd=t=>qi(t)==="[object Date]",we=t=>typeof t=="function",tt=t=>typeof t=="string",Sn=t=>typeof t=="symbol",Be=t=>t!==null&&typeof t=="object",mp=t=>(Be(t)||we(t))&&we(t.then)&&we(t.catch),gp=Object.prototype.toString,qi=t=>gp.call(t),zy=t=>qi(t).slice(8,-1),_p=t=>qi(t)==="[object Object]",Nu=t=>tt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,hi=xu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sa=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Gy=/-(\w)/g,nn=Sa(t=>t.replace(Gy,(e,n)=>n?n.toUpperCase():"")),Wy=/\B([A-Z])/g,Js=Sa(t=>t.replace(Wy,"-$1").toLowerCase()),Ca=Sa(t=>t.charAt(0).toUpperCase()+t.slice(1)),Il=Sa(t=>t?`on${Ca(t)}`:""),fs=(t,e)=>!Object.is(t,e),No=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},yp=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Qo=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let jd;const Pa=()=>jd||(jd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ka(t){if(pe(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=tt(s)?Xy(s):ka(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(tt(t)||Be(t))return t}const Qy=/;(?![^(]*\))/g,Yy=/:([^]+)/,Jy=/\/\*[^]*?\*\//g;function Xy(t){const e={};return t.replace(Jy,"").split(Qy).forEach(n=>{if(n){const s=n.split(Yy);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function an(t){let e="";if(tt(t))e=t;else if(pe(t))for(let n=0;n<t.length;n++){const s=an(t[n]);s&&(e+=s+" ")}else if(Be(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Zy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ev=xu(Zy);function vp(t){return!!t||t===""}function tv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=qs(t[s],e[s]);return n}function qs(t,e){if(t===e)return!0;let n=Bd(t),s=Bd(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Sn(t),s=Sn(e),n||s)return t===e;if(n=pe(t),s=pe(e),n||s)return n&&s?tv(t,e):!1;if(n=Be(t),s=Be(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(l&&!u||!l&&u||!qs(t[o],e[o]))return!1}}return String(t)===String(e)}function Ou(t,e){return t.findIndex(n=>qs(n,e))}const bp=t=>!!(t&&t.__v_isRef===!0),z=t=>tt(t)?t:t==null?"":pe(t)||Be(t)&&(t.toString===gp||!we(t.toString))?bp(t)?z(t.value):JSON.stringify(t,Ep,2):String(t),Ep=(t,e)=>bp(e)?Ep(t,e.value):pr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Al(s,i)+" =>"]=r,n),{})}:Or(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Al(n))}:Sn(e)?Al(e):Be(e)&&!pe(e)&&!_p(e)?String(e):e,Al=(t,e="")=>{var n;return Sn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ut;class nv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ut,!e&&Ut&&(this.index=(Ut.scopes||(Ut.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ut;try{return Ut=this,e()}finally{Ut=n}}}on(){++this._on===1&&(this.prevScope=Ut,Ut=this)}off(){this._on>0&&--this._on===0&&(Ut=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function sv(){return Ut}let $e;const Rl=new WeakSet;class wp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ut&&Ut.active&&Ut.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rl.has(this)&&(Rl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ip(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,qd(this),Ap(this);const e=$e,n=ln;$e=this,ln=!0;try{return this.fn()}finally{Rp(this),$e=e,ln=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Uu(e);this.deps=this.depsTail=void 0,qd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gl(this)&&this.run()}get dirty(){return Gl(this)}}let Tp=0,fi,pi;function Ip(t,e=!1){if(t.flags|=8,e){t.next=pi,pi=t;return}t.next=fi,fi=t}function Mu(){Tp++}function Lu(){if(--Tp>0)return;if(pi){let e=pi;for(pi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;fi;){let e=fi;for(fi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Ap(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Rp(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Uu(s),rv(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Gl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Sp(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Sp(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ri)||(t.globalVersion=Ri,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Gl(t))))return;t.flags|=2;const e=t.dep,n=$e,s=ln;$e=t,ln=!0;try{Ap(t);const r=t.fn(t._value);(e.version===0||fs(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{$e=n,ln=s,Rp(t),t.flags&=-3}}function Uu(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Uu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function rv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let ln=!0;const Cp=[];function jn(){Cp.push(ln),ln=!1}function qn(){const t=Cp.pop();ln=t===void 0?!0:t}function qd(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=$e;$e=void 0;try{e()}finally{$e=n}}}let Ri=0;class iv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Fu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!$e||!ln||$e===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==$e)n=this.activeLink=new iv($e,this),$e.deps?(n.prevDep=$e.depsTail,$e.depsTail.nextDep=n,$e.depsTail=n):$e.deps=$e.depsTail=n,Pp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=$e.depsTail,n.nextDep=void 0,$e.depsTail.nextDep=n,$e.depsTail=n,$e.deps===n&&($e.deps=s)}return n}trigger(e){this.version++,Ri++,this.notify(e)}notify(e){Mu();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Lu()}}}function Pp(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Pp(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Wl=new WeakMap,js=Symbol(""),Ql=Symbol(""),Si=Symbol("");function At(t,e,n){if(ln&&$e){let s=Wl.get(t);s||Wl.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Fu),r.map=s,r.key=n),r.track()}}function On(t,e,n,s,r,i){const o=Wl.get(t);if(!o){Ri++;return}const l=u=>{u&&u.trigger()};if(Mu(),e==="clear")o.forEach(l);else{const u=pe(t),c=u&&Nu(n);if(u&&n==="length"){const d=Number(s);o.forEach((p,g)=>{(g==="length"||g===Si||!Sn(g)&&g>=d)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),c&&l(o.get(Si)),e){case"add":u?c&&l(o.get("length")):(l(o.get(js)),pr(t)&&l(o.get(Ql)));break;case"delete":u||(l(o.get(js)),pr(t)&&l(o.get(Ql)));break;case"set":pr(t)&&l(o.get(js));break}}Lu()}function ir(t){const e=De(t);return e===t?e:(At(e,"iterate",Si),Zt(t)?e:e.map(gt))}function xa(t){return At(t=De(t),"iterate",Si),t}const ov={__proto__:null,[Symbol.iterator](){return Sl(this,Symbol.iterator,gt)},concat(...t){return ir(this).concat(...t.map(e=>pe(e)?ir(e):e))},entries(){return Sl(this,"entries",t=>(t[1]=gt(t[1]),t))},every(t,e){return Vn(this,"every",t,e,void 0,arguments)},filter(t,e){return Vn(this,"filter",t,e,n=>n.map(gt),arguments)},find(t,e){return Vn(this,"find",t,e,gt,arguments)},findIndex(t,e){return Vn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Vn(this,"findLast",t,e,gt,arguments)},findLastIndex(t,e){return Vn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Vn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Cl(this,"includes",t)},indexOf(...t){return Cl(this,"indexOf",t)},join(t){return ir(this).join(t)},lastIndexOf(...t){return Cl(this,"lastIndexOf",t)},map(t,e){return Vn(this,"map",t,e,void 0,arguments)},pop(){return ni(this,"pop")},push(...t){return ni(this,"push",t)},reduce(t,...e){return Hd(this,"reduce",t,e)},reduceRight(t,...e){return Hd(this,"reduceRight",t,e)},shift(){return ni(this,"shift")},some(t,e){return Vn(this,"some",t,e,void 0,arguments)},splice(...t){return ni(this,"splice",t)},toReversed(){return ir(this).toReversed()},toSorted(t){return ir(this).toSorted(t)},toSpliced(...t){return ir(this).toSpliced(...t)},unshift(...t){return ni(this,"unshift",t)},values(){return Sl(this,"values",gt)}};function Sl(t,e,n){const s=xa(t),r=s[e]();return s!==t&&!Zt(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const av=Array.prototype;function Vn(t,e,n,s,r,i){const o=xa(t),l=o!==t&&!Zt(t),u=o[e];if(u!==av[e]){const p=u.apply(t,i);return l?gt(p):p}let c=n;o!==t&&(l?c=function(p,g){return n.call(this,gt(p),g,t)}:n.length>2&&(c=function(p,g){return n.call(this,p,g,t)}));const d=u.call(o,c,s);return l&&r?r(d):d}function Hd(t,e,n,s){const r=xa(t);let i=n;return r!==t&&(Zt(t)?n.length>3&&(i=function(o,l,u){return n.call(this,o,l,u,t)}):i=function(o,l,u){return n.call(this,o,gt(l),u,t)}),r[e](i,...s)}function Cl(t,e,n){const s=De(t);At(s,"iterate",Si);const r=s[e](...n);return(r===-1||r===!1)&&ju(n[0])?(n[0]=De(n[0]),s[e](...n)):r}function ni(t,e,n=[]){jn(),Mu();const s=De(t)[e].apply(t,n);return Lu(),qn(),s}const lv=xu("__proto__,__v_isRef,__isVue"),kp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Sn));function uv(t){Sn(t)||(t=String(t));const e=De(this);return At(e,"has",t),e.hasOwnProperty(t)}class xp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?vv:Op:i?Np:Dp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=pe(e);if(!r){let u;if(o&&(u=ov[n]))return u;if(n==="hasOwnProperty")return uv}const l=Reflect.get(e,n,Ct(e)?e:s);return(Sn(n)?kp.has(n):lv(n))||(r||At(e,"get",n),i)?l:Ct(l)?o&&Nu(n)?l:l.value:Be(l)?r?Lp(l):Va(l):l}}class Vp extends xp{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const u=bs(i);if(!Zt(s)&&!bs(s)&&(i=De(i),s=De(s)),!pe(e)&&Ct(i)&&!Ct(s))return u?!1:(i.value=s,!0)}const o=pe(e)&&Nu(n)?Number(n)<e.length:Ne(e,n),l=Reflect.set(e,n,s,Ct(e)?e:r);return e===De(r)&&(o?fs(s,i)&&On(e,"set",n,s):On(e,"add",n,s)),l}deleteProperty(e,n){const s=Ne(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&On(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Sn(n)||!kp.has(n))&&At(e,"has",n),s}ownKeys(e){return At(e,"iterate",pe(e)?"length":js),Reflect.ownKeys(e)}}class cv extends xp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const dv=new Vp,hv=new cv,fv=new Vp(!0);const Yl=t=>t,Io=t=>Reflect.getPrototypeOf(t);function pv(t,e,n){return function(...s){const r=this.__v_raw,i=De(r),o=pr(i),l=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,c=r[t](...s),d=n?Yl:e?Yo:gt;return!e&&At(i,"iterate",u?Ql:js),{next(){const{value:p,done:g}=c.next();return g?{value:p,done:g}:{value:l?[d(p[0]),d(p[1])]:d(p),done:g}},[Symbol.iterator](){return this}}}}function Ao(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function mv(t,e){const n={get(r){const i=this.__v_raw,o=De(i),l=De(r);t||(fs(r,l)&&At(o,"get",r),At(o,"get",l));const{has:u}=Io(o),c=e?Yl:t?Yo:gt;if(u.call(o,r))return c(i.get(r));if(u.call(o,l))return c(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&At(De(r),"iterate",js),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=De(i),l=De(r);return t||(fs(r,l)&&At(o,"has",r),At(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,u=De(l),c=e?Yl:t?Yo:gt;return!t&&At(u,"iterate",js),l.forEach((d,p)=>r.call(i,c(d),c(p),o))}};return Pt(n,t?{add:Ao("add"),set:Ao("set"),delete:Ao("delete"),clear:Ao("clear")}:{add(r){!e&&!Zt(r)&&!bs(r)&&(r=De(r));const i=De(this);return Io(i).has.call(i,r)||(i.add(r),On(i,"add",r,r)),this},set(r,i){!e&&!Zt(i)&&!bs(i)&&(i=De(i));const o=De(this),{has:l,get:u}=Io(o);let c=l.call(o,r);c||(r=De(r),c=l.call(o,r));const d=u.call(o,r);return o.set(r,i),c?fs(i,d)&&On(o,"set",r,i):On(o,"add",r,i),this},delete(r){const i=De(this),{has:o,get:l}=Io(i);let u=o.call(i,r);u||(r=De(r),u=o.call(i,r)),l&&l.call(i,r);const c=i.delete(r);return u&&On(i,"delete",r,void 0),c},clear(){const r=De(this),i=r.size!==0,o=r.clear();return i&&On(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=pv(r,t,e)}),n}function $u(t,e){const n=mv(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Ne(n,r)&&r in s?n:s,r,i)}const gv={get:$u(!1,!1)},_v={get:$u(!1,!0)},yv={get:$u(!0,!1)};const Dp=new WeakMap,Np=new WeakMap,Op=new WeakMap,vv=new WeakMap;function bv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ev(t){return t.__v_skip||!Object.isExtensible(t)?0:bv(zy(t))}function Va(t){return bs(t)?t:Bu(t,!1,dv,gv,Dp)}function Mp(t){return Bu(t,!1,fv,_v,Np)}function Lp(t){return Bu(t,!0,hv,yv,Op)}function Bu(t,e,n,s,r){if(!Be(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Ev(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function mr(t){return bs(t)?mr(t.__v_raw):!!(t&&t.__v_isReactive)}function bs(t){return!!(t&&t.__v_isReadonly)}function Zt(t){return!!(t&&t.__v_isShallow)}function ju(t){return t?!!t.__v_raw:!1}function De(t){const e=t&&t.__v_raw;return e?De(e):t}function wv(t){return!Ne(t,"__v_skip")&&Object.isExtensible(t)&&yp(t,"__v_skip",!0),t}const gt=t=>Be(t)?Va(t):t,Yo=t=>Be(t)?Lp(t):t;function Ct(t){return t?t.__v_isRef===!0:!1}function G(t){return Up(t,!1)}function Tv(t){return Up(t,!0)}function Up(t,e){return Ct(t)?t:new Iv(t,e)}class Iv{constructor(e,n){this.dep=new Fu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:De(e),this._value=n?e:gt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Zt(e)||bs(e);e=s?e:De(e),fs(e,n)&&(this._rawValue=e,this._value=s?e:gt(e),this.dep.trigger())}}function un(t){return Ct(t)?t.value:t}const Av={get:(t,e,n)=>e==="__v_raw"?t:un(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Ct(r)&&!Ct(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Fp(t){return mr(t)?t:new Proxy(t,Av)}class Rv{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Fu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ri-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&$e!==this)return Ip(this,!0),!0}get value(){const e=this.dep.track();return Sp(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Sv(t,e,n=!1){let s,r;return we(t)?s=t:(s=t.get,r=t.set),new Rv(s,r,n)}const Ro={},Jo=new WeakMap;let Fs;function Cv(t,e=!1,n=Fs){if(n){let s=Jo.get(n);s||Jo.set(n,s=[]),s.push(t)}}function Pv(t,e,n=Ue){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:u}=n,c=M=>r?M:Zt(M)||r===!1||r===0?Mn(M,1):Mn(M);let d,p,g,_,b=!1,E=!1;if(Ct(t)?(p=()=>t.value,b=Zt(t)):mr(t)?(p=()=>c(t),b=!0):pe(t)?(E=!0,b=t.some(M=>mr(M)||Zt(M)),p=()=>t.map(M=>{if(Ct(M))return M.value;if(mr(M))return c(M);if(we(M))return u?u(M,2):M()})):we(t)?e?p=u?()=>u(t,2):t:p=()=>{if(g){jn();try{g()}finally{qn()}}const M=Fs;Fs=d;try{return u?u(t,3,[_]):t(_)}finally{Fs=M}}:p=wn,e&&r){const M=p,oe=r===!0?1/0:r;p=()=>Mn(M(),oe)}const C=sv(),P=()=>{d.stop(),C&&C.active&&Du(C.effects,d)};if(i&&e){const M=e;e=(...oe)=>{M(...oe),P()}}let T=E?new Array(t.length).fill(Ro):Ro;const V=M=>{if(!(!(d.flags&1)||!d.dirty&&!M))if(e){const oe=d.run();if(r||b||(E?oe.some((de,R)=>fs(de,T[R])):fs(oe,T))){g&&g();const de=Fs;Fs=d;try{const R=[oe,T===Ro?void 0:E&&T[0]===Ro?[]:T,_];T=oe,u?u(e,3,R):e(...R)}finally{Fs=de}}}else d.run()};return l&&l(V),d=new wp(p),d.scheduler=o?()=>o(V,!1):V,_=M=>Cv(M,!1,d),g=d.onStop=()=>{const M=Jo.get(d);if(M){if(u)u(M,4);else for(const oe of M)oe();Jo.delete(d)}},e?s?V(!0):T=d.run():o?o(V.bind(null,!0),!0):d.run(),P.pause=d.pause.bind(d),P.resume=d.resume.bind(d),P.stop=P,P}function Mn(t,e=1/0,n){if(e<=0||!Be(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Ct(t))Mn(t.value,e,n);else if(pe(t))for(let s=0;s<t.length;s++)Mn(t[s],e,n);else if(Or(t)||pr(t))t.forEach(s=>{Mn(s,e,n)});else if(_p(t)){for(const s in t)Mn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Mn(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Hi(t,e,n,s){try{return s?t(...s):t()}catch(r){Da(r,e,n)}}function Cn(t,e,n,s){if(we(t)){const r=Hi(t,e,n,s);return r&&mp(r)&&r.catch(i=>{Da(i,e,n)}),r}if(pe(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Cn(t[i],e,n,s));return r}}function Da(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ue;if(e){let l=e.parent;const u=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,u,c)===!1)return}l=l.parent}if(i){jn(),Hi(i,null,10,[t,u,c]),qn();return}}kv(t,n,r,s,o)}function kv(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Nt=[];let vn=-1;const gr=[];let is=null,or=0;const $p=Promise.resolve();let Xo=null;function qu(t){const e=Xo||$p;return t?e.then(this?t.bind(this):t):e}function xv(t){let e=vn+1,n=Nt.length;for(;e<n;){const s=e+n>>>1,r=Nt[s],i=Ci(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Hu(t){if(!(t.flags&1)){const e=Ci(t),n=Nt[Nt.length-1];!n||!(t.flags&2)&&e>=Ci(n)?Nt.push(t):Nt.splice(xv(e),0,t),t.flags|=1,Bp()}}function Bp(){Xo||(Xo=$p.then(qp))}function Vv(t){pe(t)?gr.push(...t):is&&t.id===-1?is.splice(or+1,0,t):t.flags&1||(gr.push(t),t.flags|=1),Bp()}function Kd(t,e,n=vn+1){for(;n<Nt.length;n++){const s=Nt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Nt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function jp(t){if(gr.length){const e=[...new Set(gr)].sort((n,s)=>Ci(n)-Ci(s));if(gr.length=0,is){is.push(...e);return}for(is=e,or=0;or<is.length;or++){const n=is[or];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}is=null,or=0}}const Ci=t=>t.id==null?t.flags&2?-1:1/0:t.id;function qp(t){try{for(vn=0;vn<Nt.length;vn++){const e=Nt[vn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Hi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;vn<Nt.length;vn++){const e=Nt[vn];e&&(e.flags&=-2)}vn=-1,Nt.length=0,jp(),Xo=null,(Nt.length||gr.length)&&qp()}}let Ht=null,Hp=null;function Zo(t){const e=Ht;return Ht=t,Hp=t&&t.type.__scopeId||null,e}function Kp(t,e=Ht,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&th(-1);const i=Zo(e);let o;try{o=t(...r)}finally{Zo(i),s._d&&th(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function re(t,e){if(Ht===null)return t;const n=La(Ht),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,u=Ue]=e[r];i&&(we(i)&&(i={mounted:i,updated:i}),i.deep&&Mn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:u}))}return t}function Ls(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let u=l.dir[s];u&&(jn(),Cn(u,n,8,[t.el,l,t,e]),qn())}}const Dv=Symbol("_vte"),Nv=t=>t.__isTeleport;function Ku(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ku(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function zp(t,e){return we(t)?Pt({name:t.name},e,{setup:t}):t}function Gp(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ea(t,e,n,s,r=!1){if(pe(t)){t.forEach((b,E)=>ea(b,e&&(pe(e)?e[E]:e),n,s,r));return}if(mi(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ea(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?La(s.component):s.el,o=r?null:i,{i:l,r:u}=t,c=e&&e.r,d=l.refs===Ue?l.refs={}:l.refs,p=l.setupState,g=De(p),_=p===Ue?()=>!1:b=>Ne(g,b);if(c!=null&&c!==u&&(tt(c)?(d[c]=null,_(c)&&(p[c]=null)):Ct(c)&&(c.value=null)),we(u))Hi(u,l,12,[o,d]);else{const b=tt(u),E=Ct(u);if(b||E){const C=()=>{if(t.f){const P=b?_(u)?p[u]:d[u]:u.value;r?pe(P)&&Du(P,i):pe(P)?P.includes(i)||P.push(i):b?(d[u]=[i],_(u)&&(p[u]=d[u])):(u.value=[i],t.k&&(d[t.k]=u.value))}else b?(d[u]=o,_(u)&&(p[u]=o)):E&&(u.value=o,t.k&&(d[t.k]=o))};o?(C.id=-1,qt(C,n)):C()}}}Pa().requestIdleCallback;Pa().cancelIdleCallback;const mi=t=>!!t.type.__asyncLoader,Wp=t=>t.type.__isKeepAlive;function Ov(t,e){Qp(t,"a",e)}function Mv(t,e){Qp(t,"da",e)}function Qp(t,e,n=St){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Na(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Wp(r.parent.vnode)&&Lv(s,e,n,r),r=r.parent}}function Lv(t,e,n,s){const r=Na(e,t,s,!0);Jp(()=>{Du(s[e],r)},n)}function Na(t,e,n=St,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{jn();const l=Ki(n),u=Cn(e,n,t,o);return l(),qn(),u});return s?r.unshift(i):r.push(i),i}}const Wn=t=>(e,n=St)=>{(!ki||t==="sp")&&Na(t,(...s)=>e(...s),n)},Uv=Wn("bm"),Bt=Wn("m"),Fv=Wn("bu"),$v=Wn("u"),Yp=Wn("bum"),Jp=Wn("um"),Bv=Wn("sp"),jv=Wn("rtg"),qv=Wn("rtc");function Hv(t,e=St){Na("ec",t,e)}const Xp="components",Kv="directives";function Zp(t,e){return tm(Xp,t,!0,e)||t}const zv=Symbol.for("v-ndc");function em(t){return tm(Kv,t)}function tm(t,e,n=!0,s=!1){const r=Ht||St;if(r){const i=r.type;if(t===Xp){const l=Nb(i,!1);if(l&&(l===e||l===nn(e)||l===Ca(nn(e))))return i}const o=zd(r[t]||i[t],e)||zd(r.appContext[t],e);return!o&&s?i:o}}function zd(t,e){return t&&(t[e]||t[nn(e)]||t[Ca(nn(e))])}function et(t,e,n,s){let r;const i=n,o=pe(t);if(o||tt(t)){const l=o&&mr(t);let u=!1,c=!1;l&&(u=!Zt(t),c=bs(t),t=xa(t)),r=new Array(t.length);for(let d=0,p=t.length;d<p;d++)r[d]=e(u?c?Yo(gt(t[d])):gt(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(Be(t))if(t[Symbol.iterator])r=Array.from(t,(l,u)=>e(l,u,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let u=0,c=l.length;u<c;u++){const d=l[u];r[u]=e(t[d],d,u,i)}}else r=[];return r}const Jl=t=>t?bm(t)?La(t):Jl(t.parent):null,gi=Pt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Jl(t.parent),$root:t=>Jl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>sm(t),$forceUpdate:t=>t.f||(t.f=()=>{Hu(t.update)}),$nextTick:t=>t.n||(t.n=qu.bind(t.proxy)),$watch:t=>pb.bind(t)}),Pl=(t,e)=>t!==Ue&&!t.__isScriptSetup&&Ne(t,e),Gv={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:u}=t;let c;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Pl(s,e))return o[e]=1,s[e];if(r!==Ue&&Ne(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&Ne(c,e))return o[e]=3,i[e];if(n!==Ue&&Ne(n,e))return o[e]=4,n[e];Xl&&(o[e]=0)}}const d=gi[e];let p,g;if(d)return e==="$attrs"&&At(t.attrs,"get",""),d(t);if((p=l.__cssModules)&&(p=p[e]))return p;if(n!==Ue&&Ne(n,e))return o[e]=4,n[e];if(g=u.config.globalProperties,Ne(g,e))return g[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Pl(r,e)?(r[e]=n,!0):s!==Ue&&Ne(s,e)?(s[e]=n,!0):Ne(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let l;return!!n[o]||t!==Ue&&Ne(t,o)||Pl(e,o)||(l=i[0])&&Ne(l,o)||Ne(s,o)||Ne(gi,o)||Ne(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ne(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Gd(t){return pe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Xl=!0;function Wv(t){const e=sm(t),n=t.proxy,s=t.ctx;Xl=!1,e.beforeCreate&&Wd(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:u,inject:c,created:d,beforeMount:p,mounted:g,beforeUpdate:_,updated:b,activated:E,deactivated:C,beforeDestroy:P,beforeUnmount:T,destroyed:V,unmounted:M,render:oe,renderTracked:de,renderTriggered:R,errorCaptured:v,serverPrefetch:w,expose:k,inheritAttrs:x,components:D,directives:A,filters:ct}=e;if(c&&Qv(c,s,null),o)for(const ye in o){const ve=o[ye];we(ve)&&(s[ye]=ve.bind(n))}if(r){const ye=r.call(n,n);Be(ye)&&(t.data=Va(ye))}if(Xl=!0,i)for(const ye in i){const ve=i[ye],xt=we(ve)?ve.bind(n,n):we(ve.get)?ve.get.bind(n,n):wn,sn=!we(ve)&&we(ve.set)?ve.set.bind(n):wn,Wt=Ye({get:xt,set:sn});Object.defineProperty(s,ye,{enumerable:!0,configurable:!0,get:()=>Wt.value,set:Ke=>Wt.value=Ke})}if(l)for(const ye in l)nm(l[ye],s,n,ye);if(u){const ye=we(u)?u.call(n):u;Reflect.ownKeys(ye).forEach(ve=>{Oo(ve,ye[ve])})}d&&Wd(d,t,"c");function We(ye,ve){pe(ve)?ve.forEach(xt=>ye(xt.bind(n))):ve&&ye(ve.bind(n))}if(We(Uv,p),We(Bt,g),We(Fv,_),We($v,b),We(Ov,E),We(Mv,C),We(Hv,v),We(qv,de),We(jv,R),We(Yp,T),We(Jp,M),We(Bv,w),pe(k))if(k.length){const ye=t.exposed||(t.exposed={});k.forEach(ve=>{Object.defineProperty(ye,ve,{get:()=>n[ve],set:xt=>n[ve]=xt})})}else t.exposed||(t.exposed={});oe&&t.render===wn&&(t.render=oe),x!=null&&(t.inheritAttrs=x),D&&(t.components=D),A&&(t.directives=A),w&&Gp(t)}function Qv(t,e,n=wn){pe(t)&&(t=Zl(t));for(const s in t){const r=t[s];let i;Be(r)?"default"in r?i=cn(r.from||s,r.default,!0):i=cn(r.from||s):i=cn(r),Ct(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Wd(t,e,n){Cn(pe(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function nm(t,e,n,s){let r=s.includes(".")?mm(n,s):()=>n[s];if(tt(t)){const i=e[t];we(i)&&ps(r,i)}else if(we(t))ps(r,t.bind(n));else if(Be(t))if(pe(t))t.forEach(i=>nm(i,e,n,s));else{const i=we(t.handler)?t.handler.bind(n):e[t.handler];we(i)&&ps(r,i,t)}}function sm(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let u;return l?u=l:!r.length&&!n&&!s?u=e:(u={},r.length&&r.forEach(c=>ta(u,c,o,!0)),ta(u,e,o)),Be(e)&&i.set(e,u),u}function ta(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&ta(t,i,n,!0),r&&r.forEach(o=>ta(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=Yv[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const Yv={data:Qd,props:Yd,emits:Yd,methods:ii,computed:ii,beforeCreate:Dt,created:Dt,beforeMount:Dt,mounted:Dt,beforeUpdate:Dt,updated:Dt,beforeDestroy:Dt,beforeUnmount:Dt,destroyed:Dt,unmounted:Dt,activated:Dt,deactivated:Dt,errorCaptured:Dt,serverPrefetch:Dt,components:ii,directives:ii,watch:Xv,provide:Qd,inject:Jv};function Qd(t,e){return e?t?function(){return Pt(we(t)?t.call(this,this):t,we(e)?e.call(this,this):e)}:e:t}function Jv(t,e){return ii(Zl(t),Zl(e))}function Zl(t){if(pe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Dt(t,e){return t?[...new Set([].concat(t,e))]:e}function ii(t,e){return t?Pt(Object.create(null),t,e):e}function Yd(t,e){return t?pe(t)&&pe(e)?[...new Set([...t,...e])]:Pt(Object.create(null),Gd(t),Gd(e??{})):e}function Xv(t,e){if(!t)return e;if(!e)return t;const n=Pt(Object.create(null),t);for(const s in e)n[s]=Dt(t[s],e[s]);return n}function rm(){return{app:null,config:{isNativeTag:Hy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zv=0;function eb(t,e){return function(s,r=null){we(s)||(s=Pt({},s)),r!=null&&!Be(r)&&(r=null);const i=rm(),o=new WeakSet,l=[];let u=!1;const c=i.app={_uid:Zv++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:Mb,get config(){return i.config},set config(d){},use(d,...p){return o.has(d)||(d&&we(d.install)?(o.add(d),d.install(c,...p)):we(d)&&(o.add(d),d(c,...p))),c},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),c},component(d,p){return p?(i.components[d]=p,c):i.components[d]},directive(d,p){return p?(i.directives[d]=p,c):i.directives[d]},mount(d,p,g){if(!u){const _=c._ceVNode||st(s,r);return _.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(_,d,g),u=!0,c._container=d,d.__vue_app__=c,La(_.component)}},onUnmount(d){l.push(d)},unmount(){u&&(Cn(l,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,p){return i.provides[d]=p,c},runWithContext(d){const p=_r;_r=c;try{return d()}finally{_r=p}}};return c}}let _r=null;function Oo(t,e){if(St){let n=St.provides;const s=St.parent&&St.parent.provides;s===n&&(n=St.provides=Object.create(s)),n[t]=e}}function cn(t,e,n=!1){const s=St||Ht;if(s||_r){let r=_r?_r._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&we(e)?e.call(s&&s.proxy):e}}const im={},om=()=>Object.create(im),am=t=>Object.getPrototypeOf(t)===im;function tb(t,e,n,s=!1){const r={},i=om();t.propsDefaults=Object.create(null),lm(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Mp(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function nb(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=De(r),[u]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let g=d[p];if(Oa(t.emitsOptions,g))continue;const _=e[g];if(u)if(Ne(i,g))_!==i[g]&&(i[g]=_,c=!0);else{const b=nn(g);r[b]=eu(u,l,b,_,t,!1)}else _!==i[g]&&(i[g]=_,c=!0)}}}else{lm(t,e,r,i)&&(c=!0);let d;for(const p in l)(!e||!Ne(e,p)&&((d=Js(p))===p||!Ne(e,d)))&&(u?n&&(n[p]!==void 0||n[d]!==void 0)&&(r[p]=eu(u,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!e||!Ne(e,p))&&(delete i[p],c=!0)}c&&On(t.attrs,"set","")}function lm(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let u in e){if(hi(u))continue;const c=e[u];let d;r&&Ne(r,d=nn(u))?!i||!i.includes(d)?n[d]=c:(l||(l={}))[d]=c:Oa(t.emitsOptions,u)||(!(u in s)||c!==s[u])&&(s[u]=c,o=!0)}if(i){const u=De(n),c=l||Ue;for(let d=0;d<i.length;d++){const p=i[d];n[p]=eu(r,u,p,c[p],t,!Ne(c,p))}}return o}function eu(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Ne(o,"default");if(l&&s===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&we(u)){const{propsDefaults:c}=r;if(n in c)s=c[n];else{const d=Ki(r);s=c[n]=u.call(null,e),d()}}else s=u;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===Js(n))&&(s=!0))}return s}const sb=new WeakMap;function um(t,e,n=!1){const s=n?sb:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let u=!1;if(!we(t)){const d=p=>{u=!0;const[g,_]=um(p,e,!0);Pt(o,g),_&&l.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!u)return Be(t)&&s.set(t,fr),fr;if(pe(i))for(let d=0;d<i.length;d++){const p=nn(i[d]);Jd(p)&&(o[p]=Ue)}else if(i)for(const d in i){const p=nn(d);if(Jd(p)){const g=i[d],_=o[p]=pe(g)||we(g)?{type:g}:Pt({},g),b=_.type;let E=!1,C=!0;if(pe(b))for(let P=0;P<b.length;++P){const T=b[P],V=we(T)&&T.name;if(V==="Boolean"){E=!0;break}else V==="String"&&(C=!1)}else E=we(b)&&b.name==="Boolean";_[0]=E,_[1]=C,(E||Ne(_,"default"))&&l.push(p)}}const c=[o,l];return Be(t)&&s.set(t,c),c}function Jd(t){return t[0]!=="$"&&!hi(t)}const zu=t=>t[0]==="_"||t==="$stable",Gu=t=>pe(t)?t.map(En):[En(t)],rb=(t,e,n)=>{if(e._n)return e;const s=Kp((...r)=>Gu(e(...r)),n);return s._c=!1,s},cm=(t,e,n)=>{const s=t._ctx;for(const r in t){if(zu(r))continue;const i=t[r];if(we(i))e[r]=rb(r,i,s);else if(i!=null){const o=Gu(i);e[r]=()=>o}}},dm=(t,e)=>{const n=Gu(e);t.slots.default=()=>n},hm=(t,e,n)=>{for(const s in e)(n||!zu(s))&&(t[s]=e[s])},ib=(t,e,n)=>{const s=t.slots=om();if(t.vnode.shapeFlag&32){const r=e._;r?(hm(s,e,n),n&&yp(s,"_",r,!0)):cm(e,s)}else e&&dm(t,e)},ob=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Ue;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:hm(r,e,n):(i=!e.$stable,cm(e,r)),o=e}else e&&(dm(t,e),o={default:1});if(i)for(const l in r)!zu(l)&&o[l]==null&&delete r[l]},qt=Eb;function ab(t){return lb(t)}function lb(t,e){const n=Pa();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:u,setText:c,setElementText:d,parentNode:p,nextSibling:g,setScopeId:_=wn,insertStaticContent:b}=t,E=(I,S,N,F=null,q=null,$=null,Z=void 0,Y=null,W=!!S.dynamicChildren)=>{if(I===S)return;I&&!si(I,S)&&(F=U(I),Ke(I,q,$,!0),I=null),S.patchFlag===-2&&(W=!1,S.dynamicChildren=null);const{type:K,ref:ue,shapeFlag:X}=S;switch(K){case Ma:C(I,S,N,F);break;case Es:P(I,S,N,F);break;case Mo:I==null&&T(S,N,F,Z);break;case Me:D(I,S,N,F,q,$,Z,Y,W);break;default:X&1?oe(I,S,N,F,q,$,Z,Y,W):X&6?A(I,S,N,F,q,$,Z,Y,W):(X&64||X&128)&&K.process(I,S,N,F,q,$,Z,Y,W,ie)}ue!=null&&q&&ea(ue,I&&I.ref,$,S||I,!S)},C=(I,S,N,F)=>{if(I==null)s(S.el=l(S.children),N,F);else{const q=S.el=I.el;S.children!==I.children&&c(q,S.children)}},P=(I,S,N,F)=>{I==null?s(S.el=u(S.children||""),N,F):S.el=I.el},T=(I,S,N,F)=>{[I.el,I.anchor]=b(I.children,S,N,F,I.el,I.anchor)},V=({el:I,anchor:S},N,F)=>{let q;for(;I&&I!==S;)q=g(I),s(I,N,F),I=q;s(S,N,F)},M=({el:I,anchor:S})=>{let N;for(;I&&I!==S;)N=g(I),r(I),I=N;r(S)},oe=(I,S,N,F,q,$,Z,Y,W)=>{S.type==="svg"?Z="svg":S.type==="math"&&(Z="mathml"),I==null?de(S,N,F,q,$,Z,Y,W):w(I,S,q,$,Z,Y,W)},de=(I,S,N,F,q,$,Z,Y)=>{let W,K;const{props:ue,shapeFlag:X,transition:ae,dirs:_e}=I;if(W=I.el=o(I.type,$,ue&&ue.is,ue),X&8?d(W,I.children):X&16&&v(I.children,W,null,F,q,kl(I,$),Z,Y),_e&&Ls(I,null,F,"created"),R(W,I,I.scopeId,Z,F),ue){for(const Te in ue)Te!=="value"&&!hi(Te)&&i(W,Te,null,ue[Te],$,F);"value"in ue&&i(W,"value",null,ue.value,$),(K=ue.onVnodeBeforeMount)&&yn(K,F,I)}_e&&Ls(I,null,F,"beforeMount");const fe=ub(q,ae);fe&&ae.beforeEnter(W),s(W,S,N),((K=ue&&ue.onVnodeMounted)||fe||_e)&&qt(()=>{K&&yn(K,F,I),fe&&ae.enter(W),_e&&Ls(I,null,F,"mounted")},q)},R=(I,S,N,F,q)=>{if(N&&_(I,N),F)for(let $=0;$<F.length;$++)_(I,F[$]);if(q){let $=q.subTree;if(S===$||_m($.type)&&($.ssContent===S||$.ssFallback===S)){const Z=q.vnode;R(I,Z,Z.scopeId,Z.slotScopeIds,q.parent)}}},v=(I,S,N,F,q,$,Z,Y,W=0)=>{for(let K=W;K<I.length;K++){const ue=I[K]=Y?os(I[K]):En(I[K]);E(null,ue,S,N,F,q,$,Z,Y)}},w=(I,S,N,F,q,$,Z)=>{const Y=S.el=I.el;let{patchFlag:W,dynamicChildren:K,dirs:ue}=S;W|=I.patchFlag&16;const X=I.props||Ue,ae=S.props||Ue;let _e;if(N&&Us(N,!1),(_e=ae.onVnodeBeforeUpdate)&&yn(_e,N,S,I),ue&&Ls(S,I,N,"beforeUpdate"),N&&Us(N,!0),(X.innerHTML&&ae.innerHTML==null||X.textContent&&ae.textContent==null)&&d(Y,""),K?k(I.dynamicChildren,K,Y,N,F,kl(S,q),$):Z||ve(I,S,Y,null,N,F,kl(S,q),$,!1),W>0){if(W&16)x(Y,X,ae,N,q);else if(W&2&&X.class!==ae.class&&i(Y,"class",null,ae.class,q),W&4&&i(Y,"style",X.style,ae.style,q),W&8){const fe=S.dynamicProps;for(let Te=0;Te<fe.length;Te++){const Ce=fe[Te],vt=X[Ce],dt=ae[Ce];(dt!==vt||Ce==="value")&&i(Y,Ce,vt,dt,q,N)}}W&1&&I.children!==S.children&&d(Y,S.children)}else!Z&&K==null&&x(Y,X,ae,N,q);((_e=ae.onVnodeUpdated)||ue)&&qt(()=>{_e&&yn(_e,N,S,I),ue&&Ls(S,I,N,"updated")},F)},k=(I,S,N,F,q,$,Z)=>{for(let Y=0;Y<S.length;Y++){const W=I[Y],K=S[Y],ue=W.el&&(W.type===Me||!si(W,K)||W.shapeFlag&198)?p(W.el):N;E(W,K,ue,null,F,q,$,Z,!0)}},x=(I,S,N,F,q)=>{if(S!==N){if(S!==Ue)for(const $ in S)!hi($)&&!($ in N)&&i(I,$,S[$],null,q,F);for(const $ in N){if(hi($))continue;const Z=N[$],Y=S[$];Z!==Y&&$!=="value"&&i(I,$,Y,Z,q,F)}"value"in N&&i(I,"value",S.value,N.value,q)}},D=(I,S,N,F,q,$,Z,Y,W)=>{const K=S.el=I?I.el:l(""),ue=S.anchor=I?I.anchor:l("");let{patchFlag:X,dynamicChildren:ae,slotScopeIds:_e}=S;_e&&(Y=Y?Y.concat(_e):_e),I==null?(s(K,N,F),s(ue,N,F),v(S.children||[],N,ue,q,$,Z,Y,W)):X>0&&X&64&&ae&&I.dynamicChildren?(k(I.dynamicChildren,ae,N,q,$,Z,Y),(S.key!=null||q&&S===q.subTree)&&fm(I,S,!0)):ve(I,S,N,ue,q,$,Z,Y,W)},A=(I,S,N,F,q,$,Z,Y,W)=>{S.slotScopeIds=Y,I==null?S.shapeFlag&512?q.ctx.activate(S,N,F,Z,W):ct(S,N,F,q,$,Z,W):Mt(I,S,W)},ct=(I,S,N,F,q,$,Z)=>{const Y=I.component=Pb(I,F,q);if(Wp(I)&&(Y.ctx.renderer=ie),kb(Y,!1,Z),Y.asyncDep){if(q&&q.registerDep(Y,We,Z),!I.el){const W=Y.subTree=st(Es);P(null,W,S,N)}}else We(Y,I,S,N,q,$,Z)},Mt=(I,S,N)=>{const F=S.component=I.component;if(vb(I,S,N))if(F.asyncDep&&!F.asyncResolved){ye(F,S,N);return}else F.next=S,F.update();else S.el=I.el,F.vnode=S},We=(I,S,N,F,q,$,Z)=>{const Y=()=>{if(I.isMounted){let{next:X,bu:ae,u:_e,parent:fe,vnode:Te}=I;{const bt=pm(I);if(bt){X&&(X.el=Te.el,ye(I,X,Z)),bt.asyncDep.then(()=>{I.isUnmounted||Y()});return}}let Ce=X,vt;Us(I,!1),X?(X.el=Te.el,ye(I,X,Z)):X=Te,ae&&No(ae),(vt=X.props&&X.props.onVnodeBeforeUpdate)&&yn(vt,fe,X,Te),Us(I,!0);const dt=Zd(I),Qt=I.subTree;I.subTree=dt,E(Qt,dt,p(Qt.el),U(Qt),I,q,$),X.el=dt.el,Ce===null&&bb(I,dt.el),_e&&qt(_e,q),(vt=X.props&&X.props.onVnodeUpdated)&&qt(()=>yn(vt,fe,X,Te),q)}else{let X;const{el:ae,props:_e}=S,{bm:fe,m:Te,parent:Ce,root:vt,type:dt}=I,Qt=mi(S);Us(I,!1),fe&&No(fe),!Qt&&(X=_e&&_e.onVnodeBeforeMount)&&yn(X,Ce,S),Us(I,!0);{vt.ce&&vt.ce._injectChildStyle(dt);const bt=I.subTree=Zd(I);E(null,bt,N,F,I,q,$),S.el=bt.el}if(Te&&qt(Te,q),!Qt&&(X=_e&&_e.onVnodeMounted)){const bt=S;qt(()=>yn(X,Ce,bt),q)}(S.shapeFlag&256||Ce&&mi(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&I.a&&qt(I.a,q),I.isMounted=!0,S=N=F=null}};I.scope.on();const W=I.effect=new wp(Y);I.scope.off();const K=I.update=W.run.bind(W),ue=I.job=W.runIfDirty.bind(W);ue.i=I,ue.id=I.uid,W.scheduler=()=>Hu(ue),Us(I,!0),K()},ye=(I,S,N)=>{S.component=I;const F=I.vnode.props;I.vnode=S,I.next=null,nb(I,S.props,F,N),ob(I,S.children,N),jn(),Kd(I),qn()},ve=(I,S,N,F,q,$,Z,Y,W=!1)=>{const K=I&&I.children,ue=I?I.shapeFlag:0,X=S.children,{patchFlag:ae,shapeFlag:_e}=S;if(ae>0){if(ae&128){sn(K,X,N,F,q,$,Z,Y,W);return}else if(ae&256){xt(K,X,N,F,q,$,Z,Y,W);return}}_e&8?(ue&16&&Lt(K,q,$),X!==K&&d(N,X)):ue&16?_e&16?sn(K,X,N,F,q,$,Z,Y,W):Lt(K,q,$,!0):(ue&8&&d(N,""),_e&16&&v(X,N,F,q,$,Z,Y,W))},xt=(I,S,N,F,q,$,Z,Y,W)=>{I=I||fr,S=S||fr;const K=I.length,ue=S.length,X=Math.min(K,ue);let ae;for(ae=0;ae<X;ae++){const _e=S[ae]=W?os(S[ae]):En(S[ae]);E(I[ae],_e,N,null,q,$,Z,Y,W)}K>ue?Lt(I,q,$,!0,!1,X):v(S,N,F,q,$,Z,Y,W,X)},sn=(I,S,N,F,q,$,Z,Y,W)=>{let K=0;const ue=S.length;let X=I.length-1,ae=ue-1;for(;K<=X&&K<=ae;){const _e=I[K],fe=S[K]=W?os(S[K]):En(S[K]);if(si(_e,fe))E(_e,fe,N,null,q,$,Z,Y,W);else break;K++}for(;K<=X&&K<=ae;){const _e=I[X],fe=S[ae]=W?os(S[ae]):En(S[ae]);if(si(_e,fe))E(_e,fe,N,null,q,$,Z,Y,W);else break;X--,ae--}if(K>X){if(K<=ae){const _e=ae+1,fe=_e<ue?S[_e].el:F;for(;K<=ae;)E(null,S[K]=W?os(S[K]):En(S[K]),N,fe,q,$,Z,Y,W),K++}}else if(K>ae)for(;K<=X;)Ke(I[K],q,$,!0),K++;else{const _e=K,fe=K,Te=new Map;for(K=fe;K<=ae;K++){const ht=S[K]=W?os(S[K]):En(S[K]);ht.key!=null&&Te.set(ht.key,K)}let Ce,vt=0;const dt=ae-fe+1;let Qt=!1,bt=0;const Zn=new Array(dt);for(K=0;K<dt;K++)Zn[K]=0;for(K=_e;K<=X;K++){const ht=I[K];if(vt>=dt){Ke(ht,q,$,!0);continue}let Yt;if(ht.key!=null)Yt=Te.get(ht.key);else for(Ce=fe;Ce<=ae;Ce++)if(Zn[Ce-fe]===0&&si(ht,S[Ce])){Yt=Ce;break}Yt===void 0?Ke(ht,q,$,!0):(Zn[Yt-fe]=K+1,Yt>=bt?bt=Yt:Qt=!0,E(ht,S[Yt],N,null,q,$,Z,Y,W),vt++)}const qr=Qt?cb(Zn):fr;for(Ce=qr.length-1,K=dt-1;K>=0;K--){const ht=fe+K,Yt=S[ht],ao=ht+1<ue?S[ht+1].el:F;Zn[K]===0?E(null,Yt,N,ao,q,$,Z,Y,W):Qt&&(Ce<0||K!==qr[Ce]?Wt(Yt,N,ao,2):Ce--)}}},Wt=(I,S,N,F,q=null)=>{const{el:$,type:Z,transition:Y,children:W,shapeFlag:K}=I;if(K&6){Wt(I.component.subTree,S,N,F);return}if(K&128){I.suspense.move(S,N,F);return}if(K&64){Z.move(I,S,N,ie);return}if(Z===Me){s($,S,N);for(let X=0;X<W.length;X++)Wt(W[X],S,N,F);s(I.anchor,S,N);return}if(Z===Mo){V(I,S,N);return}if(F!==2&&K&1&&Y)if(F===0)Y.beforeEnter($),s($,S,N),qt(()=>Y.enter($),q);else{const{leave:X,delayLeave:ae,afterLeave:_e}=Y,fe=()=>{I.ctx.isUnmounted?r($):s($,S,N)},Te=()=>{X($,()=>{fe(),_e&&_e()})};ae?ae($,fe,Te):Te()}else s($,S,N)},Ke=(I,S,N,F=!1,q=!1)=>{const{type:$,props:Z,ref:Y,children:W,dynamicChildren:K,shapeFlag:ue,patchFlag:X,dirs:ae,cacheIndex:_e}=I;if(X===-2&&(q=!1),Y!=null&&(jn(),ea(Y,null,N,I,!0),qn()),_e!=null&&(S.renderCache[_e]=void 0),ue&256){S.ctx.deactivate(I);return}const fe=ue&1&&ae,Te=!mi(I);let Ce;if(Te&&(Ce=Z&&Z.onVnodeBeforeUnmount)&&yn(Ce,S,I),ue&6)_n(I.component,N,F);else{if(ue&128){I.suspense.unmount(N,F);return}fe&&Ls(I,null,S,"beforeUnmount"),ue&64?I.type.remove(I,S,N,ie,F):K&&!K.hasOnce&&($!==Me||X>0&&X&64)?Lt(K,S,N,!1,!0):($===Me&&X&384||!q&&ue&16)&&Lt(W,S,N),F&&ze(I)}(Te&&(Ce=Z&&Z.onVnodeUnmounted)||fe)&&qt(()=>{Ce&&yn(Ce,S,I),fe&&Ls(I,null,S,"unmounted")},N)},ze=I=>{const{type:S,el:N,anchor:F,transition:q}=I;if(S===Me){Xn(N,F);return}if(S===Mo){M(I);return}const $=()=>{r(N),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(I.shapeFlag&1&&q&&!q.persisted){const{leave:Z,delayLeave:Y}=q,W=()=>Z(N,$);Y?Y(I.el,$,W):W()}else $()},Xn=(I,S)=>{let N;for(;I!==S;)N=g(I),r(I),I=N;r(S)},_n=(I,S,N)=>{const{bum:F,scope:q,job:$,subTree:Z,um:Y,m:W,a:K,parent:ue,slots:{__:X}}=I;Xd(W),Xd(K),F&&No(F),ue&&pe(X)&&X.forEach(ae=>{ue.renderCache[ae]=void 0}),q.stop(),$&&($.flags|=8,Ke(Z,I,S,N)),Y&&qt(Y,S),qt(()=>{I.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},Lt=(I,S,N,F=!1,q=!1,$=0)=>{for(let Z=$;Z<I.length;Z++)Ke(I[Z],S,N,F,q)},U=I=>{if(I.shapeFlag&6)return U(I.component.subTree);if(I.shapeFlag&128)return I.suspense.next();const S=g(I.anchor||I.el),N=S&&S[Dv];return N?g(N):S};let te=!1;const ee=(I,S,N)=>{I==null?S._vnode&&Ke(S._vnode,null,null,!0):E(S._vnode||null,I,S,null,null,null,N),S._vnode=I,te||(te=!0,Kd(),jp(),te=!1)},ie={p:E,um:Ke,m:Wt,r:ze,mt:ct,mc:v,pc:ve,pbc:k,n:U,o:t};return{render:ee,hydrate:void 0,createApp:eb(ee)}}function kl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Us({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ub(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function fm(t,e,n=!1){const s=t.children,r=e.children;if(pe(s)&&pe(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=os(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&fm(o,l)),l.type===Ma&&(l.el=o.el),l.type===Es&&!l.el&&(l.el=o.el)}}function cb(t){const e=t.slice(),n=[0];let s,r,i,o,l;const u=t.length;for(s=0;s<u;s++){const c=t[s];if(c!==0){if(r=n[n.length-1],t[r]<c){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<c?i=l+1:o=l;c<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function pm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:pm(e)}function Xd(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const db=Symbol.for("v-scx"),hb=()=>cn(db);function fb(t,e){return Wu(t,null,e)}function ps(t,e,n){return Wu(t,e,n)}function Wu(t,e,n=Ue){const{immediate:s,deep:r,flush:i,once:o}=n,l=Pt({},n),u=e&&s||!e&&i!=="post";let c;if(ki){if(i==="sync"){const _=hb();c=_.__watcherHandles||(_.__watcherHandles=[])}else if(!u){const _=()=>{};return _.stop=wn,_.resume=wn,_.pause=wn,_}}const d=St;l.call=(_,b,E)=>Cn(_,d,b,E);let p=!1;i==="post"?l.scheduler=_=>{qt(_,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(_,b)=>{b?_():Hu(_)}),l.augmentJob=_=>{e&&(_.flags|=4),p&&(_.flags|=2,d&&(_.id=d.uid,_.i=d))};const g=Pv(t,e,l);return ki&&(c?c.push(g):u&&g()),g}function pb(t,e,n){const s=this.proxy,r=tt(t)?t.includes(".")?mm(s,t):()=>s[t]:t.bind(s,s);let i;we(e)?i=e:(i=e.handler,n=e);const o=Ki(this),l=Wu(r,i.bind(s),n);return o(),l}function mm(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const mb=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${nn(e)}Modifiers`]||t[`${Js(e)}Modifiers`];function gb(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Ue;let r=n;const i=e.startsWith("update:"),o=i&&mb(s,e.slice(7));o&&(o.trim&&(r=n.map(d=>tt(d)?d.trim():d)),o.number&&(r=n.map(Qo)));let l,u=s[l=Il(e)]||s[l=Il(nn(e))];!u&&i&&(u=s[l=Il(Js(e))]),u&&Cn(u,t,6,r);const c=s[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Cn(c,t,6,r)}}function gm(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!we(t)){const u=c=>{const d=gm(c,e,!0);d&&(l=!0,Pt(o,d))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!l?(Be(t)&&s.set(t,null),null):(pe(i)?i.forEach(u=>o[u]=null):Pt(o,i),Be(t)&&s.set(t,o),o)}function Oa(t,e){return!t||!Ra(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ne(t,e[0].toLowerCase()+e.slice(1))||Ne(t,Js(e))||Ne(t,e))}function Zd(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:u,render:c,renderCache:d,props:p,data:g,setupState:_,ctx:b,inheritAttrs:E}=t,C=Zo(t);let P,T;try{if(n.shapeFlag&4){const M=r||s,oe=M;P=En(c.call(oe,M,d,p,_,g,b)),T=l}else{const M=e;P=En(M.length>1?M(p,{attrs:l,slots:o,emit:u}):M(p,null)),T=e.props?l:_b(l)}}catch(M){_i.length=0,Da(M,t,1),P=st(Es)}let V=P;if(T&&E!==!1){const M=Object.keys(T),{shapeFlag:oe}=V;M.length&&oe&7&&(i&&M.some(Vu)&&(T=yb(T,i)),V=wr(V,T,!1,!0))}return n.dirs&&(V=wr(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&Ku(V,n.transition),P=V,Zo(C),P}const _b=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ra(n))&&((e||(e={}))[n]=t[n]);return e},yb=(t,e)=>{const n={};for(const s in t)(!Vu(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function vb(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:u}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return s?eh(s,o,c):!!o;if(u&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const g=d[p];if(o[g]!==s[g]&&!Oa(c,g))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?eh(s,o,c):!0:!!o;return!1}function eh(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Oa(n,i))return!0}return!1}function bb({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const _m=t=>t.__isSuspense;function Eb(t,e){e&&e.pendingBranch?pe(t)?e.effects.push(...t):e.effects.push(t):Vv(t)}const Me=Symbol.for("v-fgt"),Ma=Symbol.for("v-txt"),Es=Symbol.for("v-cmt"),Mo=Symbol.for("v-stc"),_i=[];let Kt=null;function H(t=!1){_i.push(Kt=t?null:[])}function wb(){_i.pop(),Kt=_i[_i.length-1]||null}let Pi=1;function th(t,e=!1){Pi+=t,t<0&&Kt&&e&&(Kt.hasOnce=!0)}function ym(t){return t.dynamicChildren=Pi>0?Kt||fr:null,wb(),Pi>0&&Kt&&Kt.push(t),t}function Q(t,e,n,s,r,i){return ym(h(t,e,n,s,r,i,!0))}function Jt(t,e,n,s,r){return ym(st(t,e,n,s,r,!0))}function na(t){return t?t.__v_isVNode===!0:!1}function si(t,e){return t.type===e.type&&t.key===e.key}const vm=({key:t})=>t??null,Lo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?tt(t)||Ct(t)||we(t)?{i:Ht,r:t,k:e,f:!!n}:t:null);function h(t,e=null,n=null,s=0,r=null,i=t===Me?0:1,o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&vm(e),ref:e&&Lo(e),scopeId:Hp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ht};return l?(Qu(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=tt(n)?8:16),Pi>0&&!o&&Kt&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Kt.push(u),u}const st=Tb;function Tb(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===zv)&&(t=Es),na(t)){const l=wr(t,e,!0);return n&&Qu(l,n),Pi>0&&!i&&Kt&&(l.shapeFlag&6?Kt[Kt.indexOf(t)]=l:Kt.push(l)),l.patchFlag=-2,l}if(Ob(t)&&(t=t.__vccOpts),e){e=Ib(e);let{class:l,style:u}=e;l&&!tt(l)&&(e.class=an(l)),Be(u)&&(ju(u)&&!pe(u)&&(u=Pt({},u)),e.style=ka(u))}const o=tt(t)?1:_m(t)?128:Nv(t)?64:Be(t)?4:we(t)?2:0;return h(t,e,n,s,r,o,i,!0)}function Ib(t){return t?ju(t)||am(t)?Pt({},t):t:null}function wr(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:u}=t,c=e?Rb(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&vm(c),ref:e&&e.ref?n&&i?pe(i)?i.concat(Lo(e)):[i,Lo(e)]:Lo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Me?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&wr(t.ssContent),ssFallback:t.ssFallback&&wr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&s&&Ku(d,u.clone(d)),d}function mt(t=" ",e=0){return st(Ma,null,t,e)}function Ab(t,e){const n=st(Mo,null,t);return n.staticCount=e,n}function He(t="",e=!1){return e?(H(),Jt(Es,null,t)):st(Es,null,t)}function En(t){return t==null||typeof t=="boolean"?st(Es):pe(t)?st(Me,null,t.slice()):na(t)?os(t):st(Ma,null,String(t))}function os(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:wr(t)}function Qu(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(pe(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Qu(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!am(e)?e._ctx=Ht:r===3&&Ht&&(Ht.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else we(e)?(e={default:e,_ctx:Ht},n=32):(e=String(e),s&64?(n=16,e=[mt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Rb(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=an([e.class,s.class]));else if(r==="style")e.style=ka([e.style,s.style]);else if(Ra(r)){const i=e[r],o=s[r];o&&i!==o&&!(pe(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function yn(t,e,n,s=null){Cn(t,e,7,[n,s])}const Sb=rm();let Cb=0;function Pb(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Sb,i={uid:Cb++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new nv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:um(s,r),emitsOptions:gm(s,r),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:s.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=gb.bind(null,i),t.ce&&t.ce(i),i}let St=null,sa,tu;{const t=Pa(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};sa=e("__VUE_INSTANCE_SETTERS__",n=>St=n),tu=e("__VUE_SSR_SETTERS__",n=>ki=n)}const Ki=t=>{const e=St;return sa(t),t.scope.on(),()=>{t.scope.off(),sa(e)}},nh=()=>{St&&St.scope.off(),sa(null)};function bm(t){return t.vnode.shapeFlag&4}let ki=!1;function kb(t,e=!1,n=!1){e&&tu(e);const{props:s,children:r}=t.vnode,i=bm(t);tb(t,s,i,e),ib(t,r,n||e);const o=i?xb(t,e):void 0;return e&&tu(!1),o}function xb(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Gv);const{setup:s}=n;if(s){jn();const r=t.setupContext=s.length>1?Db(t):null,i=Ki(t),o=Hi(s,t,0,[t.props,r]),l=mp(o);if(qn(),i(),(l||t.sp)&&!mi(t)&&Gp(t),l){if(o.then(nh,nh),e)return o.then(u=>{sh(t,u)}).catch(u=>{Da(u,t,0)});t.asyncDep=o}else sh(t,o)}else Em(t)}function sh(t,e,n){we(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Be(e)&&(t.setupState=Fp(e)),Em(t)}function Em(t,e,n){const s=t.type;t.render||(t.render=s.render||wn);{const r=Ki(t);jn();try{Wv(t)}finally{qn(),r()}}}const Vb={get(t,e){return At(t,"get",""),t[e]}};function Db(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Vb),slots:t.slots,emit:t.emit,expose:e}}function La(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Fp(wv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in gi)return gi[n](t)},has(e,n){return n in e||n in gi}})):t.proxy}function Nb(t,e=!0){return we(t)?t.displayName||t.name:t.name||e&&t.__name}function Ob(t){return we(t)&&"__vccOpts"in t}const Ye=(t,e)=>Sv(t,e,ki);function wm(t,e,n){const s=arguments.length;return s===2?Be(e)&&!pe(e)?na(e)?st(t,null,[e]):st(t,e):st(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&na(n)&&(n=[n]),st(t,e,n))}const Mb="3.5.15";/**
* @vue/runtime-dom v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nu;const rh=typeof window<"u"&&window.trustedTypes;if(rh)try{nu=rh.createPolicy("vue",{createHTML:t=>t})}catch{}const Tm=nu?t=>nu.createHTML(t):t=>t,Lb="http://www.w3.org/2000/svg",Ub="http://www.w3.org/1998/Math/MathML",Nn=typeof document<"u"?document:null,ih=Nn&&Nn.createElement("template"),Fb={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Nn.createElementNS(Lb,t):e==="mathml"?Nn.createElementNS(Ub,t):n?Nn.createElement(t,{is:n}):Nn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Nn.createTextNode(t),createComment:t=>Nn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Nn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{ih.innerHTML=Tm(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=ih.content;if(s==="svg"||s==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},$b=Symbol("_vtc");function Bb(t,e,n){const s=t[$b];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const oh=Symbol("_vod"),jb=Symbol("_vsh"),qb=Symbol(""),Hb=/(^|;)\s*display\s*:/;function Kb(t,e,n){const s=t.style,r=tt(n);let i=!1;if(n&&!r){if(e)if(tt(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Uo(s,l,"")}else for(const o in e)n[o]==null&&Uo(s,o,"");for(const o in n)o==="display"&&(i=!0),Uo(s,o,n[o])}else if(r){if(e!==n){const o=s[qb];o&&(n+=";"+o),s.cssText=n,i=Hb.test(n)}}else e&&t.removeAttribute("style");oh in t&&(t[oh]=i?s.display:"",t[jb]&&(s.display="none"))}const ah=/\s*!important$/;function Uo(t,e,n){if(pe(n))n.forEach(s=>Uo(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=zb(t,e);ah.test(n)?t.setProperty(Js(s),n.replace(ah,""),"important"):t[s]=n}}const lh=["Webkit","Moz","ms"],xl={};function zb(t,e){const n=xl[e];if(n)return n;let s=nn(e);if(s!=="filter"&&s in t)return xl[e]=s;s=Ca(s);for(let r=0;r<lh.length;r++){const i=lh[r]+s;if(i in t)return xl[e]=i}return e}const uh="http://www.w3.org/1999/xlink";function ch(t,e,n,s,r,i=ev(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(uh,e.slice(6,e.length)):t.setAttributeNS(uh,e,n):n==null||i&&!vp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Sn(n)?String(n):n)}function dh(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Tm(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=vp(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Ln(t,e,n,s){t.addEventListener(e,n,s)}function Gb(t,e,n,s){t.removeEventListener(e,n,s)}const hh=Symbol("_vei");function Wb(t,e,n,s,r=null){const i=t[hh]||(t[hh]={}),o=i[e];if(s&&o)o.value=s;else{const[l,u]=Qb(e);if(s){const c=i[e]=Xb(s,r);Ln(t,l,c,u)}else o&&(Gb(t,l,o,u),i[e]=void 0)}}const fh=/(?:Once|Passive|Capture)$/;function Qb(t){let e;if(fh.test(t)){e={};let s;for(;s=t.match(fh);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Js(t.slice(2)),e]}let Vl=0;const Yb=Promise.resolve(),Jb=()=>Vl||(Yb.then(()=>Vl=0),Vl=Date.now());function Xb(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Cn(Zb(s,n.value),e,5,[s])};return n.value=t,n.attached=Jb(),n}function Zb(t,e){if(pe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const ph=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,eE=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?Bb(t,s,o):e==="style"?Kb(t,n,s):Ra(e)?Vu(e)||Wb(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):tE(t,e,s,o))?(dh(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ch(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!tt(s))?dh(t,nn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),ch(t,e,s,o))};function tE(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&ph(e)&&we(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return ph(e)&&tt(n)?!1:e in t}const ws=t=>{const e=t.props["onUpdate:modelValue"]||!1;return pe(e)?n=>No(e,n):e};function nE(t){t.target.composing=!0}function mh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const en=Symbol("_assign"),he={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[en]=ws(r);const i=s||r.props&&r.props.type==="number";Ln(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;n&&(l=l.trim()),i&&(l=Qo(l)),t[en](l)}),n&&Ln(t,"change",()=>{t.value=t.value.trim()}),e||(Ln(t,"compositionstart",nE),Ln(t,"compositionend",mh),Ln(t,"change",mh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[en]=ws(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Qo(t.value):t.value,u=e??"";l!==u&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===u)||(t.value=u))}},Tr={deep:!0,created(t,e,n){t[en]=ws(n),Ln(t,"change",()=>{const s=t._modelValue,r=Ir(t),i=t.checked,o=t[en];if(pe(s)){const l=Ou(s,r),u=l!==-1;if(i&&!u)o(s.concat(r));else if(!i&&u){const c=[...s];c.splice(l,1),o(c)}}else if(Or(s)){const l=new Set(s);i?l.add(r):l.delete(r),o(l)}else o(Im(t,i))})},mounted:gh,beforeUpdate(t,e,n){t[en]=ws(n),gh(t,e,n)}};function gh(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(pe(e))r=Ou(e,s.props.value)>-1;else if(Or(e))r=e.has(s.props.value);else{if(e===n)return;r=qs(e,Im(t,!0))}t.checked!==r&&(t.checked=r)}const sE={created(t,{value:e},n){t.checked=qs(e,n.props.value),t[en]=ws(n),Ln(t,"change",()=>{t[en](Ir(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[en]=ws(s),e!==n&&(t.checked=qs(e,s.props.value))}},dn={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=Or(e);Ln(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Qo(Ir(o)):Ir(o));t[en](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,qu(()=>{t._assigning=!1})}),t[en]=ws(s)},mounted(t,{value:e}){_h(t,e)},beforeUpdate(t,e,n){t[en]=ws(n)},updated(t,{value:e}){t._assigning||_h(t,e)}};function _h(t,e){const n=t.multiple,s=pe(e);if(!(n&&!s&&!Or(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],l=Ir(o);if(n)if(s){const u=typeof l;u==="string"||u==="number"?o.selected=e.some(c=>String(c)===String(l)):o.selected=Ou(e,l)>-1}else o.selected=e.has(l);else if(qs(Ir(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ir(t){return"_value"in t?t._value:t.value}function Im(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const rE={created(t,e,n){So(t,e,n,null,"created")},mounted(t,e,n){So(t,e,n,null,"mounted")},beforeUpdate(t,e,n,s){So(t,e,n,s,"beforeUpdate")},updated(t,e,n,s){So(t,e,n,s,"updated")}};function iE(t,e){switch(t){case"SELECT":return dn;case"TEXTAREA":return he;default:switch(e){case"checkbox":return Tr;case"radio":return sE;default:return he}}}function So(t,e,n,s,r){const o=iE(t.tagName,n.props&&n.props.type)[r];o&&o(t,e,n,s)}const oE=["ctrl","shift","alt","meta"],aE={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>oE.some(n=>t[`${n}Key`]&&!e.includes(n))},lt=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const l=aE[e[o]];if(l&&l(r,e))return}return t(r,...i)})},lE=Pt({patchProp:eE},Fb);let yh;function uE(){return yh||(yh=ab(lE))}const cE=(...t)=>{const e=uE().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=hE(s);if(!r)return;const i=e._component;!we(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,dE(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function dE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function hE(t){return tt(t)?document.querySelector(t):t}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ar=typeof document<"u";function Am(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function fE(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Am(t.default)}const Ve=Object.assign;function Dl(t,e){const n={};for(const s in e){const r=e[s];n[s]=hn(r)?r.map(t):t(r)}return n}const yi=()=>{},hn=Array.isArray,Rm=/#/g,pE=/&/g,mE=/\//g,gE=/=/g,_E=/\?/g,Sm=/\+/g,yE=/%5B/g,vE=/%5D/g,Cm=/%5E/g,bE=/%60/g,Pm=/%7B/g,EE=/%7C/g,km=/%7D/g,wE=/%20/g;function Yu(t){return encodeURI(""+t).replace(EE,"|").replace(yE,"[").replace(vE,"]")}function TE(t){return Yu(t).replace(Pm,"{").replace(km,"}").replace(Cm,"^")}function su(t){return Yu(t).replace(Sm,"%2B").replace(wE,"+").replace(Rm,"%23").replace(pE,"%26").replace(bE,"`").replace(Pm,"{").replace(km,"}").replace(Cm,"^")}function IE(t){return su(t).replace(gE,"%3D")}function AE(t){return Yu(t).replace(Rm,"%23").replace(_E,"%3F")}function RE(t){return t==null?"":AE(t).replace(mE,"%2F")}function xi(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const SE=/\/$/,CE=t=>t.replace(SE,"");function Nl(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let u=e.indexOf("?");return l<u&&l>=0&&(u=-1),u>-1&&(s=e.slice(0,u),i=e.slice(u+1,l>-1?l:e.length),r=t(i)),l>-1&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=VE(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:xi(o)}}function PE(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function vh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function kE(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Ar(e.matched[s],n.matched[r])&&xm(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ar(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function xm(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!xE(t[n],e[n]))return!1;return!0}function xE(t,e){return hn(t)?bh(t,e):hn(e)?bh(e,t):t===e}function bh(t,e){return hn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function VE(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const ss={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Vi;(function(t){t.pop="pop",t.push="push"})(Vi||(Vi={}));var vi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(vi||(vi={}));function DE(t){if(!t)if(ar){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),CE(t)}const NE=/^[^#]+#/;function OE(t,e){return t.replace(NE,"#")+e}function ME(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Ua=()=>({left:window.scrollX,top:window.scrollY});function LE(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=ME(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Eh(t,e){return(history.state?history.state.position-e:-1)+t}const ru=new Map;function UE(t,e){ru.set(t,e)}function FE(t){const e=ru.get(t);return ru.delete(t),e}let $E=()=>location.protocol+"//"+location.host;function Vm(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let l=r.includes(t.slice(i))?t.slice(i).length:1,u=r.slice(l);return u[0]!=="/"&&(u="/"+u),vh(u,"")}return vh(n,t)+s+r}function BE(t,e,n,s){let r=[],i=[],o=null;const l=({state:g})=>{const _=Vm(t,location),b=n.value,E=e.value;let C=0;if(g){if(n.value=_,e.value=g,o&&o===b){o=null;return}C=E?g.position-E.position:0}else s(_);r.forEach(P=>{P(n.value,b,{delta:C,type:Vi.pop,direction:C?C>0?vi.forward:vi.back:vi.unknown})})};function u(){o=n.value}function c(g){r.push(g);const _=()=>{const b=r.indexOf(g);b>-1&&r.splice(b,1)};return i.push(_),_}function d(){const{history:g}=window;g.state&&g.replaceState(Ve({},g.state,{scroll:Ua()}),"")}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:u,listen:c,destroy:p}}function wh(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Ua():null}}function jE(t){const{history:e,location:n}=window,s={value:Vm(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(u,c,d){const p=t.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+u:$E()+t+u;try{e[d?"replaceState":"pushState"](c,"",g),r.value=c}catch(_){console.error(_),n[d?"replace":"assign"](g)}}function o(u,c){const d=Ve({},e.state,wh(r.value.back,u,r.value.forward,!0),c,{position:r.value.position});i(u,d,!0),s.value=u}function l(u,c){const d=Ve({},r.value,e.state,{forward:u,scroll:Ua()});i(d.current,d,!0);const p=Ve({},wh(s.value,u,null),{position:d.position+1},c);i(u,p,!1),s.value=u}return{location:s,state:r,push:l,replace:o}}function qE(t){t=DE(t);const e=jE(t),n=BE(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Ve({location:"",base:t,go:s,createHref:OE.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function HE(t){return typeof t=="string"||t&&typeof t=="object"}function Dm(t){return typeof t=="string"||typeof t=="symbol"}const Nm=Symbol("");var Th;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Th||(Th={}));function Rr(t,e){return Ve(new Error,{type:t,[Nm]:!0},e)}function Dn(t,e){return t instanceof Error&&Nm in t&&(e==null||!!(t.type&e))}const Ih="[^/]+?",KE={sensitive:!1,strict:!1,start:!0,end:!0},zE=/[.+*?^${}()[\]/\\]/g;function GE(t,e){const n=Ve({},KE,e),s=[];let r=n.start?"^":"";const i=[];for(const c of t){const d=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let p=0;p<c.length;p++){const g=c[p];let _=40+(n.sensitive?.25:0);if(g.type===0)p||(r+="/"),r+=g.value.replace(zE,"\\$&"),_+=40;else if(g.type===1){const{value:b,repeatable:E,optional:C,regexp:P}=g;i.push({name:b,repeatable:E,optional:C});const T=P||Ih;if(T!==Ih){_+=10;try{new RegExp(`(${T})`)}catch(M){throw new Error(`Invalid custom RegExp for param "${b}" (${T}): `+M.message)}}let V=E?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;p||(V=C&&c.length<2?`(?:/${V})`:"/"+V),C&&(V+="?"),r+=V,_+=20,C&&(_+=-8),E&&(_+=-20),T===".*"&&(_+=-50)}d.push(_)}s.push(d)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(c){const d=c.match(o),p={};if(!d)return null;for(let g=1;g<d.length;g++){const _=d[g]||"",b=i[g-1];p[b.name]=_&&b.repeatable?_.split("/"):_}return p}function u(c){let d="",p=!1;for(const g of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const _ of g)if(_.type===0)d+=_.value;else if(_.type===1){const{value:b,repeatable:E,optional:C}=_,P=b in c?c[b]:"";if(hn(P)&&!E)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const T=hn(P)?P.join("/"):P;if(!T)if(C)g.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${b}"`);d+=T}}return d||"/"}return{re:o,score:s,keys:i,parse:l,stringify:u}}function WE(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Om(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=WE(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Ah(s))return 1;if(Ah(r))return-1}return r.length-s.length}function Ah(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const QE={type:0,value:""},YE=/[a-zA-Z0-9_]/;function JE(t){if(!t)return[[]];if(t==="/")return[[QE]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${c}": ${_}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,u,c="",d="";function p(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:d,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),c="")}function g(){c+=u}for(;l<t.length;){if(u=t[l++],u==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:u==="/"?(c&&p(),o()):u===":"?(p(),n=1):g();break;case 4:g(),n=s;break;case 1:u==="("?n=2:YE.test(u)?g():(p(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&l--);break;case 2:u===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+u:n=3:d+=u;break;case 3:p(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&l--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),r}function XE(t,e,n){const s=GE(JE(t.path),n),r=Ve(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function ZE(t,e){const n=[],s=new Map;e=Ph({strict:!1,end:!0,sensitive:!1},e);function r(p){return s.get(p)}function i(p,g,_){const b=!_,E=Sh(p);E.aliasOf=_&&_.record;const C=Ph(e,p),P=[E];if("alias"in p){const M=typeof p.alias=="string"?[p.alias]:p.alias;for(const oe of M)P.push(Sh(Ve({},E,{components:_?_.record.components:E.components,path:oe,aliasOf:_?_.record:E})))}let T,V;for(const M of P){const{path:oe}=M;if(g&&oe[0]!=="/"){const de=g.record.path,R=de[de.length-1]==="/"?"":"/";M.path=g.record.path+(oe&&R+oe)}if(T=XE(M,g,C),_?_.alias.push(T):(V=V||T,V!==T&&V.alias.push(T),b&&p.name&&!Ch(T)&&o(p.name)),Mm(T)&&u(T),E.children){const de=E.children;for(let R=0;R<de.length;R++)i(de[R],T,_&&_.children[R])}_=_||T}return V?()=>{o(V)}:yi}function o(p){if(Dm(p)){const g=s.get(p);g&&(s.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function u(p){const g=nw(p,n);n.splice(g,0,p),p.record.name&&!Ch(p)&&s.set(p.record.name,p)}function c(p,g){let _,b={},E,C;if("name"in p&&p.name){if(_=s.get(p.name),!_)throw Rr(1,{location:p});C=_.record.name,b=Ve(Rh(g.params,_.keys.filter(V=>!V.optional).concat(_.parent?_.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),p.params&&Rh(p.params,_.keys.map(V=>V.name))),E=_.stringify(b)}else if(p.path!=null)E=p.path,_=n.find(V=>V.re.test(E)),_&&(b=_.parse(E),C=_.record.name);else{if(_=g.name?s.get(g.name):n.find(V=>V.re.test(g.path)),!_)throw Rr(1,{location:p,currentLocation:g});C=_.record.name,b=Ve({},g.params,p.params),E=_.stringify(b)}const P=[];let T=_;for(;T;)P.unshift(T.record),T=T.parent;return{name:C,path:E,params:b,matched:P,meta:tw(P)}}t.forEach(p=>i(p));function d(){n.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:r}}function Rh(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Sh(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:ew(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function ew(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Ch(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function tw(t){return t.reduce((e,n)=>Ve(e,n.meta),{})}function Ph(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function nw(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Om(t,e[i])<0?s=i:n=i+1}const r=sw(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function sw(t){let e=t;for(;e=e.parent;)if(Mm(e)&&Om(t,e)===0)return e}function Mm({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function rw(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(Sm," "),o=i.indexOf("="),l=xi(o<0?i:i.slice(0,o)),u=o<0?null:xi(i.slice(o+1));if(l in e){let c=e[l];hn(c)||(c=e[l]=[c]),c.push(u)}else e[l]=u}return e}function kh(t){let e="";for(let n in t){const s=t[n];if(n=IE(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(hn(s)?s.map(i=>i&&su(i)):[s&&su(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function iw(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=hn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const ow=Symbol(""),xh=Symbol(""),Fa=Symbol(""),Ju=Symbol(""),iu=Symbol("");function ri(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function as(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,u)=>{const c=g=>{g===!1?u(Rr(4,{from:n,to:e})):g instanceof Error?u(g):HE(g)?u(Rr(2,{from:e,to:g})):(o&&s.enterCallbacks[r]===o&&typeof g=="function"&&o.push(g),l())},d=i(()=>t.call(s&&s.instances[r],e,n,c));let p=Promise.resolve(d);t.length<3&&(p=p.then(c)),p.catch(g=>u(g))})}function Ol(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let u=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Am(u)){const d=(u.__vccOpts||u)[e];d&&i.push(as(d,n,s,o,l,r))}else{let c=u();i.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=fE(d)?d.default:d;o.mods[l]=d,o.components[l]=p;const _=(p.__vccOpts||p)[e];return _&&as(_,n,s,o,l,r)()}))}}return i}function Vh(t){const e=cn(Fa),n=cn(Ju),s=Ye(()=>{const u=un(t.to);return e.resolve(u)}),r=Ye(()=>{const{matched:u}=s.value,{length:c}=u,d=u[c-1],p=n.matched;if(!d||!p.length)return-1;const g=p.findIndex(Ar.bind(null,d));if(g>-1)return g;const _=Dh(u[c-2]);return c>1&&Dh(d)===_&&p[p.length-1].path!==_?p.findIndex(Ar.bind(null,u[c-2])):g}),i=Ye(()=>r.value>-1&&dw(n.params,s.value.params)),o=Ye(()=>r.value>-1&&r.value===n.matched.length-1&&xm(n.params,s.value.params));function l(u={}){if(cw(u)){const c=e[un(t.replace)?"replace":"push"](un(t.to)).catch(yi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:Ye(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function aw(t){return t.length===1?t[0]:t}const lw=zp({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Vh,setup(t,{slots:e}){const n=Va(Vh(t)),{options:s}=cn(Fa),r=Ye(()=>({[Nh(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Nh(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&aw(e.default(n));return t.custom?i:wm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),uw=lw;function cw(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function dw(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!hn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Dh(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Nh=(t,e,n)=>t??e??n,hw=zp({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=cn(iu),r=Ye(()=>t.route||s.value),i=cn(xh,0),o=Ye(()=>{let c=un(i);const{matched:d}=r.value;let p;for(;(p=d[c])&&!p.components;)c++;return c}),l=Ye(()=>r.value.matched[o.value]);Oo(xh,Ye(()=>o.value+1)),Oo(ow,l),Oo(iu,r);const u=G();return ps(()=>[u.value,l.value,t.name],([c,d,p],[g,_,b])=>{d&&(d.instances[p]=c,_&&_!==d&&c&&c===g&&(d.leaveGuards.size||(d.leaveGuards=_.leaveGuards),d.updateGuards.size||(d.updateGuards=_.updateGuards))),c&&d&&(!_||!Ar(d,_)||!g)&&(d.enterCallbacks[p]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=r.value,d=t.name,p=l.value,g=p&&p.components[d];if(!g)return Oh(n.default,{Component:g,route:c});const _=p.props[d],b=_?_===!0?c.params:typeof _=="function"?_(c):_:null,C=wm(g,Ve({},b,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(p.instances[d]=null)},ref:u}));return Oh(n.default,{Component:C,route:c})||C}}});function Oh(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const fw=hw;function pw(t){const e=ZE(t.routes,t),n=t.parseQuery||rw,s=t.stringifyQuery||kh,r=t.history,i=ri(),o=ri(),l=ri(),u=Tv(ss);let c=ss;ar&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Dl.bind(null,U=>""+U),p=Dl.bind(null,RE),g=Dl.bind(null,xi);function _(U,te){let ee,ie;return Dm(U)?(ee=e.getRecordMatcher(U),ie=te):ie=U,e.addRoute(ie,ee)}function b(U){const te=e.getRecordMatcher(U);te&&e.removeRoute(te)}function E(){return e.getRoutes().map(U=>U.record)}function C(U){return!!e.getRecordMatcher(U)}function P(U,te){if(te=Ve({},te||u.value),typeof U=="string"){const N=Nl(n,U,te.path),F=e.resolve({path:N.path},te),q=r.createHref(N.fullPath);return Ve(N,F,{params:g(F.params),hash:xi(N.hash),redirectedFrom:void 0,href:q})}let ee;if(U.path!=null)ee=Ve({},U,{path:Nl(n,U.path,te.path).path});else{const N=Ve({},U.params);for(const F in N)N[F]==null&&delete N[F];ee=Ve({},U,{params:p(N)}),te.params=p(te.params)}const ie=e.resolve(ee,te),ke=U.hash||"";ie.params=d(g(ie.params));const I=PE(s,Ve({},U,{hash:TE(ke),path:ie.path})),S=r.createHref(I);return Ve({fullPath:I,hash:ke,query:s===kh?iw(U.query):U.query||{}},ie,{redirectedFrom:void 0,href:S})}function T(U){return typeof U=="string"?Nl(n,U,u.value.path):Ve({},U)}function V(U,te){if(c!==U)return Rr(8,{from:te,to:U})}function M(U){return R(U)}function oe(U){return M(Ve(T(U),{replace:!0}))}function de(U){const te=U.matched[U.matched.length-1];if(te&&te.redirect){const{redirect:ee}=te;let ie=typeof ee=="function"?ee(U):ee;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=T(ie):{path:ie},ie.params={}),Ve({query:U.query,hash:U.hash,params:ie.path!=null?{}:U.params},ie)}}function R(U,te){const ee=c=P(U),ie=u.value,ke=U.state,I=U.force,S=U.replace===!0,N=de(ee);if(N)return R(Ve(T(N),{state:typeof N=="object"?Ve({},ke,N.state):ke,force:I,replace:S}),te||ee);const F=ee;F.redirectedFrom=te;let q;return!I&&kE(s,ie,ee)&&(q=Rr(16,{to:F,from:ie}),Wt(ie,ie,!0,!1)),(q?Promise.resolve(q):k(F,ie)).catch($=>Dn($)?Dn($,2)?$:sn($):ve($,F,ie)).then($=>{if($){if(Dn($,2))return R(Ve({replace:S},T($.to),{state:typeof $.to=="object"?Ve({},ke,$.to.state):ke,force:I}),te||F)}else $=D(F,ie,!0,S,ke);return x(F,ie,$),$})}function v(U,te){const ee=V(U,te);return ee?Promise.reject(ee):Promise.resolve()}function w(U){const te=Xn.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(U):U()}function k(U,te){let ee;const[ie,ke,I]=mw(U,te);ee=Ol(ie.reverse(),"beforeRouteLeave",U,te);for(const N of ie)N.leaveGuards.forEach(F=>{ee.push(as(F,U,te))});const S=v.bind(null,U,te);return ee.push(S),Lt(ee).then(()=>{ee=[];for(const N of i.list())ee.push(as(N,U,te));return ee.push(S),Lt(ee)}).then(()=>{ee=Ol(ke,"beforeRouteUpdate",U,te);for(const N of ke)N.updateGuards.forEach(F=>{ee.push(as(F,U,te))});return ee.push(S),Lt(ee)}).then(()=>{ee=[];for(const N of I)if(N.beforeEnter)if(hn(N.beforeEnter))for(const F of N.beforeEnter)ee.push(as(F,U,te));else ee.push(as(N.beforeEnter,U,te));return ee.push(S),Lt(ee)}).then(()=>(U.matched.forEach(N=>N.enterCallbacks={}),ee=Ol(I,"beforeRouteEnter",U,te,w),ee.push(S),Lt(ee))).then(()=>{ee=[];for(const N of o.list())ee.push(as(N,U,te));return ee.push(S),Lt(ee)}).catch(N=>Dn(N,8)?N:Promise.reject(N))}function x(U,te,ee){l.list().forEach(ie=>w(()=>ie(U,te,ee)))}function D(U,te,ee,ie,ke){const I=V(U,te);if(I)return I;const S=te===ss,N=ar?history.state:{};ee&&(ie||S?r.replace(U.fullPath,Ve({scroll:S&&N&&N.scroll},ke)):r.push(U.fullPath,ke)),u.value=U,Wt(U,te,ee,S),sn()}let A;function ct(){A||(A=r.listen((U,te,ee)=>{if(!_n.listening)return;const ie=P(U),ke=de(ie);if(ke){R(Ve(ke,{replace:!0,force:!0}),ie).catch(yi);return}c=ie;const I=u.value;ar&&UE(Eh(I.fullPath,ee.delta),Ua()),k(ie,I).catch(S=>Dn(S,12)?S:Dn(S,2)?(R(Ve(T(S.to),{force:!0}),ie).then(N=>{Dn(N,20)&&!ee.delta&&ee.type===Vi.pop&&r.go(-1,!1)}).catch(yi),Promise.reject()):(ee.delta&&r.go(-ee.delta,!1),ve(S,ie,I))).then(S=>{S=S||D(ie,I,!1),S&&(ee.delta&&!Dn(S,8)?r.go(-ee.delta,!1):ee.type===Vi.pop&&Dn(S,20)&&r.go(-1,!1)),x(ie,I,S)}).catch(yi)}))}let Mt=ri(),We=ri(),ye;function ve(U,te,ee){sn(U);const ie=We.list();return ie.length?ie.forEach(ke=>ke(U,te,ee)):console.error(U),Promise.reject(U)}function xt(){return ye&&u.value!==ss?Promise.resolve():new Promise((U,te)=>{Mt.add([U,te])})}function sn(U){return ye||(ye=!U,ct(),Mt.list().forEach(([te,ee])=>U?ee(U):te()),Mt.reset()),U}function Wt(U,te,ee,ie){const{scrollBehavior:ke}=t;if(!ar||!ke)return Promise.resolve();const I=!ee&&FE(Eh(U.fullPath,0))||(ie||!ee)&&history.state&&history.state.scroll||null;return qu().then(()=>ke(U,te,I)).then(S=>S&&LE(S)).catch(S=>ve(S,U,te))}const Ke=U=>r.go(U);let ze;const Xn=new Set,_n={currentRoute:u,listening:!0,addRoute:_,removeRoute:b,clearRoutes:e.clearRoutes,hasRoute:C,getRoutes:E,resolve:P,options:t,push:M,replace:oe,go:Ke,back:()=>Ke(-1),forward:()=>Ke(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:We.add,isReady:xt,install(U){const te=this;U.component("RouterLink",uw),U.component("RouterView",fw),U.config.globalProperties.$router=te,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>un(u)}),ar&&!ze&&u.value===ss&&(ze=!0,M(r.location).catch(ke=>{}));const ee={};for(const ke in ss)Object.defineProperty(ee,ke,{get:()=>u.value[ke],enumerable:!0});U.provide(Fa,te),U.provide(Ju,Mp(ee)),U.provide(iu,u);const ie=U.unmount;Xn.add(U),U.unmount=function(){Xn.delete(U),Xn.size<1&&(c=ss,A&&A(),A=null,u.value=ss,ze=!1,ye=!1),ie()}}};function Lt(U){return U.reduce((te,ee)=>te.then(()=>w(ee)),Promise.resolve())}return _n}function mw(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(c=>Ar(c,l))?s.push(l):n.push(l));const u=t.matched[o];u&&(e.matched.find(c=>Ar(c,u))||r.push(u))}return[n,s,r]}function Lm(){return cn(Fa)}function Um(t){return cn(Ju)}const gw=()=>{};var Mh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},_w=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],u=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},$m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|c>>6,_=c&63;u||(_=64,o||(g=64)),s.push(n[d],n[p],n[g],n[_])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_w(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||c==null||p==null)throw new yw;const g=i<<2|l>>4;if(s.push(g),c!==64){const _=l<<4&240|c>>2;if(s.push(_),p!==64){const b=c<<6&192|p;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vw=function(t){const e=Fm(t);return $m.encodeByteArray(e,!0)},ra=function(t){return vw(t).replace(/\./g,"")},Bm=function(t){try{return $m.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=()=>bw().__FIREBASE_DEFAULTS__,ww=()=>{if(typeof process>"u"||typeof Mh>"u")return;const t=Mh.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Tw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Bm(t[1]);return e&&JSON.parse(e)},$a=()=>{try{return gw()||Ew()||ww()||Tw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jm=t=>{var e,n;return(n=(e=$a())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Iw=t=>{const e=jm(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},qm=()=>{var t;return(t=$a())===null||t===void 0?void 0:t.config},Hm=t=>{var e;return(e=$a())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t){return t.endsWith(".cloudworkstations.dev")}async function Km(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ra(JSON.stringify(n)),ra(JSON.stringify(o)),""].join(".")}const bi={};function Sw(){const t={prod:[],emulator:[]};for(const e of Object.keys(bi))bi[e]?t.emulator.push(e):t.prod.push(e);return t}function Cw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Lh=!1;function zm(t,e){if(typeof window>"u"||typeof document>"u"||!zi(window.location.host)||bi[t]===e||bi[t]||Lh)return;bi[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=Sw().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function c(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Lh=!0,o()},g}function d(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=Cw(s),_=n("text"),b=document.getElementById(_)||document.createElement("span"),E=n("learnmore"),C=document.getElementById(E)||document.createElement("a"),P=n("preprendIcon"),T=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const V=g.element;l(V),d(C,E);const M=c();u(T,P),V.append(T,b,C,M),document.body.appendChild(V)}i?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Pw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function kw(){var t;const e=(t=$a())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Vw(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Dw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nw(){const t=kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ow(){return!kw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mw(){try{return typeof indexedDB=="object"}catch{return!1}}function Lw(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="FirebaseError";class Qn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Uw,Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gi.prototype.create)}}class Gi{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Fw(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Qn(r,l,s)}}function Fw(t,e){return t.replace($w,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const $w=/\{\$([^}]+)}/g;function Bw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hs(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Uh(i)&&Uh(o)){if(!Hs(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Uh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function oi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function ai(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function jw(t,e){const n=new qw(t,e);return n.subscribe.bind(n)}class qw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Hw(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Ml),r.error===void 0&&(r.error=Ml),r.complete===void 0&&(r.complete=Ml);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hw(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ml(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t){return t&&t._delegate?t._delegate:t}class Ks{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Aw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gw(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:zw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zw(t){return t===$s?void 0:t}function Gw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Kw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const Qw={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},Yw=Re.INFO,Jw={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},Xw=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Jw[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xu{constructor(e){this.name=e,this._logLevel=Yw,this._logHandler=Xw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Qw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const Zw=(t,e)=>e.some(n=>t instanceof n);let Fh,$h;function eT(){return Fh||(Fh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tT(){return $h||($h=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gm=new WeakMap,ou=new WeakMap,Wm=new WeakMap,Ll=new WeakMap,Zu=new WeakMap;function nT(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ms(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gm.set(n,t)}).catch(()=>{}),Zu.set(e,t),e}function sT(t){if(ou.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ou.set(t,e)}let au={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ou.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ms(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rT(t){au=t(au)}function iT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Ul(this),e,...n);return Wm.set(s,e.sort?e.sort():[e]),ms(s)}:tT().includes(t)?function(...e){return t.apply(Ul(this),e),ms(Gm.get(this))}:function(...e){return ms(t.apply(Ul(this),e))}}function oT(t){return typeof t=="function"?iT(t):(t instanceof IDBTransaction&&sT(t),Zw(t,eT())?new Proxy(t,au):t)}function ms(t){if(t instanceof IDBRequest)return nT(t);if(Ll.has(t))return Ll.get(t);const e=oT(t);return e!==t&&(Ll.set(t,e),Zu.set(e,t)),e}const Ul=t=>Zu.get(t);function aT(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=ms(o);return s&&o.addEventListener("upgradeneeded",u=>{s(ms(o.result),u.oldVersion,u.newVersion,ms(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const lT=["get","getKey","getAll","getAllKeys","count"],uT=["put","add","delete","clear"],Fl=new Map;function Bh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fl.get(e))return Fl.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=uT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||lT.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,r?"readwrite":"readonly");let c=u.store;return s&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),r&&u.done]))[0]};return Fl.set(e,i),i}rT(t=>({...t,get:(e,n,s)=>Bh(e,n)||t.get(e,n,s),has:(e,n)=>!!Bh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function dT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lu="@firebase/app",jh="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new Xu("@firebase/app"),hT="@firebase/app-compat",fT="@firebase/analytics-compat",pT="@firebase/analytics",mT="@firebase/app-check-compat",gT="@firebase/app-check",_T="@firebase/auth",yT="@firebase/auth-compat",vT="@firebase/database",bT="@firebase/data-connect",ET="@firebase/database-compat",wT="@firebase/functions",TT="@firebase/functions-compat",IT="@firebase/installations",AT="@firebase/installations-compat",RT="@firebase/messaging",ST="@firebase/messaging-compat",CT="@firebase/performance",PT="@firebase/performance-compat",kT="@firebase/remote-config",xT="@firebase/remote-config-compat",VT="@firebase/storage",DT="@firebase/storage-compat",NT="@firebase/firestore",OT="@firebase/ai",MT="@firebase/firestore-compat",LT="firebase",UT="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu="[DEFAULT]",FT={[lu]:"fire-core",[hT]:"fire-core-compat",[pT]:"fire-analytics",[fT]:"fire-analytics-compat",[gT]:"fire-app-check",[mT]:"fire-app-check-compat",[_T]:"fire-auth",[yT]:"fire-auth-compat",[vT]:"fire-rtdb",[bT]:"fire-data-connect",[ET]:"fire-rtdb-compat",[wT]:"fire-fn",[TT]:"fire-fn-compat",[IT]:"fire-iid",[AT]:"fire-iid-compat",[RT]:"fire-fcm",[ST]:"fire-fcm-compat",[CT]:"fire-perf",[PT]:"fire-perf-compat",[kT]:"fire-rc",[xT]:"fire-rc-compat",[VT]:"fire-gcs",[DT]:"fire-gcs-compat",[NT]:"fire-fst",[MT]:"fire-fst-compat",[OT]:"fire-vertex","fire-js":"fire-js",[LT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new Map,$T=new Map,cu=new Map;function qh(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sr(t){const e=t.name;if(cu.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;cu.set(e,t);for(const n of ia.values())qh(n,t);for(const n of $T.values())qh(n,t);return!0}function ec(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new Gi("app","Firebase",BT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=UT;function Qm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:uu,automaticDataCollectionEnabled:!0},e),r=s.name;if(typeof r!="string"||!r)throw gs.create("bad-app-name",{appName:String(r)});if(n||(n=qm()),!n)throw gs.create("no-options");const i=ia.get(r);if(i){if(Hs(n,i.options)&&Hs(s,i.config))return i;throw gs.create("duplicate-app",{appName:r})}const o=new Ww(r);for(const u of cu.values())o.addComponent(u);const l=new jT(n,s,o);return ia.set(r,l),l}function Ym(t=uu){const e=ia.get(t);if(!e&&t===uu&&qm())return Qm();if(!e)throw gs.create("no-app",{appName:t});return e}function _s(t,e,n){var s;let r=(s=FT[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(l.join(" "));return}Sr(new Ks(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="firebase-heartbeat-database",HT=1,Di="firebase-heartbeat-store";let $l=null;function Jm(){return $l||($l=aT(qT,HT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Di)}catch(n){console.warn(n)}}}}).catch(t=>{throw gs.create("idb-open",{originalErrorMessage:t.message})})),$l}async function KT(t){try{const n=(await Jm()).transaction(Di),s=await n.objectStore(Di).get(Xm(t));return await n.done,s}catch(e){if(e instanceof Qn)Hn.warn(e.message);else{const n=gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hn.warn(n.message)}}}async function Hh(t,e){try{const s=(await Jm()).transaction(Di,"readwrite");await s.objectStore(Di).put(e,Xm(t)),await s.done}catch(n){if(n instanceof Qn)Hn.warn(n.message);else{const s=gs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hn.warn(s.message)}}}function Xm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=1024,GT=30;class WT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YT(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Kh();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>GT){const o=JT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Hn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Kh(),{heartbeatsToSend:s,unsentEntries:r}=QT(this._heartbeatsCache.heartbeats),i=ra(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hn.warn(n),""}}}function Kh(){return new Date().toISOString().substring(0,10)}function QT(t,e=zT){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),zh(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),zh(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class YT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mw()?Lw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Hh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Hh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function zh(t){return ra(JSON.stringify({version:2,heartbeats:t})).length}function JT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t){Sr(new Ks("platform-logger",e=>new cT(e),"PRIVATE")),Sr(new Ks("heartbeat",e=>new WT(e),"PRIVATE")),_s(lu,jh,t),_s(lu,jh,"esm2017"),_s("fire-js","")}XT("");function tc(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function Zm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZT=Zm,eg=new Gi("auth","Firebase",Zm());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new Xu("@firebase/auth");function e0(t,...e){oa.logLevel<=Re.WARN&&oa.warn(`Auth (${Mr}): ${t}`,...e)}function Fo(t,...e){oa.logLevel<=Re.ERROR&&oa.error(`Auth (${Mr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t,...e){throw nc(t,...e)}function Tn(t,...e){return nc(t,...e)}function tg(t,e,n){const s=Object.assign(Object.assign({},ZT()),{[e]:n});return new Gi("auth","Firebase",s).create(e,{appName:t.name})}function $n(t){return tg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nc(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return eg.create(t,...e)}function me(t,e,...n){if(!t)throw nc(e,...n)}function Un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fo(e),new Error(e)}function Kn(t,e){t||Un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function t0(){return Gh()==="http:"||Gh()==="https:"}function Gh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(t0()||Vw()||"connection"in navigator)?navigator.onLine:!0}function s0(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=Pw()||Dw()}get(){return n0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],o0=new Qi(3e4,6e4);function Yn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Jn(t,e,n,s,r={}){return sg(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=Wi(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return xw()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&zi(t.emulatorConfig.host)&&(c.credentials="include"),ng.fetch()(await rg(t,t.config.apiHost,n,l),c)})}async function sg(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},r0),e);try{const r=new l0(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Co(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Co(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Co(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Co(t,"user-disabled",o);const d=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw tg(t,d,c);fn(t,d)}}catch(r){if(r instanceof Qn)throw r;fn(t,"network-request-failed",{message:String(r)})}}async function Yi(t,e,n,s,r={}){const i=await Jn(t,e,n,s,r);return"mfaPendingCredential"in i&&fn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function rg(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?sc(t.config,r):`${t.config.apiScheme}://${r}`;return i0.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function a0(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class l0{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Tn(this.auth,"network-request-failed")),o0.get())})}}function Co(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Tn(t,e,s);return r.customData._tokenResponse=n,r}function Wh(t){return t!==void 0&&t.enterprise!==void 0}class u0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return a0(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function c0(t,e){return Jn(t,"GET","/v2/recaptchaConfig",Yn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d0(t,e){return Jn(t,"POST","/v1/accounts:delete",e)}async function aa(t,e){return Jn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function h0(t,e=!1){const n=ut(t),s=await n.getIdToken(e),r=rc(s);me(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:Ei(Bl(r.auth_time)),issuedAtTime:Ei(Bl(r.iat)),expirationTime:Ei(Bl(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Bl(t){return Number(t)*1e3}function rc(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Fo("JWT malformed, contained fewer than 3 sections"),null;try{const r=Bm(n);return r?JSON.parse(r):(Fo("Failed to decode base64 JWT payload"),null)}catch(r){return Fo("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Qh(t){const e=rc(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ni(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Qn&&f0(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function f0({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ei(this.lastLoginAt),this.creationTime=Ei(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(t){var e;const n=t.auth,s=await t.getIdToken(),r=await Ni(t,aa(n,{idToken:s}));me(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ig(i.providerUserInfo):[],l=g0(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),d=u?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new hu(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function m0(t){const e=ut(t);await la(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function g0(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function ig(t){return t.map(e=>{var{providerId:n}=e,s=tc(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _0(t,e){const n=await sg(t,{},async()=>{const s=Wi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await rg(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ng.fetch()(o,{method:"POST",headers:l,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function y0(t,e){return Jn(t,"POST","/v2/accounts:revokeToken",Yn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=Qh(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await _0(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new yr;return s&&(me(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(me(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(me(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yr,this.toJSON())}_performRefresh(){return Un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class on{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=tc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new p0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new hu(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ni(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return h0(this,e)}reload(){return m0(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new on(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await la(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xt(this.auth.app))return Promise.reject($n(this.auth));const e=await this.getIdToken();return await Ni(this,d0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,o,l,u,c,d;const p=(s=n.displayName)!==null&&s!==void 0?s:void 0,g=(r=n.email)!==null&&r!==void 0?r:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(l=n.tenantId)!==null&&l!==void 0?l:void 0,C=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,P=(c=n.createdAt)!==null&&c!==void 0?c:void 0,T=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:V,emailVerified:M,isAnonymous:oe,providerData:de,stsTokenManager:R}=n;me(V&&R,e,"internal-error");const v=yr.fromJSON(this.name,R);me(typeof V=="string",e,"internal-error"),rs(p,e.name),rs(g,e.name),me(typeof M=="boolean",e,"internal-error"),me(typeof oe=="boolean",e,"internal-error"),rs(_,e.name),rs(b,e.name),rs(E,e.name),rs(C,e.name),rs(P,e.name),rs(T,e.name);const w=new on({uid:V,auth:e,email:g,emailVerified:M,displayName:p,isAnonymous:oe,photoURL:b,phoneNumber:_,tenantId:E,stsTokenManager:v,createdAt:P,lastLoginAt:T});return de&&Array.isArray(de)&&(w.providerData=de.map(k=>Object.assign({},k))),C&&(w._redirectEventId=C),w}static async _fromIdTokenResponse(e,n,s=!1){const r=new yr;r.updateFromServerResponse(n);const i=new on({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await la(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];me(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?ig(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),l=new yr;l.updateFromIdToken(s);const u=new on({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new hu(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Map;function Fn(t){Kn(t instanceof Function,"Expected a class definition");let e=Yh.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Yh.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}og.type="NONE";const Jh=og;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t,e,n){return`firebase:${t}:${e}:${n}`}class vr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=$o(this.userKey,r.apiKey,i),this.fullPersistenceKey=$o("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await aa(this.auth,{idToken:e}).catch(()=>{});return n?on._fromGetAccountInfoResponse(this.auth,n,e):null}return on._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new vr(Fn(Jh),e,s);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||Fn(Jh);const o=$o(s,e.config.apiKey,e.name);let l=null;for(const c of n)try{const d=await c._get(o);if(d){let p;if(typeof d=="string"){const g=await aa(e,{idToken:d}).catch(()=>{});if(!g)break;p=await on._fromGetAccountInfoResponse(e,g,d)}else p=on._fromJSON(e,d);c!==i&&(l=p),i=c;break}}catch{}const u=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new vr(i,e,s):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new vr(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ag(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hg(e))return"Blackberry";if(fg(e))return"Webos";if(lg(e))return"Safari";if((e.includes("chrome/")||ug(e))&&!e.includes("edge/"))return"Chrome";if(dg(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function ag(t=kt()){return/firefox\//i.test(t)}function lg(t=kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ug(t=kt()){return/crios\//i.test(t)}function cg(t=kt()){return/iemobile/i.test(t)}function dg(t=kt()){return/android/i.test(t)}function hg(t=kt()){return/blackberry/i.test(t)}function fg(t=kt()){return/webos/i.test(t)}function ic(t=kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function v0(t=kt()){var e;return ic(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function b0(){return Nw()&&document.documentMode===10}function pg(t=kt()){return ic(t)||dg(t)||fg(t)||hg(t)||/windows phone/i.test(t)||cg(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t,e=[]){let n;switch(t){case"Browser":n=Xh(kt());break;case"Worker":n=`${Xh(kt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w0(t,e={}){return Jn(t,"GET","/v2/passwordPolicy",Yn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=6;class I0{constructor(e){var n,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:T0,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zh(this),this.idTokenSubscription=new Zh(this),this.beforeStateQueue=new E0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await vr.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await aa(this,{idToken:e}),s=await on._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await la(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=s0()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xt(this.app))return Promise.reject($n(this));const n=e?ut(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xt(this.app)?Promise.reject($n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xt(this.app)?Promise.reject($n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await w0(this),n=new I0(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gi("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await y0(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await vr.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,r);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&e0(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ps(t){return ut(t)}class Zh{constructor(e){this.auth=e,this.observer=null,this.addObserver=jw(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R0(t){Ba=t}function gg(t){return Ba.loadJS(t)}function S0(){return Ba.recaptchaEnterpriseScript}function C0(){return Ba.gapiScript}function P0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class k0{constructor(){this.enterprise=new x0}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class x0{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const V0="recaptcha-enterprise",_g="NO_RECAPTCHA";class D0{constructor(e){this.type=V0,this.auth=Ps(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{c0(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new u0(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function r(i,o,l){const u=window.grecaptcha;Wh(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(_g)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new k0().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!n&&Wh(window.grecaptcha))r(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=S0();u.length!==0&&(u+=l),gg(u).then(()=>{r(l,i,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function ef(t,e,n,s=!1,r=!1){const i=new D0(t);let o;if(r)o=_g;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ua(t,e,n,s,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ef(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await ef(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t,e){const n=ec(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Hs(i,e??{}))return r;fn(r,"already-initialized")}return n.initialize({options:e})}function O0(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function M0(t,e,n){const s=Ps(t);me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=yg(e),{host:o,port:l}=L0(e),u=l===null?"":`:${l}`,c={url:`${i}//${o}${u}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),me(Hs(c,s.config.emulator)&&Hs(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,zi(o)?(Km(`${i}//${o}${u}`),zm("Auth",!0)):U0()}function yg(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function L0(t){const e=yg(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:tf(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:tf(o)}}}function tf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function U0(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,n){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function F0(t,e){return Jn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0(t,e){return Yi(t,"POST","/v1/accounts:signInWithPassword",Yn(t,e))}async function B0(t,e){return Jn(t,"POST","/v1/accounts:sendOobCode",Yn(t,e))}async function j0(t,e){return B0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q0(t,e){return Yi(t,"POST","/v1/accounts:signInWithEmailLink",Yn(t,e))}async function H0(t,e){return Yi(t,"POST","/v1/accounts:signInWithEmailLink",Yn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends oc{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Oi(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Oi(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ua(e,n,"signInWithPassword",$0);case"emailLink":return q0(e,{email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ua(e,s,"signUpPassword",F0);case"emailLink":return H0(e,{idToken:n,email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function br(t,e){return Yi(t,"POST","/v1/accounts:signInWithIdp",Yn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="http://localhost";class zs extends oc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=tc(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new zs(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return br(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,br(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,br(e,n)}buildRequest(){const e={requestUri:K0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function G0(t){const e=oi(ai(t)).link,n=e?oi(ai(e)).deep_link_id:null,s=oi(ai(t)).deep_link_id;return(s?oi(ai(s)).link:null)||s||n||e||t}class ac{constructor(e){var n,s,r,i,o,l;const u=oi(ai(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(s=u.oobCode)!==null&&s!==void 0?s:null,p=z0((r=u.mode)!==null&&r!==void 0?r:null);me(c&&d&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=d,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=G0(e);try{return new ac(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.providerId=Lr.PROVIDER_ID}static credential(e,n){return Oi._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=ac.parseLink(n);return me(s,"argument-error"),Oi._fromEmailAndCode(e,s.code,s.tenantId)}}Lr.PROVIDER_ID="password";Lr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends vg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Ji{constructor(){super("facebook.com")}static credential(e){return zs._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Ji{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zs._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return us.credential(n,s)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Ji{constructor(){super("github.com")}static credential(e){return zs._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Ji{constructor(){super("twitter.com")}static credential(e,n){return zs._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ds.credential(n,s)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W0(t,e){return Yi(t,"POST","/v1/accounts:signUp",Yn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await on._fromIdTokenResponse(e,s,r),o=nf(s);return new Gs({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=nf(s);return new Gs({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function nf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends Qn{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,ca.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new ca(e,n,s,r)}}function bg(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ca._fromErrorAndOperation(t,i,e,s):i})}async function Q0(t,e,n=!1){const s=await Ni(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Gs._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y0(t,e,n=!1){const{auth:s}=t;if(Xt(s.app))return Promise.reject($n(s));const r="reauthenticate";try{const i=await Ni(t,bg(s,r,e,t),n);me(i.idToken,s,"internal-error");const o=rc(i.idToken);me(o,s,"internal-error");const{sub:l}=o;return me(t.uid===l,s,"user-mismatch"),Gs._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&fn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eg(t,e,n=!1){if(Xt(t.app))return Promise.reject($n(t));const s="signIn",r=await bg(t,s,e),i=await Gs._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function J0(t,e){return Eg(Ps(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wg(t){const e=Ps(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lc(t,e,n){const s=Ps(t);await ua(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",j0)}async function X0(t,e,n){if(Xt(t.app))return Promise.reject($n(t));const s=Ps(t),o=await ua(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",W0).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&wg(t),u}),l=await Gs._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function Z0(t,e,n){return Xt(t.app)?Promise.reject($n(t)):J0(ut(t),Lr.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&wg(t),s})}function eI(t,e,n,s){return ut(t).onIdTokenChanged(e,n,s)}function tI(t,e,n){return ut(t).beforeAuthStateChanged(e,n)}function uc(t,e,n,s){return ut(t).onAuthStateChanged(e,n,s)}function nI(t){return ut(t).signOut()}const da="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(da,"1"),this.storage.removeItem(da),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=1e3,rI=10;class Ig extends Tg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);b0()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,rI):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},sI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ig.type="LOCAL";const iI=Ig;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends Tg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ag.type="SESSION";const Rg=Ag;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new ja(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async c=>c(n.origin,i)),u=await oI(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ja.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const c=cc("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(d),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function lI(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function uI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dI(){return Sg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="firebaseLocalStorageDb",hI=1,ha="firebaseLocalStorage",Pg="fbase_key";class Xi{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qa(t,e){return t.transaction([ha],e?"readwrite":"readonly").objectStore(ha)}function fI(){const t=indexedDB.deleteDatabase(Cg);return new Xi(t).toPromise()}function fu(){const t=indexedDB.open(Cg,hI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ha,{keyPath:Pg})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ha)?e(s):(s.close(),await fI(),e(await fu()))})})}async function sf(t,e,n){const s=qa(t,!0).put({[Pg]:e,value:n});return new Xi(s).toPromise()}async function pI(t,e){const n=qa(t,!1).get(e),s=await new Xi(n).toPromise();return s===void 0?null:s.value}function rf(t,e){const n=qa(t,!0).delete(e);return new Xi(n).toPromise()}const mI=800,gI=3;class kg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>gI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ja._getInstance(dI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await uI(),!this.activeServiceWorker)return;this.sender=new aI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fu();return await sf(e,da,"1"),await rf(e,da),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>sf(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>pI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rf(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=qa(r,!1).getAll();return new Xi(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kg.type="LOCAL";const _I=kg;new Qi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t,e){return e?Fn(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends oc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return br(e,this._buildIdpRequest())}_linkToIdToken(e,n){return br(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return br(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vI(t){return Eg(t.auth,new dc(t),t.bypassAuthState)}function bI(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),Y0(n,new dc(t),t.bypassAuthState)}async function EI(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),Q0(n,new dc(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vI;case"linkViaPopup":case"linkViaRedirect":return EI;case"reauthViaPopup":case"reauthViaRedirect":return bI;default:fn(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new Qi(2e3,1e4);class hr extends xg{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,hr.currentPopupAction&&hr.currentPopupAction.cancel(),hr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=cc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wI.get())};e()}}hr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="pendingRedirect",Bo=new Map;class II extends xg{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Bo.get(this.auth._key());if(!e){try{const s=await AI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Bo.set(this.auth._key(),e)}return this.bypassAuthState||Bo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AI(t,e){const n=CI(e),s=SI(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function RI(t,e){Bo.set(t._key(),e)}function SI(t){return Fn(t._redirectPersistence)}function CI(t){return $o(TI,t.config.apiKey,t.name)}async function PI(t,e,n=!1){if(Xt(t.app))return Promise.reject($n(t));const s=Ps(t),r=yI(s,e),o=await new II(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=10*60*1e3;class xI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Vg(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Tn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kI&&this.cachedEventUids.clear(),this.cachedEventUids.has(of(e))}saveEventToCache(e){this.cachedEventUids.add(of(e)),this.lastProcessedEventTime=Date.now()}}function of(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Vg({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vg(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(t,e={}){return Jn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OI=/^https?/;async function MI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DI(t);for(const n of e)try{if(LI(n))return}catch{}fn(t,"unauthorized-domain")}function LI(t){const e=du(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!OI.test(n))return!1;if(NI.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=new Qi(3e4,6e4);function af(){const t=In().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FI(t){return new Promise((e,n)=>{var s,r,i;function o(){af(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{af(),n(Tn(t,"network-request-failed"))},timeout:UI.get()})}if(!((r=(s=In().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=In().gapi)===null||i===void 0)&&i.load)o();else{const l=P0("iframefcb");return In()[l]=()=>{gapi.load?o():n(Tn(t,"network-request-failed"))},gg(`${C0()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw jo=null,e})}let jo=null;function $I(t){return jo=jo||FI(t),jo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=new Qi(5e3,15e3),jI="__/auth/iframe",qI="emulator/auth/iframe",HI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zI(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?sc(e,qI):`https://${t.config.authDomain}/${jI}`,s={apiKey:e.apiKey,appName:t.name,v:Mr},r=KI.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Wi(s).slice(1)}`}async function GI(t){const e=await $I(t),n=In().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:zI(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HI,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Tn(t,"network-request-failed"),l=In().setTimeout(()=>{i(o)},BI.get());function u(){In().clearTimeout(l),r(s)}s.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QI=500,YI=600,JI="_blank",XI="http://localhost";class lf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZI(t,e,n,s=QI,r=YI){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const u=Object.assign(Object.assign({},WI),{width:s.toString(),height:r.toString(),top:i,left:o}),c=kt().toLowerCase();n&&(l=ug(c)?JI:n),ag(c)&&(e=e||XI,u.scrollbars="yes");const d=Object.entries(u).reduce((g,[_,b])=>`${g}${_}=${b},`,"");if(v0(c)&&l!=="_self")return eA(e||"",l),new lf(null);const p=window.open(e||"",l,d);me(p,t,"popup-blocked");try{p.focus()}catch{}return new lf(p)}function eA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="__/auth/handler",nA="emulator/auth/handler",sA=encodeURIComponent("fac");async function uf(t,e,n,s,r,i){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Mr,eventId:r};if(e instanceof vg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Bw(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof Ji){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),c=u?`#${sA}=${encodeURIComponent(u)}`:"";return`${rA(t)}?${Wi(l).slice(1)}${c}`}function rA({config:t}){return t.emulator?sc(t,nA):`https://${t.authDomain}/${tA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="webStorageSupport";class iA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rg,this._completeRedirectFn=PI,this._overrideRedirectResult=RI}async _openPopup(e,n,s,r){var i;Kn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await uf(e,n,s,du(),r);return ZI(e,o,cc())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await uf(e,n,s,du(),r);return lI(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Kn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await GI(e),s=new xI(e);return n.register("authEvent",r=>(me(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jl,{type:jl},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[jl];o!==void 0&&n(!!o),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pg()||lg()||ic()}}const oA=iA;var cf="@firebase/auth",df="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uA(t){Sr(new Ks("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mg(t)},c=new A0(s,r,i,u);return O0(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Sr(new Ks("auth-internal",e=>{const n=Ps(e.getProvider("auth").getImmediate());return(s=>new aA(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_s(cf,df,lA(t)),_s(cf,df,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=5*60,dA=Hm("authIdTokenMaxAge")||cA;let hf=null;const hA=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>dA)return;const r=n==null?void 0:n.token;hf!==r&&(hf=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Zi(t=Ym()){const e=ec(t,"auth");if(e.isInitialized())return e.getImmediate();const n=N0(t,{popupRedirectResolver:oA,persistence:[_I,iI,Rg]}),s=Hm("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=hA(i.toString());tI(n,o,()=>o(n.currentUser)),eI(n,l=>o(l))}}const r=jm("auth");return r&&M0(n,`http://${r}`),n}function fA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}R0({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Tn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",fA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uA("Browser");var ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,Dg;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,v){function w(){}w.prototype=v.prototype,R.D=v.prototype,R.prototype=new w,R.prototype.constructor=R,R.C=function(k,x,D){for(var A=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)A[ct-2]=arguments[ct];return v.prototype[x].apply(k,A)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,v,w){w||(w=0);var k=Array(16);if(typeof v=="string")for(var x=0;16>x;++x)k[x]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(x=0;16>x;++x)k[x]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=R.g[0],w=R.g[1],x=R.g[2];var D=R.g[3],A=v+(D^w&(x^D))+k[0]+3614090360&4294967295;v=w+(A<<7&4294967295|A>>>25),A=D+(x^v&(w^x))+k[1]+3905402710&4294967295,D=v+(A<<12&4294967295|A>>>20),A=x+(w^D&(v^w))+k[2]+606105819&4294967295,x=D+(A<<17&4294967295|A>>>15),A=w+(v^x&(D^v))+k[3]+3250441966&4294967295,w=x+(A<<22&4294967295|A>>>10),A=v+(D^w&(x^D))+k[4]+4118548399&4294967295,v=w+(A<<7&4294967295|A>>>25),A=D+(x^v&(w^x))+k[5]+1200080426&4294967295,D=v+(A<<12&4294967295|A>>>20),A=x+(w^D&(v^w))+k[6]+2821735955&4294967295,x=D+(A<<17&4294967295|A>>>15),A=w+(v^x&(D^v))+k[7]+4249261313&4294967295,w=x+(A<<22&4294967295|A>>>10),A=v+(D^w&(x^D))+k[8]+1770035416&4294967295,v=w+(A<<7&4294967295|A>>>25),A=D+(x^v&(w^x))+k[9]+2336552879&4294967295,D=v+(A<<12&4294967295|A>>>20),A=x+(w^D&(v^w))+k[10]+4294925233&4294967295,x=D+(A<<17&4294967295|A>>>15),A=w+(v^x&(D^v))+k[11]+2304563134&4294967295,w=x+(A<<22&4294967295|A>>>10),A=v+(D^w&(x^D))+k[12]+1804603682&4294967295,v=w+(A<<7&4294967295|A>>>25),A=D+(x^v&(w^x))+k[13]+4254626195&4294967295,D=v+(A<<12&4294967295|A>>>20),A=x+(w^D&(v^w))+k[14]+2792965006&4294967295,x=D+(A<<17&4294967295|A>>>15),A=w+(v^x&(D^v))+k[15]+1236535329&4294967295,w=x+(A<<22&4294967295|A>>>10),A=v+(x^D&(w^x))+k[1]+4129170786&4294967295,v=w+(A<<5&4294967295|A>>>27),A=D+(w^x&(v^w))+k[6]+3225465664&4294967295,D=v+(A<<9&4294967295|A>>>23),A=x+(v^w&(D^v))+k[11]+643717713&4294967295,x=D+(A<<14&4294967295|A>>>18),A=w+(D^v&(x^D))+k[0]+3921069994&4294967295,w=x+(A<<20&4294967295|A>>>12),A=v+(x^D&(w^x))+k[5]+3593408605&4294967295,v=w+(A<<5&4294967295|A>>>27),A=D+(w^x&(v^w))+k[10]+38016083&4294967295,D=v+(A<<9&4294967295|A>>>23),A=x+(v^w&(D^v))+k[15]+3634488961&4294967295,x=D+(A<<14&4294967295|A>>>18),A=w+(D^v&(x^D))+k[4]+3889429448&4294967295,w=x+(A<<20&4294967295|A>>>12),A=v+(x^D&(w^x))+k[9]+568446438&4294967295,v=w+(A<<5&4294967295|A>>>27),A=D+(w^x&(v^w))+k[14]+3275163606&4294967295,D=v+(A<<9&4294967295|A>>>23),A=x+(v^w&(D^v))+k[3]+4107603335&4294967295,x=D+(A<<14&4294967295|A>>>18),A=w+(D^v&(x^D))+k[8]+1163531501&4294967295,w=x+(A<<20&4294967295|A>>>12),A=v+(x^D&(w^x))+k[13]+2850285829&4294967295,v=w+(A<<5&4294967295|A>>>27),A=D+(w^x&(v^w))+k[2]+4243563512&4294967295,D=v+(A<<9&4294967295|A>>>23),A=x+(v^w&(D^v))+k[7]+1735328473&4294967295,x=D+(A<<14&4294967295|A>>>18),A=w+(D^v&(x^D))+k[12]+2368359562&4294967295,w=x+(A<<20&4294967295|A>>>12),A=v+(w^x^D)+k[5]+4294588738&4294967295,v=w+(A<<4&4294967295|A>>>28),A=D+(v^w^x)+k[8]+2272392833&4294967295,D=v+(A<<11&4294967295|A>>>21),A=x+(D^v^w)+k[11]+1839030562&4294967295,x=D+(A<<16&4294967295|A>>>16),A=w+(x^D^v)+k[14]+4259657740&4294967295,w=x+(A<<23&4294967295|A>>>9),A=v+(w^x^D)+k[1]+2763975236&4294967295,v=w+(A<<4&4294967295|A>>>28),A=D+(v^w^x)+k[4]+1272893353&4294967295,D=v+(A<<11&4294967295|A>>>21),A=x+(D^v^w)+k[7]+4139469664&4294967295,x=D+(A<<16&4294967295|A>>>16),A=w+(x^D^v)+k[10]+3200236656&4294967295,w=x+(A<<23&4294967295|A>>>9),A=v+(w^x^D)+k[13]+681279174&4294967295,v=w+(A<<4&4294967295|A>>>28),A=D+(v^w^x)+k[0]+3936430074&4294967295,D=v+(A<<11&4294967295|A>>>21),A=x+(D^v^w)+k[3]+3572445317&4294967295,x=D+(A<<16&4294967295|A>>>16),A=w+(x^D^v)+k[6]+76029189&4294967295,w=x+(A<<23&4294967295|A>>>9),A=v+(w^x^D)+k[9]+3654602809&4294967295,v=w+(A<<4&4294967295|A>>>28),A=D+(v^w^x)+k[12]+3873151461&4294967295,D=v+(A<<11&4294967295|A>>>21),A=x+(D^v^w)+k[15]+530742520&4294967295,x=D+(A<<16&4294967295|A>>>16),A=w+(x^D^v)+k[2]+3299628645&4294967295,w=x+(A<<23&4294967295|A>>>9),A=v+(x^(w|~D))+k[0]+4096336452&4294967295,v=w+(A<<6&4294967295|A>>>26),A=D+(w^(v|~x))+k[7]+1126891415&4294967295,D=v+(A<<10&4294967295|A>>>22),A=x+(v^(D|~w))+k[14]+2878612391&4294967295,x=D+(A<<15&4294967295|A>>>17),A=w+(D^(x|~v))+k[5]+4237533241&4294967295,w=x+(A<<21&4294967295|A>>>11),A=v+(x^(w|~D))+k[12]+1700485571&4294967295,v=w+(A<<6&4294967295|A>>>26),A=D+(w^(v|~x))+k[3]+2399980690&4294967295,D=v+(A<<10&4294967295|A>>>22),A=x+(v^(D|~w))+k[10]+4293915773&4294967295,x=D+(A<<15&4294967295|A>>>17),A=w+(D^(x|~v))+k[1]+2240044497&4294967295,w=x+(A<<21&4294967295|A>>>11),A=v+(x^(w|~D))+k[8]+1873313359&4294967295,v=w+(A<<6&4294967295|A>>>26),A=D+(w^(v|~x))+k[15]+4264355552&4294967295,D=v+(A<<10&4294967295|A>>>22),A=x+(v^(D|~w))+k[6]+2734768916&4294967295,x=D+(A<<15&4294967295|A>>>17),A=w+(D^(x|~v))+k[13]+1309151649&4294967295,w=x+(A<<21&4294967295|A>>>11),A=v+(x^(w|~D))+k[4]+4149444226&4294967295,v=w+(A<<6&4294967295|A>>>26),A=D+(w^(v|~x))+k[11]+3174756917&4294967295,D=v+(A<<10&4294967295|A>>>22),A=x+(v^(D|~w))+k[2]+718787259&4294967295,x=D+(A<<15&4294967295|A>>>17),A=w+(D^(x|~v))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+v&4294967295,R.g[1]=R.g[1]+(x+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+x&4294967295,R.g[3]=R.g[3]+D&4294967295}s.prototype.u=function(R,v){v===void 0&&(v=R.length);for(var w=v-this.blockSize,k=this.B,x=this.h,D=0;D<v;){if(x==0)for(;D<=w;)r(this,R,D),D+=this.blockSize;if(typeof R=="string"){for(;D<v;)if(k[x++]=R.charCodeAt(D++),x==this.blockSize){r(this,k),x=0;break}}else for(;D<v;)if(k[x++]=R[D++],x==this.blockSize){r(this,k),x=0;break}}this.h=x,this.o+=v},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var v=1;v<R.length-8;++v)R[v]=0;var w=8*this.o;for(v=R.length-8;v<R.length;++v)R[v]=w&255,w/=256;for(this.u(R),R=Array(16),v=w=0;4>v;++v)for(var k=0;32>k;k+=8)R[w++]=this.g[v]>>>k&255;return R};function i(R,v){var w=l;return Object.prototype.hasOwnProperty.call(w,R)?w[R]:w[R]=v(R)}function o(R,v){this.h=v;for(var w=[],k=!0,x=R.length-1;0<=x;x--){var D=R[x]|0;k&&D==v||(w[x]=D,k=!1)}this.g=w}var l={};function u(R){return-128<=R&&128>R?i(R,function(v){return new o([v|0],0>v?-1:0)}):new o([R|0],0>R?-1:0)}function c(R){if(isNaN(R)||!isFinite(R))return p;if(0>R)return C(c(-R));for(var v=[],w=1,k=0;R>=w;k++)v[k]=R/w|0,w*=4294967296;return new o(v,0)}function d(R,v){if(R.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(R.charAt(0)=="-")return C(d(R.substring(1),v));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(v,8)),k=p,x=0;x<R.length;x+=8){var D=Math.min(8,R.length-x),A=parseInt(R.substring(x,x+D),v);8>D?(D=c(Math.pow(v,D)),k=k.j(D).add(c(A))):(k=k.j(w),k=k.add(c(A)))}return k}var p=u(0),g=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(E(this))return-C(this).m();for(var R=0,v=1,w=0;w<this.g.length;w++){var k=this.i(w);R+=(0<=k?k:4294967296+k)*v,v*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(b(this))return"0";if(E(this))return"-"+C(this).toString(R);for(var v=c(Math.pow(R,6)),w=this,k="";;){var x=M(w,v).g;w=P(w,x.j(v));var D=((0<w.g.length?w.g[0]:w.h)>>>0).toString(R);if(w=x,b(w))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function b(R){if(R.h!=0)return!1;for(var v=0;v<R.g.length;v++)if(R.g[v]!=0)return!1;return!0}function E(R){return R.h==-1}t.l=function(R){return R=P(this,R),E(R)?-1:b(R)?0:1};function C(R){for(var v=R.g.length,w=[],k=0;k<v;k++)w[k]=~R.g[k];return new o(w,~R.h).add(g)}t.abs=function(){return E(this)?C(this):this},t.add=function(R){for(var v=Math.max(this.g.length,R.g.length),w=[],k=0,x=0;x<=v;x++){var D=k+(this.i(x)&65535)+(R.i(x)&65535),A=(D>>>16)+(this.i(x)>>>16)+(R.i(x)>>>16);k=A>>>16,D&=65535,A&=65535,w[x]=A<<16|D}return new o(w,w[w.length-1]&-2147483648?-1:0)};function P(R,v){return R.add(C(v))}t.j=function(R){if(b(this)||b(R))return p;if(E(this))return E(R)?C(this).j(C(R)):C(C(this).j(R));if(E(R))return C(this.j(C(R)));if(0>this.l(_)&&0>R.l(_))return c(this.m()*R.m());for(var v=this.g.length+R.g.length,w=[],k=0;k<2*v;k++)w[k]=0;for(k=0;k<this.g.length;k++)for(var x=0;x<R.g.length;x++){var D=this.i(k)>>>16,A=this.i(k)&65535,ct=R.i(x)>>>16,Mt=R.i(x)&65535;w[2*k+2*x]+=A*Mt,T(w,2*k+2*x),w[2*k+2*x+1]+=D*Mt,T(w,2*k+2*x+1),w[2*k+2*x+1]+=A*ct,T(w,2*k+2*x+1),w[2*k+2*x+2]+=D*ct,T(w,2*k+2*x+2)}for(k=0;k<v;k++)w[k]=w[2*k+1]<<16|w[2*k];for(k=v;k<2*v;k++)w[k]=0;return new o(w,0)};function T(R,v){for(;(R[v]&65535)!=R[v];)R[v+1]+=R[v]>>>16,R[v]&=65535,v++}function V(R,v){this.g=R,this.h=v}function M(R,v){if(b(v))throw Error("division by zero");if(b(R))return new V(p,p);if(E(R))return v=M(C(R),v),new V(C(v.g),C(v.h));if(E(v))return v=M(R,C(v)),new V(C(v.g),v.h);if(30<R.g.length){if(E(R)||E(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,k=v;0>=k.l(R);)w=oe(w),k=oe(k);var x=de(w,1),D=de(k,1);for(k=de(k,2),w=de(w,2);!b(k);){var A=D.add(k);0>=A.l(R)&&(x=x.add(w),D=A),k=de(k,1),w=de(w,1)}return v=P(R,x.j(v)),new V(x,v)}for(x=p;0<=R.l(v);){for(w=Math.max(1,Math.floor(R.m()/v.m())),k=Math.ceil(Math.log(w)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=c(w),A=D.j(v);E(A)||0<A.l(R);)w-=k,D=c(w),A=D.j(v);b(D)&&(D=g),x=x.add(D),R=P(R,A)}return new V(x,R)}t.A=function(R){return M(this,R).h},t.and=function(R){for(var v=Math.max(this.g.length,R.g.length),w=[],k=0;k<v;k++)w[k]=this.i(k)&R.i(k);return new o(w,this.h&R.h)},t.or=function(R){for(var v=Math.max(this.g.length,R.g.length),w=[],k=0;k<v;k++)w[k]=this.i(k)|R.i(k);return new o(w,this.h|R.h)},t.xor=function(R){for(var v=Math.max(this.g.length,R.g.length),w=[],k=0;k<v;k++)w[k]=this.i(k)^R.i(k);return new o(w,this.h^R.h)};function oe(R){for(var v=R.g.length+1,w=[],k=0;k<v;k++)w[k]=R.i(k)<<1|R.i(k-1)>>>31;return new o(w,R.h)}function de(R,v){var w=v>>5;v%=32;for(var k=R.g.length-w,x=[],D=0;D<k;D++)x[D]=0<v?R.i(D+w)>>>v|R.i(D+w+1)<<32-v:R.i(D+w);return new o(x,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Dg=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ys=o}).apply(typeof ff<"u"?ff:typeof self<"u"?self:typeof window<"u"?window:{});var Po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ng,li,Og,qo,pu,Mg,Lg,Ug;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,m){return a==Array.prototype||a==Object.prototype||(a[f]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Po=="object"&&Po];for(var f=0;f<a.length;++f){var m=a[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function r(a,f){if(f)e:{var m=s;a=a.split(".");for(var y=0;y<a.length-1;y++){var O=a[y];if(!(O in m))break e;m=m[O]}a=a[a.length-1],y=m[a],f=f(y),f!=y&&f!=null&&e(m,a,{configurable:!0,writable:!0,value:f})}}function i(a,f){a instanceof String&&(a+="");var m=0,y=!1,O={next:function(){if(!y&&m<a.length){var L=m++;return{value:f(L,a[L]),done:!1}}return y=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}r("Array.prototype.values",function(a){return a||function(){return i(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function c(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function d(a,f,m){return a.call.apply(a.bind,arguments)}function p(a,f,m){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,y),a.apply(f,O)}}return function(){return a.apply(f,arguments)}}function g(a,f,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function _(a,f){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function b(a,f){function m(){}m.prototype=f.prototype,a.aa=f.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(y,O,L){for(var J=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)J[Le-2]=arguments[Le];return f.prototype[O].apply(y,J)}}function E(a){const f=a.length;if(0<f){const m=Array(f);for(let y=0;y<f;y++)m[y]=a[y];return m}return[]}function C(a,f){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(u(y)){const O=a.length||0,L=y.length||0;a.length=O+L;for(let J=0;J<L;J++)a[O+J]=y[J]}else a.push(y)}}class P{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function T(a){return/^[\s\xa0]*$/.test(a)}function V(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function M(a){return M[" "](a),a}M[" "]=function(){};var oe=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function de(a,f,m){for(const y in a)f.call(m,a[y],y,a)}function R(a,f){for(const m in a)f.call(void 0,a[m],m,a)}function v(a){const f={};for(const m in a)f[m]=a[m];return f}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,f){let m,y;for(let O=1;O<arguments.length;O++){y=arguments[O];for(m in y)a[m]=y[m];for(let L=0;L<w.length;L++)m=w[L],Object.prototype.hasOwnProperty.call(y,m)&&(a[m]=y[m])}}function x(a){var f=1;a=a.split(":");const m=[];for(;0<f&&a.length;)m.push(a.shift()),f--;return a.length&&m.push(a.join(":")),m}function D(a){l.setTimeout(()=>{throw a},0)}function A(){var a=xt;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class ct{constructor(){this.h=this.g=null}add(f,m){const y=Mt.get();y.set(f,m),this.h?this.h.next=y:this.g=y,this.h=y}}var Mt=new P(()=>new We,a=>a.reset());class We{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,ve=!1,xt=new ct,sn=()=>{const a=l.Promise.resolve(void 0);ye=()=>{a.then(Wt)}};var Wt=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(m){D(m)}var f=Mt;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}ve=!1};function Ke(){this.s=this.s,this.C=this.C}Ke.prototype.s=!1,Ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ze(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}ze.prototype.h=function(){this.defaultPrevented=!0};var Xn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,f),l.removeEventListener("test",m,f)}catch{}return a}();function _n(a,f){if(ze.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(oe){e:{try{M(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else m=="mouseover"?f=a.fromElement:m=="mouseout"&&(f=a.toElement);this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Lt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&_n.aa.h.call(this)}}b(_n,ze);var Lt={2:"touch",3:"pen",4:"mouse"};_n.prototype.h=function(){_n.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),te=0;function ee(a,f,m,y,O){this.listener=a,this.proxy=null,this.src=f,this.type=m,this.capture=!!y,this.ha=O,this.key=++te,this.da=this.fa=!1}function ie(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ke(a){this.src=a,this.g={},this.h=0}ke.prototype.add=function(a,f,m,y,O){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var J=S(a,f,y,O);return-1<J?(f=a[J],m||(f.fa=!1)):(f=new ee(f,this.src,L,!!y,O),f.fa=m,a.push(f)),f};function I(a,f){var m=f.type;if(m in a.g){var y=a.g[m],O=Array.prototype.indexOf.call(y,f,void 0),L;(L=0<=O)&&Array.prototype.splice.call(y,O,1),L&&(ie(f),a.g[m].length==0&&(delete a.g[m],a.h--))}}function S(a,f,m,y){for(var O=0;O<a.length;++O){var L=a[O];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==y)return O}return-1}var N="closure_lm_"+(1e6*Math.random()|0),F={};function q(a,f,m,y,O){if(Array.isArray(f)){for(var L=0;L<f.length;L++)q(a,f[L],m,y,O);return null}return m=_e(m),a&&a[U]?a.K(f,m,c(y)?!!y.capture:!1,O):$(a,f,m,!1,y,O)}function $(a,f,m,y,O,L){if(!f)throw Error("Invalid event type");var J=c(O)?!!O.capture:!!O,Le=X(a);if(Le||(a[N]=Le=new ke(a)),m=Le.add(f,m,y,J,L),m.proxy)return m;if(y=Z(),m.proxy=y,y.src=a,y.listener=m,a.addEventListener)Xn||(O=J),O===void 0&&(O=!1),a.addEventListener(f.toString(),y,O);else if(a.attachEvent)a.attachEvent(K(f.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Z(){function a(m){return f.call(a.src,a.listener,m)}const f=ue;return a}function Y(a,f,m,y,O){if(Array.isArray(f))for(var L=0;L<f.length;L++)Y(a,f[L],m,y,O);else y=c(y)?!!y.capture:!!y,m=_e(m),a&&a[U]?(a=a.i,f=String(f).toString(),f in a.g&&(L=a.g[f],m=S(L,m,y,O),-1<m&&(ie(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete a.g[f],a.h--)))):a&&(a=X(a))&&(f=a.g[f.toString()],a=-1,f&&(a=S(f,m,y,O)),(m=-1<a?f[a]:null)&&W(m))}function W(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[U])I(f.i,a);else{var m=a.type,y=a.proxy;f.removeEventListener?f.removeEventListener(m,y,a.capture):f.detachEvent?f.detachEvent(K(m),y):f.addListener&&f.removeListener&&f.removeListener(y),(m=X(f))?(I(m,a),m.h==0&&(m.src=null,f[N]=null)):ie(a)}}}function K(a){return a in F?F[a]:F[a]="on"+a}function ue(a,f){if(a.da)a=!0;else{f=new _n(f,this);var m=a.listener,y=a.ha||a.src;a.fa&&W(a),a=m.call(y,f)}return a}function X(a){return a=a[N],a instanceof ke?a:null}var ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function _e(a){return typeof a=="function"?a:(a[ae]||(a[ae]=function(f){return a.handleEvent(f)}),a[ae])}function fe(){Ke.call(this),this.i=new ke(this),this.M=this,this.F=null}b(fe,Ke),fe.prototype[U]=!0,fe.prototype.removeEventListener=function(a,f,m,y){Y(this,a,f,m,y)};function Te(a,f){var m,y=a.F;if(y)for(m=[];y;y=y.F)m.push(y);if(a=a.M,y=f.type||f,typeof f=="string")f=new ze(f,a);else if(f instanceof ze)f.target=f.target||a;else{var O=f;f=new ze(y,a),k(f,O)}if(O=!0,m)for(var L=m.length-1;0<=L;L--){var J=f.g=m[L];O=Ce(J,y,!0,f)&&O}if(J=f.g=a,O=Ce(J,y,!0,f)&&O,O=Ce(J,y,!1,f)&&O,m)for(L=0;L<m.length;L++)J=f.g=m[L],O=Ce(J,y,!1,f)&&O}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var m=a.g[f],y=0;y<m.length;y++)ie(m[y]);delete a.g[f],a.h--}}this.F=null},fe.prototype.K=function(a,f,m,y){return this.i.add(String(a),f,!1,m,y)},fe.prototype.L=function(a,f,m,y){return this.i.add(String(a),f,!0,m,y)};function Ce(a,f,m,y){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,L=0;L<f.length;++L){var J=f[L];if(J&&!J.da&&J.capture==m){var Le=J.listener,ft=J.ha||J.src;J.fa&&I(a.i,J),O=Le.call(ft,y)!==!1&&O}}return O&&!y.defaultPrevented}function vt(a,f,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(a,f||0)}function dt(a){a.g=vt(()=>{a.g=null,a.i&&(a.i=!1,dt(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class Qt extends Ke{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:dt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bt(a){Ke.call(this),this.h=a,this.g={}}b(bt,Ke);var Zn=[];function qr(a){de(a.g,function(f,m){this.g.hasOwnProperty(m)&&W(f)},a),a.g={}}bt.prototype.N=function(){bt.aa.N.call(this),qr(this)},bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=l.JSON.stringify,Yt=l.JSON.parse,ao=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function ul(){}ul.prototype.h=null;function Yc(a){return a.h||(a.h=a.i())}function Jc(){}var Hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cl(){ze.call(this,"d")}b(cl,ze);function dl(){ze.call(this,"c")}b(dl,ze);var Ds={},Xc=null;function lo(){return Xc=Xc||new fe}Ds.La="serverreachability";function Zc(a){ze.call(this,Ds.La,a)}b(Zc,ze);function Kr(a){const f=lo();Te(f,new Zc(f))}Ds.STAT_EVENT="statevent";function ed(a,f){ze.call(this,Ds.STAT_EVENT,a),this.stat=f}b(ed,ze);function Vt(a){const f=lo();Te(f,new ed(f,a))}Ds.Ma="timingevent";function td(a,f){ze.call(this,Ds.Ma,a),this.size=f}b(td,ze);function zr(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},f)}function Gr(){this.g=!0}Gr.prototype.xa=function(){this.g=!1};function Ey(a,f,m,y,O,L){a.info(function(){if(a.g)if(L)for(var J="",Le=L.split("&"),ft=0;ft<Le.length;ft++){var xe=Le[ft].split("=");if(1<xe.length){var Et=xe[0];xe=xe[1];var wt=Et.split("_");J=2<=wt.length&&wt[1]=="type"?J+(Et+"="+xe+"&"):J+(Et+"=redacted&")}}else J=null;else J=L;return"XMLHTTP REQ ("+y+") [attempt "+O+"]: "+f+`
`+m+`
`+J})}function wy(a,f,m,y,O,L,J){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+O+"]: "+f+`
`+m+`
`+L+" "+J})}function tr(a,f,m,y){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+Iy(a,m)+(y?" "+y:"")})}function Ty(a,f){a.info(function(){return"TIMEOUT: "+f})}Gr.prototype.info=function(){};function Iy(a,f){if(!a.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var y=m[a];if(!(2>y.length)){var O=y[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var J=1;J<O.length;J++)O[J]=""}}}}return ht(m)}catch{return f}}var uo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hl;function co(){}b(co,ul),co.prototype.g=function(){return new XMLHttpRequest},co.prototype.i=function(){return{}},hl=new co;function es(a,f,m,y){this.j=a,this.i=f,this.l=m,this.R=y||1,this.U=new bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sd}function sd(){this.i=null,this.g="",this.h=!1}var rd={},fl={};function pl(a,f,m){a.L=1,a.v=mo(kn(f)),a.m=m,a.P=!0,id(a,null)}function id(a,f){a.F=Date.now(),ho(a),a.A=kn(a.v);var m=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),vd(m.i,"t",y),a.C=0,m=a.j.J,a.h=new sd,a.g=Ld(a.j,m?f:null,!a.m),0<a.O&&(a.M=new Qt(g(a.Y,a,a.g),a.O)),f=a.U,m=a.g,y=a.ca;var O="readystatechange";Array.isArray(O)||(O&&(Zn[0]=O.toString()),O=Zn);for(var L=0;L<O.length;L++){var J=q(m,O[L],y||f.handleEvent,!1,f.h||f);if(!J)break;f.g[J.key]=J}f=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),Kr(),Ey(a.i,a.u,a.A,a.l,a.R,a.m)}es.prototype.ca=function(a){a=a.target;const f=this.M;f&&xn(a)==3?f.j():this.Y(a)},es.prototype.Y=function(a){try{if(a==this.g)e:{const wt=xn(this.g);var f=this.g.Ba();const rr=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||Rd(this.g)))){this.J||wt!=4||f==7||(f==8||0>=rr?Kr(3):Kr(2)),ml(this);var m=this.g.Z();this.X=m;t:if(od(this)){var y=Rd(this.g);a="";var O=y.length,L=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ns(this),Wr(this);var J="";break t}this.h.i=new l.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,a+=this.h.i.decode(y[f],{stream:!(L&&f==O-1)});y.length=0,this.h.g+=a,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=m==200,wy(this.i,this.u,this.A,this.l,this.R,wt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,ft=this.g;if((Le=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Le)){var xe=Le;break t}}xe=null}if(m=xe)tr(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gl(this,m);else{this.o=!1,this.s=3,Vt(12),Ns(this),Wr(this);break e}}if(this.P){m=!0;let rn;for(;!this.J&&this.C<J.length;)if(rn=Ay(this,J),rn==fl){wt==4&&(this.s=4,Vt(14),m=!1),tr(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==rd){this.s=4,Vt(15),tr(this.i,this.l,J,"[Invalid Chunk]"),m=!1;break}else tr(this.i,this.l,rn,null),gl(this,rn);if(od(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||J.length!=0||this.h.h||(this.s=1,Vt(16),m=!1),this.o=this.o&&m,!m)tr(this.i,this.l,J,"[Invalid Chunked Response]"),Ns(this),Wr(this);else if(0<J.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),wl(Et),Et.M=!0,Vt(11))}}else tr(this.i,this.l,J,null),gl(this,J);wt==4&&Ns(this),this.o&&!this.J&&(wt==4?Dd(this.j,this):(this.o=!1,ho(this)))}else jy(this.g),m==400&&0<J.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),Ns(this),Wr(this)}}}catch{}finally{}};function od(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Ay(a,f){var m=a.C,y=f.indexOf(`
`,m);return y==-1?fl:(m=Number(f.substring(m,y)),isNaN(m)?rd:(y+=1,y+m>f.length?fl:(f=f.slice(y,y+m),a.C=y+m,f)))}es.prototype.cancel=function(){this.J=!0,Ns(this)};function ho(a){a.S=Date.now()+a.I,ad(a,a.I)}function ad(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=zr(g(a.ba,a),f)}function ml(a){a.B&&(l.clearTimeout(a.B),a.B=null)}es.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Ty(this.i,this.A),this.L!=2&&(Kr(),Vt(17)),Ns(this),this.s=2,Wr(this)):ad(this,this.S-a)};function Wr(a){a.j.G==0||a.J||Dd(a.j,a)}function Ns(a){ml(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,qr(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function gl(a,f){try{var m=a.j;if(m.G!=0&&(m.g==a||_l(m.h,a))){if(!a.K&&_l(m.h,a)&&m.G==3){try{var y=m.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var O=y;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)Eo(m),vo(m);else break e;El(m),Vt(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=zr(g(m.Za,m),6e3));if(1>=cd(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ms(m,11)}else if((a.K||m.g==a)&&Eo(m),!T(f))for(O=m.Da.g.parse(f),f=0;f<O.length;f++){let xe=O[f];if(m.T=xe[0],xe=xe[1],m.G==2)if(xe[0]=="c"){m.K=xe[1],m.ia=xe[2];const Et=xe[3];Et!=null&&(m.la=Et,m.j.info("VER="+m.la));const wt=xe[4];wt!=null&&(m.Aa=wt,m.j.info("SVER="+m.Aa));const rr=xe[5];rr!=null&&typeof rr=="number"&&0<rr&&(y=1.5*rr,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const rn=a.g;if(rn){const To=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(To){var L=y.h;L.g||To.indexOf("spdy")==-1&&To.indexOf("quic")==-1&&To.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(yl(L,L.h),L.h=null))}if(y.D){const Tl=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Tl&&(y.ya=Tl,je(y.I,y.D,Tl))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var J=a;if(y.qa=Md(y,y.J?y.ia:null,y.W),J.K){dd(y.h,J);var Le=J,ft=y.L;ft&&(Le.I=ft),Le.B&&(ml(Le),ho(Le)),y.g=J}else xd(y);0<m.i.length&&bo(m)}else xe[0]!="stop"&&xe[0]!="close"||Ms(m,7);else m.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Ms(m,7):bl(m):xe[0]!="noop"&&m.l&&m.l.ta(xe),m.v=0)}}Kr(4)}catch{}}var Ry=class{constructor(a,f){this.g=a,this.map=f}};function ld(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ud(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function cd(a){return a.h?1:a.g?a.g.size:0}function _l(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function yl(a,f){a.g?a.g.add(f):a.h=f}function dd(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}ld.prototype.cancel=function(){if(this.i=hd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function hd(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const m of a.g.values())f=f.concat(m.D);return f}return E(a.i)}function Sy(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var f=[],m=a.length,y=0;y<m;y++)f.push(a[y]);return f}f=[],m=0;for(y in a)f[m++]=a[y];return f}function Cy(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var f=[];a=a.length;for(var m=0;m<a;m++)f.push(m);return f}f=[],m=0;for(const y in a)f[m++]=y;return f}}}function fd(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var m=Cy(a),y=Sy(a),O=y.length,L=0;L<O;L++)f.call(void 0,y[L],m&&m[L],a)}var pd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Py(a,f){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var y=a[m].indexOf("="),O=null;if(0<=y){var L=a[m].substring(0,y);O=a[m].substring(y+1)}else L=a[m];f(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Os(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Os){this.h=a.h,fo(this,a.j),this.o=a.o,this.g=a.g,po(this,a.s),this.l=a.l;var f=a.i,m=new Jr;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),md(this,m),this.m=a.m}else a&&(f=String(a).match(pd))?(this.h=!1,fo(this,f[1]||"",!0),this.o=Qr(f[2]||""),this.g=Qr(f[3]||"",!0),po(this,f[4]),this.l=Qr(f[5]||"",!0),md(this,f[6]||"",!0),this.m=Qr(f[7]||"")):(this.h=!1,this.i=new Jr(null,this.h))}Os.prototype.toString=function(){var a=[],f=this.j;f&&a.push(Yr(f,gd,!0),":");var m=this.g;return(m||f=="file")&&(a.push("//"),(f=this.o)&&a.push(Yr(f,gd,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(Yr(m,m.charAt(0)=="/"?Vy:xy,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",Yr(m,Ny)),a.join("")};function kn(a){return new Os(a)}function fo(a,f,m){a.j=m?Qr(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function po(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function md(a,f,m){f instanceof Jr?(a.i=f,Oy(a.i,a.h)):(m||(f=Yr(f,Dy)),a.i=new Jr(f,a.h))}function je(a,f,m){a.i.set(f,m)}function mo(a){return je(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Qr(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Yr(a,f,m){return typeof a=="string"?(a=encodeURI(a).replace(f,ky),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ky(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var gd=/[#\/\?@]/g,xy=/[#\?:]/g,Vy=/[#\?]/g,Dy=/[#\?@]/g,Ny=/#/g;function Jr(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function ts(a){a.g||(a.g=new Map,a.h=0,a.i&&Py(a.i,function(f,m){a.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Jr.prototype,t.add=function(a,f){ts(this),this.i=null,a=nr(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(f),this.h+=1,this};function _d(a,f){ts(a),f=nr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function yd(a,f){return ts(a),f=nr(a,f),a.g.has(f)}t.forEach=function(a,f){ts(this),this.g.forEach(function(m,y){m.forEach(function(O){a.call(f,O,y,this)},this)},this)},t.na=function(){ts(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let y=0;y<f.length;y++){const O=a[y];for(let L=0;L<O.length;L++)m.push(f[y])}return m},t.V=function(a){ts(this);let f=[];if(typeof a=="string")yd(this,a)&&(f=f.concat(this.g.get(nr(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)f=f.concat(a[m])}return f},t.set=function(a,f){return ts(this),this.i=null,a=nr(this,a),yd(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function vd(a,f,m){_d(a,f),0<m.length&&(a.i=null,a.g.set(nr(a,f),E(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var y=f[m];const L=encodeURIComponent(String(y)),J=this.V(y);for(y=0;y<J.length;y++){var O=L;J[y]!==""&&(O+="="+encodeURIComponent(String(J[y]))),a.push(O)}}return this.i=a.join("&")};function nr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function Oy(a,f){f&&!a.j&&(ts(a),a.i=null,a.g.forEach(function(m,y){var O=y.toLowerCase();y!=O&&(_d(this,y),vd(this,O,m))},a)),a.j=f}function My(a,f){const m=new Gr;if(l.Image){const y=new Image;y.onload=_(ns,m,"TestLoadImage: loaded",!0,f,y),y.onerror=_(ns,m,"TestLoadImage: error",!1,f,y),y.onabort=_(ns,m,"TestLoadImage: abort",!1,f,y),y.ontimeout=_(ns,m,"TestLoadImage: timeout",!1,f,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else f(!1)}function Ly(a,f){const m=new Gr,y=new AbortController,O=setTimeout(()=>{y.abort(),ns(m,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:y.signal}).then(L=>{clearTimeout(O),L.ok?ns(m,"TestPingServer: ok",!0,f):ns(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),ns(m,"TestPingServer: error",!1,f)})}function ns(a,f,m,y,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),y(m)}catch{}}function Uy(){this.g=new ao}function Fy(a,f,m){const y=m||"";try{fd(a,function(O,L){let J=O;c(O)&&(J=ht(O)),f.push(y+L+"="+encodeURIComponent(J))})}catch(O){throw f.push(y+"type="+encodeURIComponent("_badmap")),O}}function go(a){this.l=a.Ub||null,this.j=a.eb||!1}b(go,ul),go.prototype.g=function(){return new _o(this.l,this.j)},go.prototype.i=function(a){return function(){return a}}({});function _o(a,f){fe.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(_o,fe),t=_o.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,Zr(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bd(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function bd(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Xr(this):Zr(this),this.readyState==3&&bd(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Xr(this))},t.Qa=function(a){this.g&&(this.response=a,Xr(this))},t.ga=function(){this.g&&Xr(this)};function Xr(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Zr(a)}t.setRequestHeader=function(a,f){this.u.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=f.next();return a.join(`\r
`)};function Zr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ed(a){let f="";return de(a,function(m,y){f+=y,f+=":",f+=m,f+=`\r
`}),f}function vl(a,f,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=Ed(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):je(a,f,m))}function Qe(a){fe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Qe,fe);var $y=/^https?$/i,By=["POST","PUT"];t=Qe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,f,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hl.g(),this.v=this.o?Yc(this.o):Yc(hl),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(L){wd(this,L);return}if(a=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var O in y)m.set(O,y[O]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const L of y.keys())m.set(L,y.get(L));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),O=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(By,f,void 0))||y||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,J]of m)this.g.setRequestHeader(L,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ad(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){wd(this,L)}};function wd(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,Td(a),yo(a)}function Td(a){a.A||(a.A=!0,Te(a,"complete"),Te(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Te(this,"complete"),Te(this,"abort"),yo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yo(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Id(this):this.bb())},t.bb=function(){Id(this)};function Id(a){if(a.h&&typeof o<"u"&&(!a.v[1]||xn(a)!=4||a.Z()!=2)){if(a.u&&xn(a)==4)vt(a.Ea,0,a);else if(Te(a,"readystatechange"),xn(a)==4){a.h=!1;try{const J=a.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var y;if(y=J===0){var O=String(a.D).match(pd)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),y=!$y.test(O?O.toLowerCase():"")}m=y}if(m)Te(a,"complete"),Te(a,"success");else{a.m=6;try{var L=2<xn(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",Td(a)}}finally{yo(a)}}}}function yo(a,f){if(a.g){Ad(a);const m=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||Te(a,"ready");try{m.onreadystatechange=y}catch{}}}function Ad(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function xn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),Yt(f)}};function Rd(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function jy(a){const f={};a=(a.g&&2<=xn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(T(a[y]))continue;var m=x(a[y]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=f[O]||[];f[O]=L,L.push(m)}R(f,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(a,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||f}function Sd(a){this.Aa=0,this.i=[],this.j=new Gr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ei("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ei("baseRetryDelayMs",5e3,a),this.cb=ei("retryDelaySeedMs",1e4,a),this.Wa=ei("forwardChannelMaxRetries",2,a),this.wa=ei("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ld(a&&a.concurrentRequestLimit),this.Da=new Uy,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sd.prototype,t.la=8,t.G=1,t.connect=function(a,f,m,y){Vt(0),this.W=a,this.H=f||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=Md(this,null,this.W),bo(this)};function bl(a){if(Cd(a),a.G==3){var f=a.U++,m=kn(a.I);if(je(m,"SID",a.K),je(m,"RID",f),je(m,"TYPE","terminate"),ti(a,m),f=new es(a,a.j,f),f.L=2,f.v=mo(kn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=f.v,m=!0),m||(f.g=Ld(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ho(f)}Od(a)}function vo(a){a.g&&(wl(a),a.g.cancel(),a.g=null)}function Cd(a){vo(a),a.u&&(l.clearTimeout(a.u),a.u=null),Eo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function bo(a){if(!ud(a.h)&&!a.s){a.s=!0;var f=a.Ga;ye||sn(),ve||(ye(),ve=!0),xt.add(f,a),a.B=0}}function qy(a,f){return cd(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=zr(g(a.Ga,a,f),Nd(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const O=new es(this,this.j,a);let L=this.o;if(this.S&&(L?(L=v(L),k(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=kd(this,O,f),m=kn(this.I),je(m,"RID",a),je(m,"CVER",22),this.D&&je(m,"X-HTTP-Session-Id",this.D),ti(this,m),L&&(this.O?f="headers="+encodeURIComponent(String(Ed(L)))+"&"+f:this.m&&vl(m,this.m,L)),yl(this.h,O),this.Ua&&je(m,"TYPE","init"),this.P?(je(m,"$req",f),je(m,"SID","null"),O.T=!0,pl(O,m,null)):pl(O,m,f),this.G=2}}else this.G==3&&(a?Pd(this,a):this.i.length==0||ud(this.h)||Pd(this))};function Pd(a,f){var m;f?m=f.l:m=a.U++;const y=kn(a.I);je(y,"SID",a.K),je(y,"RID",m),je(y,"AID",a.T),ti(a,y),a.m&&a.o&&vl(y,a.m,a.o),m=new es(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),f&&(a.i=f.D.concat(a.i)),f=kd(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),yl(a.h,m),pl(m,y,f)}function ti(a,f){a.H&&de(a.H,function(m,y){je(f,y,m)}),a.l&&fd({},function(m,y){je(f,y,m)})}function kd(a,f,m){m=Math.min(a.i.length,m);var y=a.l?g(a.l.Na,a.l,a):null;e:{var O=a.i;let L=-1;for(;;){const J=["count="+m];L==-1?0<m?(L=O[0].g,J.push("ofs="+L)):L=0:J.push("ofs="+L);let Le=!0;for(let ft=0;ft<m;ft++){let xe=O[ft].g;const Et=O[ft].map;if(xe-=L,0>xe)L=Math.max(0,O[ft].g-100),Le=!1;else try{Fy(Et,J,"req"+xe+"_")}catch{y&&y(Et)}}if(Le){y=J.join("&");break e}}}return a=a.i.splice(0,m),f.D=a,y}function xd(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;ye||sn(),ve||(ye(),ve=!0),xt.add(f,a),a.v=0}}function El(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=zr(g(a.Fa,a),Nd(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Vd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=zr(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),vo(this),Vd(this))};function wl(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Vd(a){a.g=new es(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=kn(a.qa);je(f,"RID","rpc"),je(f,"SID",a.K),je(f,"AID",a.T),je(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&je(f,"TO",a.ja),je(f,"TYPE","xmlhttp"),ti(a,f),a.m&&a.o&&vl(f,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=mo(kn(f)),m.m=null,m.P=!0,id(m,a)}t.Za=function(){this.C!=null&&(this.C=null,vo(this),El(this),Vt(19))};function Eo(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Dd(a,f){var m=null;if(a.g==f){Eo(a),wl(a),a.g=null;var y=2}else if(_l(a.h,f))m=f.D,dd(a.h,f),y=1;else return;if(a.G!=0){if(f.o)if(y==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var O=a.B;y=lo(),Te(y,new td(y,m)),bo(a)}else xd(a);else if(O=f.s,O==3||O==0&&0<f.X||!(y==1&&qy(a,f)||y==2&&El(a)))switch(m&&0<m.length&&(f=a.h,f.i=f.i.concat(m)),O){case 1:Ms(a,5);break;case 4:Ms(a,10);break;case 3:Ms(a,6);break;default:Ms(a,2)}}}function Nd(a,f){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*f}function Ms(a,f){if(a.j.info("Error code "+f),f==2){var m=g(a.fb,a),y=a.Xa;const O=!y;y=new Os(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||fo(y,"https"),mo(y),O?My(y.toString(),m):Ly(y.toString(),m)}else Vt(2);a.G=0,a.l&&a.l.sa(f),Od(a),Cd(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Od(a){if(a.G=0,a.ka=[],a.l){const f=hd(a.h);(f.length!=0||a.i.length!=0)&&(C(a.ka,f),C(a.ka,a.i),a.h.i.length=0,E(a.i),a.i.length=0),a.l.ra()}}function Md(a,f,m){var y=m instanceof Os?kn(m):new Os(m);if(y.g!="")f&&(y.g=f+"."+y.g),po(y,y.s);else{var O=l.location;y=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var L=new Os(null);y&&fo(L,y),f&&(L.g=f),O&&po(L,O),m&&(L.l=m),y=L}return m=a.D,f=a.ya,m&&f&&je(y,m,f),je(y,"VER",a.la),ti(a,y),y}function Ld(a,f,m){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new Qe(new go({eb:m})):new Qe(a.pa),f.Ha(a.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ud(){}t=Ud.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wo(){}wo.prototype.g=function(a,f){return new jt(a,f)};function jt(a,f){fe.call(this),this.g=new Sd(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!T(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!T(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new sr(this)}b(jt,fe),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){bl(this.g)},jt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=ht(a),a=m);f.i.push(new Ry(f.Ya++,a)),f.G==3&&bo(f)},jt.prototype.N=function(){this.g.l=null,delete this.j,bl(this.g),delete this.g,jt.aa.N.call(this)};function Fd(a){cl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const m in f){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}b(Fd,cl);function $d(){dl.call(this),this.status=1}b($d,dl);function sr(a){this.g=a}b(sr,Ud),sr.prototype.ua=function(){Te(this.g,"a")},sr.prototype.ta=function(a){Te(this.g,new Fd(a))},sr.prototype.sa=function(a){Te(this.g,new $d)},sr.prototype.ra=function(){Te(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,Ug=function(){return new wo},Lg=function(){return lo()},Mg=Ds,pu={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uo.NO_ERROR=0,uo.TIMEOUT=8,uo.HTTP_ERROR=6,qo=uo,nd.COMPLETE="complete",Og=nd,Jc.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",fe.prototype.listen=fe.prototype.K,li=Jc,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Ng=Qe}).apply(typeof Po<"u"?Po:typeof self<"u"?self:typeof window<"u"?window:{});const pf="@firebase/firestore",mf="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Xu("@firebase/firestore");function lr(){return Ws.logLevel}function ne(t,...e){if(Ws.logLevel<=Re.DEBUG){const n=e.map(hc);Ws.debug(`Firestore (${Ur}): ${t}`,...n)}}function zn(t,...e){if(Ws.logLevel<=Re.ERROR){const n=e.map(hc);Ws.error(`Firestore (${Ur}): ${t}`,...n)}}function Cr(t,...e){if(Ws.logLevel<=Re.WARN){const n=e.map(hc);Ws.warn(`Firestore (${Ur}): ${t}`,...n)}}function hc(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Fg(t,s,n)}function Fg(t,e,n){let s=`FIRESTORE (${Ur}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw zn(s),new Error(s)}function Oe(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||Fg(e,r,s)}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class mA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gA{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0,42304);let s=this.i;const r=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let i=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bn,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Oe(typeof s.accessToken=="string",31837,{l:s}),new $g(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new It(e)}}class _A{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=It.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yA{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new _A(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Oe(this.o===void 0,3512);const s=i=>{i.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new gf(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new gf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=bA(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Ie(t,e){return t<e?-1:t>e?1:0}function mu(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return Ie(s,r);{const i=Bg(),o=EA(i.encode(_f(t,n)),i.encode(_f(e,n)));return o!==0?o:Ie(s,r)}}n+=s>65535?2:1}return Ie(t.length,e.length)}function _f(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function EA(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ie(t[n],e[n]);return Ie(t.length,e.length)}function Pr(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=-62135596800,vf=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*vf);return new rt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yf)throw new se(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vf}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-yf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new rt(0,0))}static max(){return new be(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="__name__";class bn{constructor(e,n,s){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ge(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return bn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=bn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Ie(e.length,n.length)}static compareSegments(e,n){const s=bn.isNumericId(e),r=bn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?bn.extractNumericId(e).compare(bn.extractNumericId(n)):mu(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ys.fromString(e.substring(4,e.length-2))}}class qe extends bn{construct(e,n,s){return new qe(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new se(B.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const wA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends bn{construct(e,n,s){return new _t(e,n,s)}static isValidIdentifier(e){return wA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bf}static keyField(){return new _t([bf])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new se(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new se(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new se(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new se(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(qe.fromString(e))}static fromName(e){return new ce(qe.fromString(e).popFirst(5))}static empty(){return new ce(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new qe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=-1;function TA(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=be.fromTimestamp(s===1e9?new rt(n+1,0):new rt(n,s));return new Ts(r,ce.empty(),e)}function IA(t){return new Ts(t.readTime,t.key,Mi)}class Ts{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ts(be.min(),ce.empty(),Mi)}static max(){return new Ts(be.max(),ce.empty(),Mi)}}function AA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fr(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==RA)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,s)=>{n(e)})}static reject(e){return new j((n,s)=>{s(e)})}static waitFor(e){return new j((n,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},u=>s(u))}),o=!0,i===r&&n()})}static or(e){let n=j.resolve(!1);for(const s of e)n=n.next(r=>r?j.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new j((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++l,l===i&&s(o)},d=>r(d))}})}static doWhile(e,n){return new j((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function CA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $r(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ha.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=-1;function Ka(t){return t==null}function fa(t){return t===0&&1/t==-1/0}function PA(t){return typeof t=="number"&&Number.isInteger(t)&&!fa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="";function kA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ef(e)),e=xA(t.get(n),e);return Ef(e)}function xA(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case qg:n+="";break;default:n+=i}}return n}function Ef(t){return t+qg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Hg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ko(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ko(this.root,e,this.comparator,!1)}getReverseIterator(){return new ko(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ko(this.root,e,this.comparator,!0)}}class ko{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??pt.RED,this.left=r??pt.EMPTY,this.right=i??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new pt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return pt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tf(this.data.getIterator())}getIteratorFrom(e){return new Tf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class Tf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new zt([])}unionWith(e){let n=new it(_t.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pr(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Kg("Invalid base64 string: "+i):i}}(e);return new yt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const VA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(t){if(Oe(!!t,39018),typeof t=="string"){let e=0;const n=VA.exec(t);if(Oe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function As(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="server_timestamp",Gg="__type__",Wg="__previous_value__",Qg="__local_write_time__";function pc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gg])===null||n===void 0?void 0:n.stringValue)===zg}function za(t){const e=t.mapValue.fields[Wg];return pc(e)?za(e):e}function Li(t){const e=Is(t.mapValue.fields[Qg].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n,s,r,i,o,l,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d}}const pa="(default)";class Ui{constructor(e,n){this.projectId=e,this.database=n||pa}static empty(){return new Ui("","")}get isDefaultDatabase(){return this.database===pa}isEqual(e){return e instanceof Ui&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="__type__",NA="__max__",xo={mapValue:{}},Jg="__vector__",ma="value";function Rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pc(t)?4:MA(t)?9007199254740991:OA(t)?10:11:ge(28295,{value:t})}function Pn(t,e){if(t===e)return!0;const n=Rs(t);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Li(t).isEqual(Li(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Is(r.timestampValue),l=Is(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return As(r.bytesValue).isEqual(As(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Je(r.geoPointValue.latitude)===Je(i.geoPointValue.latitude)&&Je(r.geoPointValue.longitude)===Je(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Je(r.integerValue)===Je(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Je(r.doubleValue),l=Je(i.doubleValue);return o===l?fa(o)===fa(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Pr(t.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(wf(o)!==wf(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Pn(o[u],l[u])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function Fi(t,e){return(t.values||[]).find(n=>Pn(n,e))!==void 0}function kr(t,e){if(t===e)return 0;const n=Rs(t),s=Rs(e);if(n!==s)return Ie(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Je(i.integerValue||i.doubleValue),u=Je(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return If(t.timestampValue,e.timestampValue);case 4:return If(Li(t),Li(e));case 5:return mu(t.stringValue,e.stringValue);case 6:return function(i,o){const l=As(i),u=As(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=Ie(l[c],u[c]);if(d!==0)return d}return Ie(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ie(Je(i.latitude),Je(o.latitude));return l!==0?l:Ie(Je(i.longitude),Je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Af(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,c,d;const p=i.fields||{},g=o.fields||{},_=(l=p[ma])===null||l===void 0?void 0:l.arrayValue,b=(u=g[ma])===null||u===void 0?void 0:u.arrayValue,E=Ie(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0);return E!==0?E:Af(_,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===xo.mapValue&&o===xo.mapValue)return 0;if(i===xo.mapValue)return 1;if(o===xo.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const g=mu(u[p],d[p]);if(g!==0)return g;const _=kr(l[u[p]],c[d[p]]);if(_!==0)return _}return Ie(u.length,d.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{Pe:n})}}function If(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=Is(t),s=Is(e),r=Ie(n.seconds,s.seconds);return r!==0?r:Ie(n.nanos,s.nanos)}function Af(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=kr(n[r],s[r]);if(i)return i}return Ie(n.length,s.length)}function xr(t){return gu(t)}function gu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Is(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return As(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=gu(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${gu(n.fields[o])}`;return r+"}"}(t.mapValue):ge(61005,{value:t})}function Ho(t){switch(Rs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=za(t);return e?16+Ho(e):16;case 5:return 2*t.stringValue.length;case 6:return As(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Ho(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return ks(s.fields,(i,o)=>{r+=i.length+Ho(o)}),r}(t.mapValue);default:throw ge(13486,{value:t})}}function Rf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _u(t){return!!t&&"integerValue"in t}function mc(t){return!!t&&"arrayValue"in t}function Sf(t){return!!t&&"nullValue"in t}function Cf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ko(t){return!!t&&"mapValue"in t}function OA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Yg])===null||n===void 0?void 0:n.stringValue)===Jg}function wi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ks(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=wi(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function MA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.value=e}static empty(){return new $t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ko(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wi(n)}setAll(e){let n=_t.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=wi(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Ko(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Ko(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){ks(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new $t(wi(this.value))}}function Xg(t){const e=[];return ks(t.fields,(n,s)=>{const r=new _t([n]);if(Ko(s)){const i=Xg(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Rt(e,0,be.min(),be.min(),be.min(),$t.empty(),0)}static newFoundDocument(e,n,s,r){return new Rt(e,1,n,be.min(),s,r,0)}static newNoDocument(e,n){return new Rt(e,2,n,be.min(),be.min(),$t.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,be.min(),be.min(),$t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n){this.position=e,this.inclusive=n}}function Pf(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ce.comparator(ce.fromName(o.referenceValue),n.key):s=kr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function kf(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n="asc"){this.field=e,this.dir=n}}function LA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{}class Ze extends Zg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new FA(e,n,s):n==="array-contains"?new jA(e,s):n==="in"?new qA(e,s):n==="not-in"?new HA(e,s):n==="array-contains-any"?new KA(e,s):new Ze(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new $A(e,s):new BA(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(kr(n,this.value)):n!==null&&Rs(this.value)===Rs(n)&&this.matchesComparison(kr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends Zg{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new pn(e,n)}matches(e){return e_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function e_(t){return t.op==="and"}function t_(t){return UA(t)&&e_(t)}function UA(t){for(const e of t.filters)if(e instanceof pn)return!1;return!0}function yu(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+xr(t.value);if(t_(t))return t.filters.map(e=>yu(e)).join(",");{const e=t.filters.map(n=>yu(n)).join(",");return`${t.op}(${e})`}}function n_(t,e){return t instanceof Ze?function(s,r){return r instanceof Ze&&s.op===r.op&&s.field.isEqual(r.field)&&Pn(s.value,r.value)}(t,e):t instanceof pn?function(s,r){return r instanceof pn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&n_(o,r.filters[l]),!0):!1}(t,e):void ge(19439)}function s_(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${xr(n.value)}`}(t):t instanceof pn?function(n){return n.op.toString()+" {"+n.getFilters().map(s_).join(" ,")+"}"}(t):"Filter"}class FA extends Ze{constructor(e,n,s){super(e,n,s),this.key=ce.fromName(s.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class $A extends Ze{constructor(e,n){super(e,"in",n),this.keys=r_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class BA extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=r_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function r_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ce.fromName(s.referenceValue))}class jA extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mc(n)&&Fi(n.arrayValue,this.value)}}class qA extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fi(this.value.arrayValue,n)}}class HA extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Fi(this.value.arrayValue,n)}}class KA extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Fi(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function xf(t,e=null,n=[],s=[],r=null,i=null,o=null){return new zA(t,e,n,s,r,i,o)}function gc(t){const e=Ee(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>yu(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Ka(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>xr(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>xr(s)).join(",")),e.Ie=n}return e.Ie}function _c(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!n_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kf(t.startAt,e.startAt)&&kf(t.endAt,e.endAt)}function vu(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function GA(t,e,n,s,r,i,o,l){return new Br(t,e,n,s,r,i,o,l)}function yc(t){return new Br(t)}function Vf(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function i_(t){return t.collectionGroup!==null}function Ti(t){const e=Ee(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new it(_t.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new $i(i,s))}),n.has(_t.keyField().canonicalString())||e.Ee.push(new $i(_t.keyField(),s))}return e.Ee}function An(t){const e=Ee(t);return e.de||(e.de=WA(e,Ti(t))),e.de}function WA(t,e){if(t.limitType==="F")return xf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new $i(r.field,i)});const n=t.endAt?new ga(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ga(t.startAt.position,t.startAt.inclusive):null;return xf(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function bu(t,e){const n=t.filters.concat([e]);return new Br(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _a(t,e,n){return new Br(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ga(t,e){return _c(An(t),An(e))&&t.limitType===e.limitType}function o_(t){return`${gc(An(t))}|lt:${t.limitType}`}function ur(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>s_(r)).join(", ")}]`),Ka(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>xr(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>xr(r)).join(",")),`Target(${s})`}(An(t))}; limitType=${t.limitType})`}function Wa(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ce.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Ti(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,l,u){const c=Pf(o,l,u);return o.inclusive?c<=0:c<0}(s.startAt,Ti(s),r)||s.endAt&&!function(o,l,u){const c=Pf(o,l,u);return o.inclusive?c>=0:c>0}(s.endAt,Ti(s),r))}(t,e)}function QA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function a_(t){return(e,n)=>{let s=!1;for(const r of Ti(t)){const i=YA(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function YA(t,e,n){const s=t.field.isKeyField()?ce.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),c=l.data.field(i);return u!==null&&c!==null?kr(u,c):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ks(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return Hg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new Ge(ce.comparator);function Gn(){return JA}const l_=new Ge(ce.comparator);function ui(...t){let e=l_;for(const n of t)e=e.insert(n.key,n);return e}function u_(t){let e=l_;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Bs(){return Ii()}function c_(){return Ii()}function Ii(){return new Xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const XA=new Ge(ce.comparator),ZA=new it(ce.comparator);function Se(...t){let e=ZA;for(const n of t)e=e.add(n);return e}const e1=new it(Ie);function t1(){return e1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fa(e)?"-0":e}}function d_(t){return{integerValue:""+t}}function n1(t,e){return PA(e)?d_(e):vc(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this._=void 0}}function s1(t,e,n){return t instanceof ya?function(r,i){const o={fields:{[Gg]:{stringValue:zg},[Qg]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&pc(i)&&(i=za(i)),i&&(o.fields[Wg]=i),{mapValue:o}}(n,e):t instanceof Bi?f_(t,e):t instanceof ji?p_(t,e):function(r,i){const o=h_(r,i),l=Df(o)+Df(r.Re);return _u(o)&&_u(r.Re)?d_(l):vc(r.serializer,l)}(t,e)}function r1(t,e,n){return t instanceof Bi?f_(t,e):t instanceof ji?p_(t,e):n}function h_(t,e){return t instanceof va?function(s){return _u(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class ya extends Qa{}class Bi extends Qa{constructor(e){super(),this.elements=e}}function f_(t,e){const n=m_(e);for(const s of t.elements)n.some(r=>Pn(r,s))||n.push(s);return{arrayValue:{values:n}}}class ji extends Qa{constructor(e){super(),this.elements=e}}function p_(t,e){let n=m_(e);for(const s of t.elements)n=n.filter(r=>!Pn(r,s));return{arrayValue:{values:n}}}class va extends Qa{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Df(t){return Je(t.integerValue||t.doubleValue)}function m_(t){return mc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function i1(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Bi&&r instanceof Bi||s instanceof ji&&r instanceof ji?Pr(s.elements,r.elements,Pn):s instanceof va&&r instanceof va?Pn(s.Re,r.Re):s instanceof ya&&r instanceof ya}(t.transform,e.transform)}class o1{constructor(e,n){this.version=e,this.transformResults=n}}class tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tn}static exists(e){return new tn(void 0,e)}static updateTime(e){return new tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ya{}function g_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bc(t.key,tn.none()):new eo(t.key,t.data,tn.none());{const n=t.data,s=$t.empty();let r=new it(_t.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new xs(t.key,s,new zt(r.toArray()),tn.none())}}function a1(t,e,n){t instanceof eo?function(r,i,o){const l=r.value.clone(),u=Of(r.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof xs?function(r,i,o){if(!zo(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Of(r.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(__(r)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ai(t,e,n,s){return t instanceof eo?function(i,o,l,u){if(!zo(i.precondition,o))return l;const c=i.value.clone(),d=Mf(i.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof xs?function(i,o,l,u){if(!zo(i.precondition,o))return l;const c=Mf(i.fieldTransforms,u,o),d=o.data;return d.setAll(__(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(i,o,l){return zo(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function l1(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=h_(s.transform,r||null);i!=null&&(n===null&&(n=$t.empty()),n.set(s.field,i))}return n||null}function Nf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Pr(s,r,(i,o)=>i1(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class eo extends Ya{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class xs extends Ya{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function __(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Of(t,e,n){const s=new Map;Oe(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,r1(o,l,n[r]))}return s}function Mf(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,s1(i,o,e))}return s}class bc extends Ya{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u1 extends Ya{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&a1(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ai(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ai(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=c_();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const u=g_(o,l);u!==null&&s.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(be.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&Pr(this.mutations,e.mutations,(n,s)=>Nf(n,s))&&Pr(this.baseMutations,e.baseMutations,(n,s)=>Nf(n,s))}}class Ec{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Oe(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let r=function(){return XA}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Ec(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe,Pe;function f1(t){switch(t){case B.OK:return ge(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function y_(t){if(t===void 0)return zn("GRPC error has no .code"),B.UNKNOWN;switch(t){case Xe.OK:return B.OK;case Xe.CANCELLED:return B.CANCELLED;case Xe.UNKNOWN:return B.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return B.INTERNAL;case Xe.UNAVAILABLE:return B.UNAVAILABLE;case Xe.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Xe.NOT_FOUND:return B.NOT_FOUND;case Xe.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Xe.ABORTED:return B.ABORTED;case Xe.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Xe.DATA_LOSS:return B.DATA_LOSS;default:return ge(39323,{code:t})}}(Pe=Xe||(Xe={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new ys([4294967295,4294967295],0);function Lf(t){const e=Bg().encode(t),n=new Dg;return n.update(e),new Uint8Array(n.digest())}function Uf(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ys([n,s],0),new ys([r,i],0)]}class wc{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ci(`Invalid padding: ${n}`);if(s<0)throw new ci(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ci(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ci(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ys.fromNumber(this.pe)}we(e,n,s){let r=e.add(n.multiply(ys.fromNumber(s)));return r.compare(p1)===1&&(r=new ys([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Lf(e),[s,r]=Uf(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);if(!this.Se(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new wc(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const n=Lf(e),[s,r]=Uf(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);this.be(o)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ci extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,to.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ja(be.min(),r,new Ge(Ie),Gn(),Se())}}class to{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new to(s,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n,s,r){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=r}}class v_{constructor(e,n){this.targetId=e,this.Ce=n}}class b_{constructor(e,n,s=yt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Ff{constructor(){this.Fe=0,this.Me=$f(),this.xe=yt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Se(),n=Se(),s=Se();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ge(38017,{changeType:i})}}),new to(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=$f()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Oe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class m1{constructor(e){this.ze=e,this.je=new Map,this.He=Gn(),this.Je=Vo(),this.Ye=Vo(),this.Ze=new Ge(Ie)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,s=e.Ce.count,r=this._t(n);if(r){const i=r.target;if(vu(i))if(s===0){const o=new ce(i.path);this.tt(n,o,Rt.newNoDocument(o,be.min()))}else Oe(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const l=this.ct(e),u=l?this.lt(l,e,o):1;if(u!==0){this.st(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=As(s).toUint8Array()}catch(u){if(u instanceof Kg)return Cr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new wc(o,r,i)}catch(u){return Cr(u instanceof ci?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,i,null),r++)}),r}It(e){const n=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&vu(l.target)){const u=new ce(l.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,Rt.newNoDocument(u,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let s=Se();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const c=this._t(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const r=new Ja(e,n,this.Ze,this.He,s);return this.He=Gn(),this.Je=Vo(),this.Ye=Vo(),this.Ze=new Ge(Ie),r}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Ff,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new it(Ie),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new it(Ie),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ff),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Vo(){return new Ge(ce.comparator)}function $f(){return new Ge(ce.comparator)}const g1={asc:"ASCENDING",desc:"DESCENDING"},_1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y1={and:"AND",or:"OR"};class v1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Eu(t,e){return t.useProto3Json||Ka(e)?e:{value:e}}function ba(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function b1(t,e){return ba(t,e.toTimestamp())}function Rn(t){return Oe(!!t,49232),be.fromTimestamp(function(n){const s=Is(n);return new rt(s.seconds,s.nanos)}(t))}function Tc(t,e){return wu(t,e).canonicalString()}function wu(t,e){const n=function(r){return new qe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function w_(t){const e=qe.fromString(t);return Oe(S_(e),10190,{key:e.toString()}),e}function Tu(t,e){return Tc(t.databaseId,e.path)}function ql(t,e){const n=w_(e);if(n.get(1)!==t.databaseId.projectId)throw new se(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(I_(n))}function T_(t,e){return Tc(t.databaseId,e)}function E1(t){const e=w_(t);return e.length===4?qe.emptyPath():I_(e)}function Iu(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I_(t){return Oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Bf(t,e,n){return{name:Tu(t,e),fields:n.value.mapValue.fields}}function w1(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ge(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Oe(d===void 0||typeof d=="string",58123),yt.fromBase64String(d||"")):(Oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),yt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const d=c.code===void 0?B.UNKNOWN:y_(c.code);return new se(d,c.message||"")}(o);n=new b_(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=ql(t,s.document.name),i=Rn(s.document.updateTime),o=s.document.createTime?Rn(s.document.createTime):be.min(),l=new $t({mapValue:{fields:s.document.fields}}),u=Rt.newFoundDocument(r,i,o,l),c=s.targetIds||[],d=s.removedTargetIds||[];n=new Go(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=ql(t,s.document),i=s.readTime?Rn(s.readTime):be.min(),o=Rt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new Go([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=ql(t,s.document),i=s.removedTargetIds||[];n=new Go([],i,r,null)}else{if(!("filter"in e))return ge(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new h1(r,i),l=s.targetId;n=new v_(l,o)}}return n}function T1(t,e){let n;if(e instanceof eo)n={update:Bf(t,e.key,e.value)};else if(e instanceof bc)n={delete:Tu(t,e.key)};else if(e instanceof xs)n={update:Bf(t,e.key,e.data),updateMask:V1(e.fieldMask)};else{if(!(e instanceof u1))return ge(16599,{ft:e.type});n={verify:Tu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof ya)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ji)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof va)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw ge(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:b1(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge(27497)}(t,e.precondition)),n}function I1(t,e){return t&&t.length>0?(Oe(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Rn(r.updateTime):Rn(i);return o.isEqual(be.min())&&(o=Rn(i)),new o1(o,r.transformResults||[])}(n,e))):[]}function A1(t,e){return{documents:[T_(t,e.path)]}}function R1(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=T_(t,r);const i=function(c){if(c.length!==0)return R_(pn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:cr(g.field),direction:P1(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Eu(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:n,parent:r}}function S1(t){let e=E1(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Oe(s===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(p){const g=A_(p);return g instanceof pn&&t_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(b){return new $i(dr(b.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Ka(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,_=p.values||[];return new ga(_,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,_=p.values||[];return new ga(_,g)}(n.endAt)),GA(e,r,o,i,l,"F",u,c)}function C1(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function A_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=dr(n.unaryFilter.field);return Ze.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=dr(n.unaryFilter.field);return Ze.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=dr(n.unaryFilter.field);return Ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=dr(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(dr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pn.create(n.compositeFilter.filters.map(s=>A_(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function P1(t){return g1[t]}function k1(t){return _1[t]}function x1(t){return y1[t]}function cr(t){return{fieldPath:t.canonicalString()}}function dr(t){return _t.fromServerFormat(t.fieldPath)}function R_(t){return t instanceof Ze?function(n){if(n.op==="=="){if(Cf(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NAN"}};if(Sf(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cf(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NOT_NAN"}};if(Sf(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cr(n.field),op:k1(n.op),value:n.value}}}(t):t instanceof pn?function(n){const s=n.getFilters().map(r=>R_(r));return s.length===1?s[0]:{compositeFilter:{op:x1(n.op),filters:s}}}(t):ge(54877,{filter:t})}function V1(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function S_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,s,r,i=be.min(),o=be.min(),l=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.wt=e}}function N1(t){const e=S1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_a(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.Cn=new M1}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Ts.min())}updateCollectionGroup(e,n,s){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class M1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new it(qe.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new it(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},C_=41943040;class Ft{static withCacheSize(e){return new Ft(e,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(C_,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Vr(0)}static lr(){return new Vr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="LruGarbageCollector",L1=1048576;function Hf([t,e],[n,s]){const r=Ie(t,n);return r===0?Ie(e,s):r}class U1{constructor(e){this.Er=e,this.buffer=new it(Hf),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Hf(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class F1{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ne(qf,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$r(n)?ne(qf,"Ignoring IndexedDB error during garbage collection: ",n):await Fr(n)}await this.mr(3e5)})}}class $1{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return j.resolve(Ha.le);const s=new U1(n);return this.gr.forEachTarget(e,r=>s.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>s.Rr(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(jf)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jf):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,r,i,o,l,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(c=Date.now(),lr()<=Re.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p})))}}function B1(t,e){return new $1(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(){this.changes=new Xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?j.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Ai(s.mutation,r,zt.empty(),rt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Se()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Se()){const r=Bs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=ui();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Bs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Se()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,r){let i=Gn();const o=Ii(),l=function(){return Ii()}();return n.forEach((u,c)=>{const d=s.get(c.key);r.has(c.key)&&(d===void 0||d.mutation instanceof xs)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ai(d.mutation,c,d.mutation.getFieldMask(),rt.now())):o.set(c.key,zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var p;return l.set(c,new q1(d,(p=o.get(c))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const s=Ii();let r=new Ge((o,l)=>o-l),i=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=s.get(u)||zt.empty();d=l.applyToLocalView(c,d),s.set(u,d);const p=(r.get(l.batchId)||Se()).add(u);r=r.insert(l.batchId,p)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,p=c_();d.forEach(g=>{if(!i.has(g)){const _=g_(n.get(g),s.get(g));_!==null&&p.set(g,_),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return j.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):i_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):j.resolve(Bs());let l=Mi,u=i;return o.next(c=>j.forEach(c,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,Se())).next(d=>({batchId:l,changes:u_(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(s=>{let r=ui();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=ui();return this.indexManager.getCollectionParents(e,i).next(l=>j.forEach(l,u=>{const c=function(p,g){return new Br(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Rt.newInvalidDocument(d)))});let l=ui();return o.forEach((u,c)=>{const d=i.get(u);d!==void 0&&Ai(d.mutation,c,zt.empty(),rt.now()),Wa(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return j.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Rn(r.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:N1(r.bundledQuery),readTime:Rn(r.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.overlays=new Ge(ce.comparator),this.Qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Bs();return j.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.bt(e,n,i)}),j.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(s)),j.resolve()}getOverlaysForCollection(e,n,s){const r=Bs(),i=n.length+1,o=new ce(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>s&&r.set(u.getKey(),u)}return j.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ge((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let d=i.get(c.largestBatchId);d===null&&(d=Bs(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=Bs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=r)););return j.resolve(l)}bt(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Qr.get(r.largestBatchId).delete(s.key);this.Qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new d1(n,s));let i=this.Qr.get(n);i===void 0&&(i=Se(),this.Qr.set(n,i)),this.Qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(){this.$r=new it(ot.Ur),this.Kr=new it(ot.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new ot(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new ot(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new ce(new qe([])),s=new ot(n,e),r=new ot(n,e+1),i=[];return this.Kr.forEachInRange([s,r],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ce(new qe([])),s=new ot(n,e),r=new ot(n,e+1);let i=Se();return this.Kr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ot(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ot{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ce.comparator(e.key,n.key)||Ie(e.Zr,n.Zr)}static Wr(e,n){return Ie(e.Zr,n.Zr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new it(ot.Ur)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new c1(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Xr=this.Xr.add(new ot(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ti(s),i=r<0?0:r;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?fc:this.nr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ot(n,0),r=new ot(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([s,r],o=>{const l=this.ei(o.Zr);i.push(l)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new it(Ie);return n.forEach(r=>{const i=new ot(r,0),o=new ot(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{s=s.add(l.Zr)})}),j.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ce.isDocumentKey(i)||(i=i.child(""));const o=new ot(new ce(i),0);let l=new it(Ie);return this.Xr.forEachWhile(u=>{const c=u.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(l=l.add(u.Zr)),!0)},o),j.resolve(this.ni(l))}ni(e){const n=[];return e.forEach(s=>{const r=this.ei(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Oe(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return j.forEach(n.mutations,r=>{const i=new ot(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new ot(n,0),r=this.Xr.firstAfterOrEqual(s);return j.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.ii=e,this.docs=function(){return new Ge(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return j.resolve(s?s.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let s=Gn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Rt.newInvalidDocument(r))}),j.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Gn();const o=n.path,l=new ce(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||AA(IA(d),s)<=0||(r.has(d.key)||Wa(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ge(9500)}si(e,n){return j.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Y1(this)}getSize(e){return j.resolve(this.size)}}class Y1 extends j1{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(s)}),j.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.persistence=e,this.oi=new Xs(n=>gc(n),_c),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this._i=0,this.ai=new Ic,this.targetCount=0,this.ui=Vr.cr()}forEachTarget(e,n){return this.oi.forEach((s,r)=>n(r)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),j.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Vr(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Tr(n),j.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),j.waitFor(i).next(()=>r)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return j.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),j.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return j.resolve(s)}containsKey(e,n){return j.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n){this.ci={},this.overlays={},this.li=new Ha(0),this.hi=!1,this.hi=!0,this.Pi=new G1,this.referenceDelegate=e(this),this.Ti=new J1(this),this.indexManager=new O1,this.remoteDocumentCache=function(r){return new Q1(r)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new D1(n),this.Ei=new K1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new z1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new W1(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ne("MemoryPersistence","Starting transaction:",e);const r=new X1(this.li.next());return this.referenceDelegate.di(),s(r).next(i=>this.referenceDelegate.Ai(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ri(e,n){return j.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class X1 extends SA{constructor(e){super(),this.currentSequenceNumber=e}}class Ac{constructor(e){this.persistence=e,this.Vi=new Ic,this.mi=null}static fi(e){return new Ac(e)}get gi(){if(this.mi)return this.mi;throw ge(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),j.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.gi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.gi,s=>{const r=ce.fromPath(s);return this.pi(e,r).next(i=>{i||n.removeEntry(r,be.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return j.or([()=>j.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Ea{constructor(e,n){this.persistence=e,this.yi=new Xs(s=>kA(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=B1(this,n)}static fi(e,n){return new Ea(e,n)}di(){}Ai(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}Sr(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return j.forEach(this.yi,(s,r)=>this.Dr(e,s,r).next(i=>i?j.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,o=>this.Dr(e,o,n).next(l=>{l||(s++,i.removeEntry(o,be.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),j.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),j.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ho(e.data.value)),n}Dr(e,n,s){return j.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return j.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.ds=s,this.As=r}static Rs(e,n){let s=Se(),r=Se();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Rc(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Ow()?8:CA(kt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Ss(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Z1;return this.bs(e,n,o).next(l=>{if(i.result=l,this.fs)return this.Ds(e,n,o,l.size)})}).next(()=>i.result)}Ds(e,n,s,r){return s.documentReadCount<this.gs?(lr()<=Re.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",ur(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),j.resolve()):(lr()<=Re.DEBUG&&ne("QueryEngine","Query:",ur(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ps*r?(lr()<=Re.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",ur(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):j.resolve())}ws(e,n){if(Vf(n))return j.resolve(null);let s=An(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=_a(n,null,"F"),s=An(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Se(...i);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(u=>{const c=this.vs(n,l);return this.Cs(n,c,o,u.readTime)?this.ws(e,_a(n,null,"F")):this.Fs(e,c,n,u)}))})))}Ss(e,n,s,r){return Vf(n)||r.isEqual(be.min())?j.resolve(null):this.ys.getDocuments(e,s).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,s,r)?j.resolve(null):(lr()<=Re.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ur(n)),this.Fs(e,o,n,TA(r,Mi)).next(l=>l))})}vs(e,n){let s=new it(a_(e));return n.forEach((r,i)=>{Wa(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}bs(e,n,s){return lr()<=Re.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",ur(n)),this.ys.getDocumentsMatchingQuery(e,n,Ts.min(),s)}Fs(e,n,s,r){return this.ys.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc="LocalStore",tR=3e8;class nR{constructor(e,n,s,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new Ge(Ie),this.Os=new Xs(i=>gc(i),_c),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new H1(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function sR(t,e,n,s){return new nR(t,e,n,s)}async function k_(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let u=Se();for(const c of r){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of i){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(s,u).next(c=>({ks:c,removedBatchIds:o,addedBatchIds:l}))})})}function rR(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const p=c.batch,g=p.keys();let _=j.resolve();return g.forEach(b=>{_=_.next(()=>d.getEntry(u,b)).next(E=>{const C=c.docVersions.get(b);Oe(C!==null,48541),E.version.compareTo(C)<0&&(p.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),d.addEntry(E)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let u=Se();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function x_(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function iR(t,e){const n=Ee(t),s=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const l=[];e.targetChanges.forEach((d,p)=>{const g=r.get(p);if(!g)return;l.push(n.Ti.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(i,d.addedDocuments,p)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(yt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,s)),r=r.insert(p,_),function(E,C,P){return E.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=tR?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,_,d)&&l.push(n.Ti.updateTargetData(i,_))});let u=Gn(),c=Se();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(oR(i,o,e.documentUpdates).next(d=>{u=d.qs,c=d.Qs})),!s.isEqual(be.min())){const d=n.Ti.getLastRemoteSnapshotVersion(i).next(p=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(d)}return j.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.xs=r,i))}function oR(t,e,n){let s=Se(),r=Se();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Gn();return n.forEach((l,u)=>{const c=i.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(be.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ne(Sc,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{qs:o,Qs:r}})}function aR(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=fc),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function lR(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ti.getTargetData(s,e).next(i=>i?(r=i,j.resolve(r)):n.Ti.allocateTargetId(s).next(o=>(r=new hs(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.xs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function Au(t,e,n){const s=Ee(t),r=s.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!$r(o))throw o;ne(Sc,`Failed to update sequence numbers for target ${e}: ${o}`)}s.xs=s.xs.remove(e),s.Os.delete(r.target)}function Kf(t,e,n){const s=Ee(t);let r=be.min(),i=Se();return s.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const p=Ee(u),g=p.Os.get(d);return g!==void 0?j.resolve(p.xs.get(g)):p.Ti.getTargetData(c,d)}(s,o,An(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,e,n?r:be.min(),n?i:Se())).next(l=>(uR(s,QA(e),l),{documents:l,$s:i})))}function uR(t,e,n){let s=t.Ns.get(e)||be.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ns.set(e,s)}class zf{constructor(){this.activeTargetIds=t1()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cR{constructor(){this.xo=new zf,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new zf,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="ConnectivityMonitor";class Wf{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ne(Gf,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ne(Gf,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do=null;function Ru(){return Do===null?Do=function(){return 268435456+Math.round(2147483648*Math.random())}():Do++,"0x"+Do.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl="RestConnection",hR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fR{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${r}`,this.Go=this.databaseId.database===pa?`project_id=${s}`:`project_id=${s}&database_id=${r}`}zo(e,n,s,r,i){const o=Ru(),l=this.jo(e,n.toUriEncodedString());ne(Hl,`Sending RPC '${e}' ${o}:`,l,s);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,r,i);const{host:c}=new URL(l),d=zi(c);return this.Jo(e,l,u,s,d).then(p=>(ne(Hl,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Cr(Hl,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Yo(e,n,s,r,i,o){return this.zo(e,n,s,r,i)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ur}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}jo(e,n){const s=hR[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class mR extends fR{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Ru();return new Promise((l,u)=>{const c=new Ng;c.setWithCredentials(!0),c.listenOnce(Og.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case qo.NO_ERROR:const p=c.getResponseJson();ne(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case qo.TIMEOUT:ne(Tt,`RPC '${e}' ${o} timed out`),u(new se(B.DEADLINE_EXCEEDED,"Request time out"));break;case qo.HTTP_ERROR:const g=c.getStatus();if(ne(Tt,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const b=_==null?void 0:_.error;if(b&&b.status&&b.message){const E=function(P){const T=P.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(T)>=0?T:B.UNKNOWN}(b.status);u(new se(E,b.message))}else u(new se(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new se(B.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ne(Tt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(r);ne(Tt,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",d,s,15)})}T_(e,n,s){const r=Ru(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ug(),l=Lg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const d=i.join("");ne(Tt,`Creating RPC '${e}' stream ${r}: ${d}`,u);const p=o.createWebChannel(d,u);let g=!1,_=!1;const b=new pR({Zo:C=>{_?ne(Tt,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(g||(ne(Tt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),ne(Tt,`RPC '${e}' stream ${r} sending:`,C),p.send(C))},Xo:()=>p.close()}),E=(C,P,T)=>{C.listen(P,V=>{try{T(V)}catch(M){setTimeout(()=>{throw M},0)}})};return E(p,li.EventType.OPEN,()=>{_||(ne(Tt,`RPC '${e}' stream ${r} transport opened.`),b.__())}),E(p,li.EventType.CLOSE,()=>{_||(_=!0,ne(Tt,`RPC '${e}' stream ${r} transport closed`),b.u_())}),E(p,li.EventType.ERROR,C=>{_||(_=!0,Cr(Tt,`RPC '${e}' stream ${r} transport errored. Name:`,C.name,"Message:",C.message),b.u_(new se(B.UNAVAILABLE,"The operation could not be completed")))}),E(p,li.EventType.MESSAGE,C=>{var P;if(!_){const T=C.data[0];Oe(!!T,16349);const V=T,M=(V==null?void 0:V.error)||((P=V[0])===null||P===void 0?void 0:P.error);if(M){ne(Tt,`RPC '${e}' stream ${r} received error:`,M);const oe=M.status;let de=function(w){const k=Xe[w];if(k!==void 0)return y_(k)}(oe),R=M.message;de===void 0&&(de=B.INTERNAL,R="Unknown error status: "+oe+" with message "+M.message),_=!0,b.u_(new se(de,R)),p.close()}else ne(Tt,`RPC '${e}' stream ${r} received:`,T),b.c_(T)}}),E(l,Mg.STAT_EVENT,C=>{C.stat===pu.PROXY?ne(Tt,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===pu.NOPROXY&&ne(Tt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.a_()},0),b}}function Kl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){return new v1(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,n,s=1e3,r=1.5,i=6e4){this.xi=e,this.timerId=n,this.I_=s,this.E_=r,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),s=Math.max(0,Date.now()-this.V_),r=Math.max(0,n-s);r>0&&ne("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="PersistentStream";class D_{constructor(e,n,s,r,i,o,l,u){this.xi=e,this.y_=s,this.w_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new V_(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(zn(n.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.S_===n&&this.K_(s,r)},s=>{e(()=>{const r=new se(B.UNKNOWN,"Fetching auth token failed: "+s.message);return this.W_(r)})})}K_(e,n){const s=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{s(()=>this.W_(r))}),this.stream.onMessage(r=>{s(()=>++this.v_==1?this.z_(r):this.onNext(r))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return ne(Qf,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(ne(Qf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gR extends D_{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=w1(this.serializer,e),s=function(i){if(!("targetChange"in i))return be.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?be.min():o.readTime?Rn(o.readTime):be.min()}(e);return this.listener.j_(n,s)}H_(e){const n={};n.database=Iu(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=vu(u)?{documents:A1(i,u)}:{query:R1(i,u).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=E_(i,o.resumeToken);const c=Eu(i,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(be.min())>0){l.readTime=ba(i,o.snapshotVersion.toTimestamp());const c=Eu(i,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const s=C1(this.serializer,e);s&&(n.labels=s),this.L_(n)}J_(e){const n={};n.database=Iu(this.serializer),n.removeTarget=e,this.L_(n)}}class _R extends D_{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=I1(e.writeResults,e.commitTime),s=Rn(e.commitTime);return this.listener.ea(s,n)}ta(){const e={};e.database=Iu(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>T1(this.serializer,s))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{}class vR extends yR{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.na=!1}ra(){if(this.na)throw new se(B.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,r){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,wu(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se(B.UNKNOWN,i.toString())})}Yo(e,n,s,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,wu(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(B.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class bR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(zn(n),this.oa=!1):ne("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="RemoteStore";class ER{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No(o=>{s.enqueueAndForget(async()=>{Zs(this)&&(ne(Qs,"Restarting streams for network reachability change."),await async function(u){const c=Ee(u);c.Ta.add(4),await no(c),c.da.set("Unknown"),c.Ta.delete(4),await Za(c)}(this))})}),this.da=new bR(s,r)}}async function Za(t){if(Zs(t))for(const e of t.Ia)await e(!0)}async function no(t){for(const e of t.Ia)await e(!1)}function N_(t,e){const n=Ee(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),xc(n)?kc(n):jr(n).M_()&&Pc(n,e))}function Cc(t,e){const n=Ee(t),s=jr(n);n.Pa.delete(e),s.M_()&&O_(n,e),n.Pa.size===0&&(s.M_()?s.N_():Zs(n)&&n.da.set("Unknown"))}function Pc(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jr(t).H_(e)}function O_(t,e){t.Aa.Ke(e),jr(t).J_(e)}function kc(t){t.Aa=new m1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),jr(t).start(),t.da._a()}function xc(t){return Zs(t)&&!jr(t).F_()&&t.Pa.size>0}function Zs(t){return Ee(t).Ta.size===0}function M_(t){t.Aa=void 0}async function wR(t){t.da.set("Online")}async function TR(t){t.Pa.forEach((e,n)=>{Pc(t,e)})}async function IR(t,e){M_(t),xc(t)?(t.da.ca(e),kc(t)):t.da.set("Unknown")}async function AR(t,e,n){if(t.da.set("Online"),e instanceof b_&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Pa.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Pa.delete(l),r.Aa.removeTarget(l))}(t,e)}catch(s){ne(Qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await wa(t,s)}else if(e instanceof Go?t.Aa.Xe(e):e instanceof v_?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(be.min()))try{const s=await x_(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Aa.It(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Pa.get(c);d&&i.Pa.set(c,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const d=i.Pa.get(u);if(!d)return;i.Pa.set(u,d.withResumeToken(yt.EMPTY_BYTE_STRING,d.snapshotVersion)),O_(i,u);const p=new hs(d.target,u,c,d.sequenceNumber);Pc(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){ne(Qs,"Failed to raise snapshot:",s),await wa(t,s)}}async function wa(t,e,n){if(!$r(e))throw e;t.Ta.add(1),await no(t),t.da.set("Offline"),n||(n=()=>x_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne(Qs,"Retrying IndexedDB access"),await n(),t.Ta.delete(1),await Za(t)})}function L_(t,e){return e().catch(n=>wa(t,n,e))}async function el(t){const e=Ee(t),n=Ss(e);let s=e.ha.length>0?e.ha[e.ha.length-1].batchId:fc;for(;RR(e);)try{const r=await aR(e.localStore,s);if(r===null){e.ha.length===0&&n.N_();break}s=r.batchId,SR(e,r)}catch(r){await wa(e,r)}U_(e)&&F_(e)}function RR(t){return Zs(t)&&t.ha.length<10}function SR(t,e){t.ha.push(e);const n=Ss(t);n.M_()&&n.Y_&&n.Z_(e.mutations)}function U_(t){return Zs(t)&&!Ss(t).F_()&&t.ha.length>0}function F_(t){Ss(t).start()}async function CR(t){Ss(t).ta()}async function PR(t){const e=Ss(t);for(const n of t.ha)e.Z_(n.mutations)}async function kR(t,e,n){const s=t.ha.shift(),r=Ec.from(s,e,n);await L_(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await el(t)}async function xR(t,e){e&&Ss(t).Y_&&await async function(s,r){if(function(o){return f1(o)&&o!==B.ABORTED}(r.code)){const i=s.ha.shift();Ss(s).O_(),await L_(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await el(s)}}(t,e),U_(t)&&F_(t)}async function Yf(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),ne(Qs,"RemoteStore received new credentials");const s=Zs(n);n.Ta.add(3),await no(n),s&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await Za(n)}async function VR(t,e){const n=Ee(t);e?(n.Ta.delete(2),await Za(n)):e||(n.Ta.add(2),await no(n),n.da.set("Unknown"))}function jr(t){return t.Ra||(t.Ra=function(n,s,r){const i=Ee(n);return i.ra(),new gR(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:wR.bind(null,t),n_:TR.bind(null,t),i_:IR.bind(null,t),j_:AR.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),xc(t)?kc(t):t.da.set("Unknown")):(await t.Ra.stop(),M_(t))})),t.Ra}function Ss(t){return t.Va||(t.Va=function(n,s,r){const i=Ee(n);return i.ra(),new _R(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:CR.bind(null,t),i_:xR.bind(null,t),X_:PR.bind(null,t),ea:kR.bind(null,t)}),t.Ia.push(async e=>{e?(t.Va.O_(),await el(t)):(await t.Va.stop(),t.ha.length>0&&(ne(Qs,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new Vc(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dc(t,e){if(zn("AsyncQueue",`${e}: ${t}`),$r(t))return new se(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{static emptySet(e){return new Er(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ce.comparator(n.key,s.key):(n,s)=>ce.comparator(n.key,s.key),this.keyedMap=ui(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Er)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Er;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this.ma=new Ge(ce.comparator)}track(e){const n=e.doc.key,s=this.ma.get(n);s?e.type!==0&&s.type===3?this.ma=this.ma.insert(n,e):e.type===3&&s.type!==1?this.ma=this.ma.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ma=this.ma.remove(n):e.type===1&&s.type===2?this.ma=this.ma.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):ge(63341,{Vt:e,fa:s}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,s)=>{e.push(s)}),e}}class Dr{constructor(e,n,s,r,i,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Dr(e,n,Er.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ga(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class NR{constructor(){this.queries=Xf(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,s){const r=Ee(n),i=r.queries;r.queries=Xf(),i.forEach((o,l)=>{for(const u of l.ya)u.onError(s)})})(this,new se(B.ABORTED,"Firestore shutting down"))}}function Xf(){return new Xs(t=>o_(t),Ga)}async function $_(t,e){const n=Ee(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.wa()&&e.Sa()&&(s=2):(i=new DR,s=e.Sa()?0:1);try{switch(s){case 0:i.pa=await n.onListen(r,!0);break;case 1:i.pa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Dc(o,`Initialization of query '${ur(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.ya.push(e),e.Da(n.onlineState),i.pa&&e.va(i.pa)&&Nc(n)}async function B_(t,e){const n=Ee(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.ya.indexOf(e);o>=0&&(i.ya.splice(o,1),i.ya.length===0?r=e.Sa()?0:1:!i.wa()&&e.Sa()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function OR(t,e){const n=Ee(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.ya)l.va(r)&&(s=!0);o.pa=r}}s&&Nc(n)}function MR(t,e,n){const s=Ee(t),r=s.queries.get(e);if(r)for(const i of r.ya)i.onError(n);s.queries.delete(e)}function Nc(t){t.ba.forEach(e=>{e.next()})}var Su,Zf;(Zf=Su||(Su={})).Ca="default",Zf.Cache="cache";class j_{constructor(e,n,s){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=s||{}}va(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Dr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const s=n!=="Offline";return(!this.options.La||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=Dr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Su.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){this.key=e}}class H_{constructor(e){this.key=e}}class LR{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Se(),this.mutatedKeys=Se(),this.Ha=a_(e),this.Ja=new Er(this.Ha)}get Ya(){return this.Ga}Za(e,n){const s=n?n.Xa:new Jf,r=n?n.Ja:this.Ja;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,p)=>{const g=r.get(d),_=Wa(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),E=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let C=!1;g&&_?g.data.isEqual(_.data)?b!==E&&(s.track({type:3,doc:_}),C=!0):this.eu(g,_)||(s.track({type:2,doc:_}),C=!0,(u&&this.Ha(_,u)>0||c&&this.Ha(_,c)<0)&&(l=!0)):!g&&_?(s.track({type:0,doc:_}),C=!0):g&&!_&&(s.track({type:1,doc:g}),C=!0,(u||c)&&(l=!0)),C&&(_?(o=o.add(_),i=E?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{Ja:o,Xa:s,Cs:l,mutatedKeys:i}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((d,p)=>function(_,b){const E=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Vt:C})}};return E(_)-E(b)}(d.type,p.type)||this.Ha(d.doc,p.doc)),this.tu(s),r=r!=null&&r;const l=n&&!r?this.nu():[],u=this.ja.size===0&&this.current&&!r?1:0,c=u!==this.za;return this.za=u,o.length!==0||c?{snapshot:new Dr(this.query,e.Ja,i,o,e.mutatedKeys,u===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),ru:l}:{ru:l}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Jf,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Se(),this.Ja.forEach(s=>{this.iu(s.key)&&(this.ja=this.ja.add(s.key))});const n=[];return e.forEach(s=>{this.ja.has(s)||n.push(new H_(s))}),this.ja.forEach(s=>{e.has(s)||n.push(new q_(s))}),n}su(e){this.Ga=e.$s,this.ja=Se();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return Dr.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Oc="SyncEngine";class UR{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class FR{constructor(e){this.key=e,this._u=!1}}class $R{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new Xs(l=>o_(l),Ga),this.cu=new Map,this.lu=new Set,this.hu=new Ge(ce.comparator),this.Pu=new Map,this.Tu=new Ic,this.Iu={},this.Eu=new Map,this.du=Vr.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function BR(t,e,n=!0){const s=Y_(t);let r;const i=s.uu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.ou()):r=await K_(s,e,n,!0),r}async function jR(t,e){const n=Y_(t);await K_(n,e,!0,!1)}async function K_(t,e,n,s){const r=await lR(t.localStore,An(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await qR(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&N_(t.remoteStore,r),l}async function qR(t,e,n,s,r){t.Ru=(p,g,_)=>async function(E,C,P,T){let V=C.view.Za(P);V.Cs&&(V=await Kf(E.localStore,C.query,!1).then(({documents:R})=>C.view.Za(R,V)));const M=T&&T.targetChanges.get(C.targetId),oe=T&&T.targetMismatches.get(C.targetId)!=null,de=C.view.applyChanges(V,E.isPrimaryClient,M,oe);return tp(E,C.targetId,de.ru),de.snapshot}(t,p,g,_);const i=await Kf(t.localStore,e,!0),o=new LR(e,i.$s),l=o.Za(i.documents),u=to.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),c=o.applyChanges(l,t.isPrimaryClient,u);tp(t,n,c.ru);const d=new UR(e,n,o);return t.uu.set(e,d),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),c.snapshot}async function HR(t,e,n){const s=Ee(t),r=s.uu.get(e),i=s.cu.get(r.targetId);if(i.length>1)return s.cu.set(r.targetId,i.filter(o=>!Ga(o,e))),void s.uu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Au(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Cc(s.remoteStore,r.targetId),Cu(s,r.targetId)}).catch(Fr)):(Cu(s,r.targetId),await Au(s.localStore,r.targetId,!0))}async function KR(t,e){const n=Ee(t),s=n.uu.get(e),r=n.cu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Cc(n.remoteStore,s.targetId))}async function zR(t,e,n){const s=ZR(t);try{const r=await function(o,l){const u=Ee(o),c=rt.now(),d=l.reduce((_,b)=>_.add(b.key),Se());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let b=Gn(),E=Se();return u.Bs.getEntries(_,d).next(C=>{b=C,b.forEach((P,T)=>{T.isValidDocument()||(E=E.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,b)).next(C=>{p=C;const P=[];for(const T of l){const V=l1(T,p.get(T.key).overlayedDocument);V!=null&&P.push(new xs(T.key,V,Xg(V.value.mapValue),tn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,P,l)}).next(C=>{g=C;const P=C.applyToLocalDocumentSet(p,E);return u.documentOverlayCache.saveOverlays(_,C.batchId,P)})}).then(()=>({batchId:g.batchId,changes:u_(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,u){let c=o.Iu[o.currentUser.toKey()];c||(c=new Ge(Ie)),c=c.insert(l,u),o.Iu[o.currentUser.toKey()]=c}(s,r.batchId,n),await so(s,r.changes),await el(s.remoteStore)}catch(r){const i=Dc(r,"Failed to persist write");n.reject(i)}}async function z_(t,e){const n=Ee(t);try{const s=await iR(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Pu.get(i);o&&(Oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o._u=!0:r.modifiedDocuments.size>0?Oe(o._u,14607):r.removedDocuments.size>0&&(Oe(o._u,42227),o._u=!1))}),await so(n,s,e)}catch(s){await Fr(s)}}function ep(t,e,n){const s=Ee(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.uu.forEach((i,o)=>{const l=o.view.Da(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const u=Ee(o);u.onlineState=l;let c=!1;u.queries.forEach((d,p)=>{for(const g of p.ya)g.Da(l)&&(c=!0)}),c&&Nc(u)}(s.eventManager,e),r.length&&s.au.j_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function GR(t,e,n){const s=Ee(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Pu.get(e),i=r&&r.key;if(i){let o=new Ge(ce.comparator);o=o.insert(i,Rt.newNoDocument(i,be.min()));const l=Se().add(i),u=new Ja(be.min(),new Map,new Ge(Ie),o,l);await z_(s,u),s.hu=s.hu.remove(i),s.Pu.delete(e),Mc(s)}else await Au(s.localStore,e,!1).then(()=>Cu(s,e,n)).catch(Fr)}async function WR(t,e){const n=Ee(t),s=e.batch.batchId;try{const r=await rR(n.localStore,e);W_(n,s,null),G_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await so(n,r)}catch(r){await Fr(r)}}async function QR(t,e,n){const s=Ee(t);try{const r=await function(o,l){const u=Ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(p=>(Oe(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(s.localStore,e);W_(s,e,n),G_(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await so(s,r)}catch(r){await Fr(r)}}function G_(t,e){(t.Eu.get(e)||[]).forEach(n=>{n.resolve()}),t.Eu.delete(e)}function W_(t,e,n){const s=Ee(t);let r=s.Iu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Iu[s.currentUser.toKey()]=r}}function Cu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.cu.get(e))t.uu.delete(s),n&&t.au.Vu(s,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(s=>{t.Tu.containsKey(s)||Q_(t,s)})}function Q_(t,e){t.lu.delete(e.path.canonicalString());const n=t.hu.get(e);n!==null&&(Cc(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),Mc(t))}function tp(t,e,n){for(const s of n)s instanceof q_?(t.Tu.addReference(s.key,e),YR(t,s)):s instanceof H_?(ne(Oc,"Document no longer in limbo: "+s.key),t.Tu.removeReference(s.key,e),t.Tu.containsKey(s.key)||Q_(t,s.key)):ge(19791,{mu:s})}function YR(t,e){const n=e.key,s=n.path.canonicalString();t.hu.get(n)||t.lu.has(s)||(ne(Oc,"New document in limbo: "+n),t.lu.add(s),Mc(t))}function Mc(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const n=new ce(qe.fromString(e)),s=t.du.next();t.Pu.set(s,new FR(n)),t.hu=t.hu.insert(n,s),N_(t.remoteStore,new hs(An(yc(n.path)),s,"TargetPurposeLimboResolution",Ha.le))}}async function so(t,e,n){const s=Ee(t),r=[],i=[],o=[];s.uu.isEmpty()||(s.uu.forEach((l,u)=>{o.push(s.Ru(u,e,n).then(c=>{var d;if((c||n)&&s.isPrimaryClient){const p=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;s.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){r.push(c);const p=Rc.Rs(u.targetId,c);i.push(p)}}))}),await Promise.all(o),s.au.j_(r),await async function(u,c){const d=Ee(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>j.forEach(c,g=>j.forEach(g.ds,_=>d.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>j.forEach(g.As,_=>d.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!$r(p))throw p;ne(Sc,"Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const _=d.xs.get(g),b=_.snapshotVersion,E=_.withLastLimboFreeSnapshotVersion(b);d.xs=d.xs.insert(g,E)}}}(s.localStore,i))}async function JR(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){ne(Oc,"User change. New user:",e.toKey());const s=await k_(n.localStore,e);n.currentUser=e,function(i,o){i.Eu.forEach(l=>{l.forEach(u=>{u.reject(new se(B.CANCELLED,o))})}),i.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await so(n,s.ks)}}function XR(t,e){const n=Ee(t),s=n.Pu.get(e);if(s&&s._u)return Se().add(s.key);{let r=Se();const i=n.cu.get(e);if(!i)return r;for(const o of i){const l=n.uu.get(o);r=r.unionWith(l.view.Ya)}return r}}function Y_(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=z_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GR.bind(null,e),e.au.j_=OR.bind(null,e.eventManager),e.au.Vu=MR.bind(null,e.eventManager),e}function ZR(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QR.bind(null,e),e}class Ta{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xa(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return sR(this.persistence,new eR,e.initialUser,this.serializer)}yu(e){return new P_(Ac.fi,this.serializer)}pu(e){return new cR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ta.provider={build:()=>new Ta};class eS extends Ta{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){Oe(this.persistence.referenceDelegate instanceof Ea,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new F1(s,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new P_(s=>Ea.fi(s,n),this.serializer)}}class Pu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ep(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=JR.bind(null,this.syncEngine),await VR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NR}()}createDatastore(e){const n=Xa(e.databaseInfo.databaseId),s=function(i){return new mR(i)}(e.databaseInfo);return function(i,o,l,u){return new vR(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,l){return new ER(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>ep(this.syncEngine,n,0),function(){return Wf.C()?new Wf:new dR}())}createSyncEngine(e,n){return function(r,i,o,l,u,c,d){const p=new $R(r,i,o,l,u,c);return d&&(p.Au=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=Ee(r);ne(Qs,"RemoteStore shutting down."),i.Ta.add(5),await no(i),i.Ea.shutdown(),i.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Pu.provider={build:()=>new Pu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class tS{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=It.UNAUTHENTICATED,this.clientId=jg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ne(Cs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ne(Cs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Dc(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function zl(t,e){t.asyncQueue.verifyOperationInProgress(),ne(Cs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await k_(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function np(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nS(t);ne(Cs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Yf(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>Yf(e.remoteStore,r)),t._onlineComponents=e}async function nS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne(Cs,"Using user provided OfflineComponentProvider");try{await zl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===B.FAILED_PRECONDITION||r.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Cr("Error using user provided cache. Falling back to memory cache: "+n),await zl(t,new Ta)}}else ne(Cs,"Using default OfflineComponentProvider"),await zl(t,new eS(void 0));return t._offlineComponents}async function X_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne(Cs,"Using user provided OnlineComponentProvider"),await np(t,t._uninitializedComponentsProvider._online)):(ne(Cs,"Using default OnlineComponentProvider"),await np(t,new Pu))),t._onlineComponents}function sS(t){return X_(t).then(e=>e.syncEngine)}async function Z_(t){const e=await X_(t),n=e.eventManager;return n.onListen=BR.bind(null,e.syncEngine),n.onUnlisten=HR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KR.bind(null,e.syncEngine),n}function rS(t,e,n={}){const s=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,c){const d=new J_({next:g=>{d.Cu(),o.enqueueAndForget(()=>B_(i,p));const _=g.docs.has(l);!_&&g.fromCache?c.reject(new se(B.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?c.reject(new se(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new j_(yc(l.path),d,{includeMetadataChanges:!0,La:!0});return $_(i,p)}(await Z_(t),t.asyncQueue,e,n,s)),s.promise}function iS(t,e,n={}){const s=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,c){const d=new J_({next:g=>{d.Cu(),o.enqueueAndForget(()=>B_(i,p)),g.fromCache&&u.source==="server"?c.reject(new se(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new j_(l,d,{includeMetadataChanges:!0,La:!0});return $_(i,p)}(await Z_(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t,e,n){if(!n)throw new se(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oS(t,e,n,s){if(e===!0&&s===!0)throw new se(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rp(t){if(!ce.isDocumentKey(t))throw new se(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ip(t){if(ce.isDocumentKey(t))throw new se(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function mn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tl(t);throw new se(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="firestore.googleapis.com",op=!0;class ap{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new se(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ny,this.ssl=op}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:op;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=C_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L1)throw new se(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ey((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new se(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new se(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new se(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nl{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ap({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ap(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new pA;switch(s.type){case"firstParty":return new yA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new se(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=sp.get(n);s&&(ne("ComponentProvider","Removing Datastore"),sp.delete(n),s.terminate())}(this),Promise.resolve()}}function aS(t,e,n,s={}){var r;t=mn(t,nl);const i=zi(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(Km(`https://${u}`),zm("Firestore",!0)),o.host!==ny&&o.host!==u&&Cr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:s});if(!Hs(c,l)&&(t._setSettings(c),s.mockUserToken)){let d,p;if(typeof s.mockUserToken=="string")d=s.mockUserToken,p=It.MOCK_USER;else{d=Rw(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new se(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new It(g)}t._authCredentials=new mA(new $g(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class Ot{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}}class vs extends Vs{constructor(e,n,s){super(e,n,yc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new ce(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function Ae(t,e,...n){if(t=ut(t),ty("collection","path",e),t instanceof nl){const s=qe.fromString(e,...n);return ip(s),new vs(t,null,s)}{if(!(t instanceof Ot||t instanceof vs))throw new se(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(qe.fromString(e,...n));return ip(s),new vs(t.firestore,null,s)}}function nt(t,e,...n){if(t=ut(t),arguments.length===1&&(e=jg.newId()),ty("doc","path",e),t instanceof nl){const s=qe.fromString(e,...n);return rp(s),new Ot(t,null,new ce(s))}{if(!(t instanceof Ot||t instanceof vs))throw new se(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(qe.fromString(e,...n));return rp(s),new Ot(t.firestore,t instanceof vs?t.converter:null,new ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="AsyncQueue";class up{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new V_(this,"async_queue_retry"),this.ec=()=>{const s=Kl();s&&ne(lp,"Visibility state changed to "+s.visibilityState),this.C_.p_()},this.tc=e;const n=Kl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=Kl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new Bn;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!$r(e))throw e;ne(lp,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(s=>{throw this.Ju=s,this.Yu=!1,zn("INTERNAL UNHANDLED ERROR: ",cp(s)),s}).then(s=>(this.Yu=!1,s))));return this.tc=n,n}enqueueAfterDelay(e,n,s){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const r=Vc.createAndSchedule(this,e,n,s,i=>this.oc(i));return this.Hu.push(r),r}nc(){this.Ju&&ge(47125,{_c:cp(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function cp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class er extends nl{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new up,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new up(e),this._firestoreClient=void 0,await e}}}function lS(t,e){const n=typeof t=="object"?t:Ym(),s=typeof t=="string"?t:pa,r=ec(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=Iw("firestore");i&&aS(r,...i)}return r}function Lc(t){if(t._terminated)throw new se(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uS(t),t._firestoreClient}function uS(t){var e,n,s;const r=t._freezeSettings(),i=function(l,u,c,d){return new DA(l,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ey(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new tS(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nr(yt.fromBase64String(e))}catch(n){throw new se(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nr(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=/^__.*__$/;class dS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new eo(e,this.data,n,this.fieldTransforms)}}class sy{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ry(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{hc:t})}}class Bc{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Bc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tc({path:s,Ec:!1});return r.dc(e),r}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tc({path:s,Ec:!1});return r.Pc(),r}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Ia(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(ry(this.hc)&&cS.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class hS{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Xa(e)}gc(e,n,s,r=!1){return new Bc({hc:e,methodName:n,fc:s,path:_t.emptyPath(),Ec:!1,mc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rl(t){const e=t._freezeSettings(),n=Xa(t._databaseId);return new hS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iy(t,e,n,s,r,i={}){const o=t.gc(i.merge||i.mergeFields?2:0,e,n,r);jc("Data must be an object, but it was:",o,s);const l=oy(s,o);let u,c;if(i.merge)u=new zt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const g=ku(e,p,n);if(!o.contains(g))throw new se(B.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);ly(d,g)||d.push(g)}u=new zt(d),c=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=o.fieldTransforms;return new dS(new $t(l),u,c)}class il extends Uc{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof il}}function fS(t,e,n,s){const r=t.gc(1,e,n);jc("Data must be an object, but it was:",r,s);const i=[],o=$t.empty();ks(s,(u,c)=>{const d=qc(e,u,n);c=ut(c);const p=r.Ac(d);if(c instanceof il)i.push(d);else{const g=ro(c,p);g!=null&&(i.push(d),o.set(d,g))}});const l=new zt(i);return new sy(o,l,r.fieldTransforms)}function pS(t,e,n,s,r,i){const o=t.gc(1,e,n),l=[ku(e,s,n)],u=[r];if(i.length%2!=0)throw new se(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(ku(e,i[g])),u.push(i[g+1]);const c=[],d=$t.empty();for(let g=l.length-1;g>=0;--g)if(!ly(c,l[g])){const _=l[g];let b=u[g];b=ut(b);const E=o.Ac(_);if(b instanceof il)c.push(_);else{const C=ro(b,E);C!=null&&(c.push(_),d.set(_,C))}}const p=new zt(c);return new sy(d,p,o.fieldTransforms)}function mS(t,e,n,s=!1){return ro(n,t.gc(s?4:3,e))}function ro(t,e){if(ay(t=ut(t)))return jc("Unsupported field value:",e,t),oy(t,e);if(t instanceof Uc)return function(s,r){if(!ry(r.hc))throw r.Vc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Vc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let u=ro(l,r.Rc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=ut(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return n1(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=rt.fromDate(s);return{timestampValue:ba(r.serializer,i)}}if(s instanceof rt){const i=new rt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ba(r.serializer,i)}}if(s instanceof Fc)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Nr)return{bytesValue:E_(r.serializer,s._byteString)};if(s instanceof Ot){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Tc(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof $c)return function(o,l){return{mapValue:{fields:{[Yg]:{stringValue:Jg},[ma]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Vc("VectorValues must only contain numeric values.");return vc(l.serializer,c)})}}}}}}(s,r);throw r.Vc(`Unsupported field value: ${tl(s)}`)}(t,e)}function oy(t,e){const n={};return Hg(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(t,(s,r)=>{const i=ro(r,e.Ic(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function ay(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof Fc||t instanceof Nr||t instanceof Ot||t instanceof Uc||t instanceof $c)}function jc(t,e,n){if(!ay(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=tl(n);throw s==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+s)}}function ku(t,e,n){if((e=ut(e))instanceof sl)return e._internalPath;if(typeof e=="string")return qc(t,e);throw Ia("Field path arguments must be of type string or ",t,!1,void 0,n)}const gS=new RegExp("[~\\*/\\[\\]]");function qc(t,e,n){if(e.search(gS)>=0)throw Ia(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sl(...e.split("."))._internalPath}catch{throw Ia(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ia(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${s}`),o&&(u+=` in document ${r}`),u+=")"),new se(B.INVALID_ARGUMENT,l+t+u)}function ly(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _S(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ol("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _S extends uy{data(){return super.data()}}function ol(t,e){return typeof e=="string"?qc(t,e):e instanceof sl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hc{}class Kc extends Hc{}function Gt(t,e,...n){let s=[];e instanceof Hc&&s.push(e),s=s.concat(n),function(i){const o=i.filter(u=>u instanceof zc).length,l=i.filter(u=>u instanceof al).length;if(o>1||o>0&&l>0)throw new se(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class al extends Kc{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new al(e,n,s)}_apply(e){const n=this._parse(e);return hy(e._query,n),new Vs(e.firestore,e.converter,bu(e._query,n))}_parse(e){const n=rl(e.firestore);return function(i,o,l,u,c,d,p){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new se(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){hp(p,d);const b=[];for(const E of p)b.push(dp(u,i,E));g={arrayValue:{values:b}}}else g=dp(u,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||hp(p,d),g=mS(l,o,p,d==="in"||d==="not-in");return Ze.create(c,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function at(t,e,n){const s=e,r=ol("where",t);return al._create(r,s,n)}class zc extends Hc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zc(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:pn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const u of l)hy(o,u),o=bu(o,u)}(e._query,n),new Vs(e.firestore,e.converter,bu(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gc extends Kc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gc(e,n)}_apply(e){const n=function(r,i,o){if(r.startAt!==null)throw new se(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new se(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $i(i,o)}(e._query,this._field,this._direction);return new Vs(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Br(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function cy(t,e="asc"){const n=e,s=ol("orderBy",t);return Gc._create(s,n)}class Wc extends Kc{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Wc(e,n,s)}_apply(e){return new Vs(e.firestore,e.converter,_a(e._query,this._limit,this._limitType))}}function dy(t){return Wc._create("limit",t,"F")}function dp(t,e,n){if(typeof(n=ut(n))=="string"){if(n==="")throw new se(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i_(e)&&n.indexOf("/")!==-1)throw new se(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(qe.fromString(n));if(!ce.isDocumentKey(s))throw new se(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Rf(t,new ce(s))}if(n instanceof Ot)return Rf(t,n._key);throw new se(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tl(n)}.`)}function hp(t,e){if(!Array.isArray(t)||t.length===0)throw new se(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hy(t,e){const n=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class vS{convertValue(e,n="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ks(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[ma].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>Je(o.doubleValue));return new $c(i)}convertGeoPoint(e){return new Fc(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=za(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Li(e));default:return null}}convertTimestamp(e){const n=Is(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=qe.fromString(e);Oe(S_(s),9688,{name:e});const r=new Ui(s.get(1),s.get(3)),i=new ce(s.popFirst(5));return r.isEqual(n)||zn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t,e,n){let s;return s=t?t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class py extends uy{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ol("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Wo extends py{data(e={}){return super.data(e)}}class bS{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new di(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Wo(this._firestore,this._userDataWriter,s.key,s,new di(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const u=new Wo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new di(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Wo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new di(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,d=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:ES(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ES(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t){t=mn(t,Ot);const e=mn(t.firestore,er);return rS(Lc(e),t._key).then(n=>wS(e,t,n))}class my extends vS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function Fe(t){t=mn(t,Vs);const e=mn(t.firestore,er),n=Lc(e),s=new my(e);return yS(t._query),iS(n,t._query).then(r=>new bS(e,s,t,r))}function gy(t,e,n){t=mn(t,Ot);const s=mn(t.firestore,er),r=fy(t.converter,e);return ll(s,[iy(rl(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,tn.none())])}function oo(t,e,n,...s){t=mn(t,Ot);const r=mn(t.firestore,er),i=rl(r);let o;return o=typeof(e=ut(e))=="string"||e instanceof sl?pS(i,"updateDoc",t._key,e,n,s):fS(i,"updateDoc",t._key,e),ll(r,[o.toMutation(t._key,tn.exists(!0))])}function Ys(t){return ll(mn(t.firestore,er),[new bc(t._key,tn.none())])}function gn(t,e){const n=mn(t.firestore,er),s=nt(t),r=fy(t.converter,e);return ll(n,[iy(rl(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,tn.exists(!1))]).then(()=>s)}function ll(t,e){return function(s,r){const i=new Bn;return s.asyncQueue.enqueueAndForget(async()=>zR(await sS(s),r,i)),i.promise}(Lc(t),e)}function wS(t,e,n){const s=n.docs.get(e._key),r=new my(t);return new py(t,r,e._key,s,new di(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Ur=r})(Mr),Sr(new Ks("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new er(new gA(s.getProvider("auth-internal")),new vA(o,s.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new se(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ui(c.options.projectId,d)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),_s(pf,mf,e),_s(pf,mf,"esm2017")})();var TS="firebase",IS="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s(TS,IS,"app");const AS={apiKey:"AIzaSyBQbijFIV0LEavSNMxaa46b43ZkCCr6OK4",authDomain:"akyildiz-yonetim.firebaseapp.com",projectId:"akyildiz-yonetim",storageBucket:"akyildiz-yonetim.firebasestorage.app",messagingSenderId:"1049267525895",appId:"1:1049267525895:web:bff98aec91ad8fd69ecda2",measurementId:"G-921KP8N3WW"},_y=Qm(AS),le=lS(_y),Aa=Zi(_y),RS=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},SS={class:"relative bg-gray-800 py-6 border-b border-gray-700 text-center shadow text-white"},CS={key:0,class:"absolute top-4 right-6"},PS={class:"text-sm font-medium text-gray-200 hover:text-white"},kS={key:0,class:"absolute right-0 mt-2 w-40 bg-white text-gray-800 shadow-lg rounded z-10 transition duration-200 ease-out transform origin-top-right scale-95"},xS={__name:"Header",setup(t){const e=G(null),n=Lm(),s=Zi(),r=G(!1);Bt(()=>{document.addEventListener("click",o),uc(s,async c=>{if(c){const d=await io(nt(le,"users",c.uid));d.exists()&&(e.value=d.data())}})}),Yp(()=>{document.removeEventListener("click",o)});const i=async()=>{await nI(s),n.push("/login")},o=c=>{const d=document.querySelector(".relative");d&&!d.contains(c.target)&&(r.value=!1)},l=()=>{r.value=!r.value},u=async()=>{const c=s.currentUser;c&&(await lc(s,c.email),alert("Şifre sıfırlama bağlantısı e-posta adresinize gönderildi."))};return(c,d)=>(H(),Q("header",SS,[d[1]||(d[1]=h("div",null,[h("h1",{class:"text-4xl font-cormorant"},"AKYILDIZ İŞ MERKEZİ"),h("p",{class:"text-3xl font-cormorantSC"},"Yönetim Sistemi")],-1)),e.value?(H(),Q("div",CS,[h("div",{class:"relative",onClick:l},[h("button",PS,[mt(z(e.value.firstName)+" "+z(e.value.lastName)+" ",1),d[0]||(d[0]=h("span",{class:"ml-1"},"▼",-1))]),r.value?(H(),Q("div",kS,[h("button",{onClick:u,class:"block w-full px-4 py-2 text-left hover:bg-gray-100"}," Şifre Değiştir "),h("button",{onClick:i,class:"block w-full px-4 py-2 text-left hover:bg-gray-100"}," Çıkış Yap ")])):He("",!0)])])):He("",!0)]))}},VS=RS(xS,[["__scopeId","data-v-26c1cd77"]]),DS={__name:"TabMenu",setup(t){const e=G([]),n=G(""),s=G({}),r=Zi();return Bt(()=>{uc(r,async i=>{if(i){const o=await io(nt(le,"users",i.uid));if(o.exists()){const l=o.data();n.value=l.role,s.value={name:`${l.firstName} ${l.lastName}`,email:l.email,role:l.role},l.role==="admin"?e.value=[{label:"📊 Özet",value:"dashboard",route:"/dashboard"},{label:"🏢 Kiracılar",value:"tenants",route:"/tenants"},{label:"💸 Ödemeler",value:"payments",route:"/payments"},{label:"📉 Yönetim Giderleri",value:"expenses",route:"/expenses"},{label:"⚙️ Sayaçlar",value:"utilities",route:"/utilities"},{label:"🛠️ Yönetim",value:"admin",route:"/admin"}]:l.role==="manager"?e.value=[{label:"📊 Özet",value:"dashboard",route:"/dashboard"},{label:"🏢 Kiracılar",value:"tenants",route:"/tenants"},{label:"💸 Ödemeler",value:"payments",route:"/payments"},{label:"📉 Yönetim Giderleri",value:"expenses",route:"/expenses"},{label:"⚙️ Sayaçlar",value:"utilities",route:"/utilities"}]:l.role==="tenant"&&(e.value=[{label:"👤 Profilim",value:"profile",route:"/profile"}])}}else e.value=[]})}),()=>{}}},NS={class:"min-h-screen bg-base-200"},OS={class:"max-w-6xl mx-auto bg-base-100 shadow-lg rounded-xl overflow-hidden"},MS={__name:"App",setup(t){const e=Um();return(n,s)=>{const r=Zp("router-view");return H(),Q("div",NS,[h("div",OS,[un(e).meta.hideLayout?He("",!0):(H(),Jt(VS,{key:0})),un(e).meta.hideLayout?He("",!0):(H(),Jt(DS,{key:1})),st(r,{class:"p-6"})])])}}},LS="modulepreload",US=function(t){return"/"+t},fp={},FS=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(u=>{if(u=US(u),u in fp)return;fp[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":LS,c||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),c)return new Promise((g,_)=>{p.addEventListener("load",g),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},$S={class:"min-h-screen bg-base-200 p-6"},BS={__name:"Dashboard",setup(t){return(e,n)=>(H(),Q("section",$S,n[0]||(n[0]=[Ab('<div class="max-w-6xl mx-auto space-y-8"><div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="card bg-base-100 shadow-md"><div class="card-body text-center"><h3 class="text-center text-sm text-base-content/70 font-medium uppercase tracking-wide">Kasa Bakiyesi</h3><p class="text-3xl font-bold text-green-600">₺12.450</p></div></div><div class="card bg-base-100 shadow-md"><div class="card-body text-center"><h3 class="text-center text-sm text-base-content/70 font-medium uppercase tracking-wide">Toplam Gelir</h3><p class="text-3xl font-bold text-blue-600">₺20.000</p></div></div><div class="card bg-base-100 shadow-md"><div class="card-body text-center"><h3 class="text-center text-sm text-base-content/70 font-medium uppercase tracking-wide">Toplam Gider</h3><p class="text-3xl font-bold text-red-600">₺7.550</p></div></div></div><div class="card bg-base-100 shadow-md"><div class="card-body"><h4 class="text-center text-lg font-semibold text-base-content mb-4">Son İşlemler</h4><div class="overflow-x-auto"><div class="overflow-x-auto rounded-lg border border-base-300"><table class="table table-zebra w-full text-sm"><thead><tr><th class="text-center">Tarih</th><th class="text-center">Açıklama</th><th class="text-center">Tutar</th></tr></thead><tbody><tr><td class="text-center">2024-05-25</td><td class="text-center">Elektrik Faturası</td><td class="text-center text-red-600 font-medium">-₺1.250</td></tr><tr><td class="text-center">2024-05-24</td><td class="text-center">Aidat Tahsilatı</td><td class="text-center text-green-600 font-medium">₺4.000</td></tr><tr><td class="text-center">2024-05-23</td><td class="text-center">Temizlik Gideri</td><td class="text-center text-red-600 font-medium">-₺800</td></tr></tbody></table></div></div></div></div></div>',1)])))}},jS={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},qS={class:"bg-base-200 dark:bg-gray-800 dark:text-gray-100 rounded-2xl shadow-2xl w-full max-w-2xl p-6 space-y-6 relative"},HS={class:"text-2xl font-bold text-center"},KS={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},zS={class:"card bg-base-100 dark:bg-gray-700 shadow-md border border-base-200 p-4 space-y-2"},GS={class:"card bg-base-100 dark:bg-gray-700 shadow-md border border-base-200 p-4 space-y-2"},WS={key:0,class:"overflow-x-auto"},QS={class:"table table-sm w-full border"},YS={key:1,class:"text-gray-500 dark:text-gray-400 italic"},JS={class:"flex justify-end gap-3"},yy={__name:"TenantSummary",props:{tenant:Object},setup(t){const e=t,n=G([]),s=G([]),r=G([]),i=G([]),o=G(0),l=G(0),u=G([]),c=async()=>{var V;if(!((V=e.tenant)!=null&&V.id))return;const p=Gt(Ae(le,"payments"),at("tenantId","==",e.tenant.id)),g=await Fe(p);n.value=g.docs.map(M=>M.data()),o.value=n.value.reduce((M,oe)=>M+(parseFloat(oe.amount)||0),0),u.value=n.value.sort((M,oe)=>new Date(oe.date)-new Date(M.date)).slice(0,5);const _=Gt(Ae(le,"expenses"),at("tenantId","==",e.tenant.id)),b=await Fe(_);s.value=b.docs.map(M=>M.data());const E=Gt(Ae(le,"readings"),at("tenantId","==",e.tenant.id)),C=await Fe(E);r.value=C.docs.map(M=>M.data());const P=Gt(Ae(le,"aidatRecords"),at("tenantId","==",e.tenant.id)),T=await Fe(P);i.value=T.docs.map(M=>M.data()),l.value=[...s.value,...r.value,...i.value].reduce((M,oe)=>{const de=parseFloat(oe.toplamTutar||oe.amount||0);return M+(isNaN(de)?0:de)},0)},d=Ye(()=>l.value-o.value);return ps(()=>{var p;return(p=e.tenant)==null?void 0:p.id},c,{immediate:!0}),(p,g)=>{const _=Zp("RouterLink");return H(),Q("div",jS,[h("div",qS,[h("button",{onClick:g[0]||(g[0]=b=>p.$emit("close")),class:"absolute top-2 right-2 btn btn-sm btn-circle btn-ghost"},"✕"),h("h2",HS,z(t.tenant.company)+" – Özet Bilgiler",1),h("div",KS,[h("div",zS,[h("p",null,[g[2]||(g[2]=h("span",{class:"font-semibold"},"👤 Ad Soyad:",-1)),mt(" "+z(t.tenant.firstName)+" "+z(t.tenant.lastName),1)]),h("p",null,[g[3]||(g[3]=h("span",{class:"font-semibold"},"📞 Telefon:",-1)),mt(" "+z(t.tenant.phone),1)]),h("p",null,[g[4]||(g[4]=h("span",{class:"font-semibold"},"✉️ E-posta:",-1)),mt(" "+z(t.tenant.email),1)]),h("p",null,[g[5]||(g[5]=h("span",{class:"font-semibold"},"🏢 Kat:",-1)),h("span",null,z(Array.isArray(t.tenant.units)?t.tenant.units.join(", "):t.tenant.unit),1)])]),h("div",GS,[h("p",null,[g[6]||(g[6]=h("span",{class:"font-semibold text-green-600 dark:text-green-400"},"💰 Toplam Ödeme:",-1)),mt(" "+z(Number(o.value).toLocaleString("tr-TR"))+" ₺",1)]),h("p",null,[g[7]||(g[7]=h("span",{class:"font-semibold text-red-600 dark:text-red-400"},"📉 Toplam Borç:",-1)),mt(" "+z(Number(l.value).toLocaleString("tr-TR"))+" ₺",1)]),h("p",null,[g[8]||(g[8]=h("span",{class:"font-semibold text-blue-600 dark:text-blue-400"},"🧾 Kalan Bakiye:",-1)),mt(" "+z(Number(d.value).toLocaleString("tr-TR"))+" ₺",1)])])]),h("div",null,[g[10]||(g[10]=h("h3",{class:"text-lg font-semibold mb-2"},"🕑 Son 5 Ödeme",-1)),u.value.length?(H(),Q("div",WS,[h("table",QS,[g[9]||(g[9]=h("thead",null,[h("tr",null,[h("th",null,"Tarih"),h("th",null,"Tutar (₺)"),h("th",null,"Tip")])],-1)),h("tbody",null,[(H(!0),Q(Me,null,et(u.value,(b,E)=>(H(),Q("tr",{key:E},[h("td",null,z(b.date),1),h("td",null,z(Number(b.amount).toLocaleString("tr-TR")),1),h("td",null,z(b.type),1)]))),128))])])])):(H(),Q("p",YS,"Henüz ödeme bulunmuyor."))]),h("div",JS,[st(_,{to:`/tenant/${t.tenant.id}`,class:"btn btn-info btn-sm"},{default:Kp(()=>g[11]||(g[11]=[mt("Detay Sayfa")])),_:1,__:[11]},8,["to"]),h("button",{onClick:g[1]||(g[1]=b=>p.$emit("close")),class:"btn btn-outline btn-secondary btn-sm"},"Kapat")])])])}}},XS=Object.freeze(Object.defineProperty({__proto__:null,default:yy},Symbol.toStringTag,{value:"Module"})),ZS=["open"],eC={key:0,class:"modal-box max-w-2xl"},tC={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nC={class:"md:col-span-2"},sC={class:"md:col-span-2"},rC={class:"flex flex-wrap gap-3"},iC=["value","disabled"],oC={class:"md:col-span-2 flex items-center gap-2"},aC={class:"modal-action mt-6"},lC={__name:"TenantEditModal",props:{tenant:Object,unitOptions:Array,visible:Boolean,allTenants:Array},emits:["save","close"],setup(t,{emit:e}){const n=t,s=o=>n.allTenants.some(l=>{var u;return l.id!==n.tenant.id&&l.isActive&&((u=l.units)==null?void 0:u.includes(o))}),r=e,i=()=>{r("save")};return(o,l)=>{const u=em("mask");return H(),Q("dialog",{id:"editTenantModal",class:"modal",open:t.visible},[t.tenant?(H(),Q("div",eC,[l[16]||(l[16]=h("h3",{class:"font-bold text-lg mb-4"},"Kiracı Bilgilerini Güncelle",-1)),h("form",{onSubmit:lt(i,["prevent"])},[h("div",tC,[h("div",null,[l[8]||(l[8]=h("label",{class:"label font-semibold"},"Ad",-1)),re(h("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>t.tenant.firstName=c),class:"input input-bordered w-full",required:""},null,512),[[he,t.tenant.firstName]])]),h("div",null,[l[9]||(l[9]=h("label",{class:"label font-semibold"},"Soyad",-1)),re(h("input",{"onUpdate:modelValue":l[1]||(l[1]=c=>t.tenant.lastName=c),class:"input input-bordered w-full",required:""},null,512),[[he,t.tenant.lastName]])]),h("div",null,[l[10]||(l[10]=h("label",{class:"label font-semibold"},"Telefon",-1)),re(h("input",{"onUpdate:modelValue":l[2]||(l[2]=c=>t.tenant.phone=c),class:"input input-bordered w-full",required:""},null,512),[[u,"+90 (###) ### ## ##"],[he,t.tenant.phone]])]),h("div",null,[l[11]||(l[11]=h("label",{class:"label font-semibold"},"E-posta",-1)),re(h("input",{type:"email","onUpdate:modelValue":l[3]||(l[3]=c=>t.tenant.email=c),class:"input input-bordered w-full"},null,512),[[he,t.tenant.email]])]),h("div",nC,[l[12]||(l[12]=h("label",{class:"label font-semibold"},"Şirket Unvanı",-1)),re(h("input",{"onUpdate:modelValue":l[4]||(l[4]=c=>t.tenant.company=c),class:"input input-bordered w-full",required:""},null,512),[[he,t.tenant.company]])]),h("div",sC,[l[13]||(l[13]=h("label",{class:"label font-semibold"},"Katlar",-1)),h("div",rC,[(H(!0),Q(Me,null,et(t.unitOptions,c=>(H(),Q("label",{key:c,class:"flex items-center gap-2"},[re(h("input",{type:"checkbox",value:c,"onUpdate:modelValue":l[5]||(l[5]=d=>t.tenant.units=d),disabled:s(c)},null,8,iC),[[Tr,t.tenant.units]]),h("span",{class:an(s(c)?"text-gray-400 line-through":"")},z(c),3)]))),128))])]),h("div",oC,[re(h("input",{type:"checkbox","onUpdate:modelValue":l[6]||(l[6]=c=>t.tenant.isActive=c),class:"toggle toggle-success"},null,512),[[Tr,t.tenant.isActive]]),l[14]||(l[14]=h("label",{class:"label font-semibold"},"Aktif",-1))])]),h("div",aC,[l[15]||(l[15]=h("button",{type:"submit",class:"btn btn-success"},"Kaydet",-1)),h("button",{type:"button",onClick:l[7]||(l[7]=c=>o.$emit("close")),class:"btn btn-ghost"},"Kapat")])],32)])):He("",!0)],8,ZS)}}},uC=["open"],cC={class:"modal-box max-w-2xl p-0 overflow-hidden"},dC={class:"px-6 overflow-y-auto max-h-[70vh]"},hC={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fC={class:"md:col-span-2"},pC={class:"md:col-span-2"},mC={class:"flex flex-wrap gap-3"},gC=["value","disabled"],_C={class:"md:col-span-2"},yC={class:"md:col-span-2 flex items-center gap-2"},vC={class:"modal-action px-6 pb-6 pt-4 border-t"},bC={__name:"TenantCreateModal",props:{visible:Boolean,unitOptions:Array,allTenants:Array},emits:["save","close"],setup(t,{emit:e}){const n=t,s=e,r=()=>({firstName:"",lastName:"",phone:"",email:"",company:"",units:[],entryDate:new Date().toISOString().slice(0,10),isActive:!0}),i=G(r());ps(()=>n.visible,u=>{u&&(i.value=r())});const o=u=>n.allTenants.some(c=>{var d;return c.isActive&&((d=c.units)==null?void 0:d.includes(u))}),l=()=>{s("save",i.value),i.value=r()};return(u,c)=>{const d=em("mask");return H(),Q("dialog",{id:"createTenantModal",class:"modal",open:t.visible},[h("div",cC,[c[18]||(c[18]=h("div",{class:"px-6 pt-6"},[h("h3",{class:"font-bold text-lg mb-4"},"Yeni Kiracı Ekle")],-1)),h("div",dC,[h("form",{onSubmit:lt(l,["prevent"]),id:"tenantForm"},[h("div",hC,[h("div",null,[c[9]||(c[9]=h("label",{class:"label font-semibold"},"Ad",-1)),re(h("input",{"onUpdate:modelValue":c[0]||(c[0]=p=>i.value.firstName=p),class:"input input-bordered w-full",required:""},null,512),[[he,i.value.firstName]])]),h("div",null,[c[10]||(c[10]=h("label",{class:"label font-semibold"},"Soyad",-1)),re(h("input",{"onUpdate:modelValue":c[1]||(c[1]=p=>i.value.lastName=p),class:"input input-bordered w-full",required:""},null,512),[[he,i.value.lastName]])]),h("div",null,[c[11]||(c[11]=h("label",{class:"label font-semibold"},"Telefon",-1)),re(h("input",{"onUpdate:modelValue":c[2]||(c[2]=p=>i.value.phone=p),class:"input input-bordered w-full",required:""},null,512),[[d,"+90 (###) ### ## ##"],[he,i.value.phone]])]),h("div",null,[c[12]||(c[12]=h("label",{class:"label font-semibold"},"E-posta",-1)),re(h("input",{type:"email","onUpdate:modelValue":c[3]||(c[3]=p=>i.value.email=p),class:"input input-bordered w-full"},null,512),[[he,i.value.email]])]),h("div",fC,[c[13]||(c[13]=h("label",{class:"label font-semibold"},"Şirket Unvanı",-1)),re(h("input",{"onUpdate:modelValue":c[4]||(c[4]=p=>i.value.company=p),class:"input input-bordered w-full",required:""},null,512),[[he,i.value.company]])]),h("div",pC,[c[14]||(c[14]=h("label",{class:"label font-semibold"},"Katlar",-1)),h("div",mC,[(H(!0),Q(Me,null,et(t.unitOptions,p=>(H(),Q("label",{key:p,class:"flex items-center gap-2"},[re(h("input",{type:"checkbox",value:p,"onUpdate:modelValue":c[5]||(c[5]=g=>i.value.units=g),disabled:o(p)},null,8,gC),[[Tr,i.value.units]]),h("span",{class:an(o(p)?"text-gray-400 line-through":"")},z(p),3)]))),128))])]),h("div",_C,[c[15]||(c[15]=h("label",{class:"label font-semibold"},"Giriş Tarihi",-1)),re(h("input",{type:"date","onUpdate:modelValue":c[6]||(c[6]=p=>i.value.entryDate=p),class:"input input-bordered w-full",required:""},null,512),[[he,i.value.entryDate]])]),h("div",yC,[re(h("input",{type:"checkbox","onUpdate:modelValue":c[7]||(c[7]=p=>i.value.isActive=p),class:"toggle toggle-success"},null,512),[[Tr,i.value.isActive]]),c[16]||(c[16]=h("label",{class:"label font-semibold"},"Aktif",-1))])])],32)]),h("div",vC,[c[17]||(c[17]=h("button",{form:"tenantForm",type:"submit",class:"btn btn-success"},"Kaydet",-1)),h("button",{type:"button",onClick:c[8]||(c[8]=p=>u.$emit("close")),class:"btn btn-ghost"},"İptal")])])],8,uC)}}},pp=["-3. Kat ve -4. Kat","-1. Kat","Zemin Kat A","Zemin Kat B","1. Kat","2. Kat A","2. Kat B","3. Kat","4. Kat","5. Kat","6. Kat","7. Kat"],EC=["open"],wC={class:"modal-box max-w-md"},TC={class:"py-4"},IC={class:"modal-action"},AC={__name:"ConfirmDeleteModal",props:{tenant:Object,visible:Boolean},emits:["confirm","close"],setup(t){return(e,n)=>{var s,r;return H(),Q("dialog",{id:"deleteConfirmModal",class:"modal",open:t.visible},[h("div",wC,[n[3]||(n[3]=h("h3",{class:"font-bold text-lg"},"Silme Onayı",-1)),h("p",TC,[h("strong",null,z((s=t.tenant)==null?void 0:s.firstName)+" "+z((r=t.tenant)==null?void 0:r.lastName),1),n[2]||(n[2]=mt(" isimli kiracıyı silmek istediğinize emin misiniz? "))]),h("div",IC,[h("button",{class:"btn btn-error",onClick:n[0]||(n[0]=i=>e.$emit("confirm"))},"Evet, Sil"),h("button",{class:"btn",onClick:n[1]||(n[1]=i=>e.$emit("cancel"))},"İptal")])])],8,EC)}}},RC={class:"p-4 space-y-6 max-w-5xl mx-auto"},SC={class:"flex justify-end"},CC={class:"card bg-base-100 shadow-lg border border-base-300 p-6 rounded-xl"},PC={class:"overflow-x-auto"},kC={class:"flex gap-2 justify-end mb-4"},xC={class:"table table-zebra w-full text-sm"},VC={class:"text-center"},DC={class:"text-center"},NC={class:"text-center"},OC={class:"text-center"},MC={class:"text-center whitespace-nowrap"},LC={class:"text-center"},UC={class:"text-center"},FC={class:"text-center"},$C={class:"dropdown dropdown-end"},BC={class:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-36"},jC=["onClick"],qC=["onClick"],HC=["onClick"],KC={__name:"Tenants",setup(t){const e=G([]),n=G(null),s=G(!1),r=G(!1),i=G(!1),o=G("all"),l=G(!1),u=G(null),c=T=>{u.value=T,l.value=!0},d=async()=>{await Ys(nt(le,"tenants",u.value.id)),e.value=e.value.filter(T=>T.id!==u.value.id),l.value=!1},p=async()=>{e.value=[],(await Fe(Ae(le,"tenants"))).forEach(V=>{e.value.push({id:V.id,...V.data()})})},g=Ye(()=>o.value==="active"?e.value.filter(T=>T.isActive):o.value==="passive"?e.value.filter(T=>!T.isActive):e.value),_=T=>{if(!T)return"";const V=T.replace(/\D/g,"");return V.length===11&&V.startsWith("0")?`+90 (${V.slice(1,4)}) ${V.slice(4,7)} ${V.slice(7,9)} ${V.slice(9,11)}`:T},b=async T=>{await gn(Ae(le,"tenants"),{...T}),p(),showCreateModal.value=!1},E=T=>{n.value={...T},r.value=!0},C=async()=>{var T;if((T=n.value)!=null&&T.id){const V=nt(le,"tenants",n.value.id);await oo(V,{...n.value}),p(),r.value=!1}},P=T=>{n.value=T,s.value=!0};return Bt(p),(T,V)=>(H(),Q("section",RC,[h("div",SC,[h("button",{class:"btn btn-primary",onClick:V[0]||(V[0]=M=>i.value=!0)},"Yeni Kiracı Ekle")]),h("div",CC,[V[10]||(V[10]=h("h3",{class:"text-center text-lg font-semibold mb-4"},"Kiracılar",-1)),h("div",PC,[h("div",kC,[h("button",{class:an(["btn btn-sm",{"btn-primary":o.value==="all"}]),onClick:V[1]||(V[1]=M=>o.value="all")},"Tümü",2),h("button",{class:an(["btn btn-sm",{"btn-success":o.value==="active"}]),onClick:V[2]||(V[2]=M=>o.value="active")},"Aktif",2),h("button",{class:an(["btn btn-sm",{"btn-error":o.value==="passive"}]),onClick:V[3]||(V[3]=M=>o.value="passive")},"Pasif",2)]),h("table",xC,[V[9]||(V[9]=h("thead",null,[h("tr",null,[h("th",{class:"text-center"},"Kat(lar)"),h("th",{class:"text-center"},"Şirket"),h("th",{class:"text-center"},"Ad"),h("th",{class:"text-center"},"Soyad"),h("th",{class:"text-center"},"Telefon"),h("th",{class:"text-center"},"E-posta"),h("th",{class:"text-center"},"Giriş Tarihi"),h("th",{class:"text-center"},"İşlem")])],-1)),h("tbody",null,[(H(!0),Q(Me,null,et(g.value,(M,oe)=>{var de;return H(),Q("tr",{key:oe},[h("td",VC,z((de=M.units)==null?void 0:de.join(", ")),1),h("td",DC,z(M.company),1),h("td",NC,z(M.firstName),1),h("td",OC,z(M.lastName),1),h("td",MC,z(_(M.phone)),1),h("td",LC,z(M.email),1),h("td",UC,z(M.entryDate),1),h("td",FC,[h("div",$C,[V[8]||(V[8]=h("div",{tabindex:"0",role:"button",class:"btn btn-sm m-1"},"İşlem",-1)),h("ul",BC,[h("li",null,[h("button",{onClick:lt(R=>E(M),["stop","prevent"])},"Düzenle",8,jC)]),h("li",null,[h("button",{onClick:lt(R=>P(M),["stop","prevent"])},"Özet",8,qC)]),h("li",null,[h("button",{onClick:lt(R=>c(M),["stop","prevent"]),class:"text-error"},"Sil",8,HC)])])])])])}),128))])])])]),s.value?(H(),Jt(yy,{key:0,tenant:n.value,onClose:V[4]||(V[4]=M=>s.value=!1)},null,8,["tenant"])):He("",!0),st(lC,{tenant:n.value,visible:r.value,"unit-options":un(pp),"all-tenants":e.value,onSave:C,onClose:V[5]||(V[5]=M=>r.value=!1)},null,8,["tenant","visible","unit-options","all-tenants"]),st(bC,{visible:i.value,"unit-options":un(pp),"all-tenants":e.value,onSave:b,onClose:V[6]||(V[6]=M=>i.value=!1)},null,8,["visible","unit-options","all-tenants"]),st(AC,{visible:l.value,tenant:u.value,onConfirm:d,onCancel:V[7]||(V[7]=M=>l.value=!1)},null,8,["visible","tenant"])]))}},zC={class:"p-4 space-y-6 max-w-5xl mx-auto"},GC={class:"card bg-base-100 shadow-lg border border-base-300 p-6 rounded-xl"},WC={class:"text-center text-lg font-semibold mb-4"},QC=["value"],YC=["value"],JC={class:"md:col-span-3 flex justify-end gap-2"},XC={type:"submit",class:"btn btn-success"},ZC={class:"card bg-base-100 shadow-lg border border-base-300 p-6 rounded-xl"},eP={class:"overflow-x-auto"},tP={class:"table table-zebra w-full text-sm"},nP={class:"text-center"},sP={class:"text-center"},rP={class:"text-center text-green-600"},iP={class:"text-center"},oP={class:"text-center"},aP={class:"text-center"},lP={class:"flex justify-center gap-2"},uP=["onClick"],cP=["onClick"],dP={__name:"Payments",setup(t){const e=G([]),n=G([]),s=G(["Ziraat","İş Bankası","Garanti","Yapı Kredi","Halkbank"]),r=G({date:new Date().toISOString().substring(0,10),tenantId:"",amount:null,type:"",bank:""}),i=G(!1),o=G(null),l=async()=>{e.value=[],(await Fe(Ae(le,"payments"))).forEach(E=>{e.value.push({id:E.id,...E.data()})})},u=async()=>{n.value=[],(await Fe(Ae(le,"tenants"))).forEach(E=>{n.value.push({id:E.id,...E.data()})})},c=b=>{const E=n.value.find(C=>C.id===b);return E?E.company:"Bilinmiyor"},d=async()=>{if(i.value&&o.value){const b=nt(le,"payments",o.value);await oo(b,{...r.value})}else await gn(Ae(le,"payments"),{...r.value});r.value={date:new Date().toISOString().substring(0,10),tenantId:"",amount:null,type:"",bank:""},i.value=!1,o.value=null,await l()},p=async b=>{await Ys(nt(le,"payments",b)),e.value=e.value.filter(E=>E.id!==b)},g=b=>{r.value={date:b.date,tenantId:b.tenantId,amount:b.amount,type:b.type,bank:b.bank},o.value=b.id,i.value=!0},_=()=>{r.value={date:new Date().toISOString().substring(0,10),tenantId:"",amount:null,type:"",bank:""},i.value=!1,o.value=null};return Bt(()=>{u(),l()}),(b,E)=>(H(),Q("section",zC,[h("div",GC,[h("h2",WC,"Ödeme "+z(i.value?"Güncelle":"Ekle"),1),h("form",{onSubmit:lt(d,["prevent"]),class:"grid grid-cols-1 md:grid-cols-3 gap-4"},[re(h("input",{"onUpdate:modelValue":E[0]||(E[0]=C=>r.value.date=C),type:"date",class:"input input-bordered w-full",required:""},null,512),[[he,r.value.date]]),re(h("select",{"onUpdate:modelValue":E[1]||(E[1]=C=>r.value.tenantId=C),class:"select select-bordered w-full",required:""},[E[5]||(E[5]=h("option",{disabled:"",value:""},"Kiracı seçin",-1)),(H(!0),Q(Me,null,et(n.value,C=>(H(),Q("option",{key:C.id,value:C.id},z(C.company),9,QC))),128))],512),[[dn,r.value.tenantId]]),re(h("input",{"onUpdate:modelValue":E[2]||(E[2]=C=>r.value.amount=C),type:"number",placeholder:"Tutar (₺)",class:"input input-bordered w-full",required:""},null,512),[[he,r.value.amount,void 0,{number:!0}]]),re(h("select",{"onUpdate:modelValue":E[3]||(E[3]=C=>r.value.type=C),class:"select select-bordered w-full",required:""},E[6]||(E[6]=[h("option",{disabled:"",value:""},"Ödeme Tipi",-1),h("option",{value:"Aidat"},"Aidat",-1),h("option",{value:"Elektrik"},"Elektrik",-1),h("option",{value:"Su"},"Su",-1)]),512),[[dn,r.value.type]]),re(h("select",{"onUpdate:modelValue":E[4]||(E[4]=C=>r.value.bank=C),class:"select select-bordered w-full",required:""},[E[7]||(E[7]=h("option",{disabled:"",value:""},"Banka Seçin",-1)),(H(!0),Q(Me,null,et(s.value,C=>(H(),Q("option",{key:C,value:C},z(C),9,YC))),128))],512),[[dn,r.value.bank]]),h("div",JC,[h("button",XC,z(i.value?"Kaydet":"Ekle"),1),i.value?(H(),Q("button",{key:0,type:"button",onClick:_,class:"btn btn-outline btn-warning"},"Vazgeç")):He("",!0)])],32)]),h("div",ZC,[E[9]||(E[9]=h("h3",{class:"text-center text-lg font-semibold mb-4"},"Ödeme Geçmişi",-1)),h("div",eP,[h("table",tP,[E[8]||(E[8]=h("thead",null,[h("tr",null,[h("th",{class:"text-center"},"Tarih"),h("th",{class:"text-center"},"Firma"),h("th",{class:"text-center"},"Tutar"),h("th",{class:"text-center"},"Tip"),h("th",{class:"text-center"},"Banka"),h("th",{class:"text-center"},"İşlem")])],-1)),h("tbody",null,[(H(!0),Q(Me,null,et(e.value,(C,P)=>(H(),Q("tr",{key:P},[h("td",nP,z(C.date),1),h("td",sP,z(c(C.tenantId)),1),h("td",rP,z(C.amount)+" ₺",1),h("td",iP,z(C.type),1),h("td",oP,z(C.bank),1),h("td",aP,[h("div",lP,[h("button",{onClick:T=>g(C),class:"btn btn-xs btn-info"},"Düzenle",8,uP),h("button",{onClick:T=>p(C.id),class:"btn btn-xs btn-error"},"Sil",8,cP)])])]))),128))])])])])]))}},hP={class:"p-4 space-y-6 max-w-5xl mx-auto"},fP={class:"card bg-base-100 shadow-lg border border-base-300 p-6 rounded-xl"},pP={class:"form-control md:col-span-1"},mP=["value"],gP={class:"form-control md:col-span-1"},_P={class:"form-control md:col-span-1"},yP={class:"form-control md:col-span-3"},vP={class:"md:col-span-3 flex justify-end gap-2 pt-2"},bP={type:"submit",class:"btn btn-primary"},EP={class:"card bg-base-100 shadow-lg border border-base-300 p-6 rounded-xl"},wP={class:"overflow-x-auto rounded-lg border border-base-300"},TP={class:"table table-zebra w-full text-sm"},IP={class:"text-center"},AP={class:"text-center"},RP={class:"text-center text-red-600 font-medium"},SP={class:"text-center"},CP={class:"text-center"},PP={class:"dropdown dropdown-end"},kP={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-32"},xP=["onClick"],VP=["onClick"],DP={__name:"Expenses",setup(t){const e=["Elektrik (Genel)","Su (Genel)","Maaş","Vergi","Bakım","Temizlik","Yönetici Ücreti","Diğer"],n=new Date().toISOString().substr(0,10),s=G({date:n,description:"",amount:"",type:""}),r=G(!1),i=G(null),o=G([]),l=_=>_==null||isNaN(_)?"-":Number(_).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),u=_=>{s.value={date:_.date,description:_.description,amount:_.amount,type:_.type},i.value=_.id,r.value=!0},c=()=>{s.value={date:n,description:"",amount:"",type:""},r.value=!1,i.value=null},d=async _=>{try{await Ys(nt(le,"expenses",_)),o.value=o.value.filter(b=>b.id!==_)}catch(b){console.error("Silme işlemi başarısız:",b)}},p=async()=>{try{if(r.value&&i.value){const _=nt(le,"expenses",i.value);await oo(_,{...s.value})}else await gn(Ae(le,"expenses"),{...s.value});c(),await g(),alert("Gider başarıyla kaydedildi.")}catch(_){console.error("Kayıt hatası:",_)}},g=async()=>{o.value=[],(await Fe(Ae(le,"expenses"))).forEach(b=>{o.value.push({id:b.id,...b.data()})})};return Bt(()=>{g()}),(_,b)=>(H(),Q("section",hP,[h("div",fP,[b[9]||(b[9]=h("h2",{class:"text-center text-lg font-semibold text-base-content mb-4"},"Gider Ekle",-1)),h("form",{onSubmit:lt(p,["prevent"]),class:"grid grid-cols-1 md:grid-cols-3 gap-4"},[h("div",pP,[b[5]||(b[5]=h("label",{class:"label font-semibold"},"Gider Tipi",-1)),re(h("select",{"onUpdate:modelValue":b[0]||(b[0]=E=>s.value.type=E),class:"select select-bordered w-full",required:""},[b[4]||(b[4]=h("option",{disabled:"",value:""},"Seçiniz",-1)),(H(),Q(Me,null,et(e,E=>h("option",{key:E,value:E},z(E),9,mP)),64))],512),[[dn,s.value.type]])]),h("div",gP,[b[6]||(b[6]=h("label",{class:"label font-semibold"},"Tarih",-1)),re(h("input",{"onUpdate:modelValue":b[1]||(b[1]=E=>s.value.date=E),type:"date",class:"input input-bordered w-full",required:""},null,512),[[he,s.value.date]])]),h("div",_P,[b[7]||(b[7]=h("label",{class:"label font-semibold"},"Tutar (₺)",-1)),re(h("input",{"onUpdate:modelValue":b[2]||(b[2]=E=>s.value.amount=E),type:"number",min:"0",step:"0.01",class:"input input-bordered w-full",required:""},null,512),[[he,s.value.amount]])]),h("div",yP,[b[8]||(b[8]=h("label",{class:"label font-semibold"},"Açıklama",-1)),re(h("input",{"onUpdate:modelValue":b[3]||(b[3]=E=>s.value.description=E),placeholder:"Açıklama giriniz",class:"input input-bordered w-full",required:""},null,512),[[he,s.value.description]])]),h("div",vP,[h("button",bP,z(r.value?"Kaydet":"Ekle"),1),r.value?(H(),Q("button",{key:0,type:"button",onClick:c,class:"btn btn-outline btn-warning"},"Vazgeç")):He("",!0)])],32)]),h("div",EP,[b[12]||(b[12]=h("h3",{class:"text-center text-lg font-semibold text-base-content mb-4"},"Gider Listesi",-1)),h("div",wP,[h("table",TP,[b[11]||(b[11]=h("thead",null,[h("tr",null,[h("th",{class:"text-center"},"Tarih"),h("th",{class:"text-center"},"Açıklama"),h("th",{class:"text-center"},"Tutar"),h("th",{class:"text-center"},"Tip"),h("th",{class:"text-center"},"İşlem")])],-1)),h("tbody",null,[(H(!0),Q(Me,null,et(o.value,(E,C)=>(H(),Q("tr",{key:C},[h("td",IP,z(E.date),1),h("td",AP,z(E.description),1),h("td",RP,z(l(E.amount)),1),h("td",SP,z(E.type),1),h("td",CP,[h("div",PP,[b[10]||(b[10]=h("label",{tabindex:"0",class:"btn btn-xs btn-outline"},"İşlemler",-1)),h("ul",kP,[h("li",null,[h("a",{onClick:lt(P=>u(E),["prevent"])},"Düzenle",8,xP)]),h("li",null,[h("a",{onClick:lt(P=>d(E.id),["prevent"])},"Sil",8,VP)])])])])]))),128))])])])])]))}},NP={id:"electricityModal",class:"modal",open:""},OP={class:"modal-box max-w-6xl"},MP={class:"form-control w-48 mt-4"},LP={class:"flex flex-wrap gap-4 mt-2"},UP={class:"form-control"},FP={class:"form-control"},$P={class:"form-control"},BP={class:"form-control"},jP=["value"],qP={class:"overflow-x-auto mt-6"},HP={class:"table w-full border"},KP=["onUpdate:modelValue","onInput"],zP=["onUpdate:modelValue","onInput"],GP=["onUpdate:modelValue","onInput"],WP=["value"],QP={class:"modal-action flex justify-between"},YP={__name:"ElectricityModal",setup(t){const e=G(new Date().toISOString().slice(0,7)),n=G([]),s=G(""),r=G(""),i=G(""),o=Ye(()=>{if(!s.value||!r.value)return 0;const _=new Date(s.value),E=new Date(r.value)-_;return Math.floor(E/(1e3*60*60*24))}),l=_=>{const b=n.value[_],E=Number(b.kdvHaric)*.2;b.toplamTutar=+(Number(b.kdvHaric)+E).toFixed(2)},u=async()=>{const _=await Fe(Ae(le,"tenants"));n.value=[];const b=new Set,E=[{tenantId:"mescit",unit:"MESCİT",company:"MESCİT"},{tenantId:"ortak",unit:"ORTAK ALAN",company:"ORTAK ALAN"}];for(const C of E){const P=await c(C.unit);n.value.push({...C,previous:P,current:0,usage:0,kdvHaric:0,toplamTutar:0}),b.add(C.unit)}_.forEach(C=>{const P=C.data();if(P.isActive)for(const T of P.units||[])b.has(T)||(b.add(T),c(T).then(V=>{n.value.push({tenantId:C.id,unit:T,company:P.company,previous:V,current:0,usage:0,kdvHaric:0,toplamTutar:0})}))})},c=async _=>{const b=Gt(Ae(le,"readings"),at("unit","==",_),at("type","==","electricity"),cy("endDate","desc"),dy(1)),E=await Fe(b);return E.empty?0:E.docs[0].data().currentValue||0},d=_=>{const b=n.value[_];b.usage=b.current-b.previous,l(_)},p=async()=>{const _=Ae(le,"readings");for(const b of n.value)await gn(_,{tenantId:b.tenantId,unit:b.unit,period:e.value,type:"electricity",previousValue:b.previous,currentValue:b.current,consumption:b.usage,kdvHaric:b.kdvHaric,toplamTutar:b.toplamTutar,company:b.company,startDate:s.value,endDate:r.value,dueDate:i.value,dayCount:o.value});alert("Tüm elektrik sayaç kayıtları eklendi."),n.value=[],u()},g=async()=>{const _=Ae(le,"readings"),b=n.value.filter(E=>E.current>0);for(const E of b)await gn(_,{tenantId:E.tenantId,unit:E.unit,period:e.value,type:"electricity",previousValue:E.previous,currentValue:E.current,consumption:E.usage,kdvHaric:E.kdvHaric,toplamTutar:E.toplamTutar,company:E.company,startDate:s.value,endDate:r.value,dueDate:i.value,dayCount:o.value});alert("Girilen elektrik kayıtları başarıyla eklendi."),u()};return Bt(u),(_,b)=>(H(),Q("dialog",NP,[h("div",OP,[b[11]||(b[11]=h("h3",{class:"font-bold text-lg"},"Elektrik Sayaç Girişi",-1)),h("div",MP,[b[5]||(b[5]=h("label",{class:"label"},[h("span",{class:"label-text font-semibold"},"Dönem")],-1)),re(h("input",{type:"month","onUpdate:modelValue":b[0]||(b[0]=E=>e.value=E),class:"input input-bordered"},null,512),[[he,e.value]])]),h("div",LP,[h("div",UP,[b[6]||(b[6]=h("label",{class:"label"},[h("span",{class:"label-text font-semibold"},"İlk Okuma Tarihi")],-1)),re(h("input",{type:"date","onUpdate:modelValue":b[1]||(b[1]=E=>s.value=E),class:"input input-bordered"},null,512),[[he,s.value]])]),h("div",FP,[b[7]||(b[7]=h("label",{class:"label"},[h("span",{class:"label-text font-semibold"},"Son Okuma Tarihi")],-1)),re(h("input",{type:"date","onUpdate:modelValue":b[2]||(b[2]=E=>r.value=E),class:"input input-bordered"},null,512),[[he,r.value]])]),h("div",$P,[b[8]||(b[8]=h("label",{class:"label"},[h("span",{class:"label-text font-semibold"},"Son Ödeme Tarihi")],-1)),re(h("input",{type:"date","onUpdate:modelValue":b[3]||(b[3]=E=>i.value=E),class:"input input-bordered"},null,512),[[he,i.value]])]),h("div",BP,[b[9]||(b[9]=h("label",{class:"label"},[h("span",{class:"label-text font-semibold"},"Gün Sayısı")],-1)),h("input",{type:"number",value:o.value,disabled:"",class:"input input-bordered"},null,8,jP)])]),h("div",qP,[h("table",HP,[b[10]||(b[10]=h("thead",null,[h("tr",null,[h("th",null,"Kat"),h("th",null,"Şirket"),h("th",null,"Önceki Sayaç"),h("th",null,"Yeni Sayaç"),h("th",null,"Tüketim"),h("th",null,"KDV Hariç Tutar"),h("th",null,"Toplam Tutar")])],-1)),h("tbody",null,[(H(!0),Q(Me,null,et(n.value,(E,C)=>(H(),Q("tr",{key:C},[h("td",null,z(E.unit),1),h("td",null,z(E.company),1),h("td",null,[re(h("input",{type:"number",class:"input input-bordered w-24","onUpdate:modelValue":P=>E.previous=P,onInput:P=>d(C)},null,40,KP),[[he,E.previous,void 0,{number:!0}]])]),h("td",null,[re(h("input",{type:"number",class:"input input-bordered w-24","onUpdate:modelValue":P=>E.current=P,onInput:P=>d(C)},null,40,zP),[[he,E.current,void 0,{number:!0}]])]),h("td",null,z(E.usage),1),h("td",null,[re(h("input",{type:"number",class:"input input-bordered w-28","onUpdate:modelValue":P=>E.kdvHaric=P,onInput:P=>l(C)},null,40,GP),[[he,E.kdvHaric,void 0,{number:!0}]])]),h("td",null,[h("input",{type:"number",class:"input input-bordered w-28 bg-base-200",value:E.toplamTutar,disabled:""},null,8,WP)])]))),128))])])]),h("div",QP,[h("div",{class:"space-x-2"},[h("button",{class:"btn btn-success",onClick:g},"Girilenleri Kaydet"),h("button",{class:"btn btn-primary",onClick:p},"Tümünü Kaydet")]),h("button",{class:"btn",onClick:b[4]||(b[4]=E=>_.$emit("close"))},"Kapat")])])]))}},JP={id:"waterModal",class:"modal",open:""},XP={class:"modal-box max-w-6xl"},ZP={class:"form-control w-48 mt-4"},ek={class:"flex flex-wrap gap-4 mt-2"},tk={class:"form-control"},nk={class:"form-control"},sk={class:"form-control"},rk={class:"form-control"},ik=["value"],ok={class:"flex gap-4 mt-4"},ak={class:"form-control w-60"},lk={class:"form-control w-60"},uk={class:"overflow-x-auto mt-6"},ck={class:"table w-full border"},dk=["onUpdate:modelValue","onInput"],hk=["onUpdate:modelValue","onInput"],fk={class:"modal-action flex justify-between"},pk={__name:"WaterModal",setup(t){const e=G([]),n=G([]),s=G(new Date().toISOString().slice(0,7)),r=G(""),i=G(""),o=G(""),l=G(0),u=G(0),c=Ye(()=>{if(!r.value||!i.value)return 0;const C=new Date(r.value),T=new Date(i.value)-C;return Math.floor(T/(1e3*60*60*24))}),d=C=>C==null||isNaN(C)?"0.00":Number(C).toFixed(2),p=async C=>{const P=Gt(Ae(le,"readings"),at("unit","==",C),at("type","==","water"),cy("endDate","desc"),dy(1)),T=await Fe(P);return T.empty?0:T.docs[0].data().currentValue||0},g=async()=>{const C=await Fe(Ae(le,"tenants"));e.value=[],n.value=[];const P=[{tenantId:"ortak",unit:"ORTAK ALAN",name:"ORTAK ALAN"},{tenantId:"mescit",unit:"MESCİT",name:"MESCİT"}];for(const T of P){const V=await p(T.unit);n.value.push({...T,previous:V,current:0,usage:0,kdvHaric:0,kdvDahil:0})}C.forEach(async T=>{const V=T.data();if(V.isActive)for(const M of V.units||[]){const oe=await p(M);n.value.push({tenantId:T.id,unit:M,name:V.company,previous:oe,current:0,usage:0,kdvHaric:0,kdvDahil:0})}})},_=C=>{const P=n.value[C];P.usage=P.current-P.previous;const T=l.value,V=u.value,M=P.usage*(T+V),oe=P.usage*T*.01,de=P.usage*V*.1;P.kdvHaric=M,P.kdvDahil=M+oe+de,P.toplamTutar=P.kdvDahil};ps([l,u],()=>{n.value.forEach((C,P)=>_(P))});const b=async()=>{if(!r.value||!i.value||c.value<=0){alert("Lütfen geçerli bir tarih aralığı seçin.");return}const C=Ae(le,"readings");for(const P of n.value)await gn(C,{tenantId:P.tenantId,unit:P.unit,period:s.value,type:"water",previousValue:P.previous,currentValue:P.current,usage:P.usage,kdvHaric:P.kdvHaric,kdvDahil:P.kdvDahil,startDate:r.value,endDate:i.value,dueDate:o.value,dayCount:c.value,waterUnitPrice:l.value,wasteUnitPrice:u.value});alert("Tüm kayıtlar başarıyla eklendi."),n.value=[],g()},E=async()=>{if(!r.value||!i.value||c.value<=0){alert("Lütfen geçerli bir tarih aralığı seçin.");return}const C=Ae(le,"readings"),P=n.value.filter(T=>T.previous>=0&&T.current>T.previous);for(const T of P)await gn(C,{tenantId:T.tenantId,unit:T.unit,period:s.value,type:"water",previousValue:T.previous,currentValue:T.current,usage:T.usage,kdvHaric:T.kdvHaric,kdvDahil:T.kdvDahil,startDate:r.value,endDate:i.value,dueDate:o.value,dayCount:c.value,waterUnitPrice:l.value,wasteUnitPrice:u.value});alert("Girilen kayıtlar başarıyla eklendi."),g()};return Bt(g),(C,P)=>(H(),Q("dialog",JP,[h("div",XP,[P[15]||(P[15]=h("h3",{class:"font-bold text-lg"},"Su Sayaç Girişi",-1)),h("div",ZP,[P[7]||(P[7]=h("label",{class:"label font-semibold"},"Dönem",-1)),re(h("input",{type:"month","onUpdate:modelValue":P[0]||(P[0]=T=>s.value=T),class:"input input-bordered"},null,512),[[he,s.value]])]),h("div",ek,[h("div",tk,[P[8]||(P[8]=h("label",{class:"label font-semibold"},"Başlangıç Tarihi",-1)),re(h("input",{type:"date","onUpdate:modelValue":P[1]||(P[1]=T=>r.value=T),class:"input input-bordered"},null,512),[[he,r.value]])]),h("div",nk,[P[9]||(P[9]=h("label",{class:"label font-semibold"},"Bitiş Tarihi",-1)),re(h("input",{type:"date","onUpdate:modelValue":P[2]||(P[2]=T=>i.value=T),class:"input input-bordered"},null,512),[[he,i.value]])]),h("div",sk,[P[10]||(P[10]=h("label",{class:"label font-semibold"},"Son Ödeme Tarihi",-1)),re(h("input",{type:"date","onUpdate:modelValue":P[3]||(P[3]=T=>o.value=T),class:"input input-bordered"},null,512),[[he,o.value]])]),h("div",rk,[P[11]||(P[11]=h("label",{class:"label font-semibold"},"Gün Sayısı",-1)),h("input",{type:"number",value:c.value,disabled:"",class:"input input-bordered"},null,8,ik)])]),h("div",ok,[h("div",ak,[P[12]||(P[12]=h("label",{class:"label font-semibold"},"Su Birim Fiyatı (₺)",-1)),re(h("input",{type:"number","onUpdate:modelValue":P[4]||(P[4]=T=>l.value=T),class:"input input-bordered",step:"0.01"},null,512),[[he,l.value,void 0,{number:!0}]])]),h("div",lk,[P[13]||(P[13]=h("label",{class:"label font-semibold"},"Atık Su Birim Fiyatı (₺)",-1)),re(h("input",{type:"number","onUpdate:modelValue":P[5]||(P[5]=T=>u.value=T),class:"input input-bordered",step:"0.01"},null,512),[[he,u.value,void 0,{number:!0}]])])]),h("div",uk,[h("table",ck,[P[14]||(P[14]=h("thead",null,[h("tr",null,[h("th",null,"Kat"),h("th",null,"Şirket"),h("th",null,"Önceki Sayaç"),h("th",null,"Yeni Sayaç"),h("th",null,"Tüketim"),h("th",null,"KDV Hariç"),h("th",null,"KDV Dahil")])],-1)),h("tbody",null,[(H(!0),Q(Me,null,et(n.value,(T,V)=>(H(),Q("tr",{key:V},[h("td",null,z(T.unit),1),h("td",null,z(T.name),1),h("td",null,[re(h("input",{type:"number",class:"input input-bordered w-24","onUpdate:modelValue":M=>T.previous=M,onInput:M=>_(V)},null,40,dk),[[he,T.previous,void 0,{number:!0}]])]),h("td",null,[re(h("input",{type:"number",class:"input input-bordered w-24","onUpdate:modelValue":M=>T.current=M,onInput:M=>_(V)},null,40,hk),[[he,T.current,void 0,{number:!0}]])]),h("td",null,z(d(T.usage)),1),h("td",null,z(d(T.kdvHaric)),1),h("td",null,z(d(T.kdvDahil)),1)]))),128))])])]),h("div",fk,[h("div",{class:"space-x-2"},[h("button",{class:"btn btn-success",onClick:E},"Girilenleri Kaydet"),h("button",{class:"btn btn-primary",onClick:b},"Tümünü Kaydet")]),h("button",{class:"btn",onClick:P[6]||(P[6]=T=>C.$emit("close"))},"Kapat")])])]))}},mk={open:"",class:"modal"},gk={class:"modal-box max-w-xl"},_k={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yk={class:"form-control"},vk={class:"form-control"},bk={__name:"AidatModal",emits:["close","refresh"],setup(t,{emit:e}){const n=e,s=G(""),r=G(""),i=()=>{n("close")},o=async()=>{try{if(!s.value||!r.value){alert("Lütfen dönem ve son ödeme tarihini giriniz.");return}const l=parseInt(s.value.slice(0,4)),u=await Fe(Gt(Ae(le,"annualDues"),at("year","==",l))),c=[];if(u.forEach(d=>{const p=d.data();p.amount>0&&c.push({tenantId:p.tenantId,unit:p.unit,kdvHaric:p.amount,toplamTutar:p.vatIncludedAmount})}),c.length===0){alert("Bu yıla ait tanımlı aidat bilgisi bulunamadı.");return}for(const d of c)await gn(Ae(le,"aidatRecords"),{tenantId:d.tenantId,unit:d.unit,period:s.value,dueDate:r.value,kdvHaric:d.kdvHaric,toplamTutar:d.toplamTutar,type:"aidat",createdAt:new Date});alert("Aidatlar başarıyla oluşturuldu."),n("refresh"),n("close")}catch(l){console.error("Aidat kayıt hatası:",l),alert("Bir hata oluştu. Konsolu kontrol ediniz.")}};return(l,u)=>(H(),Q("dialog",mk,[h("div",gk,[u[5]||(u[5]=h("h3",{class:"font-bold text-lg mb-6 text-center"},"Aidat Oluştur",-1)),h("form",{onSubmit:lt(o,["prevent"]),class:"space-y-4"},[h("div",_k,[h("div",yk,[u[2]||(u[2]=h("label",{class:"label font-semibold"},"Dönem",-1)),re(h("input",{type:"month","onUpdate:modelValue":u[0]||(u[0]=c=>s.value=c),class:"input input-bordered w-full",required:""},null,512),[[he,s.value]])]),h("div",vk,[u[3]||(u[3]=h("label",{class:"label font-semibold"},"Son Ödeme Tarihi",-1)),re(h("input",{type:"date","onUpdate:modelValue":u[1]||(u[1]=c=>r.value=c),class:"input input-bordered w-full",required:""},null,512),[[he,r.value]])])]),h("div",{class:"flex justify-end mt-6"},[h("button",{type:"button",class:"btn btn-outline mr-2",onClick:i},"İptal"),u[4]||(u[4]=h("button",{type:"submit",class:"btn btn-primary"},"Oluştur",-1))])],32)])]))}},Ek={open:"",class:"modal"},wk={class:"modal-box max-w-2xl"},Tk={class:"form-control mb-4"},Ik=["value"],Ak={class:"form-control mb-4"},Rk=["value"],Sk={class:"form-control mb-4"},Ck={class:"form-control mb-4"},Pk={class:"form-control mb-4"},kk={class:"text-sm text-gray-500 mb-2"},xk={class:"text-sm text-gray-500 mb-4"},Vk={class:"modal-action"},Dk={__name:"EditElectricityModal",props:{record:Object},emits:["close","updated"],setup(t,{emit:e}){const n=t,s=e,r=G({previousValue:0,currentValue:0,kdvHaric:0});ps(()=>n.record,l=>{l&&(r.value.previousValue=l.previousValue??0,r.value.currentValue=l.currentValue??0,r.value.kdvHaric=l.kdvHaric??0)},{immediate:!0});const i=l=>isNaN(l)?"-":l.toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),o=async()=>{const l=r.value.currentValue-r.value.previousValue,u=+(r.value.kdvHaric*1.2).toFixed(2),c=nt(le,"readings",n.record.id);await oo(c,{previousValue:r.value.previousValue,currentValue:r.value.currentValue,consumption:l,kdvHaric:r.value.kdvHaric,toplamTutar:u,kdvDahil:u}),alert("Kayıt güncellendi."),s("updated"),s("close")};return(l,u)=>(H(),Q("dialog",Ek,[h("div",wk,[u[9]||(u[9]=h("h3",{class:"font-bold text-lg mb-4"},"Elektrik Kaydı Düzenle",-1)),h("div",Tk,[u[4]||(u[4]=h("label",{class:"label font-semibold"},"Kat",-1)),h("input",{type:"text",class:"input input-bordered",value:t.record.unit,disabled:""},null,8,Ik)]),h("div",Ak,[u[5]||(u[5]=h("label",{class:"label font-semibold"},"Şirket",-1)),h("input",{type:"text",class:"input input-bordered",value:t.record.tenantName||"-",disabled:""},null,8,Rk)]),h("div",Sk,[u[6]||(u[6]=h("label",{class:"label font-semibold"},"Önceki Endeks",-1)),re(h("input",{type:"number","onUpdate:modelValue":u[0]||(u[0]=c=>r.value.previousValue=c),class:"input input-bordered"},null,512),[[he,r.value.previousValue,void 0,{number:!0}]])]),h("div",Ck,[u[7]||(u[7]=h("label",{class:"label font-semibold"},"Yeni Endeks",-1)),re(h("input",{type:"number","onUpdate:modelValue":u[1]||(u[1]=c=>r.value.currentValue=c),class:"input input-bordered"},null,512),[[he,r.value.currentValue,void 0,{number:!0}]])]),h("div",Pk,[u[8]||(u[8]=h("label",{class:"label font-semibold"},"KDV Hariç Tutar",-1)),re(h("input",{type:"number","onUpdate:modelValue":u[2]||(u[2]=c=>r.value.kdvHaric=c),class:"input input-bordered"},null,512),[[he,r.value.kdvHaric,void 0,{number:!0}]])]),h("div",kk," Tüketim: "+z(r.value.currentValue-r.value.previousValue),1),h("div",xk," Toplam (KDV Dahil): "+z(i(r.value.kdvHaric*1.2)),1),h("div",Vk,[h("button",{class:"btn btn-outline",onClick:u[3]||(u[3]=c=>l.$emit("close"))},"İptal"),h("button",{class:"btn btn-primary",onClick:o},"Kaydet")])])]))}},Nk={open:"",class:"modal"},Ok={class:"modal-box max-w-2xl"},Mk={class:"form-control mb-3"},Lk=["value"],Uk={class:"form-control mb-3"},Fk=["value"],$k={class:"form-control mb-3"},Bk={class:"form-control mb-3"},jk={class:"form-control mb-3"},qk={class:"form-control mb-3"},Hk={class:"text-sm text-gray-500 mb-2"},Kk={class:"text-sm text-gray-500 mb-3"},zk={class:"modal-action"},Gk={__name:"EditWaterModal",props:{record:Object},emits:["close","updated"],setup(t,{emit:e}){const n=t,s=e,r=G({previousValue:0,currentValue:0,waterAmount:0,wasteAmount:0});fb(()=>{const u=n.record;u&&(r.value.previousValue=typeof u.previousValue=="number"?u.previousValue:0,r.value.currentValue=typeof u.currentValue=="number"?u.currentValue:0,r.value.waterAmount=typeof u.waterAmount=="number"?u.waterAmount:0,r.value.wasteAmount=typeof u.wasteAmount=="number"?u.wasteAmount:0)});const i=Ye(()=>{const u=r.value.waterAmount*1.01,c=r.value.wasteAmount*1.1;return+(u+c).toFixed(2)}),o=u=>isNaN(u)?"-":u.toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),l=async()=>{const u=r.value.currentValue-r.value.previousValue;if(u<0){alert("Yeni endeks, önceki endeksten küçük olamaz.");return}const c=+(r.value.waterAmount+r.value.wasteAmount).toFixed(2),d=i.value,p=nt(le,"readings",n.record.id);await oo(p,{previousValue:r.value.previousValue,currentValue:r.value.currentValue,consumption:u,waterAmount:r.value.waterAmount,wasteAmount:r.value.wasteAmount,kdvHaric:c,toplamTutar:d,kdvDahil:d}),alert("Su kaydı başarıyla güncellendi."),s("updated"),s("close")};return(u,c)=>(H(),Q("dialog",Nk,[h("div",Ok,[c[11]||(c[11]=h("h3",{class:"font-bold text-lg mb-4"},"Su Kaydı Düzenle",-1)),h("div",Mk,[c[5]||(c[5]=h("label",{class:"label font-semibold"},"Kat",-1)),h("input",{type:"text",class:"input input-bordered",value:t.record.unit,disabled:""},null,8,Lk)]),h("div",Uk,[c[6]||(c[6]=h("label",{class:"label font-semibold"},"Şirket",-1)),h("input",{type:"text",class:"input input-bordered",value:t.record.tenantName||"-",disabled:""},null,8,Fk)]),h("div",$k,[c[7]||(c[7]=h("label",{class:"label font-semibold"},"Önceki Endeks",-1)),re(h("input",{type:"number","onUpdate:modelValue":c[0]||(c[0]=d=>r.value.previousValue=d),class:"input input-bordered"},null,512),[[he,r.value.previousValue,void 0,{number:!0}]])]),h("div",Bk,[c[8]||(c[8]=h("label",{class:"label font-semibold"},"Yeni Endeks",-1)),re(h("input",{type:"number","onUpdate:modelValue":c[1]||(c[1]=d=>r.value.currentValue=d),class:"input input-bordered"},null,512),[[he,r.value.currentValue,void 0,{number:!0}]])]),h("div",jk,[c[9]||(c[9]=h("label",{class:"label font-semibold"},"Su Tutarı (KDV Hariç - %1)",-1)),re(h("input",{type:"number","onUpdate:modelValue":c[2]||(c[2]=d=>r.value.waterAmount=d),class:"input input-bordered"},null,512),[[he,r.value.waterAmount,void 0,{number:!0}]])]),h("div",qk,[c[10]||(c[10]=h("label",{class:"label font-semibold"},"Atık Su Tutarı (KDV Hariç - %10)",-1)),re(h("input",{type:"number","onUpdate:modelValue":c[3]||(c[3]=d=>r.value.wasteAmount=d),class:"input input-bordered"},null,512),[[he,r.value.wasteAmount,void 0,{number:!0}]])]),h("div",Hk," Tüketim: "+z(r.value.currentValue-r.value.previousValue),1),h("div",Kk," Toplam (KDV Dahil): "+z(o(i.value)),1),h("div",zk,[h("button",{class:"btn btn-outline",onClick:c[4]||(c[4]=d=>u.$emit("close"))},"İptal"),h("button",{class:"btn btn-primary",onClick:l},"Kaydet")])])]))}},Wk={class:"p-4 max-w-5xl mx-auto space-y-6"},Qk={class:"flex gap-4 justify-center"},Yk={class:"flex flex-wrap gap-4 items-center mt-4"},Jk=["disabled"],Xk=["disabled"],Zk={class:"overflow-x-auto mt-6"},ex={class:"table table-zebra w-full border text-sm text-white dark:bg-gray-800 dark:text-gray-100"},tx={key:0},nx={key:1},sx={key:2},rx={key:0,class:"ml-0 badge badge-warning text-xs"},ix={class:"text-right font-semibold text-blue-300"},ox={class:"dropdown dropdown-end"},ax={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-32"},lx=["onClick"],ux=["onClick"],cx=["open"],dx={class:"modal-box"},hx={class:"form-control mb-2"},fx={class:"form-control mb-4"},px={class:"modal-action"},mx={__name:"Utilities",setup(t){const e=G(!1),n=G(!1),s=G(!1),r=G(!1),i=G(!1),o=G(!1),l=G(null),u=G(null),c=G([]),d=G(""),p=G(""),g=G("all"),_=Ye(()=>c.value.filter(R=>{var x;const v=(x=R.tenantName)==null?void 0:x.toLowerCase().includes(d.value.toLowerCase()),w=p.value===""||R.period===p.value,k=g.value==="all"||R.type===g.value;return v&&w&&k})),b=R=>R==null||isNaN(R)?"-":Number(R).toFixed(0),E=R=>R==null||isNaN(R)?"-":R.toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),C=async()=>{c.value=[];const R=await Fe(Ae(le,"tenants")),v={};R.forEach(k=>{const x=k.data();v[k.id]=x.company}),(await Fe(Ae(le,"readings"))).forEach(k=>{const x=k.data(),D=x.tenantId==="ortak"?"Ortak Alan":x.tenantId==="mescit"?"Mescit":v[x.tenantId]||"-";c.value.push({id:k.id,...x,tenantName:D})})},P=async()=>{if(!p.value||g.value==="all"){alert("Lütfen dönem ve gider tipini seçiniz.");return}const R=Gt(Ae(le,"sharedDistributions"),at("period","==",p.value),at("type","==",g.value));if(!(await Fe(R)).empty){alert("Bu dönem ve tip için ortak gider zaten paylaştırılmış.");return}const w=Gt(Ae(le,"readings"),at("period","==",p.value),at("type","==",g.value),at("tenantId","in",["ortak","mescit"])),k=await Fe(w);let x=0;k.forEach(ye=>{x+=Number(ye.data().kdvDahil||ye.data().toplamTutar||0)});const D=await Fe(Ae(le,"tenants")),A=[];if(D.forEach(ye=>{const ve=ye.data();ve.units&&Array.isArray(ve.units)&&ve.units.forEach(xt=>{A.push({tenantId:ye.id,tenantName:ve.company,unit:xt,pay:ve.company==="YİĞİT HAMDEMİR"?2:1})})}),A.length===0){alert("Hiçbir kiracıya ait kat bilgisi bulunamadı.");return}const ct=A.reduce((ye,ve)=>ye+(ve.pay||1),0),Mt=x/ct,We=g.value==="electricity"?"Elektrik":"Su";for(const ye of A){const ve=Mt*(ye.pay||1);await gn(Ae(le,"readings"),{tenantId:ye.tenantId,tenantName:ye.tenantName,unit:ye.unit,period:p.value,type:g.value,consumption:null,kdvHaric:null,kdvDahil:ve,toplamTutar:ve,description:`Ortak ${We} Gider Payı`})}await gn(Ae(le,"sharedDistributions"),{period:p.value,type:g.value,distributed:!0,distributedAt:new Date}),alert("Ortak gider başarıyla paylaştırıldı."),o.value=!1,C()},T=()=>{e.value=!1,n.value=!1,s.value=!1,C()},V=async()=>{if(!p.value)return;const R=Gt(Ae(le,"readings"),at("period","==",p.value)),v=await Fe(R);await Promise.all(v.docs.map(w=>Ys(nt(le,"readings",w.id)))),alert("Kayıtlar silindi."),C()},M=async R=>{confirm("Bu kaydı silmek istediğinizden emin misiniz?")&&(await Ys(nt(le,"readings",R)),c.value=c.value.filter(v=>v.id!==R))},oe=R=>{R.type==="electricity"?(l.value=R,r.value=!0):R.type==="water"&&(u.value=R,i.value=!0)},de=()=>{if(!p.value){alert("Lütfen önce dönem seçiniz.");return}r.value=!0};return Bt(C),(R,v)=>(H(),Q("section",Wk,[v[20]||(v[20]=h("h2",{class:"text-2xl font-bold text-center text-white dark:bg-gray-900 dark:text-white"},"Sayaç Kayıtları",-1)),h("div",Qk,[h("button",{class:"btn btn-primary",onClick:v[0]||(v[0]=w=>e.value=!0)},"⚡ Elektrik Girişi"),h("button",{class:"btn btn-secondary",onClick:v[1]||(v[1]=w=>n.value=!0)},"💧 Su Girişi"),h("button",{class:"btn btn-primary mb-4",onClick:v[2]||(v[2]=w=>s.value=!0)},"💰 Aidat Girişi")]),h("div",Yk,[re(h("input",{"onUpdate:modelValue":v[3]||(v[3]=w=>d.value=w),type:"text",placeholder:"Şirket Ara...",class:"input input-bordered w-48"},null,512),[[he,d.value]]),re(h("input",{"onUpdate:modelValue":v[4]||(v[4]=w=>p.value=w),type:"month",class:"input input-bordered w-40"},null,512),[[he,p.value]]),re(h("select",{"onUpdate:modelValue":v[5]||(v[5]=w=>g.value=w),class:"select select-bordered w-40"},v[13]||(v[13]=[h("option",{value:"all"},"Tümü",-1),h("option",{value:"electricity"},"Elektrik",-1),h("option",{value:"water"},"Su",-1),h("option",{value:"aidat"},"Aidat",-1)]),512),[[dn,g.value]]),h("button",{class:"btn btn-error btn-sm",onClick:V,disabled:!p.value},"Seçilen Dönemi Sil",8,Jk),h("button",{class:"btn btn-outline btn-sm",onClick:de,disabled:!p.value},"Elektrik Kayıtlarını Düzenle",8,Xk),h("button",{onClick:v[6]||(v[6]=w=>o.value=!0),class:"btn btn-warning"},"⚡ Ortak Gider Paylaştır")]),h("div",Zk,[h("table",ex,[v[15]||(v[15]=h("thead",null,[h("tr",null,[h("th",null,"Dönem"),h("th",null,"Kat"),h("th",null,"Şirket"),h("th",null,"Tip"),h("th",null,"Tüketim"),h("th",null,"KDV Hariç"),h("th",null,"Toplam (₺)"),h("th",null,"İşlem")])],-1)),h("tbody",null,[(H(!0),Q(Me,null,et(_.value,w=>{var k;return H(),Q("tr",{key:w.id},[h("td",null,z(w.period),1),h("td",null,z(w.unit||"-"),1),h("td",null,[w.tenantId==="ortak"?(H(),Q("span",tx,"Ortak Alan")):w.tenantId==="mescit"?(H(),Q("span",nx,"Mescit")):(H(),Q("span",sx,z(w.tenantName||"-"),1))]),h("td",null,[h("span",{class:an({"text-yellow-600 dark:text-yellow-400":w.type==="electricity","text-blue-600 dark:text-blue-400":w.type==="water","text-green-600 dark:text-green-400":w.type==="aidat"})},z(w.type==="electricity"?"Elektrik":w.type==="water"?"Su":"Aidat"),3),(k=w.description)!=null&&k.toLowerCase().includes("ortak")?(H(),Q("span",rx,"Ortak")):He("",!0)]),h("td",null,z(b(w.consumption??w.usage)),1),h("td",null,z(E(w.kdvHaric)),1),h("td",ix,z(E(w.toplamTutar??w.kdvDahil)),1),h("td",null,[h("div",ox,[v[14]||(v[14]=h("label",{tabindex:"0",class:"btn btn-xs btn-outline"},"İşlemler",-1)),h("ul",ax,[h("li",null,[h("a",{onClick:lt(x=>oe(w),["prevent"])},"Düzenle",8,lx)]),h("li",null,[h("a",{onClick:lt(x=>M(w.id),["prevent"])},"Sil",8,ux)])])])])])}),128))])])]),e.value?(H(),Jt(YP,{key:0,onClose:T})):He("",!0),n.value?(H(),Jt(pk,{key:1,onClose:T})):He("",!0),s.value?(H(),Jt(bk,{key:2,onClose:v[7]||(v[7]=()=>s.value=!1),onRefresh:C})):He("",!0),r.value?(H(),Jt(Dk,{key:3,record:l.value,onClose:v[8]||(v[8]=()=>{r.value=!1,l.value=null}),onUpdated:C},null,8,["record"])):He("",!0),i.value?(H(),Jt(Gk,{key:4,record:u.value,onClose:v[9]||(v[9]=()=>{i.value=!1,u.value=null}),onUpdated:C},null,8,["record"])):He("",!0),h("dialog",{id:"distributeModal",class:"modal",open:o.value},[h("div",dx,[v[19]||(v[19]=h("h3",{class:"font-bold text-lg mb-4"},"Ortak Gider Paylaştır",-1)),h("div",hx,[v[16]||(v[16]=h("label",{class:"label"},"Dönem",-1)),re(h("input",{type:"month","onUpdate:modelValue":v[10]||(v[10]=w=>p.value=w),class:"input input-bordered"},null,512),[[he,p.value]])]),h("div",fx,[v[18]||(v[18]=h("label",{class:"label"},"Gider Tipi",-1)),re(h("select",{"onUpdate:modelValue":v[11]||(v[11]=w=>g.value=w),class:"select select-bordered"},v[17]||(v[17]=[h("option",{value:"electricity"},"Elektrik",-1),h("option",{value:"water"},"Su",-1)]),512),[[dn,g.value]])]),h("div",px,[h("button",{onClick:P,class:"btn btn-success"},"Paylaştır"),h("button",{onClick:v[12]||(v[12]=w=>o.value=!1),class:"btn"},"Kapat")])])],8,cx)]))}},gx={class:"min-h-screen bg-base-200 dark:bg-gray-900 py-10"},_x={class:"max-w-4xl mx-auto bg-base-100 dark:bg-gray-800 shadow-lg rounded-xl p-6 space-y-8 text-white dark:text-gray-100"},yx={class:"text-2xl font-bold text-center"},vx={key:0},bx={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ex={class:"card bg-base-100 dark:bg-gray-700 border border-base-300 p-4 space-y-2 shadow-md"},wx={class:"card bg-base-100 dark:bg-gray-700 border border-base-300 p-4 space-y-2 shadow-md"},Tx={key:0,class:"overflow-x-auto"},Ix={class:"table table-sm w-full border"},Ax={key:1,class:"text-gray-400 italic"},Rx={key:0,class:"overflow-x-auto"},Sx={class:"table table-sm w-full border"},Cx={key:0,class:"ml-2 badge badge-warning text-xs"},Px={key:1,class:"text-gray-400 italic"},kx={key:1,class:"text-center text-gray-400"},xx={__name:"TenantDetailPage",setup(t){const n=Um().params.id,s=G(null),r=G([]),i=G([]),o=G([]),l=G([]),u=G(0),c=G(0),d=Ye(()=>c.value-u.value),p=Ye(()=>[...r.value].sort((P,T)=>new Date(P.date)-new Date(T.date))),g=async()=>{const P=nt(le,"tenants",n),T=await io(P);T.exists()&&(s.value=T.data())},_=async()=>{const P=Gt(Ae(le,"payments"),at("tenantId","==",n)),T=await Fe(P);r.value=T.docs.map(V=>V.data()),u.value=r.value.reduce((V,M)=>V+(M.amount||0),0)},b=async()=>{const P=Gt(Ae(le,"readings"),at("tenantId","==",n)),T=await Fe(P);i.value=T.docs.map(V=>V.data())},E=async()=>{const P=Gt(Ae(le,"aidatRecords"),at("tenantId","==",n)),T=await Fe(P);o.value=T.docs.map(V=>V.data())},C=()=>{l.value=[...i.value,...o.value].sort((P,T)=>(P.period||"").localeCompare(T.period||"")),c.value=l.value.reduce((P,T)=>P+(Number(T.toplamTutar)||0),0)};return Bt(async()=>{await g(),await _(),await b(),await E(),C()}),(P,T)=>{var V;return H(),Q("div",gx,[h("div",_x,[h("h1",yx,z((V=s.value)==null?void 0:V.company)+" – Kiracı Detayları",1),s.value?(H(),Q("div",vx,[h("div",bx,[h("div",Ex,[h("p",null,[T[0]||(T[0]=h("strong",null,"👤 Ad Soyad:",-1)),mt(" "+z(s.value.firstName)+" "+z(s.value.lastName),1)]),h("p",null,[T[1]||(T[1]=h("strong",null,"📞 Telefon:",-1)),mt(" "+z(s.value.phone),1)]),h("p",null,[T[2]||(T[2]=h("strong",null,"✉️ E-posta:",-1)),mt(" "+z(s.value.email),1)]),h("p",null,[T[3]||(T[3]=h("strong",null,"🏢 Kat:",-1)),mt(" "+z(Array.isArray(s.value.units)?s.value.units.join(", "):s.value.unit),1)])]),h("div",wx,[h("p",null,[T[4]||(T[4]=h("strong",{class:"text-green-500"},"💰 Toplam Ödeme:",-1)),mt(" "+z(u.value.toLocaleString("tr-TR"))+" ₺",1)]),h("p",null,[T[5]||(T[5]=h("strong",{class:"text-red-500"},"📉 Toplam Borç:",-1)),mt(" "+z(c.value.toLocaleString("tr-TR"))+" ₺",1)]),h("p",null,[T[6]||(T[6]=h("strong",{class:"text-blue-400"},"🧾 Bakiye:",-1)),mt(" "+z(d.value.toLocaleString("tr-TR"))+" ₺",1)])])]),h("div",null,[T[8]||(T[8]=h("h3",{class:"text-lg font-semibold mt-6 mb-2"},"🕑 Ödeme Geçmişi",-1)),r.value.length?(H(),Q("div",Tx,[h("table",Ix,[T[7]||(T[7]=h("thead",null,[h("tr",null,[h("th",null,"Dönem"),h("th",null,"Tutar (₺)"),h("th",null,"Tip")])],-1)),h("tbody",null,[(H(!0),Q(Me,null,et(p.value,(M,oe)=>(H(),Q("tr",{key:oe},[h("td",null,z(M.date),1),h("td",null,z(M.amount.toLocaleString("tr-TR")),1),h("td",null,z(M.type),1)]))),128))])])])):(H(),Q("p",Ax,"Ödeme bulunmuyor."))]),h("div",null,[T[10]||(T[10]=h("h3",{class:"text-lg font-semibold mt-6 mb-2"},"💸 Gider Geçmişi",-1)),l.value.length?(H(),Q("div",Rx,[h("table",Sx,[T[9]||(T[9]=h("thead",null,[h("tr",null,[h("th",null,"Dönem"),h("th",null,"Tutar (₺)"),h("th",null,"Tip"),h("th",null,"Son Ödeme")])],-1)),h("tbody",null,[(H(!0),Q(Me,null,et(l.value,(M,oe)=>{var de;return H(),Q("tr",{key:oe},[h("td",null,z(M.period||"-"),1),h("td",null,z(M.toplamTutar!=null?Number(M.toplamTutar).toLocaleString("tr-TR"):"-"),1),h("td",null,[h("span",{class:an({"text-yellow-400":M.type==="electricity","text-blue-400":M.type==="water","text-green-400":M.type==="aidat"})},z(M.type==="electricity"?"Elektrik":M.type==="water"?"Su":"Aidat"),3),(de=M.description)!=null&&de.toLowerCase().includes("ortak")?(H(),Q("span",Cx," Ortak ")):He("",!0)]),h("td",null,z(M.dueDate||"-"),1)])}),128))])])])):(H(),Q("p",Px,"Gider verisi bulunmuyor."))])])):(H(),Q("div",kx,"Kiracı bilgisi yükleniyor..."))])])}}},Vx={class:"max-w-3xl mx-auto p-6 space-y-6"},Dx={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Nx=["value"],Ox=["disabled"],Mx=["value"],Lx=["value"],Ux=["value"],Fx={key:0,class:"overflow-x-auto mt-6"},$x={class:"table w-full table-zebra text-sm"},Bx={class:"text-right text-green-700 font-semibold"},jx={class:"text-center"},qx={class:"dropdown dropdown-end"},Hx={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-40 z-10"},Kx=["onClick"],zx=["onClick"],Gx={__name:"AidatPanel",setup(t){const e=G([]),n=G(""),s=G(""),r=G(new Date().getFullYear()),i=G(""),o=G([]),l=G(null),u=P=>parseFloat(P).toLocaleString("tr-TR",{minimumFractionDigits:2})+" ₺",c=()=>{const P=i.value.replace(/\./g,"").replace(",",".");return parseFloat(P)||0},d=Ye(()=>(c()*1.2).toLocaleString("tr-TR",{minimumFractionDigits:2})+" ₺"),p=P=>{let T=P.target.value.replace(/\D/g,"");i.value=new Intl.NumberFormat("tr-TR").format(Number(T))},g=Ye(()=>{const P=e.value.find(T=>T.id===n.value);return P?P.units||[]:[]}),_=async()=>{o.value=[],(await Fe(Ae(le,"annualDues"))).forEach(T=>{const V=T.data(),M=e.value.find(oe=>oe.id===V.tenantId);M&&o.value.push({id:T.id,year:V.year,amount:V.amount,vatIncludedAmount:V.vatIncludedAmount,unit:V.unit,company:M.company,tenantId:V.tenantId})})},b=async P=>{confirm("Bu aidat kaydını silmek istiyor musunuz?")&&(await Ys(nt(le,"annualDues",P)),await _())},E=P=>{n.value=P.tenantId,s.value=P.unit,i.value=new Intl.NumberFormat("tr-TR").format(P.amount),r.value=P.year,l.value=P.id},C=async()=>{const P=c();if(!n.value||!s.value||P<=0||r.value<2020){alert("Lütfen tüm alanları eksiksiz doldurun.");return}const T=parseFloat((P*1.2).toFixed(2));if(l.value){const V=nt(le,"annualDues",l.value);await gy(V,{tenantId:n.value,unit:s.value,year:r.value,amount:P,vatIncludedAmount:T}),alert("Aidat güncellendi.")}else{if(o.value.find(M=>M.year===r.value&&M.tenantId===n.value&&M.unit===s.value)){alert("Bu şirketin bu katı için bu yıl zaten aidat tanımlanmış.");return}await gn(Ae(le,"annualDues"),{tenantId:n.value,unit:s.value,year:r.value,amount:P,vatIncludedAmount:T}),alert("Aidat kaydı eklendi.")}n.value="",s.value="",i.value="",l.value=null,await _()};return Bt(async()=>{const P=await Fe(Ae(le,"tenants"));e.value=P.docs.map(T=>({id:T.id,...T.data()})),_()}),(P,T)=>(H(),Q("section",Vx,[T[14]||(T[14]=h("h2",{class:"text-xl font-bold text-center"},"Yıllık Aidat Tutarı Tanımlama",-1)),h("form",{onSubmit:lt(C,["prevent"]),class:"space-y-4 bg-base-100 p-4 rounded-xl shadow"},[h("div",Dx,[h("div",null,[T[3]||(T[3]=h("label",{class:"label"},"Yıl",-1)),re(h("input",{type:"number","onUpdate:modelValue":T[0]||(T[0]=V=>r.value=V),class:"input input-bordered w-full",min:"2020"},null,512),[[he,r.value,void 0,{number:!0}]])]),h("div",null,[T[5]||(T[5]=h("label",{class:"label"},"Şirket",-1)),re(h("select",{"onUpdate:modelValue":T[1]||(T[1]=V=>n.value=V),class:"select select-bordered w-full"},[T[4]||(T[4]=h("option",{disabled:"",value:""},"Seçiniz",-1)),(H(!0),Q(Me,null,et(e.value,V=>(H(),Q("option",{key:V.id,value:V.id},z(V.company),9,Nx))),128))],512),[[dn,n.value]])]),h("div",null,[T[7]||(T[7]=h("label",{class:"label"},"Kat",-1)),re(h("select",{"onUpdate:modelValue":T[2]||(T[2]=V=>s.value=V),class:"select select-bordered w-full",disabled:!n.value},[T[6]||(T[6]=h("option",{disabled:"",value:""},"Seçiniz",-1)),(H(!0),Q(Me,null,et(g.value,V=>(H(),Q("option",{key:V,value:V},z(V),9,Mx))),128))],8,Ox),[[dn,s.value]])]),h("div",null,[T[8]||(T[8]=h("label",{class:"label"},"Aidat (KDV Hariç)",-1)),h("input",{value:i.value,onInput:p,class:"input input-bordered w-full",inputmode:"numeric",placeholder:"Örn: 2.500"},null,40,Lx)]),h("div",null,[T[9]||(T[9]=h("label",{class:"label"},"KDV Dahil",-1)),h("input",{value:d.value,class:"input input-bordered w-full bg-base-200",disabled:""},null,8,Ux)])]),T[10]||(T[10]=h("div",{class:"flex justify-end"},[h("button",{class:"btn btn-primary",type:"submit"},"Kaydet")],-1))],32),o.value.length?(H(),Q("div",Fx,[T[13]||(T[13]=h("h3",{class:"font-semibold mb-2"},"Kayıtlı Aidat Tutarları",-1)),h("table",$x,[T[12]||(T[12]=h("thead",null,[h("tr",null,[h("th",null,"Yıl"),h("th",null,"Şirket"),h("th",null,"Kat"),h("th",null,"KDV Dahil"),h("th",null,"İşlem")])],-1)),h("tbody",null,[(H(!0),Q(Me,null,et(o.value,V=>(H(),Q("tr",{key:V.id},[h("td",null,z(V.year),1),h("td",null,z(V.company),1),h("td",null,z(V.unit),1),h("td",Bx,z(u(V.vatIncludedAmount||V.amount*1.2)),1),h("td",jx,[h("div",qx,[T[11]||(T[11]=h("label",{tabindex:"0",class:"btn btn-sm btn-outline"},"İşlemler",-1)),h("ul",Hx,[h("li",null,[h("a",{onClick:lt(M=>E(V),["prevent"])},"Düzenle",8,Kx)]),h("li",null,[h("a",{onClick:lt(M=>b(V.id),["prevent"])},"Sil",8,zx)])])])])]))),128))])])])):He("",!0)]))}},Wx={class:"bg-base-200 p-6 rounded-xl"},Qx={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Yx={key:0},Jx=["value"],Xx={__name:"UserAddPanel",setup(t){const e=G(""),n=G(""),s=G(""),r=G(""),i=G(""),o=G([]);Bt(async()=>{const u=await Fe(Ae(le,"tenants"));o.value=u.docs.map(c=>({id:c.id,name:c.data().company}))});const l=async()=>{try{const u=Math.random().toString(36).slice(-8),{user:c}=await X0(Aa,e.value,u);await gy(nt(le,"users",c.uid),{firstName:n.value,lastName:s.value,email:e.value,role:r.value,companyId:r.value==="tenant"?i.value:null}),await lc(Aa,e.value),alert("Kullanıcı eklendi. Şifre oluşturma bağlantısı e-posta ile gönderildi."),e.value="",n.value="",s.value="",r.value="",i.value=""}catch(u){alert("Hata: "+u.message)}};return(u,c)=>(H(),Q("div",Wx,[c[10]||(c[10]=h("h2",{class:"text-xl font-bold mb-4"},"Yeni Kullanıcı Ekle",-1)),h("form",{onSubmit:lt(l,["prevent"]),class:"space-y-4"},[h("div",Qx,[re(h("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>n.value=d),class:"input input-bordered w-full",placeholder:"Ad",required:""},null,512),[[he,n.value]]),re(h("input",{"onUpdate:modelValue":c[1]||(c[1]=d=>s.value=d),class:"input input-bordered w-full",placeholder:"Soyad",required:""},null,512),[[he,s.value]])]),re(h("input",{"onUpdate:modelValue":c[2]||(c[2]=d=>e.value=d),class:"input input-bordered w-full",type:"email",placeholder:"E-posta",required:""},null,512),[[he,e.value]]),h("div",null,[c[6]||(c[6]=h("label",{class:"label"},"Rol",-1)),re(h("select",{"onUpdate:modelValue":c[3]||(c[3]=d=>r.value=d),class:"select select-bordered w-full",required:""},c[5]||(c[5]=[h("option",{disabled:"",value:""},"Rol Seçin",-1),h("option",{value:"admin"},"Admin",-1),h("option",{value:"manager"},"Yönetici",-1),h("option",{value:"tenant"},"Kiracı",-1)]),512),[[dn,r.value]])]),r.value==="tenant"?(H(),Q("div",Yx,[c[8]||(c[8]=h("label",{class:"label"},"Firma",-1)),re(h("select",{"onUpdate:modelValue":c[4]||(c[4]=d=>i.value=d),class:"select select-bordered w-full",required:""},[c[7]||(c[7]=h("option",{disabled:"",value:""},"Firma Seçin",-1)),(H(!0),Q(Me,null,et(o.value,d=>(H(),Q("option",{key:d.id,value:d.id},z(d.name),9,Jx))),128))],512),[[dn,i.value]])])):He("",!0),c[9]||(c[9]=h("button",{class:"btn btn-primary w-full"},"Kaydet",-1))],32)]))}},Zx={class:"bg-base-200 p-6 rounded-xl"},eV={class:"table w-full"},tV=["onClick"],nV={__name:"UserListPanel",setup(t){const e=G([]),n=G([]),s=G("");Bt(async()=>{await r(),await i()});const r=async()=>{const c=await Fe(Ae(le,"companies"));e.value=c.docs.map(d=>({id:d.id,...d.data()}))},i=async()=>{const c=await Fe(Ae(le,"users"));n.value=c.docs.map(d=>({id:d.id,...d.data()}))},o=async c=>{confirm("Kullanıcıyı silmek istediğinize emin misiniz?")&&(await Ys(nt(le,"users",c)),await i())},l=c=>{const d=e.value.find(p=>p.id===c);return d?d.name:"-"},u=Ye(()=>{const c=s.value.toLowerCase();return n.value.filter(d=>(d.firstName||"").toLowerCase().includes(c)||(d.lastName||"").toLowerCase().includes(c)||(d.email||"").toLowerCase().includes(c))});return(c,d)=>(H(),Q("div",Zx,[d[2]||(d[2]=h("h2",{class:"text-xl font-bold mb-4"},"Kullanıcılar",-1)),re(h("input",{"onUpdate:modelValue":d[0]||(d[0]=p=>s.value=p),class:"input input-bordered mb-4 w-full",placeholder:"Ad, soyad veya e-posta ile ara"},null,512),[[he,s.value]]),h("table",eV,[d[1]||(d[1]=h("thead",null,[h("tr",null,[h("th",null,"Ad Soyad"),h("th",null,"E-posta"),h("th",null,"Rol"),h("th",null,"Firma"),h("th",null,"İşlem")])],-1)),h("tbody",null,[(H(!0),Q(Me,null,et(u.value,p=>(H(),Q("tr",{key:p.id},[h("td",null,z(p.firstName)+" "+z(p.lastName),1),h("td",null,z(p.email),1),h("td",null,z(p.role),1),h("td",null,z(l(p.companyId)),1),h("td",null,[h("button",{onClick:g=>o(p.id),class:"btn btn-sm btn-error"},"Sil",8,tV)])]))),128))])])]))}},sV={class:"max-w-5xl mx-auto p-6 space-y-6"},rV={class:"flex justify-center gap-4 mb-6 flex-wrap"},iV=["onClick"],oV={__name:"AdminDashboard",setup(t){const e=G("dues"),n=[{key:"dues",label:"Aidat Tanımlama",icon:"📆"},{key:"addUser",label:"Kullanıcı Ekle",icon:"➕"},{key:"userList",label:"Kullanıcı Listesi",icon:"👥"}];return(s,r)=>(H(),Q("section",sV,[h("div",rV,[(H(),Q(Me,null,et(n,i=>h("button",{key:i.key,onClick:o=>e.value=i.key,class:an(["btn","btn-md",e.value===i.key?"btn-primary":"btn-outline btn-info"])},z(i.icon)+" "+z(i.label),11,iV)),64))]),h("div",null,[e.value==="dues"?(H(),Jt(Gx,{key:0})):He("",!0),e.value==="addUser"?(H(),Jt(Xx,{key:1})):He("",!0),e.value==="userList"?(H(),Jt(nV,{key:2})):He("",!0)])]))}},aV="/assets/background-DZPRnSrd.png",lV={class:"relative z-10 bg-white p-8 rounded-md shadow-lg w-full max-w-md"},uV={class:"relative"},cV=["type"],dV={class:"flex items-center justify-between text-sm mt-2"},hV={class:"flex items-center gap-2 text-gray-800"},fV={key:0,class:"text-red-500 text-sm text-center"},pV={key:0,class:"modal",open:""},mV={class:"modal-box max-w-sm"},gV={key:0,class:"text-green-600 text-sm text-center mb-2"},_V={key:1,class:"text-red-500 text-sm text-center mb-2"},yV={class:"modal-action"},vV={__name:"LoginView",setup(t){const e=G(""),n=G(""),s=G(""),r=G(!1),i=G(!1),o=G(!1),l=G(""),u=G(""),c=G(""),d=Lm();Bt(()=>{Zi().currentUser&&d.push("/dashboard")});const p=()=>{i.value=!i.value},g=async()=>{if(u.value="",c.value="",!l.value){c.value="Lütfen e-posta adresinizi girin.";return}try{await lc(Aa,l.value),u.value="Şifre sıfırlama bağlantısı e-posta adresinize gönderildi.",setTimeout(()=>{o.value=!1,l.value="",u.value=""},1500)}catch(b){c.value="Gönderim başarısız: "+(b.message||"Hata oluştu.")}},_=async()=>{try{const{user:b}=await Z0(Aa,e.value,n.value),E=await io(nt(le,"users",b.uid));if(!E.exists())throw new Error("Kullanıcı bilgileri eksik.");const C=E.data().role;C==="admin"?d.push("/admin"):C==="manager"?d.push("/dashboard"):d.push("/profile")}catch(b){s.value="Giriş başarısız: "+(b.message||"Bilinmeyen hata.")}};return(b,E)=>(H(),Q("div",{class:"bg-gray-100 min-h-screen flex items-center justify-center relative",style:ka({backgroundImage:`url(${un(aV)})`,backgroundSize:"cover",backgroundPosition:"center"})},[E[13]||(E[13]=h("div",{class:"absolute inset-0 bg-black opacity-50 z-0"},null,-1)),h("div",lV,[E[12]||(E[12]=h("h1",{class:"text-2xl font-bold mb-6 text-center text-gray-800"},"Akyıldız Yönetim Giriş",-1)),h("form",{onSubmit:lt(_,["prevent"]),class:"space-y-4 text-gray-800"},[h("div",null,[E[6]||(E[6]=h("label",{class:"block font-semibold mb-1",for:"email"},"Email",-1)),re(h("input",{"onUpdate:modelValue":E[0]||(E[0]=C=>e.value=C),id:"email",type:"email",placeholder:"ornek@firma.com",class:"bg-white text-gray-800 placeholder-gray-400 appearance-none border rounded-md py-2 px-3 w-full focus:outline-none focus:ring-2 focus:ring-cyan-400",required:""},null,512),[[he,e.value]])]),h("div",null,[E[7]||(E[7]=h("label",{class:"block font-semibold mb-1",for:"password"},"Şifre",-1)),h("div",uV,[re(h("input",{"onUpdate:modelValue":E[1]||(E[1]=C=>n.value=C),type:i.value?"text":"password",id:"password",placeholder:"••••••••",class:"bg-white text-gray-800 placeholder-gray-400 appearance-none border rounded-md py-2 px-3 w-full focus:outline-none focus:ring-2 focus:ring-cyan-400",required:""},null,8,cV),[[rE,n.value]]),h("button",{type:"button",class:"absolute inset-y-0 right-2 px-2 text-sm text-cyan-600",onClick:p},z(i.value?"Gizle":"Göster"),1)])]),h("div",dV,[h("label",hV,[re(h("input",{type:"checkbox","onUpdate:modelValue":E[2]||(E[2]=C=>r.value=C),class:"w-5 h-5 accent-cyan-600 border-gray-400 rounded focus:ring-2 focus:ring-cyan-400 transition duration-200"},null,512),[[Tr,r.value]]),E[8]||(E[8]=h("span",null,"Beni Hatırla",-1))]),h("a",{href:"#",onClick:E[3]||(E[3]=lt(C=>o.value=!0,["prevent"])),class:"text-cyan-600 hover:text-cyan-800 hover:underline transition"}," Şifremi unuttum? ")]),s.value?(H(),Q("div",fV,z(s.value),1)):He("",!0),E[9]||(E[9]=h("button",{type:"submit",class:"bg-cyan-500 hover:bg-cyan-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-cyan-300 w-full mt-2"}," Giriş Yap ",-1))],32),o.value?(H(),Q("dialog",pV,[h("div",mV,[E[10]||(E[10]=h("h3",{class:"text-lg font-bold mb-2"},"Şifre Sıfırlama",-1)),E[11]||(E[11]=h("p",{class:"text-sm text-gray-600 mb-3"},"Kayıtlı e-posta adresinizi girin:",-1)),re(h("input",{"onUpdate:modelValue":E[4]||(E[4]=C=>l.value=C),type:"email",placeholder:"ornek@firma.com",class:"input input-bordered w-full mb-3"},null,512),[[he,l.value]]),u.value?(H(),Q("div",gV,z(u.value),1)):He("",!0),c.value?(H(),Q("div",_V,z(c.value),1)):He("",!0),h("div",yV,[h("button",{class:"btn btn-primary",onClick:g},"Gönder"),h("button",{class:"btn",onClick:E[5]||(E[5]=C=>o.value=!1)},"Kapat")])])])):He("",!0)])],4))}},bV=[{path:"/",redirect:"/dashboard"},{path:"/dashboard",name:"Dashboard",component:BS,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/tenants",name:"Tenants",component:KC,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/payments",name:"Payments",component:dP,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/expenses",name:"Expenses",component:DP,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/utilities",name:"Utilities",component:mx,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/tenant/:id",name:"TenantDetail",component:xx,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/admin",name:"Admin",component:oV,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/profile",name:"Profile",component:()=>FS(()=>Promise.resolve().then(()=>XS),void 0),meta:{requiresAuth:!0,roles:["tenant"]}},{path:"/login",name:"Login",component:vV,meta:{public:!0,hideLayout:!0}}],vy=pw({history:qE(),routes:bV});vy.beforeEach((t,e,n)=>{const s=t.meta.requiresAuth,r=t.meta.roles,i=uc(Zi(),async o=>{if(i(),!o&&s)return n("/login");if(o&&r){const l=nt(le,"users",o.uid),u=await io(l),c=u.exists()?u.data().role:null;if(!r.includes(c))return n("/dashboard")}return n()})});var EV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},by={exports:{}};(function(t,e){(function(n,s){t.exports=s()})(EV,function(){return function(n){function s(i){if(r[i])return r[i].exports;var o=r[i]={i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}var r={};return s.m=n,s.c=r,s.i=function(i){return i},s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p=".",s(s.s=10)}([function(n,s){n.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(r){return r.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(r){return r.toLocaleLowerCase()}},"!":{escape:!0}}},function(n,s,r){function i(c){var d=document.createEvent("Event");return d.initEvent(c,!0,!0),d}var o=r(2),l=r(0),u=r.n(l);s.a=function(c,d){var p=d.value;if((Array.isArray(p)||typeof p=="string")&&(p={mask:p,tokens:u.a}),c.tagName.toLocaleUpperCase()!=="INPUT"){var g=c.getElementsByTagName("input");if(g.length!==1)throw new Error("v-mask directive requires 1 input, found "+g.length);c=g[0]}c.oninput=function(b){if(b.isTrusted){var E=c.selectionEnd,C=c.value[E-1];for(c.value=r.i(o.a)(c.value,p.mask,!0,p.tokens);E<c.value.length&&c.value.charAt(E-1)!==C;)E++;c===document.activeElement&&(c.setSelectionRange(E,E),setTimeout(function(){c.setSelectionRange(E,E)},0)),c.dispatchEvent(i("input"))}};var _=r.i(o.a)(c.value,p.mask,!0,p.tokens);_!==c.value&&(c.value=_,c.dispatchEvent(i("input")))}},function(n,s,r){var i=r(6),o=r(5);s.a=function(l,u){var c=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],d=arguments[3];return Array.isArray(u)?r.i(o.a)(i.a,u,d)(l,u,c,d):r.i(i.a)(l,u,c,d)}},function(n,s,r){function i(g){g.component(d.a.name,d.a),g.directive("mask",u.a)}Object.defineProperty(s,"__esModule",{value:!0});var o=r(0),l=r.n(o),u=r(1),c=r(7),d=r.n(c);r.d(s,"TheMask",function(){return d.a}),r.d(s,"mask",function(){return u.a}),r.d(s,"tokens",function(){return l.a}),r.d(s,"version",function(){return p});var p="0.11.1";s.default=i,typeof window<"u"&&window.Vue&&window.Vue.use(i)},function(n,s,r){Object.defineProperty(s,"__esModule",{value:!0});var i=r(1),o=r(0),l=r.n(o),u=r(2);s.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return l.a}}},directives:{mask:i.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(c){c!==this.lastValue&&(this.display=c)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(c){c.isTrusted||this.refresh(c.target.value)},refresh:function(d){this.display=d;var d=r.i(u.a)(d,this.mask,this.masked,this.tokens);d!==this.lastValue&&(this.lastValue=d,this.$emit("input",d))}}}},function(n,s,r){function i(o,l,u){return l=l.sort(function(c,d){return c.length-d.length}),function(c,d){for(var p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],g=0;g<l.length;){var _=l[g];g++;var b=l[g];if(!(b&&o(c,b,!0,u).length>_.length))return o(c,_,p,u)}return""}}s.a=i},function(n,s,r){function i(o,l){var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],c=arguments[3];o=o||"",l=l||"";for(var d=0,p=0,g="";d<l.length&&p<o.length;){var _=l[d],b=c[_],E=o[p];b&&!b.escape?(b.pattern.test(E)&&(g+=b.transform?b.transform(E):E,d++),p++):(b&&b.escape&&(d++,_=l[d]),u&&(g+=_),E===_&&p++,d++)}for(var C="";d<l.length&&u;){var _=l[d];if(c[_]){C="";break}C+=_,d++}return g+C}s.a=i},function(n,s,r){var i=r(8)(r(4),r(9),null,null);n.exports=i.exports},function(n,s){n.exports=function(r,i,o,l){var u,c=r=r||{},d=typeof r.default;d!=="object"&&d!=="function"||(u=r,c=r.default);var p=typeof c=="function"?c.options:c;if(i&&(p.render=i.render,p.staticRenderFns=i.staticRenderFns),o&&(p._scopeId=o),l){var g=p.computed||(p.computed={});Object.keys(l).forEach(function(_){var b=l[_];g[_]=function(){return b}})}return{esModule:u,exports:c,options:p}}},function(n,s){n.exports={render:function(){var r=this,i=r.$createElement;return(r._self._c||i)("input",{directives:[{name:"mask",rawName:"v-mask",value:r.config,expression:"config"}],attrs:{type:"text"},domProps:{value:r.display},on:{input:r.onInput}})},staticRenderFns:[]}},function(n,s,r){n.exports=r(3)}])})})(by);var wV=by.exports;const Qc=cE(MS);Qc.use(vy);Qc.directive("mask",wV.mask);Qc.mount("#app");
