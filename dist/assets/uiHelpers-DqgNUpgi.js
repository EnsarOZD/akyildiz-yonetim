import{r as t,w as e,d as a}from"./vue-vendor-Bart4FG5.js";import{t as n}from"./tenantsService-DJ11mlzP.js";import{e as s}from"./index-BbOmoSe-.js";function i(a,n){const s=t(!1),i=JSON.stringify(a);e(()=>a,t=>{s.value=JSON.stringify(t)!==i},{deep:!0});return{isDirty:s,resetDirty:t=>{s.value=!1}}}const r=a("tenants",{state:()=>({tenants:[],stats:{activeCount:0,occupancyRate:0,totalDebt:0,totalFlats:0,occupiedFlats:0},loading:!1,lastFetched:null}),getters:{getTenantById:t=>e=>t.tenants.find(t=>t.id===e),activeTenants:t=>t.tenants.filter(t=>t.isActive)},actions:{async fetchTenants(t=!1){if(!t&&this.tenants.length>0&&this.lastFetched&&Date.now()-this.lastFetched<3e5)return this.tenants;this.loading=!0;try{const[t,e]=await Promise.all([n.getTenants(),n.getTenantStats()]);return this.tenants=t||[],this.stats=e||this.stats,this.lastFetched=Date.now(),this.tenants}catch(e){throw s.logError(e,{component:"TenantsStore",action:"fetchTenants"}),e}finally{this.loading=!1}},async fetchStats(){try{const t=await n.getTenantStats();return this.stats=t||this.stats,this.stats}catch(t){return this.stats}},async createTenant(t){try{const e=await n.createTenant(t);return await this.fetchTenants(!0),e}catch(e){throw e}},async updateTenant(t,e){try{await n.updateTenant(t,e),await this.fetchTenants(!0)}catch(a){throw a}},async deleteTenant(t){try{await n.deleteTenant(t),this.tenants=this.tenants.filter(e=>e.id!==t)}catch(e){throw e}}}}),c=t=>null==t||isNaN(t)?"â‚º0,00":Number(t).toLocaleString("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2,maximumFractionDigits:2}),o=t=>{if(!t)return"bg-gray-500";const e=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500"];return e[String(t).split("").reduce((t,e)=>t+e.charCodeAt(0),0)%e.length]},h=(t,e=1)=>t?t.substring(0,e).toUpperCase():"?";export{r as a,h as b,c as f,o as g,i as u};
