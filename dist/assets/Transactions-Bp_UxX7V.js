import{r as e,c as t,o as a,b as r,e as l,t as s,G as n,I as d,H as o,F as i,i as u,E as g,m as y,q as c,j as p,p as x}from"./vue-vendor-Ozfyq2CR.js";import{a as m}from"./index-CZWRhATJ.js";import"./utils-vendor-Cy2sLATb.js";const b={class:"p-4 sm:p-6 bg-gray-50 min-h-screen font-sans dark:bg-gray-900"},v={class:"max-w-7xl mx-auto"},k={class:"flex items-center justify-between mb-6"},h={class:"flex items-center gap-4"},w={class:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 px-3 py-1 rounded-full text-sm"},f={class:"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 px-3 py-1 rounded-full text-sm"},M={class:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-full text-sm"},B={class:"bg-orange-100 dark:bg-orange-900/50 text-orange-600 dark:text-orange-400 px-3 py-1 rounded-full text-sm"},T={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-8"},j={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},N={class:"form-control"},G={class:"form-control"},V={class:"form-control"},A={class:"form-control"},C={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700"},D={class:"flex items-center justify-between mb-6"},L={class:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-full text-sm font-medium"},U={key:0,class:"space-y-3"},H={class:"flex items-center gap-4"},S={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},z={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},E={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},I={class:"font-semibold text-gray-800 dark:text-gray-100"},R={key:0,class:"text-xs font-normal text-gray-400 ml-1"},F={class:"text-sm text-gray-500 dark:text-gray-400"},_={key:0,class:"text-xs text-gray-400 dark:text-gray-500"},q={key:1,class:"text-xs text-gray-400 dark:text-gray-500"},Y={class:"text-right"},J={key:1,class:"text-center py-12"},K={__name:"Transactions",setup(K){const O=e([]),P=e([]),Q=e([]),W=e([]),X=e(""),Z=e(""),$=e(""),ee=e(""),te=e=>null==e||isNaN(e)?"₺0.00":Number(e).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),ae=t(()=>[...P.value,...Q.value,...W.value].sort((e,t)=>new Date(t.date)-new Date(e.date))),re=t(()=>P.value.reduce((e,t)=>e+Number(t.amount||0),0)),le=t(()=>Q.value.reduce((e,t)=>e+Number(t.amount||0),0)),se=t(()=>W.value.reduce((e,t)=>e+Number(t.remainingAmount||0),0)),ne=t(()=>ae.value.length),de=t(()=>ae.value.filter(e=>{var t;const a=!X.value||e.type===X.value,r=!Z.value||e.date>=Z.value,l=!$.value||e.date<=$.value,s=!ee.value||(null==(t=e.description)?void 0:t.toLowerCase().includes(ee.value.toLowerCase()));return a&&r&&l&&s}));return a(()=>{(async()=>{try{const e=await m.get("/tenants");O.value=e||[]}catch(e){O.value=[]}})().then(()=>(async()=>{try{const e=await m.get("/payments");P.value=(e||[]).map(e=>({...e,type:"income",payer:e.tenantName||e.ownerName||"Bilinmiyor",unit:e.flatInfo||"-"}));const t=await m.get("/expenses");Q.value=(t||[]).map(e=>({...e,type:"expense"}));const a=await m.get("/UtilityDebts");W.value=(a||[]).map(e=>{const t=O.value.find(t=>t.id===e.tenantId);return{...e,type:"debt",date:e.dueDate||e.createdAt,description:e.description||"Borç Tahakkuku",company:e.tenantName||(null==t?void 0:t.companyName)||(null==t?void 0:t.company)||(null==t?void 0:t.fullName)||e.description||"Bilinmiyor",typeLabel:0===e.type||"Aidat"===e.type?"Aidat":1===e.type||"Electricity"===e.type?"Elektrik":"Su"}})}catch(e){P.value=[],Q.value=[],W.value=[]}})())}),(e,t)=>(y(),r("div",b,[l("div",v,[l("div",k,[t[4]||(t[4]=l("h1",{class:"text-3xl font-bold text-gray-800 dark:text-gray-100"},"Tüm İşlemler",-1)),l("div",h,[l("div",w," Toplam Gelir: "+s(te(re.value)),1),l("div",f," Toplam Gider: "+s(te(le.value)),1),l("div",M,s(ne.value)+" işlem ",1),l("div",B," Toplam Borç: "+s(te(se.value)),1)])]),l("section",T,[t[10]||(t[10]=l("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4"},"Filtreler",-1)),l("div",j,[l("div",N,[t[6]||(t[6]=l("label",{class:"label"},[l("span",{class:"label-text text-gray-700 dark:text-gray-300"},"İşlem Tipi")],-1)),n(l("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>X.value=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},t[5]||(t[5]=[l("option",{value:""},"Tüm Tipler",-1),l("option",{value:"income"},"Gelir",-1),l("option",{value:"expense"},"Gider",-1),l("option",{value:"debt"},"Borç",-1)]),512),[[d,X.value]])]),l("div",G,[t[7]||(t[7]=l("label",{class:"label"},[l("span",{class:"label-text text-gray-700 dark:text-gray-300"},"Başlangıç Tarihi")],-1)),n(l("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>Z.value=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},null,512),[[o,Z.value]])]),l("div",V,[t[8]||(t[8]=l("label",{class:"label"},[l("span",{class:"label-text text-gray-700 dark:text-gray-300"},"Bitiş Tarihi")],-1)),n(l("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>$.value=e),class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},null,512),[[o,$.value]])]),l("div",A,[t[9]||(t[9]=l("label",{class:"label"},[l("span",{class:"label-text text-gray-700 dark:text-gray-300"},"Arama")],-1)),n(l("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>ee.value=e),placeholder:"Açıklama ara...",class:"input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},null,512),[[o,ee.value]])])])]),l("section",C,[l("div",D,[t[11]||(t[11]=l("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-100"},"İşlem Geçmişi",-1)),l("div",L,s(de.value.length)+" işlem ",1)]),de.value.length>0?(y(),r("div",U,[(y(!0),r(i,null,u(de.value,(e,a)=>{return y(),r("div",{key:a,class:"flex items-center justify-between p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200"},[l("div",H,[l("div",{class:c([{"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400":"income"===e.type,"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400":"expense"===e.type,"bg-orange-100 dark:bg-orange-900/50 text-orange-600 dark:text-orange-400":"debt"===e.type},"rounded-full p-3"])},["income"===e.type?(y(),r("svg",S,t[12]||(t[12]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"},null,-1)]))):"expense"===e.type?(y(),r("svg",z,t[13]||(t[13]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))):(y(),r("svg",E,t[14]||(t[14]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))],2),l("div",null,[l("p",I,[x(s("debt"===e.type?e.company||"Borç":e.payer||e.description||"İşlem")+" ",1),"debt"===e.type?(y(),r("span",R," ("+s(e.typeLabel)+") ",1)):p("",!0)]),l("p",F,s((n=e.date,n?new Date(n).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric"}):"-")),1),e.bank?(y(),r("p",_,s(e.bank),1)):p("",!0),e.unit&&"-"!==e.unit?(y(),r("p",q,s(e.unit),1)):p("",!0)])]),l("div",Y,[l("p",{class:c([{"text-green-600 dark:text-green-400":"income"===e.type,"text-red-600 dark:text-red-400":"expense"===e.type,"text-orange-600 dark:text-orange-400":"debt"===e.type},"font-bold text-lg"])},s("income"===e.type?"+":"-")+s(te(e.amount)),3),l("p",{class:c([{"text-green-500 dark:text-green-400":"income"===e.type,"text-red-500 dark:text-red-400":"expense"===e.type},"text-sm font-medium"])},s("income"===e.type?"Gelir":"expense"===e.type?"Gider":"Borç"),3)])]);var n}),128))])):(y(),r("div",J,t[15]||(t[15]=[g('<div class="bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-full p-4 w-fit mx-auto mb-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2">İşlem Bulunamadı</h3><p class="text-gray-500 dark:text-gray-400">Seçilen kriterlere uygun işlem bulunmuyor.</p>',3)])))])])]))}};export{K as default};
