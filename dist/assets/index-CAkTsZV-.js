const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TenantDetailPage-CEATErQi.js","assets/vue-vendor-BE3w9SvD.js","assets/tenantsService-DcFCN9jj.js","assets/paymentsService-sfLQHDz3.js","assets/utilityDebtsService-BN5YpzJB.js","assets/useErrorHandler-CQcR_3b6.js","assets/useNotification-Dv4wKXE4.js","assets/OwnerDues-DW_L4WCN.js","assets/LandingPage-CU3Deci3.js","assets/LandingPage-BVs6GH-y.css","assets/Dashboard-C-pRX642.js","assets/Tenants-sWOr8VFS.js","assets/units-DJG6lNYB.js","assets/ConfirmDeleteModal-B9VWRTw-.js","assets/FilterBar-wXoQM61V.js","assets/useEventBus-CFAD6Pmz.js","assets/Payments-BodqJoc1.js","assets/Expenses-CKfwiLOn.js","assets/expensesService-B7LaUaPi.js","assets/Utilities-DEMwWCXE.js","assets/aidatService-B1kcwMFg.js","assets/AdminDashboard-BbuBuMDd.js","assets/OwnerDuesPanel-WcIAf1Fj.js","assets/Owners-AsvSc9L6.js","assets/LoginView-D6C7qFML.js","assets/LoginView-ClFiwRb9.css","assets/NotFound-BFfkMpd5.js","assets/Transactions-C72US-Sm.js","assets/Overdue-62jInula.js","assets/OwnerPayments-Yu2c7SAl.js","assets/OverdueOwnerPayments-DkGfPx3u.js"])))=>i.map(i=>d[i]);
import{d as e,r as t,o as r,a as n,w as a,c as s,b as o,e as i,f as l,g as u,h as c,F as d,i as m,u as h,t as p,T as g,j as f,k as v,l as y,m as w,n as k,p as x,q as b,s as _,v as A,x as E,y as T,z as L,A as O,B as I}from"./vue-vendor-BE3w9SvD.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const S={ADMIN:"admin",MANAGER:"manager",DATA_ENTRY:"dataEntry",VIEWER:"viewer",TENANT:"tenant"},N={[S.ADMIN]:"Admin",[S.MANAGER]:"Yönetici",[S.DATA_ENTRY]:"Veri Giriş Sorumlusu",[S.VIEWER]:"Gözlemci (Avukat / Mal Sahibi)",[S.TENANT]:"Kiracı"};const D=new class{constructor(){this.baseURL="https://akyildizyonetim.com/api"}getAuthToken(){return localStorage.getItem("authToken")}async request(e,t={}){const r=`${this.baseURL}${e}`,n={"Content-Type":"application/json",...t.headers},a=this.getAuthToken();a&&(n.Authorization=`Bearer ${a}`);const s={headers:n,...t};try{const e=await fetch(r,s);if(401===e.status)throw localStorage.removeItem("authToken"),window.location.href="/login",new Error("Oturum süresi doldu. Lütfen tekrar giriş yapın.");if(!e.ok){let t=`HTTP error! status: ${e.status}`;try{const r=await e.text();r&&(t+=` - ${r}`)}catch(o){}throw new Error(t)}const t=await e.text();if(!t)return null;try{return JSON.parse(t)}catch(i){throw new Error("Geçersiz JSON yanıtı")}}catch(l){throw l}}async get(e,t={}){const r=new URLSearchParams(t).toString(),n=r?`${e}?${r}`:e;return this.request(n,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:JSON.stringify(t)})}async put(e,t){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}async uploadFile(e,t,r=null){const n=new FormData;n.append("file",t);const a={},s=this.getAuthToken();return s&&(a.Authorization=`Bearer ${s}`),this.request(e,{method:"POST",headers:a,body:n})}};const M=new class{constructor(){this.currentUser=null,this.authListeners=[]}async login(e,t){try{const r=await D.post("/auth/login",{email:e,password:t});if(r){const e=r.token||r.accessToken||r.access_token||r.jwt;if(e)return localStorage.setItem("authToken",e),this.currentUser=r.user||r.data||r,this.notifyAuthListeners(this.currentUser),r;{this.currentUser=r.user||r.data||r;const e=btoa(JSON.stringify(this.currentUser));return localStorage.setItem("authToken",e),this.notifyAuthListeners(this.currentUser),r}}throw new Error("Boş yanıt alındı")}catch(r){throw r}}async logout(){try{await D.post("/auth/logout")}catch(e){}finally{localStorage.removeItem("authToken"),this.currentUser=null,this.notifyAuthListeners(null)}}async register(e){try{const t=await D.post("/auth/register",e);return t.token&&(localStorage.setItem("authToken",t.token),this.currentUser=t.user,this.notifyAuthListeners(this.currentUser)),t}catch(t){throw t}}async checkAuthStatus(){try{if(this.currentUser)return this.currentUser;const r=localStorage.getItem("authToken");if(!r)return this.currentUser=null,this.notifyAuthListeners(null),null;if(!this.isTokenValid(r)){try{const e=JSON.parse(atob(r));if(e&&e.email)return this.currentUser=e,this.notifyAuthListeners(this.currentUser),this.currentUser}catch(e){}return localStorage.removeItem("authToken"),this.currentUser=null,this.notifyAuthListeners(null),null}try{const e=await D.get("/auth/me");return this.currentUser=e.user||e,this.notifyAuthListeners(this.currentUser),this.currentUser}catch(t){const e=this.decodeJWT(r);return e&&e.sub?(this.currentUser={id:e.sub,email:e.email,role:e.role||e.role_name,firstName:e.firstName||e.given_name,lastName:e.lastName||e.family_name},this.notifyAuthListeners(this.currentUser),this.currentUser):(localStorage.removeItem("authToken"),this.currentUser=null,this.notifyAuthListeners(null),null)}}catch(r){return localStorage.removeItem("authToken"),this.currentUser=null,this.notifyAuthListeners(null),null}}async resetPassword(e){return D.post("/auth/reset-password",{email:e})}async changePassword(e,t){return D.post("/auth/change-password",{currentPassword:e,newPassword:t})}onAuthStateChanged(e){return this.authListeners.push(e),this.currentUser&&e(this.currentUser),()=>{const t=this.authListeners.indexOf(e);t>-1&&this.authListeners.splice(t,1)}}notifyAuthListeners(e){this.authListeners.forEach(t=>{try{t(e)}catch(r){}})}getToken(){return localStorage.getItem("authToken")}isAuthenticated(){return!!this.currentUser&&!!this.getToken()}hasRole(e){return this.currentUser&&this.currentUser.role===e}decodeJWT(e){try{const t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(r)}catch(t){return null}}isTokenValid(e){if(!e)return!1;try{const t=this.decodeJWT(e);if(!t)return!1;const r=Date.now()/1e3;return!(t.exp&&t.exp<r)}catch(t){return!1}}async testBackendConnection(){try{return await D.get("/health")}catch(e){throw e}}async testAuthEndpoints(){try{return await D.get("/auth/me")}catch(e){return null}}async testJWTToken(){const e=localStorage.getItem("authToken");if(e){return this.decodeJWT(e)}return null}},P=e("auth",()=>{const e=t(null),r=t(null),n=t(null),a=t(null),s=t(null),o=t(!1),i=t(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));async function l(){try{const t=await M.checkAuthStatus();t?(e.value={id:t.id,email:t.email},r.value=t.role,n.value=t.companyId,a.value=`${t.firstName||""} ${t.lastName||""}`.trim(),s.value=t.email):u()}catch(t){u()}finally{o.value=!0}}function u(){e.value=null,r.value=null,n.value=null,a.value=null,s.value=null}return{user:e,role:r,companyId:n,fullName:a,email:s,isInitialized:o,theme:i,fetchUserProfile:l,clearUser:u,initAuthListener:function(){return l(),void M.onAuthStateChanged(e=>{e?l():(u(),o.value=!0)})},toggleTheme:function(){i.value="dark"===i.value?"light":"dark",localStorage.setItem("theme",i.value)}}}),j=(e,t)=>{const r=e.__vccOpts||e;for(const[n,a]of t)r[n]=a;return r},U={class:"bg-white dark:bg-gray-800 shadow-md sticky top-0 z-50"},C={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},R={class:"flex items-center justify-between h-16"},V={class:"flex items-center"},B={class:"hidden md:flex md:items-center md:space-x-2"},q={class:"flex items-center"},z=["aria-label"],$={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},H={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},K={key:0,class:"relative"},J={class:"hidden sm:inline"},W={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"},F={class:"px-4 py-2 text-xs text-gray-500 border-b"},G={class:"font-semibold text-gray-700"},Y={class:"ml-2 -mr-2 flex md:hidden"},Z={key:0,class:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},X={key:1,class:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},Q={key:0,class:"md:hidden",id:"mobile-menu"},ee={class:"px-2 pt-2 pb-3 space-y-1 sm:px-3"},te=j({__name:"Header",setup(e){const _=P(),A=f(),E=v(),T=t(null),L=t([]),O=t(!1),I=t(!1),N=e=>{const t=document.querySelector(".relative button");!t||t.contains(e.target)||e.target.closest(".origin-top-right")||(O.value=!1)},D=e=>{const t=(e||"").toLowerCase();L.value=t===S.ADMIN?[{label:"Özet",value:"dashboard",route:"/dashboard"},{label:"Kiracılar",value:"tenants",route:"/tenants"},{label:"Ödemeler",value:"payments",route:"/payments"},{label:"Giderler",value:"expenses",route:"/expenses"},{label:"Sayaçlar",value:"utilities",route:"/utilities"},{label:"Yönetim",value:"admin",route:"/admin"}]:t===S.MANAGER?[{label:"Özet",value:"dashboard",route:"/dashboard"},{label:"Kiracılar",value:"tenants",route:"/tenants"},{label:"Ödemeler",value:"payments",route:"/payments"},{label:"Giderler",value:"expenses",route:"/expenses"},{label:"Sayaçlar",value:"utilities",route:"/utilities"}]:t===S.TENANT?[{label:"Profilim",value:"profile",route:"/profile"}]:[]};r(()=>{document.addEventListener("click",N),(async()=>{try{const e=await M.checkAuthStatus();e?(T.value={firstName:e.firstName||e.name||"Kullanıcı",lastName:e.lastName||"",role:e.role||"Bilinmiyor"},D(e.role)):(T.value=null,L.value=[])}catch(e){T.value=null,L.value=[]}})()}),n(()=>{document.removeEventListener("click",N)}),a(A,()=>{I.value=!1});const j=()=>{O.value=!O.value},te=()=>{I.value=!I.value},re=async()=>{O.value=!1;try{await M.logout(),T.value=null,L.value=[],E.push("/login")}catch(e){T.value=null,L.value=[],E.push("/login")}},ne=async()=>{try{const e=await M.checkAuthStatus();e&&e.email?(await M.resetPassword(e.email),alert("Şifre sıfırlama bağlantısı e-posta adresinize gönderildi.")):alert("Kullanıcı bilgileri bulunamadı.")}catch(e){alert("Bir hata oluştu. Lütfen tekrar deneyin.")}O.value=!1};return(e,t)=>{const r=c("router-link");return y(),s("header",U,[o("div",C,[o("div",R,[o("div",V,[l(r,{to:"/",class:"flex-shrink-0 flex items-center gap-2"},{default:u(()=>t[2]||(t[2]=[o("svg",{class:"h-8 w-auto text-cyan-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6M9 11.25h6M9 15.75h6"})],-1),o("span",{class:"text-xl font-semibold font-cormorantSC hidden md:block"},"AKYILDIZ İŞ MERKEZİ",-1)])),_:1,__:[2]})]),o("nav",B,[(y(!0),s(d,null,m(L.value,e=>(y(),w(r,{key:e.value,to:e.route,class:x(["px-3 py-2 rounded-md text-sm font-medium transition-colors",[h(A).path===e.route?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"]])},{default:u(()=>[k(p(e.label),1)]),_:2},1032,["to","class"]))),128))]),o("div",q,[o("button",{onClick:t[0]||(t[0]=(...e)=>h(_).toggleTheme&&h(_).toggleTheme(...e)),class:"ml-4 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition","aria-label":"dark"===h(_).theme?"Açık moda geç":"Karanlık moda geç"},["dark"===h(_).theme?(y(),s("svg",$,t[3]||(t[3]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v1m0 16v1m8.66-13.66l-.71.71M4.05 19.07l-.71.71M21 12h-1M4 12H3m16.66 5.66l-.71-.71M4.05 4.93l-.71-.71M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)]))):(y(),s("svg",H,t[4]||(t[4]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z"},null,-1)])))],8,z),T.value?(y(),s("div",K,[o("button",{onClick:j,class:"flex items-center gap-2 text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white"},[t[5]||(t[5]=o("span",{class:"sr-only"},"Kullanıcı menüsünü aç",-1)),o("span",J,p(T.value.firstName),1),t[6]||(t[6]=o("svg",{class:"h-8 w-8 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-5.5-2.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zM10 12a5.5 5.5 0 00-4.52 2.39a.75.75 0 001.33.82a3.5 3.5 0 016.38 0a.75.75 0 001.33-.82A5.5 5.5 0 0010 12z","clip-rule":"evenodd"})],-1))]),l(g,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:u(()=>[O.value?(y(),s("div",W,[o("div",F,[o("p",G,p(T.value.firstName)+" "+p(T.value.lastName),1),o("p",null,p(T.value.role),1)]),o("a",{href:"#",onClick:b(ne,["prevent"]),class:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},t[7]||(t[7]=[o("svg",{class:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})],-1),k(" Şifre Değiştir ")])),o("a",{href:"#",onClick:b(re,["prevent"]),class:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},t[8]||(t[8]=[o("svg",{class:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})],-1),k(" Çıkış Yap ")]))])):i("",!0)]),_:1})])):i("",!0),o("div",Y,[o("button",{onClick:te,class:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white"},[t[11]||(t[11]=o("span",{class:"sr-only"},"Ana menüyü aç",-1)),I.value?(y(),s("svg",X,t[10]||(t[10]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(y(),s("svg",Z,t[9]||(t[9]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},null,-1)])))])])])])]),I.value?(y(),s("div",Q,[o("div",ee,[(y(!0),s(d,null,m(L.value,e=>(y(),w(r,{key:e.value,to:e.route,onClick:t[1]||(t[1]=e=>I.value=!1),class:x(["block px-3 py-2 rounded-md text-base font-medium",[h(A).path===e.route?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"]])},{default:u(()=>[k(p(e.label),1)]),_:2},1032,["to","class"]))),128))])])):i("",!0)])}}},[["__scopeId","data-v-f8d316f2"]]),re={NETWORK:"network",AUTH:"auth",VALIDATION:"validation",PERMISSION:"permission",NOT_FOUND:"not_found",SYSTEM:"system"};class ne extends Error{constructor(e,t,r=null,n={}){super(t),this.name="AppError",this.type=e,this.originalError=r,this.context=n,this.timestamp=(new Date).toISOString()}}function ae(e,t,r=null,n={}){return{type:e,message:t,originalError:r,context:n,timestamp:(new Date).toISOString(),id:Math.random().toString(36).substr(2,9)}}const se=new class{constructor(){this.errorListeners=[],this.errorHistory=[]}logError(e,t={}){const r=e instanceof ne?e:new ne(this.determineErrorType(e),this.getErrorMessage(e),e,t);return this.errorHistory.push(r),this.notifyListeners(r),r}logSuccess(e,t,r={}){const n={type:e,message:t,context:r,timestamp:(new Date).toISOString(),getDisplayMessage:()=>({title:"success"===e?"Başarılı":"info"===e?"Bilgi":"Uyarı",message:t,action:null})};return this.notifyListeners(n),n}determineErrorType(e){if(null==e?void 0:e.code){if(e.code.startsWith("auth/"))return re.AUTH;if("permission-denied"===e.code)return re.PERMISSION;if("not-found"===e.code)return re.NOT_FOUND;if("unavailable"===e.code)return re.NETWORK}if(null==e?void 0:e.message){const t=e.message.toLowerCase();if(t.includes("network")||t.includes("fetch"))return re.NETWORK;if(t.includes("permission")||t.includes("access"))return re.PERMISSION;if(t.includes("validation")||t.includes("invalid"))return re.VALIDATION;if(t.includes("not found")||t.includes("bulunamadı"))return re.NOT_FOUND}return re.SYSTEM}addListener(e){this.errorListeners.push(e)}notifyListeners(e){this.errorListeners.forEach(t=>{try{t(e)}catch(r){}})}getErrorHistory(){return this.errorHistory}clearErrorHistory(){this.errorHistory=[]}};window.addEventListener("error",e=>{se.logError(e.error,{filename:e.filename,lineno:e.lineno,colno:e.colno})}),window.addEventListener("unhandledrejection",e=>{se.logError(e.reason,{type:"unhandledrejection"})});const oe={class:"flex items-start justify-between"},ie={class:"flex items-center gap-3"},le={class:"font-semibold text-gray-900 dark:text-gray-100 text-sm"},ue={class:"text-gray-600 dark:text-gray-400 text-sm mt-1"},ce=["onClick"],de={key:0,class:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700"},me=["onClick"],he=["onClick"],pe={class:"mt-3 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},ge={class:"modal-box max-w-2xl"},fe={class:"flex items-center justify-between mb-4"},ve={class:"space-y-4"},ye={class:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4"},we={class:"font-semibold text-gray-900 dark:text-gray-100 mb-2"},ke={class:"text-gray-600 dark:text-gray-400 text-sm"},xe={key:0,class:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4"},be={class:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-900 p-3 rounded border overflow-x-auto"},_e={key:1,class:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4"},Ae={class:"text-sm text-gray-600 dark:text-gray-400 space-y-1"},Ee={key:0},Te={key:1},Le={class:"modal-action"},Oe=j({__name:"ErrorNotification",setup(e){const n=t([]),a=t(null),c=e=>{const t=n.value.findIndex(t=>t.id===e);-1!==t&&n.value.splice(t,1)},h=e=>{if("error"===e.type){(e=>{const t=Date.now()+Math.random(),r={id:t,title:e.title||"Hata",message:e.message||"Beklenmeyen bir hata oluştu.",action:e.action,type:e.type,timestamp:e.timestamp,context:e.context,technicalDetails:e.originalError,progress:100};n.value.push(r);const a=setInterval(()=>{-1!==n.value.findIndex(e=>e.id===t)?(r.progress-=2,r.progress<=0&&(c(t),clearInterval(a))):clearInterval(a)},100);setTimeout(()=>{c(t)},5e3)})({...e.getDisplayMessage(),type:e.type,timestamp:e.timestamp,context:e.context,originalError:e.originalError})}};return r(()=>{se.addListener(h)}),_(()=>{}),(e,t)=>{return y(),s(d,null,[l(A,{name:"error-notification",tag:"div",class:"fixed top-4 right-4 z-50 space-y-2 max-w-md"},{default:u(()=>[(y(!0),s(d,null,m(n.value,e=>(y(),s("div",{key:e.id,class:"bg-white dark:bg-gray-800 border-l-4 border-red-500 shadow-lg rounded-lg p-4 max-w-sm w-full"},[o("div",oe,[o("div",ie,[t[3]||(t[3]=o("div",{class:"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 rounded-full p-2"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),o("div",null,[o("h4",le,p(e.title),1),o("p",ue,p(e.message),1)])]),o("button",{onClick:t=>c(e.id),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200"},t[4]||(t[4]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ce)]),e.action?(y(),s("div",de,[o("button",{onClick:t=>(e=>{switch(e.action){case"Tekrar Dene":window.location.reload();break;case"Giriş Yap":window.location.href="/login";break;case"Ana Sayfaya Dön":window.location.href="/dashboard";break;case"Geri Dön":window.history.back()}c(e.id)})(e),class:"text-xs bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 px-3 py-1 rounded-md hover:bg-red-200 dark:hover:bg-red-900/70 transition-colors duration-200"},p(e.action),9,me),o("button",{onClick:t=>(e=>{a.value=e})(e),class:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors duration-200"}," Detaylar ",8,he)])):i("",!0),o("div",pe,[o("div",{class:"h-full bg-red-500 transition-all duration-300 ease-linear",style:E({width:`${e.progress}%`})},null,4)])]))),128))]),_:1}),a.value?(y(),s("dialog",{key:0,class:"modal modal-open",onClick:t[2]||(t[2]=b(e=>a.value=null,["self"]))},[o("div",ge,[o("div",fe,[t[5]||(t[5]=o("h3",{class:"font-bold text-lg text-gray-900 dark:text-gray-100"}," Hata Detayları ",-1)),o("button",{onClick:t[0]||(t[0]=e=>a.value=null),class:"btn btn-sm btn-circle btn-ghost"}," ✕ ")]),o("div",ve,[o("div",ye,[o("h4",we,p(a.value.title),1),o("p",ke,p(a.value.message),1)]),a.value.technicalDetails?(y(),s("div",xe,[t[6]||(t[6]=o("h4",{class:"font-semibold text-gray-900 dark:text-gray-100 mb-2"}," Teknik Detaylar ",-1)),o("pre",be,"            "+p(JSON.stringify(a.value.technicalDetails,null,2))+"\n          ",1)])):i("",!0),a.value.context?(y(),s("div",_e,[t[11]||(t[11]=o("h4",{class:"font-semibold text-gray-900 dark:text-gray-100 mb-2"}," Bağlam Bilgileri ",-1)),o("div",Ae,[o("div",null,[t[7]||(t[7]=o("strong",null,"Zaman:",-1)),k(" "+p((r=a.value.timestamp,new Date(r).toLocaleString("tr-TR"))),1)]),o("div",null,[t[8]||(t[8]=o("strong",null,"Tip:",-1)),k(" "+p(a.value.type),1)]),a.value.context.component?(y(),s("div",Ee,[t[9]||(t[9]=o("strong",null,"Bileşen:",-1)),k(" "+p(a.value.context.component),1)])):i("",!0),a.value.context.action?(y(),s("div",Te,[t[10]||(t[10]=o("strong",null,"İşlem:",-1)),k(" "+p(a.value.context.action),1)])):i("",!0)])])):i("",!0)]),o("div",Le,[o("button",{onClick:t[1]||(t[1]=e=>a.value=null),class:"btn btn-primary btn-sm"}," Kapat ")])])])):i("",!0)],64);var r}}},[["__scopeId","data-v-14bede3a"]]),Ie={class:"flex items-start justify-between"},Se={class:"flex items-center gap-3"},Ne={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},De={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Me={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Pe={key:3,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},je={class:"font-semibold text-gray-900 dark:text-gray-100 text-sm"},Ue={class:"text-gray-600 dark:text-gray-400 text-sm mt-1"},Ce=["onClick"],Re={class:"mt-3 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},Ve=j({__name:"SuccessNotification",setup(e){const n=t([]),a=e=>{const t=n.value.findIndex(t=>t.id===e);-1!==t&&n.value.splice(t,1)},i=e=>{const t="bg-white dark:bg-gray-800";switch(e){case"success":default:return`${t} border-l-4 border-green-500`;case"info":return`${t} border-l-4 border-blue-500`;case"warning":return`${t} border-l-4 border-yellow-500`}},l=e=>{switch(e){case"success":default:return"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400";case"info":return"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400";case"warning":return"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-600 dark:text-yellow-400"}},c=e=>{switch(e){case"success":default:return"bg-green-500";case"info":return"bg-blue-500";case"warning":return"bg-yellow-500"}},h=e=>{if("success"===e.type||"info"===e.type||"warning"===e.type){(e=>{const t=Date.now()+Math.random(),r={id:t,title:e.title||"Başarılı",message:e.message||"İşlem başarıyla tamamlandı.",type:e.type,timestamp:e.timestamp,context:e.context,progress:100};n.value.push(r);const s=setInterval(()=>{-1!==n.value.findIndex(e=>e.id===t)?(r.progress-=2,r.progress<=0&&(a(t),clearInterval(s))):clearInterval(s)},100),o="success"===e.type?3e3:5e3;setTimeout(()=>{a(t)},o)})({...e.getDisplayMessage(),type:e.type,timestamp:e.timestamp,context:e.context})}};return r(()=>{se.addListener(h)}),_(()=>{}),(e,t)=>(y(),w(A,{name:"success-notification",tag:"div",class:"fixed top-4 right-4 z-50 space-y-2 max-w-md"},{default:u(()=>[(y(!0),s(d,null,m(n.value,e=>(y(),s("div",{key:e.id,class:x([i(e.type),"shadow-lg rounded-lg p-4 max-w-sm w-full"])},[o("div",Ie,[o("div",Se,[o("div",{class:x([l(e.type),"rounded-full p-2"])},["success"===e.type?(y(),s("svg",Ne,t[0]||(t[0]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):"info"===e.type?(y(),s("svg",De,t[1]||(t[1]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):"warning"===e.type?(y(),s("svg",Me,t[2]||(t[2]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"},null,-1)]))):(y(),s("svg",Pe,t[3]||(t[3]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))],2),o("div",null,[o("h4",je,p(e.title),1),o("p",Ue,p(e.message),1)])]),o("button",{onClick:t=>a(e.id),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200"},t[4]||(t[4]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ce)]),o("div",Re,[o("div",{class:x([c(e.type),"h-full transition-all duration-300 ease-linear"]),style:E({width:`${e.progress}%`})},null,6)])],2))),128))]),_:1}))}},[["__scopeId","data-v-d9698972"]]),Be=["data-theme"],qe={key:1,class:"min-h-screen bg-base-200"},ze={class:"max-w-6xl mx-auto bg-base-100 shadow-lg rounded-xl overflow-hidden"},$e={__name:"App",setup(e){const t=f(),n=P();return r(()=>{n.initAuthListener()}),a(()=>n.theme,e=>{"dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},{immediate:!0}),(e,r)=>{const a=c("router-view");return y(),s("div",{"data-theme":h(n).theme,class:"min-h-screen"},[h(t).meta.hideLayout?(y(),w(a,{key:0})):(y(),s("div",qe,[l(te),o("div",ze,[l(a,{class:"p-6"})])])),l(Oe),l(Ve)],8,Be)}}},He={},Ke=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in He)return;He[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,r&&a.setAttribute("nonce",r),document.head.appendChild(a),t?new Promise((t,r)=>{a.addEventListener("load",t),a.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})},Je=()=>Ke(()=>import("./TenantDetailPage-CEATErQi.js"),__vite__mapDeps([0,1,2,3,4,5,6])),We=()=>Ke(()=>import("./OwnerDues-DW_L4WCN.js"),__vite__mapDeps([7,1])),Fe=[{path:"/",name:"Landing",component:()=>Ke(()=>import("./LandingPage-CU3Deci3.js"),__vite__mapDeps([8,1,9])),meta:{public:!0,hideLayout:!0}},{path:"/dashboard",name:"Dashboard",component:()=>Ke(()=>import("./Dashboard-C-pRX642.js"),__vite__mapDeps([10,1])),meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/tenants",name:"Tenants",component:()=>Ke(()=>import("./Tenants-sWOr8VFS.js"),__vite__mapDeps([11,1,2,12,13,14,6,15])),meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/tenants/:id",name:"TenantDetailPage",component:Je,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/payments",name:"Payments",component:()=>Ke(()=>import("./Payments-BodqJoc1.js"),__vite__mapDeps([16,1,3,5,6,15,14,2])),meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/expenses",name:"Expenses",component:()=>Ke(()=>import("./Expenses-CKfwiLOn.js"),__vite__mapDeps([17,18,2,1,14,5,6])),meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/utilities",name:"Utilities",component:()=>Ke(()=>import("./Utilities-DEMwWCXE.js"),__vite__mapDeps([19,1,2,5,6,18,20,14,4])),meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/admin",name:"Admin",component:()=>Ke(()=>import("./AdminDashboard-BbuBuMDd.js"),__vite__mapDeps([21,1,20,2,5,6,22,12,23,13,14])),meta:{requiresAuth:!0,roles:["admin"]}},{path:"/profile",name:"Profile",component:Je,meta:{requiresAuth:!0,roles:["tenant"]}},{path:"/login",name:"Login",component:()=>Ke(()=>import("./LoginView-D6C7qFML.js"),__vite__mapDeps([24,1,5,6,25])),meta:{public:!0,hideLayout:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>Ke(()=>import("./NotFound-BFfkMpd5.js"),__vite__mapDeps([26,1]))},{path:"/transactions",name:"Transactions",component:()=>Ke(()=>import("./Transactions-C72US-Sm.js"),__vite__mapDeps([27,1])),meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/overdue",name:"Overdue",component:()=>Ke(()=>import("./Overdue-62jInula.js"),__vite__mapDeps([28,1])),meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/owner-dues",name:"OwnerDues",component:()=>Ke(()=>import("./OwnerDuesPanel-WcIAf1Fj.js"),__vite__mapDeps([22,1,12])),meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/owners",name:"Owners",component:()=>Ke(()=>import("./Owners-AsvSc9L6.js"),__vite__mapDeps([23,2,5,6,13,1,14])),meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/owner-dues-list",name:"OwnerDuesList",component:We,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/OwnerDues",name:"OwnerDuesPage",component:We,meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/owner-payments",name:"OwnerPayments",component:()=>Ke(()=>import("./OwnerPayments-Yu2c7SAl.js"),__vite__mapDeps([29,1])),meta:{requiresAuth:!0,roles:["admin","manager"]}},{path:"/overdue-owner-payments",name:"OverdueOwnerPayments",component:()=>Ke(()=>import("./OverdueOwnerPayments-DkGfPx3u.js"),__vite__mapDeps([30,1])),meta:{requiresAuth:!0,roles:["admin","manager"]}}],Ge=T({history:L(),routes:Fe});Ge.beforeEach(async(e,t,r)=>{const n=e.meta.requiresAuth,a=e.meta.public;if("/login"===e.path&&("/login"===t.path||!n))return r();if(a)return r();{const t=await M.checkAuthStatus();if(!t&&n)return"/login"!==e.path?r("/login"):r();if(t&&"/login"===e.path){let n="/dashboard";return"admin"===t.role?n="/admin":"manager"===t.role?n="/dashboard":"viewer"===t.role?n="/overdue":"tenant"===t.role&&(n="/profile"),e.path!==n?r(n):r()}return r()}});"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Ye={exports:{}},Ze=Ye.exports=function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=".",t(t.s=10)}([function(e,t){e.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleLowerCase()}},"!":{escape:!0}}},function(e,t,r){function n(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}var a=r(2),s=r(0),o=r.n(s);t.a=function(e,t){var s=t.value;if((Array.isArray(s)||"string"==typeof s)&&(s={mask:s,tokens:o.a}),"INPUT"!==e.tagName.toLocaleUpperCase()){var i=e.getElementsByTagName("input");if(1!==i.length)throw new Error("v-mask directive requires 1 input, found "+i.length);e=i[0]}e.oninput=function(t){if(t.isTrusted){var o=e.selectionEnd,i=e.value[o-1];for(e.value=r.i(a.a)(e.value,s.mask,!0,s.tokens);o<e.value.length&&e.value.charAt(o-1)!==i;)o++;e===document.activeElement&&(e.setSelectionRange(o,o),setTimeout(function(){e.setSelectionRange(o,o)},0)),e.dispatchEvent(n("input"))}};var l=r.i(a.a)(e.value,s.mask,!0,s.tokens);l!==e.value&&(e.value=l,e.dispatchEvent(n("input")))}},function(e,t,r){var n=r(6),a=r(5);t.a=function(e,t){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments[3];return Array.isArray(t)?r.i(a.a)(n.a,t,o)(e,t,s,o):r.i(n.a)(e,t,s,o)}},function(e,t,r){function n(e){e.component(l.a.name,l.a),e.directive("mask",o.a)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),s=r.n(a),o=r(1),i=r(7),l=r.n(i);r.d(t,"TheMask",function(){return l.a}),r.d(t,"mask",function(){return o.a}),r.d(t,"tokens",function(){return s.a}),r.d(t,"version",function(){return u});var u="0.11.1";t.default=n,"undefined"!=typeof window&&window.Vue&&window.Vue.use(n)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),a=r(0),s=r.n(a),o=r(2);t.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return s.a}}},directives:{mask:n.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(e){e!==this.lastValue&&(this.display=e)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(e){e.isTrusted||this.refresh(e.target.value)},refresh:function(e){this.display=e,(e=r.i(o.a)(e,this.mask,this.masked,this.tokens))!==this.lastValue&&(this.lastValue=e,this.$emit("input",e))}}}},function(e,t,r){function n(e,t,r){return t=t.sort(function(e,t){return e.length-t.length}),function(n,a){for(var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=0;o<t.length;){var i=t[o];o++;var l=t[o];if(!(l&&e(n,l,!0,r).length>i.length))return e(n,i,s,r)}return""}}t.a=n},function(e,t,r){function n(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments[3];e=e||"",t=t||"";for(var a=0,s=0,o="";a<t.length&&s<e.length;){var i=n[c=t[a]],l=e[s];i&&!i.escape?(i.pattern.test(l)&&(o+=i.transform?i.transform(l):l,a++),s++):(i&&i.escape&&(c=t[++a]),r&&(o+=c),l===c&&s++,a++)}for(var u="";a<t.length&&r;){var c;if(n[c=t[a]]){u="";break}u+=c,a++}return o+u}t.a=n},function(e,t,r){var n=r(8)(r(4),r(9),null,null);e.exports=n.exports},function(e,t){e.exports=function(e,t,r,n){var a,s=e=e||{},o=typeof e.default;"object"!==o&&"function"!==o||(a=e,s=e.default);var i="function"==typeof s?s.options:s;if(t&&(i.render=t.render,i.staticRenderFns=t.staticRenderFns),r&&(i._scopeId=r),n){var l=i.computed||(i.computed={});Object.keys(n).forEach(function(e){var t=n[e];l[e]=function(){return t}})}return{esModule:a,exports:s,options:i}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"mask",rawName:"v-mask",value:e.config,expression:"config"}],attrs:{type:"text"},domProps:{value:e.display},on:{input:e.onInput}})},staticRenderFns:[]}},function(e,t,r){e.exports=r(3)}]);const Xe=O($e),Qe=I();Xe.use(Qe),Xe.use(Ge),Xe.directive("mask",Ze.mask),Xe.mount("#app");export{re as E,N as R,j as _,D as a,S as b,M as c,ae as d,se as e,P as u};
