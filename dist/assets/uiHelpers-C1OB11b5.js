import{d as t}from"./vue-vendor-CVTqRqMI.js";import{t as e}from"./tenantsService-D36krPUn.js";import{e as a}from"./index-ChpY04z8.js";const n=t("tenants",{state:()=>({tenants:[],stats:{activeCount:0,occupancyRate:0,totalDebt:0,totalFlats:0,occupiedFlats:0},loading:!1,lastFetched:null}),getters:{getTenantById:t=>e=>t.tenants.find(t=>t.id===e),activeTenants:t=>t.tenants.filter(t=>t.isActive)},actions:{async fetchTenants(t=!1){if(!t&&this.tenants.length>0&&this.lastFetched&&Date.now()-this.lastFetched<3e5)return this.tenants;this.loading=!0;try{const[t,a]=await Promise.all([e.getTenants(),e.getTenantStats()]);return this.tenants=t||[],this.stats=a||this.stats,this.lastFetched=Date.now(),this.tenants}catch(n){throw a.logError(n,{component:"TenantsStore",action:"fetchTenants"}),n}finally{this.loading=!1}},async fetchStats(){try{const t=await e.getTenantStats();return this.stats=t||this.stats,this.stats}catch(t){return this.stats}},async createTenant(t){try{const a=await e.createTenant(t);return await this.fetchTenants(!0),a}catch(a){throw a}},async updateTenant(t,a){try{await e.updateTenant(t,a),await this.fetchTenants(!0)}catch(n){throw n}},async deleteTenant(t){try{await e.deleteTenant(t),this.tenants=this.tenants.filter(e=>e.id!==t)}catch(a){throw a}}}}),s=t=>null==t||isNaN(t)?"â‚º0,00":Number(t).toLocaleString("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2,maximumFractionDigits:2}),i=t=>{if(!t)return"bg-gray-500";const e=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500"];return e[String(t).split("").reduce((t,e)=>t+e.charCodeAt(0),0)%e.length]},r=(t,e=1)=>t?t.substring(0,e).toUpperCase():"?";export{r as a,s as f,i as g,n as u};
