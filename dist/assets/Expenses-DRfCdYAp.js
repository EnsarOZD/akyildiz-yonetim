import{r as e,C as t,w as a,K as r,o as l,c as s,l as n,b as o,e as d,n as i,t as u,q as c,D as g,E as b,p,F as v,i as x,H as m,f as y,G as k,x as h}from"./vue-vendor-B4bLxnmP.js";import{e as f}from"./expensesService-CsRQiA1h.js";import{t as w}from"./tenantsService-B2_anAuD.js";import{_ as D}from"./CustomFilterBar-BfoK5NKb.js";import{u as S}from"./useErrorHandler-DB_Jk_TF.js";import"./index-ErXur627.js";const T=["open"],G={class:"modal-box max-w-3xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700 shadow-2xl"},C={class:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700 mb-6"},M={class:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2"},E={key:0,class:"alert alert-error mb-4"},j={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},z={class:"form-control"},B=["value"],O={key:0,class:"label"},L={class:"label-text-alt text-red-500"},N={class:"form-control"},Y={key:0,class:"label"},A={class:"label-text-alt text-red-500"},_={class:"form-control"},F={key:0,class:"label"},I={class:"label-text-alt text-red-500"},U={class:"form-control"},V={key:0,class:"label"},H={class:"label-text-alt text-red-500"},R={class:"form-control"},q={key:0,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},K={class:"ml-2 text-gray-600 dark:text-gray-400"},X={class:"ml-2 text-gray-600 dark:text-gray-400"},Z={class:"ml-2 text-gray-600 dark:text-gray-400"},J={class:"ml-2 text-gray-600 dark:text-gray-400"},P={class:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700"},Q={class:"flex gap-3"},$=["disabled"],ee=["disabled"],te={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"},ae={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},re={__name:"ExpenseModal",props:["visible","expense","types","editMode"],emits:["save","close"],setup(y,{emit:k}){const h=y,f=k,w=e(null),D=e(!1),S=e(!1),re=e(null),le=e({}),se=t(()=>h.types&&h.types.length>0?h.types:[{value:"Electricity",label:"Elektrik (Genel)"},{value:"Water",label:"Su (Genel)"},{value:"Gas",label:"Gaz"},{value:"Maintenance",label:"BakÄ±m"},{value:"Cleaning",label:"Temizlik"},{value:"Security",label:"GÃ¼venlik"},{value:"Other",label:"DiÄŸer"}]),ne=()=>{if(le.value={},h.expense.type||(le.value.type="Gider tipi seÃ§ilmelidir"),h.expense.expenseDate){new Date(h.expense.expenseDate)>new Date&&(le.value.expenseDate="Gelecek tarih seÃ§ilemez")}else le.value.expenseDate="Tarih seÃ§ilmelidir";return h.expense.amount?isNaN(h.expense.amount)||Number(h.expense.amount)<=0?le.value.amount="GeÃ§erli bir tutar girilmelidir":Number(h.expense.amount)>1e6&&(le.value.amount="Tutar 1.000.000 TL'den fazla olamaz"):le.value.amount="Tutar girilmelidir",h.expense.title&&""!==h.expense.title.trim()?h.expense.title.length<3?le.value.title="BaÅŸlÄ±k en az 3 karakter olmalÄ±dÄ±r":h.expense.title.length>100&&(le.value.title="BaÅŸlÄ±k en fazla 100 karakter olabilir"):le.value.title="BaÅŸlÄ±k girilmelidir",0===Object.keys(le.value).length},oe=t(()=>ne());a(()=>h.visible,e=>{e&&(r(()=>{w.value&&w.value.focus()}),re.value=null,le.value={},D.value=!1)});const de=e=>{h.visible&&("Escape"===e.key&&ue(),"Enter"===e.key&&"TEXTAREA"!==e.target.tagName&&(e.preventDefault(),ie()),(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),ie()))};l(()=>{document.addEventListener("keydown",de)});async function ie(){if(ne()){S.value=!0,re.value=null;try{const e=Number(h.expense.amount);if(isNaN(e)||e<=0)throw new Error("GeÃ§ersiz tutar");const t={...h.expense,amount:e};f("save",t)}catch(e){re.value=e.message||"Gider kaydedilirken bir hata oluÅŸtu"}finally{S.value=!1}}else re.value="LÃ¼tfen form hatalarÄ±nÄ± dÃ¼zeltin"}function ue(){S.value||(re.value=null,le.value={},D.value=!1,f("close"))}function ce(){D.value=!D.value}function ge(e){const t=se.value.find(t=>t.value===e);return t?t.label:null}function be(e){if(!e)return null;try{return new Date(e).toLocaleDateString("tr-TR")}catch(t){return"GeÃ§ersiz tarih"}}function pe(e){if(!e||isNaN(e))return null;try{return Number(e).toLocaleString("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2,maximumFractionDigits:2})}catch(t){return"â‚º0.00"}}a(()=>h.visible,e=>{e||document.removeEventListener("keydown",de)});const ve=e=>{const t=e.target;let a=t.value.replace(/[^\d.,]/g,"");a=a.replace(",",".");const r=a.split(".");r.length>2&&(a=r[0]+"."+r.slice(1).join("")),2===r.length&&r[1].length>2&&(a=r[0]+"."+r[1].substring(0,2)),t.value=a};return(e,t)=>(n(),s("dialog",{class:"modal",open:y.visible},[o("div",G,[o("div",C,[o("h3",M,[t[5]||(t[5]=o("span",{class:"text-2xl"},"ðŸ’°",-1)),i(" "+u(y.editMode?"Gider DÃ¼zenle":"Yeni Gider Ekle"),1)]),o("button",{onClick:ue,class:"btn btn-sm btn-ghost text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},t[6]||(t[6]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),re.value?(n(),s("div",E,[t[7]||(t[7]=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",null,u(re.value),1)])):d("",!0),o("form",{onSubmit:c(ie,["prevent"]),class:"space-y-6"},[o("div",j,[o("div",z,[t[9]||(t[9]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Gider Tipi *")],-1)),g(o("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>y.expense.type=e),class:p(["select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",{"border-red-500":le.value.type}]),required:"",ref_key:"typeSelect",ref:w},[t[8]||(t[8]=o("option",{disabled:"",value:""},"SeÃ§iniz",-1)),(n(!0),s(v,null,x(se.value,e=>(n(),s("option",{key:e.value,value:e.value},u(e.label),9,B))),128))],2),[[b,y.expense.type]]),le.value.type?(n(),s("label",O,[o("span",L,u(le.value.type),1)])):d("",!0)]),o("div",N,[t[10]||(t[10]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Tarih *")],-1)),g(o("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>y.expense.expenseDate=e),type:"date",class:p(["input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",{"border-red-500":le.value.expenseDate}]),required:""},null,2),[[m,y.expense.expenseDate]]),le.value.expenseDate?(n(),s("label",Y,[o("span",A,u(le.value.expenseDate),1)])):d("",!0)]),o("div",_,[t[11]||(t[11]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"Tutar (â‚º) *")],-1)),g(o("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>y.expense.amount=e),type:"number",min:"0",step:"0.01",class:p(["input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",{"border-red-500":le.value.amount}]),placeholder:"0.00",required:"",onInput:ve},null,34),[[m,y.expense.amount]]),le.value.amount?(n(),s("label",F,[o("span",I,u(le.value.amount),1)])):d("",!0)])]),o("div",U,[t[12]||(t[12]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"BaÅŸlÄ±k *")],-1)),g(o("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>y.expense.title=e),type:"text",class:p(["input input-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",{"border-red-500":le.value.title}]),placeholder:"Gider baÅŸlÄ±ÄŸÄ± giriniz",required:""},null,2),[[m,y.expense.title]]),le.value.title?(n(),s("label",V,[o("span",H,u(le.value.title),1)])):d("",!0)]),o("div",R,[t[13]||(t[13]=o("label",{class:"label"},[o("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"AÃ§Ä±klama")],-1)),g(o("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>y.expense.description=e),class:"textarea textarea-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:border-blue-500 dark:focus:border-blue-400",placeholder:"Gider aÃ§Ä±klamasÄ± giriniz",rows:"3"},null,512),[[m,y.expense.description]])]),D.value?(n(),s("div",q,[t[18]||(t[18]=o("h4",{class:"font-semibold text-blue-800 dark:text-blue-200 mb-2"},"Ã–nizleme:",-1)),o("div",W,[o("div",null,[t[14]||(t[14]=o("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Tip:",-1)),o("span",K,u(ge(y.expense.type)||"SeÃ§ilmedi"),1)]),o("div",null,[t[15]||(t[15]=o("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Tarih:",-1)),o("span",X,u(be(y.expense.expenseDate)||"SeÃ§ilmedi"),1)]),o("div",null,[t[16]||(t[16]=o("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Tutar:",-1)),o("span",Z,u(pe(y.expense.amount)||"0.00"),1)]),o("div",null,[t[17]||(t[17]=o("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"BaÅŸlÄ±k:",-1)),o("span",J,u(y.expense.title||"Girilmedi"),1)])])])):d("",!0),o("div",P,[o("button",{type:"button",onClick:ce,class:"btn btn-ghost btn-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"},[t[19]||(t[19]=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),i(" "+u(D.value?"Ã–nizlemeyi Gizle":"Ã–nizle"),1)]),o("div",Q,[o("button",{class:"btn btn-outline border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",type:"button",onClick:ue,disabled:S.value},t[20]||(t[20]=[o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),i(" Ä°ptal ")]),8,$),o("button",{class:"btn btn-primary bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border-0 text-white shadow-lg",type:"submit",disabled:S.value||!oe.value},[S.value?(n(),s("div",te)):(n(),s("svg",ae,t[21]||(t[21]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))),i(" "+u(y.editMode?"GÃ¼ncelle":"Kaydet"),1)],8,ee)])])],32)])],8,T))}},le={class:"p-4 sm:p-6 bg-gray-50 min-h-screen font-sans dark:bg-gray-900"},se={class:"max-w-7xl mx-auto"},ne={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4"},oe={class:"flex items-center gap-3"},de=["disabled"],ie={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},ue={key:1,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"},ce={key:0,class:"flex items-center justify-center py-12"},ge={key:1,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6"},be={class:"flex items-center gap-3"},pe={class:"text-red-600 dark:text-red-300"},ve={key:2},xe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},me={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},ye={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},ke={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},he={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},fe={class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center gap-4 border border-gray-200 dark:border-gray-700"},we={class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},De={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-8"},Se={class:"h-64 flex items-end justify-between gap-2"},Te={class:"text-xs text-gray-500 dark:text-gray-400"},Ge={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-8"},Ce={class:"grid grid-cols-2 sm:grid-cols-4 gap-4"},Me={class:"flex items-center gap-3 mb-2"},Ee={class:"text-2xl"},je={class:"font-semibold text-gray-800 dark:text-gray-100"},ze={class:"text-sm text-gray-500 dark:text-gray-400"},Be={class:"text-lg font-bold text-red-600 dark:text-red-400"},Oe={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700"},Le={class:"mt-6 space-y-2"},Ne={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},Ye={key:1},Ae={class:"md:col-span-5 flex items-center gap-4"},_e={class:"flex-shrink-0 h-12 w-12 flex items-center justify-center bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full text-2xl"},Fe={class:"font-bold text-gray-800 dark:text-gray-100"},Ie={class:"text-sm text-gray-500 dark:text-gray-400"},Ue={class:"md:col-span-3 text-left md:text-center text-xl font-semibold text-red-600 dark:text-red-400"},Ve={class:"md:col-span-2 text-left md:text-center"},He={class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/60 dark:text-blue-200"},Re={class:"md:col-span-2 text-right"},qe={class:"dropdown dropdown-end"},We={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-200 rounded-box w-32 z-10"},Ke=["onClick"],Xe=["onClick"],Ze={__name:"Expenses",setup(r){const{handleNetworkError:d,showSuccess:c}=S(),p=e([]),m=e([]),T=e(!1),G=e(null),C=e({}),M=e(!1),E=e(!1),j=e(null),z=e("all"),B=e(!1),O=e(null),L=e({searchTerm:"",period:"",type:""}),N=[{value:"Electricity",label:"Elektrik (Genel)"},{value:"Water",label:"Su (Genel)"},{value:"Gas",label:"Gaz"},{value:"Maintenance",label:"BakÄ±m"},{value:"Cleaning",label:"Temizlik"},{value:"Security",label:"GÃ¼venlik"},{value:"Other",label:"DiÄŸer"}],Y=t(()=>{const e=N.map(e=>({value:e.value,label:e.label,icon:K(e.value)}));return e.unshift({value:"",label:"TÃ¼m Tipler",icon:"ðŸ“¦"}),e}),A=e=>null==e||isNaN(e)?"â‚º0.00":Number(e).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),_=e=>{if(!e)return"";return new Date(e).toLocaleDateString("tr-TR")},F=t(()=>{var e;return(null==(e=C.value)?void 0:e.totalAmount)||0}),I=t(()=>{var e;return(null==(e=C.value)?void 0:e.thisMonthAmount)||0}),U=t(()=>{var e;return(null==(e=C.value)?void 0:e.thisMonthCount)||0});t(()=>{var e;return(null==(e=C.value)?void 0:e.totalCount)||0});const V=t(()=>{const e=[],t=new Date;for(let a=5;a>=0;a--){const r=new Date(t.getFullYear(),t.getMonth()-a,1),l=r.getFullYear()+"-"+String(r.getMonth()+1).padStart(2,"0"),s=r.toLocaleDateString("tr-TR",{month:"short"}),n=p.value.filter(e=>e.expenseDate&&e.expenseDate.startsWith(l)).reduce((e,t)=>e+Number(t.amount||0),0);e.push({month:s,expense:n})}return e}),H=t(()=>{const e=V.value.map(e=>e.expense);return Math.max(...e,1)}),R=["Electricity","Water","Gas","Maintenance","Cleaning","Security","Other"];function q(e){return"number"==typeof e&&R[e]?R[e]:"string"==typeof e&&R.includes(e)?e:"Other"}const W=t(()=>{const e={};return p.value.forEach(t=>{const a=q(t.type)||"Other";e[a]||(e[a]={name:a,label:X(a),count:0,total:0}),e[a].count++,e[a].total+=Number(t.amount||0)}),Object.values(e).sort((e,t)=>t.total-e.total)}),K=e=>{if(!e)return"â“";return{Electricity:"âš¡ï¸",Water:"ðŸ’§",Gas:"ðŸ”¥",Maintenance:"ðŸ› ï¸",Cleaning:"ðŸ§¹",Security:"ðŸ”’",Other:"ðŸ“¦"}[q(e)]||"â“"},X=e=>{const t=N.find(t=>t.value===q(e));return t?t.label:q(e)},Z=t(()=>{let e=p.value;const t=L.value.searchTerm.toLowerCase();return L.value.period&&(e=e.filter(e=>{const t=new Date(e.expenseDate),a=new Date(L.value.period);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()})),L.value.type&&(e=e.filter(e=>q(e.type)===L.value.type)),t&&(e=e.filter(e=>e.title&&e.title.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||X(e.type).toLowerCase().includes(t)||e.amount&&e.amount.toString().includes(t))),e.sort((e,t)=>new Date(t.expenseDate)-new Date(e.expenseDate))}),J=(new Date).toISOString().substr(0,10),P=e({expenseDate:J,title:"",amount:"",type:"Other",description:""}),Q=async()=>{T.value=!0,G.value=null;try{const e={};if("all"!==z.value){const{startDate:t,endDate:a}=(e=>{const t=new Date,a=t.getFullYear(),r=t.getMonth();switch(e){case"this_month":return{startDate:new Date(a,r,1).toISOString().split("T")[0],endDate:new Date(a,r+1,0).toISOString().split("T")[0]};case"last_month":return{startDate:new Date(a,r-1,1).toISOString().split("T")[0],endDate:new Date(a,r,0).toISOString().split("T")[0]};case"this_year":return{startDate:new Date(a,0,1).toISOString().split("T")[0],endDate:new Date(a,11,31).toISOString().split("T")[0]};default:return{startDate:null,endDate:null}}})(z.value);e.startDate=t,e.endDate=a}const t=await f.getExpenses(e);p.value=t||[];const a=await f.getExpenseStats();C.value=a||{}}catch(e){d(e,{component:"Expenses",action:"fetchExpenses"}),G.value=e.message,p.value=[],C.value={}}finally{T.value=!1}},$=()=>{P.value={expenseDate:J,title:"",amount:"",type:"Other",description:""},E.value=!1,j.value=null,M.value=!0},ee=()=>{P.value={expenseDate:J,title:"",amount:"",type:"Other",description:""},E.value=!1,j.value=null,M.value=!1,O.value=null,B.value=!1},te=async e=>{B.value=!0,O.value=null;try{const t={title:e.title,amount:parseFloat(e.amount),type:e.type,expenseDate:new Date(e.expenseDate).toISOString(),description:e.description};E.value&&j.value?(await f.updateExpense(j.value,t),c("Gider gÃ¼ncellendi")):(await f.createExpense(t),c("Gider eklendi")),await Q(),ee()}catch(t){O.value=t.message||"Gider kaydedilirken bir hata oluÅŸtu"}finally{B.value=!1}},ae=()=>{L.value={searchTerm:"",period:"",type:""},Q()};return a(Z,e=>{e.forEach(e=>{})},{immediate:!0}),l(()=>{(async()=>{try{const e=await w.getTenants();m.value=e||[]}catch(e){d(e,{component:"Expenses",action:"fetchTenants"}),m.value=[]}})(),Q()}),(e,t)=>(n(),s("div",le,[o("div",se,[o("div",ne,[t[7]||(t[7]=o("h1",{class:"text-3xl font-bold text-gray-800 dark:text-gray-100"},"Giderler",-1)),o("div",oe,[g(o("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>z.value=e),onChange:Q,class:"select select-sm select-bordered bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},t[4]||(t[4]=[o("option",{value:"all"},"TÃ¼m Zamanlar",-1),o("option",{value:"this_month"},"Bu Ay",-1),o("option",{value:"last_month"},"GeÃ§en Ay",-1),o("option",{value:"this_year"},"Bu YÄ±l",-1)]),544),[[b,z.value]]),o("button",{onClick:Q,disabled:T.value,class:"btn btn-sm btn-outline btn-primary"},[T.value?(n(),s("div",ue)):(n(),s("svg",ie,t[5]||(t[5]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))),t[6]||(t[6]=i(" Yenile "))],8,de)])]),T.value?(n(),s("div",ce,t[8]||(t[8]=[o("div",{class:"text-center"},[o("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),o("p",{class:"text-gray-500 dark:text-gray-400 text-lg"},"Giderler yÃ¼kleniyor...")],-1)]))):G.value?(n(),s("div",ge,[o("div",be,[t[10]||(t[10]=o("div",{class:"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 rounded-full p-2"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),o("div",null,[t[9]||(t[9]=o("h3",{class:"text-lg font-semibold text-red-800 dark:text-red-200"},"Veri YÃ¼kleme HatasÄ±",-1)),o("p",pe,u(G.value),1)])]),o("button",{onClick:Q,class:"mt-4 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors duration-200"}," Tekrar Dene ")])):(n(),s("div",ve,[o("section",xe,[o("div",me,[t[12]||(t[12]=o("div",{class:"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 rounded-full p-3"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 17h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),o("div",null,[t[11]||(t[11]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Bu Ayki Gider",-1)),o("p",ye,u(A(I.value)),1)])]),o("div",ke,[t[14]||(t[14]=o("div",{class:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 rounded-full p-3"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 7h6m0 0v6m0-6L9 13"})])],-1)),o("div",null,[t[13]||(t[13]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Toplam Gider",-1)),o("p",he,u(A(F.value)),1)])]),o("div",fe,[t[16]||(t[16]=o("div",{class:"bg-amber-100 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400 rounded-full p-3"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})])],-1)),o("div",null,[t[15]||(t[15]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Ä°ÅŸlem SayÄ±sÄ± (Bu Ay)",-1)),o("p",we,u(U.value),1)])]),o("div",{class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md flex items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600 hover:border-red-500 dark:hover:border-red-400 transition-colors duration-300",onClick:$},t[17]||(t[17]=[o("button",{class:"w-full h-full text-red-500 dark:text-red-400 flex items-center justify-center gap-2"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),o("span",{class:"font-semibold"},"Yeni Gider Ekle")],-1)]))]),o("section",De,[t[18]||(t[18]=k('<div class="flex items-center justify-between mb-4"><h2 class="text-xl font-semibold text-gray-800 dark:text-gray-100">AylÄ±k Gider GrafiÄŸi</h2><div class="flex items-center gap-4"><div class="flex items-center gap-2"><div class="w-3 h-3 bg-red-500 rounded-full"></div><span class="text-sm text-gray-600 dark:text-gray-400">Gider</span></div></div></div>',1)),o("div",Se,[(n(!0),s(v,null,x(V.value,(e,t)=>(n(),s("div",{key:t,class:"flex-1 flex flex-col items-center gap-2"},[o("div",{class:"w-full bg-red-500 rounded-t",style:h({height:e.expense/H.value*200+"px"})},null,4),o("span",Te,u(e.month),1)]))),128))])]),o("section",Ge,[t[19]||(t[19]=o("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4"},"Gider Tipi DaÄŸÄ±lÄ±mÄ±",-1)),o("div",Ce,[(n(!0),s(v,null,x(W.value,e=>(n(),s("div",{key:e.name,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600"},[o("div",Me,[o("span",Ee,u(K(e.name)),1),o("div",null,[o("p",je,u(e.label),1),o("p",ze,u(e.count)+" gider",1)])]),o("p",Be,u(A(e.total)),1)]))),128))])]),o("div",Oe,[y(D,{search:L.value.searchTerm,"search-placeholder":"AÃ§Ä±klama, tip veya tutar ara...",period:L.value.period,"select-type":L.value.type,"select-type-options":Y.value,"onUpdate:search":t[1]||(t[1]=e=>L.value.searchTerm=e),"onUpdate:period":t[2]||(t[2]=e=>L.value.period=e),"onUpdate:selectType":t[3]||(t[3]=e=>L.value.type=e),onClearFilters:ae},null,8,["search","period","select-type","select-type-options"]),o("div",Le,[0===Z.value.length?(n(),s("div",Ne,t[20]||(t[20]=[o("p",null,"AramanÄ±zla eÅŸleÅŸen gider bulunamadÄ±.",-1)]))):(n(),s("div",Ye,[(n(!0),s(v,null,x(Z.value,e=>(n(),s("div",{key:e.id,class:"grid grid-cols-1 md:grid-cols-12 gap-4 items-center p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200 border-b dark:border-gray-700/50"},[o("div",Ae,[o("div",_e,u(K(e.type)),1),o("div",null,[o("p",Fe,u(e.title||"AÃ§Ä±klama Yok"),1),o("p",Ie,u(_(e.expenseDate)||"Tarih Yok"),1)])]),o("div",Ue,u(A(e.amount)),1),o("div",Ve,[o("span",He,u(X(e.type)||"Tip Yok"),1)]),o("div",Re,[o("div",qe,[t[21]||(t[21]=o("label",{tabindex:"0",class:"btn btn-ghost btn-sm"},"Ä°ÅŸlemler",-1)),o("ul",We,[o("li",null,[o("a",{onClick:t=>{return a=e,P.value={...a,expenseDate:new Date(a.expenseDate).toISOString().substr(0,10)},j.value=a.id,E.value=!0,void(M.value=!0);var a}},"DÃ¼zenle",8,Ke)]),o("li",null,[o("a",{onClick:t=>(async e=>{if(confirm("Bu gideri silmek istediÄŸinizden emin misiniz?"))try{await f.deleteExpense(e),c("Gider"),await Q()}catch(t){alert("Gider silinirken bir hata oluÅŸtu")}})(e.id),class:"text-red-500"},"Sil",8,Xe)])])])])]))),128))]))])])]))]),y(re,{visible:M.value,expense:P.value,types:N,editMode:E.value,loading:B.value,error:O.value,onSave:te,onClose:ee},null,8,["visible","expense","editMode","loading","error"])]))}};export{Ze as default};
