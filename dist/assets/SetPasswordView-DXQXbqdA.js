import{r as e,o as l,k as a,b as r,e as s,j as t,t as i,s as n,G as o,H as u,p as d,f as c,g as p,h as v,l as m,m as f}from"./vue-vendor-j_tVed2R.js";import{d as g}from"./index-SuSpVQ5E.js";import"./utils-vendor-Cy2sLATb.js";const y={class:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"},b={class:"max-w-md w-full space-y-8 p-10 bg-white dark:bg-gray-800 rounded-xl shadow-2xl"},x={key:0,class:"alert alert-success mt-4 shadow-lg"},w={key:1,class:"alert alert-error mt-4 shadow-lg"},h={class:"rounded-md shadow-sm -space-y-px"},k={class:"form-control w-full"},j={class:"form-control w-full mt-4"},z={class:"form-control w-full mt-4"},B=["disabled"],G={key:0,class:"loading loading-spinner"},_={key:3,class:"text-center mt-6"},q={__name:"SetPasswordView",setup(q){const V=a(),S=m(),U=e(""),L=e(""),M=e(""),P=e(""),T=e(!1),Y=e(""),D=e(!1);l(()=>{U.value=V.query.email||"",L.value=V.query.token||"",L.value&&U.value||(Y.value="Geçersiz şifre belirleme bağlantısı. Lütfen size iletilen orijinal bağlantıya tıklayın.")});const E=async()=>{var e;if(Y.value="",M.value===P.value)if(M.value.length<6)Y.value="Şifre en az 6 karakter olmalıdır.";else{T.value=!0;try{await g.setPassword(U.value,L.value,M.value),D.value=!0,setTimeout(()=>{S.push("/login")},3e3)}catch(l){Y.value=(null==(e=l.response)?void 0:e.data)||"Şifre güncellenirken bir hata oluştu. Bağlantı süresi dolmuş olabilir."}finally{T.value=!1}}else Y.value="Şifreler eşleşmiyor!"};return(e,l)=>{const a=v("router-link");return f(),r("div",y,[s("div",b,[l[10]||(l[10]=s("div",null,[s("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white"}," Şifre Belirleme "),s("p",{class:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400"}," Lütfen hesabınız için güvenli bir şifre belirleyin ")],-1)),D.value?(f(),r("div",x,l[3]||(l[3]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),s("span",null,"Şifreniz başarıyla oluşturuldu! Giriş sayfasına yönlendiriliyorsunuz...",-1)]))):Y.value?(f(),r("div",w,[l[4]||(l[4]=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s("span",null,i(Y.value),1)])):t("",!0),D.value?t("",!0):(f(),r("form",{key:2,class:"mt-8 space-y-6",onSubmit:n(E,["prevent"])},[s("div",h,[s("div",k,[l[5]||(l[5]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold text-gray-700 dark:text-gray-300"},"E-posta")],-1)),o(s("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>U.value=e),type:"email",class:"input input-bordered w-full bg-gray-50 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed border-gray-300 dark:border-gray-600",readonly:""},null,512),[[u,U.value]])]),s("div",j,[l[6]||(l[6]=s("label",{class:"label"},[s("span",{class:"label-text"},"Yeni Şifre")],-1)),o(s("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>M.value=e),type:"password",class:"input input-bordered w-full",required:"",placeholder:"••••••••",minlength:"6"},null,512),[[u,M.value]])]),s("div",z,[l[7]||(l[7]=s("label",{class:"label"},[s("span",{class:"label-text"},"Şifre Tekrar")],-1)),o(s("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>P.value=e),type:"password",class:"input input-bordered w-full",required:"",placeholder:"••••••••",minlength:"6"},null,512),[[u,P.value]])])]),s("div",null,[s("button",{type:"submit",class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",disabled:T.value},[T.value?(f(),r("span",G)):t("",!0),l[8]||(l[8]=d(" Şifremi Belirle ve Giriş Yap "))],8,B)])],32)),D.value?(f(),r("div",_,[c(a,{to:"/login",class:"text-indigo-600 hover:text-indigo-500 font-medium"},{default:p(()=>l[9]||(l[9]=[d(" Giriş Sayfasına Dön ")])),_:1,__:[9]})])):t("",!0)])])}}};export{q as default};
