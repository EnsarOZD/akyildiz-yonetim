import{r as e,C as a,o as t,c as r,b as l,D as s,E as d,F as n,i as o,J as i,e as u,t as c,l as g,p as m}from"./vue-vendor-BE3w9SvD.js";import{u as v,a as y}from"./index-CAkTsZV-.js";const b={key:0,class:"p-4 sm:p-6 bg-gray-50 min-h-screen font-sans dark:bg-gray-900"},x={class:"max-w-7xl mx-auto"},p={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-8"},k={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},f={class:"form-control"},w=["value"],h={class:"form-control"},S={class:"form-control"},T=["value"],j={class:"form-control"},D={class:"mt-4 flex justify-end"},z=["disabled"],B={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 mb-8"},F={class:"flex items-center justify-between mb-4"},N={class:"flex items-center gap-3"},C={key:0,class:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-full text-sm font-medium"},L={class:"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 px-3 py-1 rounded-full text-sm font-medium"},A={key:0,class:"space-y-3"},M={class:"flex items-center gap-4"},U={class:"font-semibold text-gray-800 dark:text-gray-100"},V={class:"text-sm text-gray-500 dark:text-gray-400"},G={class:"text-xs text-gray-400 dark:text-gray-500"},Y={class:"text-right"},E={class:"flex items-center justify-end gap-2 mb-1"},I={class:"font-bold text-red-600 dark:text-red-400 text-lg"},K={class:"text-sm text-gray-500 dark:text-gray-400"},R={class:"flex items-center gap-2 text-xs"},_={class:"text-red-500 dark:text-red-400 font-medium"},J={key:0,class:"text-yellow-600 dark:text-yellow-400"},O={key:1,class:"text-center py-12"},q={class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2"},H={class:"text-gray-500 dark:text-gray-400"},P={key:1,class:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900"},Q={__name:"Overdue",setup(Q){const W=e([]),X=e([]),Z=e(!1),$=v(),ee=a(()=>$.role);a(()=>$.userId);const ae=e(""),te=e(""),re=e(""),le=e(""),se=e=>null==e||isNaN(e)?"₺0.00":Number(e).toLocaleString("tr-TR",{style:"currency",currency:"TRY"}),de=e=>{if(!e)return 0;const a=new Date-new Date(e),t=Math.ceil(a/864e5);return t>0?t:0},ne=a(()=>W.value.filter(e=>{const a=!ae.value||e.company===ae.value,t=!te.value||e.type===te.value,r=!re.value||e.period===re.value,l=Number(e.amount||0);let s=!0;if(le.value)switch(le.value){case"0-1000":s=l>=0&&l<=1e3;break;case"1000-5000":s=l>1e3&&l<=5e3;break;case"5000-10000":s=l>5e3&&l<=1e4;break;case"10000+":s=l>1e4}return a&&t&&r&&s})),oe=a(()=>ae.value||te.value||re.value||le.value),ie=()=>{ae.value="",te.value="",re.value="",le.value=""},ue=a(()=>[...new Set(W.value.map(e=>e.company))].filter(e=>e&&"Bilinmiyor"!==e).sort()),ce=a(()=>[...new Set(W.value.map(e=>e.period))].filter(e=>e).sort().reverse());a(()=>W.value.reduce((e,a)=>e+Number(a.amount||0),0));const ge=a(()=>["admin","manager","viewer"].includes(ee.value));return t(()=>{(async()=>{try{const e=await y.get("/tenants");X.value=e||[]}catch(e){X.value=[]}})().then(()=>(async()=>{Z.value=!0;try{const e=await y.get("/payments/overdue");W.value=(e||[]).map(e=>{const a=X.value.find(a=>a.id===e.tenantId);return{...e,tenantName:(null==a?void 0:a.company)||"Bilinmiyor"}})}catch(e){W.value=[]}finally{Z.value=!1}})())}),(e,a)=>ge.value||"tenant"===ee.value?(g(),r("div",b,[l("div",x,[a[16]||(a[16]=l("h1",{class:"text-3xl font-bold text-gray-800 mb-6 dark:text-gray-100"},"Geciken Ödemeler",-1)),l("section",p,[a[12]||(a[12]=l("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4"},"Filtreler",-1)),l("div",k,[l("div",f,[a[5]||(a[5]=l("label",{class:"label"},[l("span",{class:"label-text text-gray-700 dark:text-gray-300"},"Kiracı")],-1)),s(l("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>ae.value=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},[a[4]||(a[4]=l("option",{value:""},"Tüm Kiracılar",-1)),(g(!0),r(n,null,o(ue.value,e=>(g(),r("option",{key:e,value:e},c(e),9,w))),128))],512),[[d,ae.value]])]),l("div",h,[a[7]||(a[7]=l("label",{class:"label"},[l("span",{class:"label-text text-gray-700 dark:text-gray-300"},"Tip")],-1)),s(l("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>te.value=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},a[6]||(a[6]=[l("option",{value:""},"Tüm Tipler",-1),l("option",{value:"electricity"},"Elektrik",-1),l("option",{value:"water"},"Su",-1),l("option",{value:"aidat"},"Aidat",-1)]),512),[[d,te.value]])]),l("div",S,[a[9]||(a[9]=l("label",{class:"label"},[l("span",{class:"label-text text-gray-700 dark:text-gray-300"},"Dönem")],-1)),s(l("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>re.value=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},[a[8]||(a[8]=l("option",{value:""},"Tüm Dönemler",-1)),(g(!0),r(n,null,o(ce.value,e=>(g(),r("option",{key:e,value:e},c(e),9,T))),128))],512),[[d,re.value]])]),l("div",j,[a[11]||(a[11]=l("label",{class:"label"},[l("span",{class:"label-text text-gray-700 dark:text-gray-300"},"Tutar Aralığı")],-1)),s(l("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>le.value=e),class:"select select-bordered w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"},a[10]||(a[10]=[i('<option value="">Tüm Tutarlar</option><option value="0-1000">0 - 1.000 ₺</option><option value="1000-5000">1.000 - 5.000 ₺</option><option value="5000-10000">5.000 - 10.000 ₺</option><option value="10000+">10.000 ₺+</option>',5)]),512),[[d,le.value]])])]),l("div",D,[l("button",{onClick:ie,class:"btn btn-outline btn-sm",disabled:!oe.value}," Filtreleri Temizle ",8,z)])]),l("section",B,[l("div",F,[a[13]||(a[13]=l("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-100"},"Geciken Ödeme Listesi",-1)),l("div",N,[oe.value?(g(),r("div",C," Filtrelenmiş ")):u("",!0),l("div",L,c(ne.value.length)+" adet geciken ödeme ",1)])]),ne.value.length>0?(g(),r("div",A,[(g(!0),r(n,null,o(ne.value,e=>(g(),r("div",{key:e.id,class:"flex items-center justify-between p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors duration-200"},[l("div",M,[a[14]||(a[14]=l("div",{class:"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 rounded-full p-3"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),l("div",null,[l("p",U,c(e.company),1),l("p",V,c(e.unit)+" - "+c(e.typeLabel),1),l("p",G,"Dönem: "+c(e.period||"-"),1)])]),l("div",Y,[l("div",E,[l("span",{class:m(["badge",{"badge-success":"paid"===e.paymentStatus.status,"badge-warning":"partial"===e.paymentStatus.status,"badge-error":"unpaid"===e.paymentStatus.status}])},c(e.paymentStatus.label),3)]),l("p",I,c(se(e.unpaidAmount)),1),l("p",K,"Son Ödeme: "+c(e.dueDateFormatted),1),l("div",R,[l("span",_,c(de(e.dueDate))+" gün gecikmiş ",1),"partial"===e.paymentStatus.status?(g(),r("span",J," ("+c(se(e.paidAmount))+" ödendi) ",1)):u("",!0)])])]))),128))])):(g(),r("div",O,[a[15]||(a[15]=l("div",{class:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 rounded-full p-4 w-fit mx-auto mb-4"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),l("h3",q,c(oe.value?"Filtrelenmiş Sonuç Yok":"Geciken Ödeme Yok"),1),l("p",H,c(oe.value?"Seçilen kriterlere uygun geciken ödeme bulunmuyor.":"Tüm ödemeler zamanında yapılmış."),1)]))])])])):(g(),r("div",P,a[17]||(a[17]=[i('<div class="text-center"><div class="bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 rounded-full p-4 w-fit mx-auto mb-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><p class="text-gray-500 dark:text-gray-400 text-lg">Bu sayfayı görüntüleme yetkiniz bulunmamaktadır.</p></div>',1)])))}};export{Q as default};
